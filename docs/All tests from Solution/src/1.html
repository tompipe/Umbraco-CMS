<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Tom Pipe\Documents\Hexadigital\Code\Umbraco\Umbraco-CMS\src\Umbraco.Tests\TryConvertToTests.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using NUnit.Framework;
using Umbraco.Core;
using Umbraco.Core.ObjectResolution;
using Umbraco.Core.Strings;
using Umbraco.Tests.TestHelpers;

namespace Umbraco.Tests
{
    [TestFixture]
    public class TryConvertToTests
    {
        [SetUp]
        public void SetUp()
        {
            var settings = SettingsForTests.GetDefault();
            ShortStringHelperResolver.Current = new ShortStringHelperResolver(new DefaultShortStringHelper(settings).WithDefaultConfig());
            Resolution.Freeze();
        }

        [TearDown]
        public void TearDown()
        {
            ShortStringHelperResolver.Reset();
        }

        [Test]
        public void ConvertToIntegerTest()
        {
            var conv = &quot;100&quot;.TryConvertTo&lt;int&gt;();
            Assert.IsTrue(conv);
            Assert.AreEqual(100, conv.Result);

            conv = &quot;100.000&quot;.TryConvertTo&lt;int&gt;();
            Assert.IsTrue(conv);
            Assert.AreEqual(100, conv.Result);

            conv = &quot;100,000&quot;.TryConvertTo&lt;int&gt;();
            Assert.IsTrue(conv);
            Assert.AreEqual(100, conv.Result);

            // oops
            conv = &quot;100.001&quot;.TryConvertTo&lt;int&gt;();
            Assert.IsTrue(conv);
            Assert.AreEqual(100, conv.Result);

            conv = 100m.TryConvertTo&lt;int&gt;();
            Assert.IsTrue(conv);
            Assert.AreEqual(100, conv.Result);

            conv = 100.000m.TryConvertTo&lt;int&gt;();
            Assert.IsTrue(conv);
            Assert.AreEqual(100, conv.Result);

            // oops
            conv = 100.001m.TryConvertTo&lt;int&gt;();
            Assert.IsTrue(conv);
            Assert.AreEqual(100, conv.Result);
        }

        [Test]
        public void ConvertToDecimalTest()
        {
            var conv = &quot;100&quot;.TryConvertTo&lt;decimal&gt;();
            Assert.IsTrue(conv);
            Assert.AreEqual(100m, conv.Result);

            conv = &quot;100.000&quot;.TryConvertTo&lt;decimal&gt;();
            Assert.IsTrue(conv);
            Assert.AreEqual(100m, conv.Result);

            conv = &quot;100,000&quot;.TryConvertTo&lt;decimal&gt;();
            Assert.IsTrue(conv);
            Assert.AreEqual(100m, conv.Result);

            conv = &quot;100.001&quot;.TryConvertTo&lt;decimal&gt;();
            Assert.IsTrue(conv);
            Assert.AreEqual(100.001m, conv.Result);

            conv = 100m.TryConvertTo&lt;decimal&gt;();
            Assert.IsTrue(conv);
            Assert.AreEqual(100m, conv.Result);

            conv = 100.000m.TryConvertTo&lt;decimal&gt;();
            Assert.IsTrue(conv);
            Assert.AreEqual(100m, conv.Result);

            conv = 100.001m.TryConvertTo&lt;decimal&gt;();
            Assert.IsTrue(conv);
            Assert.AreEqual(100.001m, conv.Result);

            conv = 100.TryConvertTo&lt;decimal&gt;();
            Assert.IsTrue(conv);
            Assert.AreEqual(100m, conv.Result);
        }

        [Test]
        public void ConvertToDateTimeTest()
        {
            var conv = &quot;2016-06-07&quot;.TryConvertTo&lt;DateTime&gt;();
            Assert.IsTrue(conv);
            Assert.AreEqual(new DateTime(2016, 6, 7), conv.Result);
        }
    }
}

    </pre>
    <script type="text/javascript">
      highlightRanges([[15,9,15,10,1],[16,13,16,58,1],[17,13,17,139,1],[18,13,18,33,1],[19,9,19,10,1],[23,9,23,10,1],[24,13,24,47,1],[25,9,25,10,1],[29,9,29,10,1],[30,13,30,50,1],[31,13,31,33,1],[32,13,32,47,1],[34,13,34,50,1],[35,13,35,33,1],[36,13,36,47,1],[38,13,38,50,1],[39,13,39,33,1],[40,13,40,47,1],[43,13,43,50,1],[44,13,44,33,1],[45,13,45,47,1],[47,13,47,45,1],[48,13,48,33,1],[49,13,49,47,1],[51,13,51,49,1],[52,13,52,33,1],[53,13,53,47,1],[56,13,56,49,1],[57,13,57,33,1],[58,13,58,47,1],[59,9,59,10,1],[63,9,63,10,1],[64,13,64,54,1],[65,13,65,33,1],[66,13,66,48,1],[68,13,68,54,1],[69,13,69,33,1],[70,13,70,48,1],[72,13,72,54,1],[73,13,73,33,1],[74,13,74,48,1],[76,13,76,54,1],[77,13,77,33,1],[78,13,78,52,1],[80,13,80,49,1],[81,13,81,33,1],[82,13,82,48,1],[84,13,84,53,1],[85,13,85,33,1],[86,13,86,48,1],[88,13,88,53,1],[89,13,89,33,1],[90,13,90,52,1],[92,13,92,48,1],[93,13,93,33,1],[94,13,94,48,1],[95,9,95,10,1],[99,9,99,10,1],[100,13,100,62,1],[101,13,101,33,1],[102,13,102,68,1],[103,9,103,10,1]]);
    </script>
  </body>
</html>