<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Tom Pipe\Documents\Hexadigital\Code\Umbraco\Umbraco-CMS\src\umbraco.cms\businesslogic\Packager\PackageInstance\PackageActions.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using System.Collections;
using System.Collections.Generic;
using System.Web;
using System.Xml;
using Umbraco.Core;
using Umbraco.Core.Logging;
using umbraco.BasePages;
using umbraco.BusinessLogic.Utils;
using umbraco.cms.businesslogic.web;
using umbraco.cms.businesslogic.workflow;
using umbraco.interfaces;


namespace umbraco.cms.businesslogic.packager
{

	/// &lt;summary&gt;
	/// Package actions are executed on packge install / uninstall.
	/// &lt;/summary&gt;
	public class PackageAction
	{				

		/// &lt;summary&gt;
		/// Runs the package action with the specified action alias.
		/// &lt;/summary&gt;
		/// &lt;param name=&quot;packageName&quot;&gt;Name of the package.&lt;/param&gt;
		/// &lt;param name=&quot;actionAlias&quot;&gt;The action alias.&lt;/param&gt;
		/// &lt;param name=&quot;actionXml&quot;&gt;The action XML.&lt;/param&gt;
		public static void RunPackageAction(string packageName, string actionAlias, XmlNode actionXml)
		{

			foreach (var ipa in PackageActionsResolver.Current.PackageActions)
			{
				try
				{
					if (ipa.Alias() == actionAlias)
					{

						ipa.Execute(packageName, actionXml);
					}
				}
				catch (Exception ipaExp)
				{
					LogHelper.Error&lt;PackageAction&gt;(string.Format(&quot;Error loading package action &#39;{0}&#39; for package {1}&quot;, ipa.Alias(), packageName), ipaExp);
				}
			}
		}

		/// &lt;summary&gt;
		/// Undos the package action with the specified action alias.
		/// &lt;/summary&gt;
		/// &lt;param name=&quot;packageName&quot;&gt;Name of the package.&lt;/param&gt;
		/// &lt;param name=&quot;actionAlias&quot;&gt;The action alias.&lt;/param&gt;
		/// &lt;param name=&quot;actionXml&quot;&gt;The action XML.&lt;/param&gt;
		public static void UndoPackageAction(string packageName, string actionAlias, System.Xml.XmlNode actionXml)
		{

			foreach (IPackageAction ipa in PackageActionsResolver.Current.PackageActions)
			{
				try
				{
					if (ipa.Alias() == actionAlias)
					{

						ipa.Undo(packageName, actionXml);
					}
				}
				catch (Exception ipaExp)
				{
					LogHelper.Error&lt;PackageAction&gt;(string.Format(&quot;Error undoing package action &#39;{0}&#39; for package {1}&quot;, ipa.Alias(), packageName), ipaExp);
				}
			}
		}

	}
}

    </pre>
    <script type="text/javascript">
      highlightRanges([[31,3,31,4,0],[33,4,33,11,0],[33,13,33,20,0],[33,21,33,23,0],[33,24,33,69,0],[34,4,34,5,0],[36,5,36,6,0],[37,6,37,37,0],[38,6,38,7,0],[40,7,40,43,0],[41,6,41,7,0],[42,5,42,6,0],[43,5,43,29,0],[44,5,44,6,0],[45,6,45,140,0],[46,5,46,6,0],[47,4,47,5,0],[48,3,48,4,0],[57,3,57,4,0],[59,4,59,11,0],[59,13,59,31,0],[59,32,59,34,0],[59,35,59,80,0],[60,4,60,5,0],[62,5,62,6,0],[63,6,63,37,0],[64,6,64,7,0],[66,7,66,40,0],[67,6,67,7,0],[68,5,68,6,0],[69,5,69,29,0],[70,5,70,6,0],[71,6,71,140,0],[72,5,72,6,0],[73,4,73,5,0],[74,3,74,4,0]]);
    </script>
  </body>
</html>