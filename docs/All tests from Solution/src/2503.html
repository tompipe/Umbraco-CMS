<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Tom Pipe\Documents\Hexadigital\Code\Umbraco\Umbraco-CMS\src\umbraco.businesslogic\UmbracoSettings.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using System.IO;
using System.Linq;
using System.Web;
using System.Web.Caching;
using System.Xml;
using Umbraco.Core;
using System.Collections.Generic;
using Umbraco.Core.Configuration;
using Umbraco.Core.Logging;
using RazorDataTypeModelStaticMappingItem = umbraco.MacroEngines.RazorDataTypeModelStaticMappingItem;

namespace umbraco
{
    /// &lt;summary&gt;
    /// The UmbracoSettings Class contains general settings information for the entire Umbraco instance based on information from the /config/umbracoSettings.config file
    /// &lt;/summary&gt;
    [Obsolete(&quot;Use UmbracoConfig.For.UmbracoSettings() instead, it offers all settings in strongly typed formats. This class will be removed in future versions.&quot;)]
    public class UmbracoSettings
    {
        [Obsolete(&quot;This hasn&#39;t been used since 4.1!&quot;)]
        public const string TEMP_FRIENDLY_XML_CHILD_CONTAINER_NODENAME = &quot;&quot;; // &quot;children&quot;;

        /// &lt;summary&gt;
        /// Gets the umbraco settings document.
        /// &lt;/summary&gt;
        /// &lt;value&gt;The _umbraco settings.&lt;/value&gt;
        public static XmlDocument _umbracoSettings
        {
            get
            {
                var us = (XmlDocument)HttpRuntime.Cache[&quot;umbracoSettingsFile&quot;] ?? EnsureSettingsDocument();
                return us;
            }
        }

        /// &lt;summary&gt;
        /// Gets a value indicating whether the media library will create new directories in the /media directory.
        /// &lt;/summary&gt;
        /// &lt;value&gt;
        /// 	&lt;c&gt;true&lt;/c&gt; if new directories are allowed otherwise, &lt;c&gt;false&lt;/c&gt;.
        /// &lt;/value&gt;
        public static bool UploadAllowDirectories
        {
            get { return UmbracoConfig.For.UmbracoSettings().Content.UploadAllowDirectories; }
        }

        /// &lt;summary&gt;
        /// Gets a value indicating whether logging is enabled in umbracoSettings.config (/settings/logging/enableLogging).
        /// &lt;/summary&gt;
        /// &lt;value&gt;&lt;c&gt;true&lt;/c&gt; if logging is enabled; otherwise, &lt;c&gt;false&lt;/c&gt;.&lt;/value&gt;
        public static bool EnableLogging
        {
            get { return UmbracoConfig.For.UmbracoSettings().Logging.EnableLogging; }
        }

        /// &lt;summary&gt;
        /// Gets a value indicating whether logging happens async.
        /// &lt;/summary&gt;
        /// &lt;value&gt;&lt;c&gt;true&lt;/c&gt; if async logging is enabled; otherwise, &lt;c&gt;false&lt;/c&gt;.&lt;/value&gt;
        public static bool EnableAsyncLogging
        {
            get { return UmbracoConfig.For.UmbracoSettings().Logging.EnableAsyncLogging; }
        }

        /// &lt;summary&gt;
        /// Gets the assembly of an external logger that can be used to store log items in 3rd party systems
        /// &lt;/summary&gt;
        public static string ExternalLoggerAssembly
        {
            get { return UmbracoConfig.For.UmbracoSettings().Logging.ExternalLoggerAssembly; }
        }
        /// &lt;summary&gt;
        /// Gets the type of an external logger that can be used to store log items in 3rd party systems
        /// &lt;/summary&gt;
        public static string ExternalLoggerType
        {
            get { return UmbracoConfig.For.UmbracoSettings().Logging.ExternalLoggerType; }
        }

        /// &lt;summary&gt;
        /// Long Audit Trail to external log too
        /// &lt;/summary&gt;
        public static bool ExternalLoggerLogAuditTrail
        {
            get { return UmbracoConfig.For.UmbracoSettings().Logging.ExternalLoggerEnableAuditTrail; }
        }

        /// &lt;summary&gt;
        /// Keep user alive as long as they have their browser open? Default is true
        /// &lt;/summary&gt;
        public static bool KeepUserLoggedIn
        {
            get { return UmbracoConfig.For.UmbracoSettings().Security.KeepUserLoggedIn; }
        }
        
        /// &lt;summary&gt;
        /// Show disabled users in the tree in the Users section in the backoffice
        /// &lt;/summary&gt;
        public static bool HideDisabledUsersInBackoffice
        {
            get { return UmbracoConfig.For.UmbracoSettings().Security.HideDisabledUsersInBackoffice; }
        }

        /// &lt;summary&gt;
        /// Enable the UI and API to allow back-office users to reset their passwords? Default is true
        /// &lt;/summary&gt;
        public static bool AllowPasswordReset
        {
            get { return UmbracoConfig.For.UmbracoSettings().Security.AllowPasswordReset; }
        }

        /// &lt;summary&gt;
        /// Gets a value indicating whether the logs will be auto cleaned
        /// &lt;/summary&gt;
        /// &lt;value&gt;&lt;c&gt;true&lt;/c&gt; if logs are to be automatically cleaned; otherwise, &lt;c&gt;false&lt;/c&gt;&lt;/value&gt;
        public static bool AutoCleanLogs
        {
			get { return UmbracoConfig.For.UmbracoSettings().Logging.AutoCleanLogs; }
        }

        /// &lt;summary&gt;
        /// Gets the value indicating the log cleaning frequency (in miliseconds)
        /// &lt;/summary&gt;
        public static int CleaningMiliseconds
        {
			get { return UmbracoConfig.For.UmbracoSettings().Logging.CleaningMiliseconds; }
        }

        public static int MaxLogAge
        {
            get { return UmbracoConfig.For.UmbracoSettings().Logging.MaxLogAge; }
        }

        /// &lt;summary&gt;
        /// Gets the disabled log types.
        /// &lt;/summary&gt;
        /// &lt;value&gt;The disabled log types.&lt;/value&gt;
        public static XmlNode DisabledLogTypes
        {
            get { return GetKeyAsNode(&quot;/settings/logging/disabledLogTypes&quot;); }
        }

        /// &lt;summary&gt;
        /// Gets the package server url.
        /// &lt;/summary&gt;
        /// &lt;value&gt;The package server url.&lt;/value&gt;
        public static string PackageServer
        {
            get { return &quot;packages.umbraco.org&quot;; }
        }

        /// &lt;summary&gt;
        /// Gets a value indicating whether umbraco will use domain prefixes.
        /// &lt;/summary&gt;
        /// &lt;value&gt;&lt;c&gt;true&lt;/c&gt; if umbraco will use domain prefixes; otherwise, &lt;c&gt;false&lt;/c&gt;.&lt;/value&gt;
        public static bool UseDomainPrefixes
        {
            get { return UmbracoConfig.For.UmbracoSettings().RequestHandler.UseDomainPrefixes; }
        }

        /// &lt;summary&gt;
        /// This will add a trailing slash (/) to urls when in directory url mode
        /// NOTICE: This will always return false if Directory Urls in not active
        /// &lt;/summary&gt;
        public static bool AddTrailingSlash
        {
			get { return UmbracoConfig.For.UmbracoSettings().RequestHandler.AddTrailingSlash; }
        }

        /// &lt;summary&gt;
        /// Gets a value indicating whether umbraco will use ASP.NET MasterPages for rendering instead of its propriatary templating system.
        /// &lt;/summary&gt;
        /// &lt;value&gt;&lt;c&gt;true&lt;/c&gt; if umbraco will use ASP.NET MasterPages; otherwise, &lt;c&gt;false&lt;/c&gt;.&lt;/value&gt;
        public static bool UseAspNetMasterPages
        {
            get { return UmbracoConfig.For.UmbracoSettings().Templates.UseAspNetMasterPages; }
        }


        /// &lt;summary&gt;
        /// Gets a value indicating whether umbraco will attempt to load any skins to override default template files
        /// &lt;/summary&gt;
        /// &lt;value&gt;&lt;c&gt;true&lt;/c&gt; if umbraco will override templates with skins if present and configured &lt;c&gt;false&lt;/c&gt;.&lt;/value&gt;
        public static bool EnableTemplateFolders
        {
            get { return UmbracoConfig.For.UmbracoSettings().Templates.EnableTemplateFolders; }
        }

        /// &lt;summary&gt;
        /// razor DynamicNode typecasting detects XML and returns DynamicXml - Root elements that won&#39;t convert to DynamicXml
        /// &lt;/summary&gt;
        public static List&lt;string&gt; NotDynamicXmlDocumentElements
        {
            get { return UmbracoConfig.For.UmbracoSettings().Scripting.NotDynamicXmlDocumentElements.Select(x =&gt; x.Element).ToList(); }
        }

        public static List&lt;RazorDataTypeModelStaticMappingItem&gt; RazorDataTypeModelStaticMapping
        {
			get
			{
			    var mapping = UmbracoConfig.For.UmbracoSettings().Scripting.DataTypeModelStaticMappings;
				
				//now we need to map to the old object until we can clean all this nonsense up
				return mapping.Select(x =&gt; new RazorDataTypeModelStaticMappingItem()
					{
						DataTypeGuid = x.DataTypeGuid,
						NodeTypeAlias = x.NodeTypeAlias,
						PropertyTypeAlias = x.PropertyTypeAlias,
						Raw = string.Empty,
						TypeName = x.MappingName
					}).ToList();
			}
        }

        /// &lt;summary&gt;
        /// Gets a value indicating whether umbraco will clone XML cache on publish.
        /// &lt;/summary&gt;
        /// &lt;value&gt;
        /// 	&lt;c&gt;true&lt;/c&gt; if umbraco will clone XML cache on publish; otherwise, &lt;c&gt;false&lt;/c&gt;.
        /// &lt;/value&gt;
        public static bool CloneXmlCacheOnPublish
        {
            get { return UmbracoConfig.For.UmbracoSettings().Content.CloneXmlContent; }
        }

        /// &lt;summary&gt;
        /// Gets a value indicating whether rich text editor content should be parsed by tidy.
        /// &lt;/summary&gt;
        /// &lt;value&gt;&lt;c&gt;true&lt;/c&gt; if content is parsed; otherwise, &lt;c&gt;false&lt;/c&gt;.&lt;/value&gt;
        public static bool TidyEditorContent
        {
            get { return UmbracoConfig.For.UmbracoSettings().Content.TidyEditorContent; }
        }

        /// &lt;summary&gt;
        /// Gets the encoding type for the tidyied content.
        /// &lt;/summary&gt;
        /// &lt;value&gt;The encoding type as string.&lt;/value&gt;
        public static string TidyCharEncoding
        {
            get { return UmbracoConfig.For.UmbracoSettings().Content.TidyCharEncoding; }
        }

        /// &lt;summary&gt;
        /// Gets the property context help option, this can either be &#39;text&#39;, &#39;icon&#39; or &#39;none&#39;
        /// &lt;/summary&gt;
        /// &lt;value&gt;The property context help option.&lt;/value&gt;
        public static string PropertyContextHelpOption
        {
            get { return UmbracoConfig.For.UmbracoSettings().Content.PropertyContextHelpOption; }
        }

        public static string DefaultBackofficeProvider
        {
            get { return UmbracoConfig.For.UmbracoSettings().Providers.DefaultBackOfficeUserProvider; }
        }

        /// &lt;summary&gt;
        /// Whether to force safe aliases (no spaces, no special characters) at businesslogic level on contenttypes and propertytypes
        /// &lt;/summary&gt;
        public static bool ForceSafeAliases
        {
            get { return UmbracoConfig.For.UmbracoSettings().Content.ForceSafeAliases; }
        }

        /// &lt;summary&gt;
        /// File types that will not be allowed to be uploaded via the content/media upload control
        /// &lt;/summary&gt;
        public static IEnumerable&lt;string&gt; DisallowedUploadFiles
        {
            get { return UmbracoConfig.For.UmbracoSettings().Content.DisallowedUploadFiles; }
        }

        /// &lt;summary&gt;
        /// Gets the allowed image file types.
        /// &lt;/summary&gt;
        /// &lt;value&gt;The allowed image file types.&lt;/value&gt;
        public static string ImageFileTypes
        {
            get { return string.Join(&quot;,&quot;, UmbracoConfig.For.UmbracoSettings().Content.ImageFileTypes.Select(x =&gt; x.ToLowerInvariant())); }
        }

        /// &lt;summary&gt;
        /// Gets the allowed script file types.
        /// &lt;/summary&gt;
        /// &lt;value&gt;The allowed script file types.&lt;/value&gt;
        public static string ScriptFileTypes
        {
            get { return string.Join(&quot;,&quot;, UmbracoConfig.For.UmbracoSettings().Content.ScriptFileTypes); }
        }

        /// &lt;summary&gt;
        /// Gets the duration in seconds to cache queries to umbraco library member and media methods
        /// Default is 1800 seconds (30 minutes)
        /// &lt;/summary&gt;
        public static int UmbracoLibraryCacheDuration
        {
            get { return UmbracoConfig.For.UmbracoSettings().Content.UmbracoLibraryCacheDuration; }
        }

        /// &lt;summary&gt;
        /// Gets the path to the scripts folder used by the script editor.
        /// &lt;/summary&gt;
        /// &lt;value&gt;The script folder path.&lt;/value&gt;
        public static string ScriptFolderPath
        {
            get { return UmbracoConfig.For.UmbracoSettings().Content.ScriptFolderPath; }
        }

        /// &lt;summary&gt;
        /// Enabled or disable the script/code editor
        /// &lt;/summary&gt;
        public static bool ScriptDisableEditor
        {
            get { return UmbracoConfig.For.UmbracoSettings().Content.ScriptEditorDisable; }
        }
        
        /// &lt;summary&gt;
        /// Gets a value indicating whether umbraco will ensure unique node naming.
        /// This will ensure that nodes cannot have the same url, but will add extra characters to a url.
        /// ex: existingnodename.aspx would become existingnodename(1).aspx if a node with the same name is found 
        /// &lt;/summary&gt;
        /// &lt;value&gt;&lt;c&gt;true&lt;/c&gt; if umbraco ensures unique node naming; otherwise, &lt;c&gt;false&lt;/c&gt;.&lt;/value&gt;
        public static bool EnsureUniqueNaming
        {
            get { return UmbracoConfig.For.UmbracoSettings().Content.EnsureUniqueNaming; }
        }

        /// &lt;summary&gt;
        /// Gets the notification email sender.
        /// &lt;/summary&gt;
        /// &lt;value&gt;The notification email sender.&lt;/value&gt;
        public static string NotificationEmailSender
        {
            get { return UmbracoConfig.For.UmbracoSettings().Content.NotificationEmailAddress; }
        }

        /// &lt;summary&gt;
        /// Gets a value indicating whether notification-emails are HTML.
        /// &lt;/summary&gt;
        /// &lt;value&gt;
        /// 	&lt;c&gt;true&lt;/c&gt; if html notification-emails are disabled; otherwise, &lt;c&gt;false&lt;/c&gt;.
        /// &lt;/value&gt;
        public static bool NotificationDisableHtmlEmail
        {
            get { return UmbracoConfig.For.UmbracoSettings().Content.DisableHtmlEmail; }
        }

        /// &lt;summary&gt;
        /// Gets the allowed attributes on images.
        /// &lt;/summary&gt;
        /// &lt;value&gt;The allowed attributes on images.&lt;/value&gt;
        public static string ImageAllowedAttributes
        {
            get { return string.Join(&quot;,&quot;, UmbracoConfig.For.UmbracoSettings().Content.ImageTagAllowedAttributes); }
        }

        public static XmlNode ImageAutoFillImageProperties
        {
            get { return GetKeyAsNode(&quot;/settings/content/imaging/autoFillImageProperties&quot;); }
        }

        /// &lt;summary&gt;
        /// Gets the scheduled tasks as XML
        /// &lt;/summary&gt;
        /// &lt;value&gt;The scheduled tasks.&lt;/value&gt;
        public static XmlNode ScheduledTasks
        {
            get { return GetKeyAsNode(&quot;/settings/scheduledTasks&quot;); }
        }

        /// &lt;summary&gt;
        /// Gets a list of characters that will be replaced when generating urls
        /// &lt;/summary&gt;
        /// &lt;value&gt;The URL replacement characters.&lt;/value&gt;
        public static XmlNode UrlReplaceCharacters
        {
            get { return GetKeyAsNode(&quot;/settings/requestHandler/urlReplacing&quot;); }
        }

        /// &lt;summary&gt;
        /// Whether to replace double dashes from url (ie my--story----from--dash.aspx caused by multiple url replacement chars
        /// &lt;/summary&gt;
        public static bool RemoveDoubleDashesFromUrlReplacing
        {
            get { return UmbracoConfig.For.UmbracoSettings().RequestHandler.RemoveDoubleDashes; }
        }

        /// &lt;summary&gt;
        /// Gets a value indicating whether umbraco will use distributed calls.
        /// This enables umbraco to share cache and content across multiple servers.
        /// Used for load-balancing high-traffic sites.
        /// &lt;/summary&gt;
        /// &lt;value&gt;&lt;c&gt;true&lt;/c&gt; if umbraco uses distributed calls; otherwise, &lt;c&gt;false&lt;/c&gt;.&lt;/value&gt;
        public static bool UseDistributedCalls
        {
            get { return UmbracoConfig.For.UmbracoSettings().DistributedCall.Enabled; }
        }


        /// &lt;summary&gt;
        /// Gets the ID of the user with access rights to perform the distributed calls.
        /// &lt;/summary&gt;
        /// &lt;value&gt;The distributed call user.&lt;/value&gt;
        public static int DistributedCallUser
        {
            get { return UmbracoConfig.For.UmbracoSettings().DistributedCall.UserId; }
        }

        /// &lt;summary&gt;
        /// Gets the html injected into a (x)html page if Umbraco is running in preview mode
        /// &lt;/summary&gt;
        public static string PreviewBadge
        {
            get { return UmbracoConfig.For.UmbracoSettings().Content.PreviewBadge; }
        }

        /// &lt;summary&gt;
        /// Gets IP or hostnames of the distribution servers.
        /// These servers will receive a call everytime content is created/deleted/removed
        /// and update their content cache accordingly, ensuring a consistent cache on all servers
        /// &lt;/summary&gt;
        /// &lt;value&gt;The distribution servers.&lt;/value&gt;
        public static XmlNode DistributionServers
        {
            get
            {
                try
                {
                    return GetKeyAsNode(&quot;/settings/distributedCall/servers&quot;);
                }
                catch
                {
                    return null;
                }
            }
        }

        /// &lt;summary&gt;
        /// Gets HelpPage configurations.
        /// A help page configuration specify language, user type, application, application url and 
        /// the target help page url.
        /// &lt;/summary&gt;
        public static XmlNode HelpPages
        {
            get
            {
                try
                {
                    return GetKeyAsNode(&quot;/settings/help&quot;);
                }
                catch
                {
                    return null;
                }
            }
        }

        /// &lt;summary&gt;
        /// Gets all repositories registered, and returns them as XmlNodes, containing name, alias and webservice url.
        /// These repositories are used by the built-in package installer and uninstaller to install new packages and check for updates.
        /// All repositories should have a unique alias.
        /// All packages installed from a repository gets the repository alias included in the install information
        /// &lt;/summary&gt;
        /// &lt;value&gt;The repository servers.&lt;/value&gt;
        public static XmlNode Repositories
        {
            get
            {
                try
                {
                    return GetKeyAsNode(&quot;/settings/repositories&quot;);
                }
                catch
                {
                    return null;
                }
            }
        }

        /// &lt;summary&gt;
        /// Gets a value indicating whether umbraco will use the viewstate mover module.
        /// The viewstate mover will move all asp.net viewstate information to the bottom of the aspx page
        /// to ensure that search engines will index text instead of javascript viewstate information.
        /// &lt;/summary&gt;
        /// &lt;value&gt;
        /// 	&lt;c&gt;true&lt;/c&gt; if umbraco will use the viewstate mover module; otherwise, &lt;c&gt;false&lt;/c&gt;.
        /// &lt;/value&gt;
        public static bool UseViewstateMoverModule
        {
            get { return UmbracoConfig.For.UmbracoSettings().ViewStateMoverModule.Enable; }
        }


        /// &lt;summary&gt;
        /// Tells us whether the Xml Content cache is disabled or not
        /// Default is enabled
        /// &lt;/summary&gt;
        public static bool isXmlContentCacheDisabled
        {
            get { return UmbracoConfig.For.UmbracoSettings().Content.XmlCacheEnabled == false; }
        }

        /// &lt;summary&gt;
        /// Check if there&#39;s changes to the umbraco.config xml file cache on disk on each request
        /// Makes it possible to updates environments by syncing the umbraco.config file across instances
        /// Relates to http://umbraco.codeplex.com/workitem/30722
        /// &lt;/summary&gt;
        public static bool XmlContentCheckForDiskChanges
        {
            get { return UmbracoConfig.For.UmbracoSettings().Content.XmlContentCheckForDiskChanges; }
        }

        /// &lt;summary&gt;
        /// If this is enabled, all Umbraco objects will generate data in the preview table (cmsPreviewXml).
        /// If disabled, only documents will generate data.
        /// This feature is useful if anyone would like to see how data looked at a given time
        /// &lt;/summary&gt;
        public static bool EnableGlobalPreviewStorage
        {
            get { return UmbracoConfig.For.UmbracoSettings().Content.GlobalPreviewStorageEnabled; }
        }

        /// &lt;summary&gt;
        /// Whether to use the new 4.1 schema or the old legacy schema
        /// &lt;/summary&gt;
        /// &lt;value&gt;
        /// 	&lt;c&gt;true&lt;/c&gt; if yes, use the old node/data model; otherwise, &lt;c&gt;false&lt;/c&gt;.
        /// &lt;/value&gt;
        public static bool UseLegacyXmlSchema
        {
            get { return UmbracoConfig.For.UmbracoSettings().Content.UseLegacyXmlSchema; }
        }

    	public static IEnumerable&lt;string&gt; AppCodeFileExtensionsList
    	{
            get { return UmbracoConfig.For.UmbracoSettings().Developer.AppCodeFileExtensions.Select(x =&gt; x.Extension); }
    	}

		[Obsolete(&quot;Use AppCodeFileExtensionsList instead&quot;)]
        public static XmlNode AppCodeFileExtensions
        {
            get
            {
                XmlNode value = GetKeyAsNode(&quot;/settings/developer/appCodeFileExtensions&quot;);
                if (value != null)
                {
                    return value;
                }

                // default is .cs and .vb
                value = _umbracoSettings.CreateElement(&quot;appCodeFileExtensions&quot;);
                value.AppendChild(XmlHelper.AddTextNode(_umbracoSettings, &quot;ext&quot;, &quot;cs&quot;));
                value.AppendChild(XmlHelper.AddTextNode(_umbracoSettings, &quot;ext&quot;, &quot;vb&quot;));
                return value;
            }
        }

        /// &lt;summary&gt;
        /// Tells us whether the Xml to always update disk cache, when changes are made to content
        /// Default is enabled
        /// &lt;/summary&gt;
        public static bool continouslyUpdateXmlDiskCache
        {
            get { return UmbracoConfig.For.UmbracoSettings().Content.ContinouslyUpdateXmlDiskCache; }
        }

        /// &lt;summary&gt;
        /// Tells us whether to use a splash page while umbraco is initializing content. 
        /// If not, requests are queued while umbraco loads content. For very large sites (+10k nodes) it might be usefull to 
        /// have a splash page
        /// Default is disabled
        /// &lt;/summary&gt;
        public static bool EnableSplashWhileLoading
        {
            get { return UmbracoConfig.For.UmbracoSettings().Content.EnableSplashWhileLoading; }
        }

        public static bool ResolveUrlsFromTextString
        {
            get { return UmbracoConfig.For.UmbracoSettings().Content.ResolveUrlsFromTextString; }
        }

        /// &lt;summary&gt;
        /// This configuration setting defines how to handle macro errors:
        /// - Inline - Show error within macro as text (default and current Umbraco &#39;normal&#39; behavior)
        /// - Silent - Suppress error and hide macro
        /// - Throw  - Throw an exception and invoke the global error handler (if one is defined, if not you&#39;ll get a YSOD)
        /// &lt;/summary&gt;
        /// &lt;value&gt;MacroErrorBehaviour enum defining how to handle macro errors.&lt;/value&gt;
        public static MacroErrorBehaviour MacroErrorBehaviour
        {
            get { return UmbracoConfig.For.UmbracoSettings().Content.MacroErrorBehaviour; }
        }

        /// &lt;summary&gt;
        /// This configuration setting defines how to show icons in the document type editor. 
        /// - ShowDuplicates       - Show duplicates in files and sprites. (default and current Umbraco &#39;normal&#39; behaviour)
        /// - HideSpriteDuplicates - Show files on disk and hide duplicates from the sprite
        /// - HideFileDuplicates   - Show files in the sprite and hide duplicates on disk
        /// &lt;/summary&gt;
        /// &lt;value&gt;MacroErrorBehaviour enum defining how to show icons in the document type editor.&lt;/value&gt;
        [Obsolete(&quot;This is no longer used and will be removed from the core in future versions&quot;)]
        public static IconPickerBehaviour IconPickerBehaviour
        {
            get { return IconPickerBehaviour.ShowDuplicates; }
        }

        /// &lt;summary&gt;
        /// Gets the default document type property used when adding new properties through the back-office
        /// &lt;/summary&gt;
        /// &lt;value&gt;Configured text for the default document type property&lt;/value&gt;
        /// &lt;remarks&gt;If undefined, &#39;Textstring&#39; is the default&lt;/remarks&gt;
        public static string DefaultDocumentTypeProperty
        {
            get { return UmbracoConfig.For.UmbracoSettings().Content.DefaultDocumentTypeProperty; }
        }

        /// &lt;summary&gt;
        /// Enables inherited document types.
        /// This feature is not recommended and therefore is not enabled by default in new installations.
        /// Inherited document types will not be supported in v8.
        /// &lt;/summary&gt;
        //[Obsolete(&quot;This will not be supported in v8&quot;)]
        public static bool EnableInheritedDocumentTypes
        {
            get { return UmbracoConfig.For.UmbracoSettings().Content.EnableInheritedDocumentTypes; }
        }

        private static string _path;

        /// &lt;summary&gt;
        /// Gets the settings file path
        /// &lt;/summary&gt;
        internal static string SettingsFilePath
        {
            get { return _path ?? (_path = GlobalSettings.FullpathToRoot + Path.DirectorySeparatorChar + &quot;config&quot; + Path.DirectorySeparatorChar); }
        }

        internal const string Filename = &quot;umbracoSettings.config&quot;;

        internal static XmlDocument EnsureSettingsDocument()
        {
            var settingsFile = HttpRuntime.Cache[&quot;umbracoSettingsFile&quot;];

            // Check for language file in cache
            if (settingsFile == null)
            {
                var temp = new XmlDocument();
                var settingsReader = new XmlTextReader(SettingsFilePath + Filename);
                try
                {
                    temp.Load(settingsReader);
                    HttpRuntime.Cache.Insert(&quot;umbracoSettingsFile&quot;, temp,
                                             new CacheDependency(SettingsFilePath + Filename));
                }
                catch (XmlException e)
                {
                    throw new XmlException(&quot;Your umbracoSettings.config file fails to pass as valid XML. Refer to the InnerException for more information&quot;, e);
                }
                catch (Exception e)
                {
                    LogHelper.Error&lt;UmbracoSettings&gt;(&quot;Error reading umbracoSettings file: &quot; + e.ToString(), e);
                }
                settingsReader.Close();
                return temp;
            }
            else
                return (XmlDocument)settingsFile;
        }

        internal static void Save()
        {
            _umbracoSettings.Save(SettingsFilePath + Filename);
        }


        /// &lt;summary&gt;
        /// Selects a xml node in the umbraco settings config file.
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;key&quot;&gt;The xpath query to the specific node.&lt;/param&gt;
        /// &lt;returns&gt;If found, it returns the specific configuration xml node.&lt;/returns&gt;
        internal static XmlNode GetKeyAsNode(string key)
        {
            if (key == null)
                throw new ArgumentException(&quot;Key cannot be null&quot;);
            EnsureSettingsDocument();
            if (_umbracoSettings == null || _umbracoSettings.DocumentElement == null)
                return null;
            return _umbracoSettings.DocumentElement.SelectSingleNode(key);
        }

        /// &lt;summary&gt;
        /// Gets the value of configuration xml node with the specified key.
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;key&quot;&gt;The key.&lt;/param&gt;
        /// &lt;returns&gt;&lt;/returns&gt;
        internal static string GetKey(string key)
        {
            EnsureSettingsDocument();

            string attrName = null;
            var pos = key.IndexOf(&#39;@&#39;);
            if (pos &gt; 0)
            {
                attrName = key.Substring(pos + 1);
                key = key.Substring(0, pos - 1);
            }

            var node = _umbracoSettings.DocumentElement.SelectSingleNode(key);
            if (node == null)
                return string.Empty;

            if (pos &lt; 0)
            {
                if (node.FirstChild == null || node.FirstChild.Value == null)
                    return string.Empty;
                return node.FirstChild.Value;
            }
            else
            {
                var attr = node.Attributes[attrName];
                if (attr == null)
                    return string.Empty;
                return attr.Value;
            }
        }

    }
}
    </pre>
    <script type="text/javascript">
      highlightRanges([[31,13,31,14,0],[32,17,32,108,0],[33,17,33,27,0],[34,13,34,14,0],[45,17,45,18,0],[45,19,45,93,0],[45,94,45,95,0],[54,17,54,18,0],[54,19,54,84,0],[54,85,54,86,0],[63,17,63,18,0],[63,19,63,89,0],[63,90,63,91,0],[71,17,71,18,0],[71,19,71,93,0],[71,94,71,95,0],[78,17,78,18,0],[78,19,78,89,0],[78,90,78,91,0],[86,17,86,18,0],[86,19,86,101,0],[86,102,86,103,0],[94,17,94,18,0],[94,19,94,88,0],[94,89,94,90,0],[102,17,102,18,0],[102,19,102,101,0],[102,102,102,103,0],[110,17,110,18,0],[110,19,110,90,0],[110,91,110,92,0],[119,8,119,9,0],[119,10,119,75,0],[119,76,119,77,0],[127,8,127,9,0],[127,10,127,81,0],[127,82,127,83,0],[132,17,132,18,0],[132,19,132,80,0],[132,81,132,82,0],[141,17,141,18,0],[141,19,141,77,0],[141,78,141,79,0],[150,17,150,18,0],[150,19,150,49,0],[150,50,150,51,0],[159,17,159,18,0],[159,19,159,95,0],[159,96,159,97,0],[168,8,168,9,0],[168,10,168,85,0],[168,86,168,87,0],[177,17,177,18,0],[177,19,177,93,0],[177,94,177,95,0],[187,17,187,18,0],[187,19,187,94,0],[187,95,187,96,0],[195,17,195,18,0],[195,19,195,114,0],[195,114,195,123,0],[195,123,195,134,0],[195,19,195,134,0],[195,135,195,136,0],[201,4,201,5,0],[202,8,202,96,0],[205,5,205,32,0],[205,32,212,7,0],[212,7,212,18,0],[205,5,212,18,0],[213,4,213,5,0],[224,17,224,18,0],[224,19,224,86,0],[224,87,224,88,0],[233,17,233,18,0],[233,19,233,88,0],[233,89,233,90,0],[242,17,242,18,0],[242,19,242,87,0],[242,88,242,89,0],[251,17,251,18,0],[251,19,251,96,0],[251,97,251,98,0],[256,17,256,18,0],[256,19,256,102,0],[256,103,256,104,0],[264,17,264,18,0],[264,19,264,87,0],[264,88,264,89,0],[272,17,272,18,0],[272,19,272,92,0],[272,93,272,94,0],[281,17,281,18,0],[281,19,281,114,0],[281,114,281,134,0],[281,134,281,137,0],[281,19,281,137,0],[281,138,281,139,0],[290,17,290,18,0],[290,19,290,104,0],[290,105,290,106,0],[299,17,299,18,0],[299,19,299,98,0],[299,99,299,100,0],[308,17,308,18,0],[308,19,308,87,0],[308,88,308,89,0],[316,17,316,18,0],[316,19,316,90,0],[316,91,316,92,0],[327,17,327,18,0],[327,19,327,89,0],[327,90,327,91,0],[336,17,336,18,0],[336,19,336,95,0],[336,96,336,97,0],[347,17,347,18,0],[347,19,347,87,0],[347,88,347,89,0],[356,17,356,18,0],[356,19,356,114,0],[356,115,356,116,0],[361,17,361,18,0],[361,19,361,92,0],[361,93,361,94,0],[370,17,370,18,0],[370,19,370,67,0],[370,68,370,69,0],[379,17,379,18,0],[379,19,379,80,0],[379,81,379,82,0],[387,17,387,18,0],[387,19,387,96,0],[387,97,387,98,0],[398,17,398,18,0],[398,19,398,86,0],[398,87,398,88,0],[408,17,408,18,0],[408,19,408,85,0],[408,86,408,87,0],[416,17,416,18,0],[416,19,416,83,0],[416,84,416,85,0],[428,13,428,14,0],[430,17,430,18,0],[431,21,431,78,0],[433,17,433,22,0],[434,17,434,18,0],[435,21,435,33,0],[437,13,437,14,0],[448,13,448,14,0],[450,17,450,18,0],[451,21,451,59,0],[453,17,453,22,0],[454,17,454,18,0],[455,21,455,33,0],[457,13,457,14,0],[470,13,470,14,0],[472,17,472,18,0],[473,21,473,67,0],[475,17,475,22,0],[476,17,476,18,0],[477,21,477,33,0],[479,13,479,14,0],[492,17,492,18,0],[492,19,492,90,0],[492,91,492,92,0],[502,17,502,18,0],[502,19,502,95,0],[502,96,502,97,0],[512,17,512,18,0],[512,19,512,100,0],[512,101,512,102,0],[522,17,522,18,0],[522,19,522,98,0],[522,99,522,100,0],[533,17,533,18,0],[533,19,533,89,0],[533,90,533,91,0],[538,17,538,18,0],[538,19,538,106,0],[538,106,538,117,0],[538,117,538,119,0],[538,19,538,119,0],[538,120,538,121,0],[545,13,545,14,0],[546,17,546,91,0],[547,17,547,35,0],[548,17,548,18,0],[549,21,549,34,0],[553,17,553,81,0],[554,17,554,89,0],[555,17,555,89,0],[556,17,556,30,0],[557,13,557,14,0],[566,17,566,18,0],[566,19,566,100,0],[566,101,566,102,0],[577,17,577,18,0],[577,19,577,95,0],[577,96,577,97,0],[582,17,582,18,0],[582,19,582,96,0],[582,97,582,98,0],[594,17,594,18,0],[594,19,594,90,0],[594,91,594,92,0],[607,17,607,18,0],[607,19,607,61,0],[607,62,607,63,0],[617,17,617,18,0],[617,19,617,98,0],[617,99,617,100,0],[628,17,628,18,0],[628,19,628,99,0],[628,100,628,101,0],[638,17,638,18,0],[638,19,638,146,0],[638,147,638,148,0],[644,9,644,10,0],[645,13,645,73,0],[648,13,648,38,0],[649,13,649,14,0],[650,17,650,46,0],[651,17,651,85,0],[653,17,653,18,0],[654,21,654,47,0],[655,21,656,96,0],[657,17,657,18,0],[658,17,658,39,0],[659,17,659,18,0],[660,21,660,160,0],[662,17,662,36,0],[663,17,663,18,0],[664,21,664,112,0],[665,17,665,18,0],[666,17,666,40,0],[667,17,667,29,0],[670,17,670,50,0],[671,9,671,10,0],[674,9,674,10,0],[675,13,675,64,0],[676,9,676,10,0],[685,9,685,10,0],[686,13,686,29,0],[687,17,687,67,0],[688,13,688,38,0],[689,13,689,86,0],[690,17,690,29,0],[691,13,691,75,0],[692,9,692,10,0],[700,9,700,10,0],[701,13,701,38,0],[703,13,703,36,0],[704,13,704,40,0],[705,13,705,25,0],[706,13,706,14,0],[707,17,707,51,0],[708,17,708,49,0],[709,13,709,14,0],[711,13,711,79,0],[712,13,712,30,0],[713,17,713,37,0],[715,13,715,25,0],[716,13,716,14,0],[717,17,717,78,0],[718,21,718,41,0],[719,17,719,46,0],[722,13,722,14,0],[723,17,723,54,0],[724,17,724,34,0],[725,21,725,41,0],[726,17,726,35,0],[728,9,728,10,0]]);
    </script>
  </body>
</html>