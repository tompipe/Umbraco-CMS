<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Tom Pipe\Documents\Hexadigital\Code\Umbraco\Umbraco-CMS\src\Umbraco.Web\Mvc\JsonNetResult.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Web;
using System.Web.Mvc;
using Newtonsoft.Json;

namespace Umbraco.Web.Mvc
{

    /// &lt;summary&gt;
    /// Custom json result using newtonsoft json.net
    /// &lt;/summary&gt;
    public class JsonNetResult : ActionResult
    {
        public Encoding ContentEncoding { get; set; }
        public string ContentType { get; set; }
        public object Data { get; set; }

        public JsonSerializerSettings SerializerSettings { get; set; }
        public Formatting Formatting { get; set; }

        public JsonNetResult()
        {
            SerializerSettings = new JsonSerializerSettings();
        }

        public override void ExecuteResult(ControllerContext context)
        {
            if (context == null)
                throw new ArgumentNullException(&quot;context&quot;);

            HttpResponseBase response = context.HttpContext.Response;

            response.ContentType = string.IsNullOrEmpty(ContentType) == false
              ? ContentType
              : &quot;application/json&quot;;

            if (ContentEncoding != null)
                response.ContentEncoding = ContentEncoding;

            if (Data != null)
            {
                var writer = new JsonTextWriter(response.Output) { Formatting = Formatting };

                var serializer = JsonSerializer.Create(SerializerSettings);
                serializer.Serialize(writer, Data);

                writer.Flush();
            }
        }
    }

}

    </pre>
    <script type="text/javascript">
      highlightRanges([[18,43,18,47,0],[18,48,18,52,0],[19,37,19,41,0],[19,42,19,46,0],[20,30,20,34,0],[20,35,20,39,0],[22,60,22,64,0],[22,65,22,69,0],[23,40,23,44,0],[23,45,23,49,0],[25,9,25,31,0],[26,9,26,10,0],[27,13,27,63,0],[28,9,28,10,0],[31,9,31,10,0],[32,13,32,33,0],[33,17,33,60,0],[35,13,35,70,0],[37,13,39,36,0],[41,13,41,41,0],[42,17,42,60,0],[44,13,44,30,0],[45,13,45,14,0],[46,17,46,94,0],[48,17,48,76,0],[49,17,49,52,0],[51,17,51,32,0],[52,13,52,14,0],[53,9,53,10,0]]);
    </script>
  </body>
</html>