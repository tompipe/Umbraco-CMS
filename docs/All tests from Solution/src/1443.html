<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Tom Pipe\Documents\Hexadigital\Code\Umbraco\Umbraco-CMS\src\Umbraco.Core\Xml\XPathNavigatorExtensions.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System.Xml.XPath;

namespace Umbraco.Core.Xml
{
    /// &lt;summary&gt;
    /// Provides extensions to XPathNavigator.
    /// &lt;/summary&gt;
    internal static class XPathNavigatorExtensions
    {
        /// &lt;summary&gt;
        /// Selects a node set, using the specified XPath expression.
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;navigator&quot;&gt;A source XPathNavigator.&lt;/param&gt;
        /// &lt;param name=&quot;expression&quot;&gt;An XPath expression.&lt;/param&gt;
        /// &lt;param name=&quot;variables&quot;&gt;A set of XPathVariables.&lt;/param&gt;
        /// &lt;returns&gt;An iterator over the nodes matching the specified expression.&lt;/returns&gt;
        public static XPathNodeIterator Select(this XPathNavigator navigator, string expression, params XPathVariable[] variables)
        {
            if (variables == null || variables.Length == 0 || variables[0] == null)
                return navigator.Select(expression);

            // Reflector shows that the standard XPathNavigator.Compile method just does
            //   return XPathExpression.Compile(xpath);
            // only difference is, XPathNavigator.Compile is virtual so it could be overriden
            // by a class inheriting from XPathNavigator... there does not seem to be any
            // doing it in the Framework, though... so we&#39;ll assume it&#39;s much cleaner to use
            // the static compile:
            var compiled = XPathExpression.Compile(expression);

            var context = new DynamicContext();
            foreach (var variable in variables)
                context.AddVariable(variable.Name, variable.Value);
            compiled.SetContext(context);
            return navigator.Select(compiled);
        }

        /// &lt;summary&gt;
        /// Selects a node set, using the specified XPath expression.
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;navigator&quot;&gt;A source XPathNavigator.&lt;/param&gt;
        /// &lt;param name=&quot;expression&quot;&gt;An XPath expression.&lt;/param&gt;
        /// &lt;param name=&quot;variables&quot;&gt;A set of XPathVariables.&lt;/param&gt;
        /// &lt;returns&gt;An iterator over the nodes matching the specified expression.&lt;/returns&gt;
        public static XPathNodeIterator Select(this XPathNavigator navigator, XPathExpression expression, params XPathVariable[] variables)
        {
            if (variables == null || variables.Length == 0 || variables[0] == null)
                return navigator.Select(expression);

            var compiled = expression.Clone(); // clone for thread-safety
            var context = new DynamicContext();
            foreach (var variable in variables)
                context.AddVariable(variable.Name, variable.Value);
            compiled.SetContext(context);
            return navigator.Select(compiled);
        }
    }
}

    </pre>
    <script type="text/javascript">
      highlightRanges([[18,9,18,10,1],[19,13,19,84,1],[20,17,20,53,0],[28,13,28,64,1],[30,13,30,48,1],[31,13,31,20,1],[31,22,31,34,1],[31,35,31,37,1],[31,38,31,47,1],[32,17,32,68,1],[33,13,33,42,1],[34,13,34,47,1],[35,9,35,10,1],[45,9,45,10,0],[46,13,46,84,0],[47,17,47,53,0],[49,13,49,47,0],[50,13,50,48,0],[51,13,51,20,0],[51,22,51,34,0],[51,35,51,37,0],[51,38,51,47,0],[52,17,52,68,0],[53,13,53,42,0],[54,13,54,47,0],[55,9,55,10,0]]);
    </script>
  </body>
</html>