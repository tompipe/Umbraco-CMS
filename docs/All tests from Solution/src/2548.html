<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Tom Pipe\Documents\Hexadigital\Code\Umbraco\Umbraco-CMS\src\umbraco.controls\ScrollingMenu.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using System.Collections;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Web;
using System.Web.SessionState;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.UI.HtmlControls;
using ClientDependency.Core;
using umbraco.IO;


namespace umbraco.uicontrols
{

    [ToolboxData(&quot;&lt;{0}:ScrollingMenu runat=server&gt;&lt;/{0}:ScrollingMenu&gt;&quot;)]
    public class ScrollingMenu : System.Web.UI.WebControls.PlaceHolder
    {
        public ArrayList Icons = new ArrayList();
        private string iconIds;
        private int extraMenuWidth = 0;

        public MenuIconI NewIcon(int Index)
        {
            MenuIcon Icon = new MenuIcon();
            Icons.Insert(Index, Icon);
            return Icon;
        }

        public MenuIconI NewIcon()
        {
            MenuIcon icon = new MenuIcon();
            Icons.Add(icon);
            return icon;
        }

        internal MenuSplitButton NewSplitButton()
        {
            var menu = new MenuSplitButton();
            Icons.Add(menu);
            return menu;
        }

        public MenuButton NewButton(int index = -1)
        {
            MenuButton btn = new MenuButton();

            if (index &gt; -1)
                Icons.Insert(index, btn);
            else
                Icons.Add(btn);

            return btn;
        }

        public MenuImageButton NewImageButton()
        {
            MenuImageButton icon = new MenuImageButton();
            Icons.Add(icon);
            return icon;
        }

        public MenuImageButton NewImageButton(int Index)
        {
            MenuImageButton icon = new MenuImageButton();
            Icons.Insert(Index, icon);
            return icon;
        }


        public System.Web.UI.WebControls.DropDownList NewDropDownList()
        {
            DropDownList Icon = new DropDownList();
            Icons.Add(Icon);
            return Icon;
        }

        public void NewElement(string ElementName, string ElementId, string ElementClass, int ExtraWidth)
        {
            Icons.Add(new LiteralControl(&quot;&lt;&quot; + ElementName + &quot; class=\&quot;&quot; + ElementClass + &quot;\&quot; id=\&quot;&quot; + ElementId + &quot;\&quot;&gt;&lt;/&quot; + ElementName + &quot;&gt;&quot;));
            extraMenuWidth = extraMenuWidth + ExtraWidth;
        }

        public void InsertSplitter()
        {
            Splitter icon = new Splitter();
            Icons.Add(icon);
        }
        public void InsertSplitter(int Index)
        {
            Splitter icon = new Splitter();
            Icons.Insert(Index, icon);
        }

        /// &lt;summary&gt;
        /// Inserts a new web control into the scrolling menu
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;control&quot;&gt;&lt;/param&gt;
        /// &lt;param name=&quot;extraWidth&quot;&gt;The additional width to extend the scrolling menu by if the control being inserted is wider than the standard&lt;/param&gt;
        public void InsertNewControl(Control control, int extraWidth = 0)
        {
           Icons.Add(control);
           // _extraMenuWidth = _extraMenuWidth + extraWidth;
        }


        /// &lt;summary&gt;
        /// Finds the index of the n-th Splitter in this Menu
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;n&quot;&gt;&lt;/param&gt;
        /// &lt;returns&gt;The index of the n-th Splitter, or -1 if the number of Splitters is smaller than n&lt;/returns&gt;
        public int FindSplitter(int n)
        {
            var count = 0;
            for (var i = 0; i &lt; Icons.Count; i++)
            {
                if (Icons[i].GetType() == typeof(Splitter))
                {
                    count++;

                    if (count == n)
                        return i;
                }
            }

            return -1;
        }


        private HtmlGenericControl toolbar;
        private HtmlGenericControl wrap;
        private HtmlGenericControl group;

        protected override void CreateChildControls()
        {   
            toolbar = new HtmlGenericControl { TagName = &quot;div&quot; };
            toolbar.Attributes.Add(&quot;class&quot;, &quot;btn-toolbar umb-btn-toolbar&quot;);
            this.Controls.Add(toolbar);

            group = new HtmlGenericControl { TagName = &quot;div&quot;, ID = this.ClientID + &quot;_group&quot; };
            group.Attributes.Add(&quot;class&quot;, &quot;btn-group&quot;);
            toolbar.Controls.Add(group);
        }

        protected override void OnLoad(EventArgs e)
        {
            foreach (Control item in Icons)
            {
                group.Controls.Add(item);
                if (item.ID != &quot;&quot;)
                    iconIds = iconIds + item.ID + &quot;,&quot;;
            }
            base.OnLoad(e);
        }
        
       

        protected override void OnInit(EventArgs e)
        {
            
            EnsureChildControls();
            base.OnInit(e);
        }

    }
}
    </pre>
    <script type="text/javascript">
      highlightRanges([[21,9,21,50,0],[23,9,23,40,0],[26,9,26,10,0],[27,13,27,44,0],[28,13,28,39,0],[29,13,29,25,0],[30,9,30,10,0],[33,9,33,10,0],[34,13,34,44,0],[35,13,35,29,0],[36,13,36,25,0],[37,9,37,10,0],[40,9,40,10,0],[41,13,41,46,0],[42,13,42,29,0],[43,13,43,25,0],[44,9,44,10,0],[47,9,47,10,0],[48,13,48,47,0],[50,13,50,28,0],[51,17,51,42,0],[53,17,53,32,0],[55,13,55,24,0],[56,9,56,10,0],[59,9,59,10,0],[60,13,60,58,0],[61,13,61,29,0],[62,13,62,25,0],[63,9,63,10,0],[66,9,66,10,0],[67,13,67,58,0],[68,13,68,39,0],[69,13,69,25,0],[70,9,70,10,0],[74,9,74,10,0],[75,13,75,52,0],[76,13,76,29,0],[77,13,77,25,0],[78,9,78,10,0],[81,9,81,10,0],[82,13,82,146,0],[83,13,83,58,0],[84,9,84,10,0],[87,9,87,10,0],[88,13,88,44,0],[89,13,89,29,0],[90,9,90,10,0],[92,9,92,10,0],[93,13,93,44,0],[94,13,94,39,0],[95,9,95,10,0],[103,9,103,10,0],[104,12,104,31,0],[106,9,106,10,0],[115,9,115,10,0],[116,13,116,27,0],[117,18,117,27,0],[117,29,117,44,0],[117,46,117,49,0],[118,13,118,14,0],[119,17,119,60,0],[120,17,120,18,0],[121,21,121,29,0],[123,21,123,36,0],[124,25,124,34,0],[125,17,125,18,0],[126,13,126,14,0],[128,13,128,23,0],[129,9,129,10,0],[137,9,137,10,0],[138,13,138,66,0],[139,13,139,76,0],[140,13,140,40,0],[142,13,142,95,0],[143,13,143,56,0],[144,13,144,41,0],[145,9,145,10,0],[148,9,148,10,0],[149,13,149,20,0],[149,22,149,34,0],[149,35,149,37,0],[149,38,149,43,0],[150,13,150,14,0],[151,17,151,42,0],[152,17,152,35,0],[153,21,153,55,0],[154,13,154,14,0],[155,13,155,28,0],[156,9,156,10,0],[161,9,161,10,0],[163,13,163,35,0],[164,13,164,28,0],[165,9,165,10,0]]);
    </script>
  </body>
</html>