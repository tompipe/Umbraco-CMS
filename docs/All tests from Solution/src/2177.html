<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Tom Pipe\Documents\Hexadigital\Code\Umbraco\Umbraco-CMS\src\Umbraco.Core\Dynamics\DynamicXml.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Linq;
using System.Dynamic;
using System.Reflection;
using System.Xml.Linq;
using System.Xml.XPath;
using System.Collections;
using System.IO;
using System.Web;
using Umbraco.Core;
using Umbraco.Core.Cache;

namespace Umbraco.Core.Dynamics
{
	[TypeConverter(typeof(DynamicXmlConverter))]
	public class DynamicXml : DynamicObject, IEnumerable&lt;DynamicXml&gt;, IEnumerable&lt;XElement&gt;
    {
        /// &lt;summary&gt;
        /// Returns the XElement used to create the DynamicXml structure
        /// &lt;/summary&gt;
        public XElement BaseElement { get; set; }

	    /// &lt;summary&gt;
        /// Returns the raw XElement used to create the DynamicXml structure if one was specified otherwise returns the 
        /// same value as BaseElement.
        /// &lt;/summary&gt;
        /// &lt;remarks&gt;
        /// This is purely used for when an instance of DynamicXml is created with the overload that supports
        /// passing in both a raw xml version and a dash-stripped xml version. Otherwise this value is exactly the 
        /// same as BaseElement.
        /// &lt;/remarks&gt;
        public XElement RawXmlElement { get; internal set; }

        /// &lt;summary&gt;
        /// Constructor
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;baseElement&quot;&gt;&lt;/param&gt;
        public DynamicXml(XElement baseElement)
        {
            if (baseElement == null) return;

            //same
            RawXmlElement = baseElement;
            BaseElement = baseElement;
        }

        /// &lt;summary&gt;
        /// When this constructor is used the BaseElement becomes equivalent to the strippedXml structure
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;strippedXml&quot;&gt;&lt;/param&gt;
        /// &lt;param name=&quot;rawXml&quot;&gt;&lt;/param&gt;
        internal DynamicXml(XElement strippedXml, XElement rawXml)
        {
            if (rawXml == null) return;
            if (strippedXml == null) return;

            RawXmlElement = rawXml;
            BaseElement = strippedXml;
        }

        /// &lt;summary&gt;
        /// When this constructor is used the BaseElement becomes equivalent to the strippedXml structure
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;strippedXml&quot;&gt;&lt;/param&gt;
        /// &lt;param name=&quot;rawXml&quot;&gt;&lt;/param&gt;
        internal DynamicXml(string strippedXml, string rawXml)
        {
            if (rawXml == null) return;
            if (strippedXml == null) return;

            RawXmlElement = XElement.Parse(rawXml);
            BaseElement = XElement.Parse(strippedXml);
        }

        /// &lt;summary&gt;
        /// Constructor
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;xml&quot;&gt;&lt;/param&gt;
	    public DynamicXml(string xml)
        {
            if (xml.IsNullOrWhiteSpace()) return;

            var baseElement = XElement.Parse(xml);
            
            //same
            RawXmlElement = baseElement;
            BaseElement = baseElement;
        }

        /// &lt;summary&gt;
        /// Constructor
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;xpni&quot;&gt;&lt;/param&gt;
        public DynamicXml(XPathNodeIterator xpni)
        {
            if (xpni == null) return;
            if (xpni.Current == null) return;

            //TODO: OuterXml is really bad for performance! Should actually use the XPathNodeIterator api
            var xml = xpni.Current.OuterXml;                    
            var baseElement = XElement.Parse(xml);
            
            //same
            RawXmlElement = baseElement;
            BaseElement = baseElement;
        }

	    /// &lt;summary&gt;
        /// Returns the InnertText based on the BaseElement object
        /// &lt;/summary&gt;
        public string InnerText
        {
            get
            {
                return BaseElement.Value;
            }
        }

        /// &lt;summary&gt;
        /// Returns the string representation of the BaseElement object
        /// &lt;/summary&gt;
        /// &lt;returns&gt;&lt;/returns&gt;
        public string ToXml()
        {
            return BaseElement.ToString(SaveOptions.DisableFormatting);
        }

        /// &lt;summary&gt;
        /// Returns the string representation of the RawXmlElement object
        /// &lt;/summary&gt;
        /// &lt;returns&gt;&lt;/returns&gt;
        public string ToRawXml()
        {
            return RawXmlElement.ToString(SaveOptions.DisableFormatting);
        }

        public override bool TryGetIndex(GetIndexBinder binder, object[] indexes, out object result)
        {
            int index = 0;
            if (indexes.Length &gt; 0)
            {
                index = (int)indexes[0];
                result = new DynamicXml(
                    RawXmlElement.Elements().ElementAt(index),
                    BaseElement.Elements().ElementAt(index));
                return true;
            }
            return base.TryGetIndex(binder, indexes, out result);
        }
        public override bool TryInvokeMember(InvokeMemberBinder binder, object[] args, out object result)
        {
            if (args.Length == 0 &amp;&amp; binder.Name == &quot;ToXml&quot;)
            {
                result = BaseElement.ToString();
                return true;
            }
            if (args.Length == 1 &amp;&amp; binder.Name == &quot;XPath&quot;)
            {
                var elements = BaseElement.XPathSelectElements(args[0].ToString());
                HandleIEnumerableXElement(elements, out result);
                return true; //anyway
            }

            var runtimeCache = ApplicationContext.Current != null ? ApplicationContext.Current.ApplicationCache.RuntimeCache : new NullCacheProvider();

			//ok, now lets try to match by member, property, extensino method
            var attempt = DynamicInstanceHelper.TryInvokeMember(runtimeCache, this, binder, args, new[]
				{
					typeof (IEnumerable&lt;DynamicXml&gt;),
					typeof (IEnumerable&lt;XElement&gt;),
					typeof (DynamicXml)
				});

			if (attempt.Success)
			{
				result = attempt.Result.ObjectResult;

				//need to check the return type and possibly cast if result is from an extension method found
				if (attempt.Result.Reason == DynamicInstanceHelper.TryInvokeMemberSuccessReason.FoundExtensionMethod)
				{
					//if the result is already a DynamicXml instance, then we do not need to cast
					if (attempt.Result.ObjectResult != null &amp;&amp; !(attempt.Result.ObjectResult is DynamicXml))
					{
						if (attempt.Result.ObjectResult is XElement)
						{
							result = new DynamicXml((XElement)attempt.Result.ObjectResult);
						}
						else if (attempt.Result.ObjectResult is IEnumerable&lt;XElement&gt;)
						{
							result = ((IEnumerable&lt;XElement&gt;)attempt.Result.ObjectResult).Select(x =&gt; new DynamicXml(x));
						}
						else if (attempt.Result.ObjectResult is IEnumerable&lt;DynamicXml&gt;)
						{
						    result = ((IEnumerable&lt;DynamicXml&gt;) attempt.Result.ObjectResult).Select(x =&gt; new DynamicXml(
						                                                                                     x.RawXmlElement,
						                                                                                     x.BaseElement));
						}
					}
				}
				return true;
			}

			//this is the result of an extension method execution gone wrong so we return dynamic null
			if (attempt.Result.Reason == DynamicInstanceHelper.TryInvokeMemberSuccessReason.FoundExtensionMethod
				&amp;&amp; attempt.Exception != null &amp;&amp; attempt.Exception is TargetInvocationException)
			{
				result = DynamicNull.Null;
				return true;
			}

			result = null;
			return false;

        }
        public override bool TryGetMember(GetMemberBinder binder, out object result)
        {
            if (RawXmlElement == null || binder == null)
            {
                result = null;
                return false;
            }

            //Check if the name matches a node based on the BaseElement (which if the correct ctor is used, will be dash stripped)
            var elementByNameAttempt = CheckNodeNameMatch(binder.Name, BaseElement);
            if (elementByNameAttempt.Success)
            {
                if (HandleIEnumerableXElement(elementByNameAttempt.Result, out result))
                {
                    return true;
                }
            }

            //Check if the name matches a node based on the BaseElement (which if the correct ctor is used, will be dash stripped)
            var attributeByNameAttempt = CheckAttributeNameMatch(binder.Name, BaseElement);
            if (attributeByNameAttempt.Success)
            {
                if (attributeByNameAttempt.Result.Count() &gt; 1)
                {
                    //more than one attribute matched, lets return the collection
                    result = attributeByNameAttempt.Result;
                }
                else
                {
                    //only one attribute matched, lets just return it
                    result = attributeByNameAttempt.Result.FirstOrDefault(); 
                }
                return true; 
            }
           

            return base.TryGetMember(binder, out result);
        }

        /// &lt;summary&gt;
        /// Checks if the &#39;name&#39; matches any attributes of xmlElement
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;name&quot;&gt;The name to match&lt;/param&gt;
        /// &lt;param name=&quot;xmlElement&quot;&gt;The xml element to check against&lt;/param&gt;
        /// &lt;returns&gt;&lt;/returns&gt;
        private static Attempt&lt;IEnumerable&lt;string&gt;&gt; CheckAttributeNameMatch(string name, XElement xmlElement)
        {
            var attributes = xmlElement.Attributes(name).Select(attr =&gt; attr.Value).ToArray();
            if (attributes.Any())
            {
                return Attempt&lt;IEnumerable&lt;string&gt;&gt;.Succeed(attributes);
            }

            if (!attributes.Any() &amp;&amp; xmlElement.Name == &quot;root&quot; &amp;&amp; xmlElement.Elements().Count() == 1)
            {
                //no elements matched and this node is called &#39;root&#39; and only has one child... lets see if it matches.
                var childElements = xmlElement.Elements().ElementAt(0).Attributes(name).Select(attr =&gt; attr.Value).ToArray();
                if (childElements.Any())
                {
                    //we&#39;ve found a match by the first child of an element called &#39;root&#39; (strange, but sure)
                    return Attempt&lt;IEnumerable&lt;string&gt;&gt;.Succeed(childElements);
                }
            }            

            //no deal
            return Attempt&lt;IEnumerable&lt;string&gt;&gt;.Fail();
	    }

	    /// &lt;summary&gt;
        /// Checks if the &#39;name&#39; matches any elements of xmlElement
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;name&quot;&gt;The name to match&lt;/param&gt;
        /// &lt;param name=&quot;xmlElement&quot;&gt;The xml element to check against&lt;/param&gt;
        /// &lt;returns&gt;&lt;/returns&gt;
        private Attempt&lt;IEnumerable&lt;XElement&gt;&gt; CheckNodeNameMatch(string name, XElement xmlElement)
        {
            //Go ahead and try to fetch all of the elements matching the member name, and wrap them
            var elements = xmlElement.Elements(name).ToArray();

            //Check if we&#39;ve got any matches, if so then return true
            if (elements.Any())
            {
                return Attempt&lt;IEnumerable&lt;XElement&gt;&gt;.Succeed(elements);
            }

            if (!elements.Any() &amp;&amp; xmlElement.Name == &quot;root&quot; &amp;&amp; xmlElement.Elements().Count() == 1)
            {
                //no elements matched and this node is called &#39;root&#39; and only has one child... lets see if it matches.
                var childElements = xmlElement.Elements().ElementAt(0).Elements(name).ToArray();
                if (childElements.Any())
                {
                    //we&#39;ve found a match by the first child of an element called &#39;root&#39; (strange, but sure)
                    return Attempt&lt;IEnumerable&lt;XElement&gt;&gt;.Succeed(childElements);
                }
            }
            
            //no deal
            return Attempt&lt;IEnumerable&lt;XElement&gt;&gt;.Fail();
        }

        private bool HandleIEnumerableXElement(IEnumerable&lt;XElement&gt; elements, out object result)
        {
            //Get the count now, so we don&#39;t have to call it twice
            int count = elements.Count();
            if (count &gt; 0)
            {
                var firstElement = elements.FirstOrDefault();
                //we have a single element, does it have any children?
                if (firstElement != null &amp;&amp; firstElement.Elements().Count() == 0 &amp;&amp; !firstElement.HasAttributes)
                {
                    //no, return the text
                    result = firstElement.Value;
                    return true;
                }
                else
                {
                    //We have more than one matching element, so let&#39;s return the collection
                    //elements is IEnumerable&lt;DynamicXml&gt;
                    //but we want to be able to re-enter this code
                    var root = new XElement(XName.Get(&quot;root&quot;));
                    root.Add(elements);
                    result = new DynamicXml(root);

                    //From here, you&#39;ll either end up back here (because you have &lt;root&gt;&lt;node&gt;&lt;node&gt;)
                    //or you use [] indexing and you end up with a single element
                    return true;
                }
            }
            result = null;
            return false;
        }

        /// &lt;summary&gt;
        /// Executes an XPath expression over the BaseElement object
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;expression&quot;&gt;&lt;/param&gt;
        /// &lt;returns&gt;&lt;/returns&gt;
        public DynamicXml XPath(string expression)
        {
            var matched = BaseElement.XPathSelectElements(expression);
            var root = new DynamicXml(&quot;&lt;results/&gt;&quot;);
            foreach (var element in matched)
            {
                root.BaseElement.Add(element);
            }
            return root;
        }

		/// &lt;summary&gt;
        /// Return the string version of the BaseElement object
		/// &lt;/summary&gt;
		/// &lt;returns&gt;&lt;/returns&gt;
		public override string ToString()
		{
			return ToXml();
		}

        public IHtmlString ToHtml()
        {
            return new HtmlString(this.ToXml());
        }
        public DynamicXml Find(string expression)
        {
            return new DynamicXml(BaseElement.XPathSelectElements(expression).FirstOrDefault());
        }

        public DynamicXml Find(string attributeName, object value)
        {
            string expression = string.Format(&quot;//*[{0}=&#39;{1}&#39;]&quot;, attributeName, value);
            return new DynamicXml(BaseElement.XPathSelectElements(expression).FirstOrDefault());
        }

	    IEnumerator&lt;XElement&gt; IEnumerable&lt;XElement&gt;.GetEnumerator()
	    {
            return BaseElement.Elements().GetEnumerator();
	    }

	    public IEnumerator&lt;DynamicXml&gt; GetEnumerator()
	    {
            return BaseElement.Elements().Select(e =&gt; new DynamicXml(e)).GetEnumerator();
	    }

		IEnumerator IEnumerable.GetEnumerator()
		{
			return GetEnumerator();
		}
	    
        public int Count()
        {
			return ((IEnumerable&lt;XElement&gt;)this).Count();
        }

        public bool Any()
        {
			return ((IEnumerable&lt;XElement&gt;)this).Any();
        }

		public IEnumerable&lt;DynamicXml&gt; Take(int count)
		{
			return ((IEnumerable&lt;DynamicXml&gt;)this).Take(count);
		}

		public IEnumerable&lt;DynamicXml&gt; Skip(int count)
		{
			return ((IEnumerable&lt;DynamicXml&gt;)this).Skip(count);
		} 

        public bool IsNull()
        {
            return false;
        }
        public bool HasValue()
        {
            return true;
        }

        public bool IsFirst()
        {
            return IsHelper(n =&gt; n.Index() == 0);
        }
        public HtmlString IsFirst(string valueIfTrue)
        {
            return IsHelper(n =&gt; n.Index() == 0, valueIfTrue);
        }
        public HtmlString IsFirst(string valueIfTrue, string valueIfFalse)
        {
            return IsHelper(n =&gt; n.Index() == 0, valueIfTrue, valueIfFalse);
        }
        public bool IsNotFirst()
        {
            return !IsHelper(n =&gt; n.Index() == 0);
        }
        public HtmlString IsNotFirst(string valueIfTrue)
        {
            return IsHelper(n =&gt; n.Index() != 0, valueIfTrue);
        }
        public HtmlString IsNotFirst(string valueIfTrue, string valueIfFalse)
        {
            return IsHelper(n =&gt; n.Index() != 0, valueIfTrue, valueIfFalse);
        }
        public bool IsPosition(int index)
        {
            if (BaseElement == null || BaseElement.Parent == null)
            {
                return false;
            }
            return IsHelper(n =&gt; n.Index() == index);
        }
        public HtmlString IsPosition(int index, string valueIfTrue)
        {
            if (BaseElement == null || BaseElement.Parent == null)
            {
                return new HtmlString(string.Empty);
            }
            return IsHelper(n =&gt; n.Index() == index, valueIfTrue);
        }
        public HtmlString IsPosition(int index, string valueIfTrue, string valueIfFalse)
        {
            if (BaseElement == null || BaseElement.Parent == null)
            {
                return new HtmlString(valueIfFalse);
            }
            return IsHelper(n =&gt; n.Index() == index, valueIfTrue, valueIfFalse);
        }
        public bool IsModZero(int modulus)
        {
            if (BaseElement == null || BaseElement.Parent == null)
            {
                return false;
            }
            return IsHelper(n =&gt; n.Index() % modulus == 0);
        }
        public HtmlString IsModZero(int modulus, string valueIfTrue)
        {
            if (BaseElement == null || BaseElement.Parent == null)
            {
                return new HtmlString(string.Empty);
            }
            return IsHelper(n =&gt; n.Index() % modulus == 0, valueIfTrue);
        }
        public HtmlString IsModZero(int modulus, string valueIfTrue, string valueIfFalse)
        {
            if (BaseElement == null || BaseElement.Parent == null)
            {
                return new HtmlString(valueIfFalse);
            }
            return IsHelper(n =&gt; n.Index() % modulus == 0, valueIfTrue, valueIfFalse);
        }

        public bool IsNotModZero(int modulus)
        {
            if (BaseElement == null || BaseElement.Parent == null)
            {
                return false;
            }
            return IsHelper(n =&gt; n.Index() % modulus != 0);
        }
        public HtmlString IsNotModZero(int modulus, string valueIfTrue)
        {
            if (BaseElement == null || this.BaseElement.Parent == null)
            {
                return new HtmlString(string.Empty);
            }
            return IsHelper(n =&gt; n.Index() % modulus != 0, valueIfTrue);
        }
        public HtmlString IsNotModZero(int modulus, string valueIfTrue, string valueIfFalse)
        {
            if (this.BaseElement == null || this.BaseElement.Parent == null)
            {
                return new HtmlString(valueIfFalse);
            }
            return IsHelper(n =&gt; n.Index() % modulus != 0, valueIfTrue, valueIfFalse);
        }
        public bool IsNotPosition(int index)
        {
            if (this.BaseElement == null || this.BaseElement.Parent == null)
            {
                return false;
            }
            return !IsHelper(n =&gt; n.Index() == index);
        }
        public HtmlString IsNotPosition(int index, string valueIfTrue)
        {
            if (this.BaseElement == null || this.BaseElement.Parent == null)
            {
                return new HtmlString(string.Empty);
            }
            return IsHelper(n =&gt; n.Index() != index, valueIfTrue);
        }
        public HtmlString IsNotPosition(int index, string valueIfTrue, string valueIfFalse)
        {
            if (this.BaseElement == null || this.BaseElement.Parent == null)
            {
                return new HtmlString(valueIfFalse);
            }
            return IsHelper(n =&gt; n.Index() != index, valueIfTrue, valueIfFalse);
        }
        public bool IsLast()
        {
            if (this.BaseElement == null || this.BaseElement.Parent == null)
            {
                return false;
            }
            int count = this.BaseElement.Parent.Elements().Count();
            return IsHelper(n =&gt; n.Index() == count - 1);
        }
        public HtmlString IsLast(string valueIfTrue)
        {
            if (this.BaseElement == null || this.BaseElement.Parent == null)
            {
                return new HtmlString(string.Empty);
            }
            int count = this.BaseElement.Parent.Elements().Count();
            return IsHelper(n =&gt; n.Index() == count - 1, valueIfTrue);
        }
        public HtmlString IsLast(string valueIfTrue, string valueIfFalse)
        {
            if (this.BaseElement == null || this.BaseElement.Parent == null)
            {
                return new HtmlString(valueIfFalse);
            }
            int count = this.BaseElement.Parent.Elements().Count();
            return IsHelper(n =&gt; n.Index() == count - 1, valueIfTrue, valueIfFalse);
        }
        public bool IsNotLast()
        {
            if (this.BaseElement == null || this.BaseElement.Parent == null)
            {
                return false;
            }
            int count = this.BaseElement.Parent.Elements().Count();
            return !IsHelper(n =&gt; n.Index() == count - 1);
        }
        public HtmlString IsNotLast(string valueIfTrue)
        {
            if (this.BaseElement == null || this.BaseElement.Parent == null)
            {
                return new HtmlString(string.Empty);
            }
            int count = this.BaseElement.Parent.Elements().Count();
            return IsHelper(n =&gt; n.Index() != count - 1, valueIfTrue);
        }
        public HtmlString IsNotLast(string valueIfTrue, string valueIfFalse)
        {
            if (this.BaseElement == null || this.BaseElement.Parent == null)
            {
                return new HtmlString(valueIfFalse);
            }
            int count = this.BaseElement.Parent.Elements().Count();
            return IsHelper(n =&gt; n.Index() != count - 1, valueIfTrue, valueIfFalse);
        }
        public bool IsEven()
        {
            return IsHelper(n =&gt; n.Index() % 2 == 0);
        }
        public HtmlString IsEven(string valueIfTrue)
        {
            return IsHelper(n =&gt; n.Index() % 2 == 0, valueIfTrue);
        }
        public HtmlString IsEven(string valueIfTrue, string valueIfFalse)
        {
            return IsHelper(n =&gt; n.Index() % 2 == 0, valueIfTrue, valueIfFalse);
        }
        public bool IsOdd()
        {
            return IsHelper(n =&gt; n.Index() % 2 == 1);
        }
        public HtmlString IsOdd(string valueIfTrue)
        {
            return IsHelper(n =&gt; n.Index() % 2 == 1, valueIfTrue);
        }
        public HtmlString IsOdd(string valueIfTrue, string valueIfFalse)
        {
            return IsHelper(n =&gt; n.Index() % 2 == 1, valueIfTrue, valueIfFalse);
        }
        public bool IsEqual(DynamicXml other)
        {
            return IsHelper(n =&gt; n.BaseElement == other.BaseElement);
        }
        public HtmlString IsEqual(DynamicXml other, string valueIfTrue)
        {
            return IsHelper(n =&gt; n.BaseElement == other.BaseElement, valueIfTrue);
        }
        public HtmlString IsEqual(DynamicXml other, string valueIfTrue, string valueIfFalse)
        {
            return IsHelper(n =&gt; n.BaseElement == other.BaseElement, valueIfTrue, valueIfFalse);
        }
        public bool IsNotEqual(DynamicXml other)
        {
            return IsHelper(n =&gt; n.BaseElement != other.BaseElement);
        }
        public HtmlString IsNotEqual(DynamicXml other, string valueIfTrue)
        {
            return IsHelper(n =&gt; n.BaseElement != other.BaseElement, valueIfTrue);
        }
        public HtmlString IsNotEqual(DynamicXml other, string valueIfTrue, string valueIfFalse)
        {
            return IsHelper(n =&gt; n.BaseElement != other.BaseElement, valueIfTrue, valueIfFalse);
        }
        public bool IsDescendant(DynamicXml other)
        {
            var ancestors = this.Ancestors();
            return IsHelper(n =&gt; ancestors.FirstOrDefault(ancestor =&gt; ancestor.BaseElement == other.BaseElement) != null);
        }
        public HtmlString IsDescendant(DynamicXml other, string valueIfTrue)
        {
            var ancestors = this.Ancestors();
			return IsHelper(n =&gt; ancestors.FirstOrDefault(ancestor =&gt; ancestor.BaseElement == other.BaseElement) != null, valueIfTrue);
        }
        public HtmlString IsDescendant(DynamicXml other, string valueIfTrue, string valueIfFalse)
        {
            var ancestors = this.Ancestors();
			return IsHelper(n =&gt; ancestors.FirstOrDefault(ancestor =&gt; ancestor.BaseElement == other.BaseElement) != null, valueIfTrue, valueIfFalse);
        }
        public bool IsDescendantOrSelf(DynamicXml other)
        {
            var ancestors = this.AncestorsOrSelf();
			return IsHelper(n =&gt; ancestors.FirstOrDefault(ancestor =&gt; ancestor.BaseElement == other.BaseElement) != null);
        }
        public HtmlString IsDescendantOrSelf(DynamicXml other, string valueIfTrue)
        {
            var ancestors = this.AncestorsOrSelf();
			return IsHelper(n =&gt; ancestors.FirstOrDefault(ancestor =&gt; ancestor.BaseElement == other.BaseElement) != null, valueIfTrue);
        }
        public HtmlString IsDescendantOrSelf(DynamicXml other, string valueIfTrue, string valueIfFalse)
        {
            var ancestors = this.AncestorsOrSelf();
			return IsHelper(n =&gt; ancestors.FirstOrDefault(ancestor =&gt; ancestor.BaseElement == other.BaseElement) != null, valueIfTrue, valueIfFalse);
        }
        public bool IsAncestor(DynamicXml other)
        {
            var descendants = this.Descendants();
			return IsHelper(n =&gt; descendants.FirstOrDefault(descendant =&gt; descendant.BaseElement == other.BaseElement) != null);
        }
        public HtmlString IsAncestor(DynamicXml other, string valueIfTrue)
        {
            var descendants = this.Descendants();
			return IsHelper(n =&gt; descendants.FirstOrDefault(descendant =&gt; descendant.BaseElement == other.BaseElement) != null, valueIfTrue);
        }
        public HtmlString IsAncestor(DynamicXml other, string valueIfTrue, string valueIfFalse)
        {
            var descendants = this.Descendants();
			return IsHelper(n =&gt; descendants.FirstOrDefault(descendant =&gt; descendant.BaseElement == other.BaseElement) != null, valueIfTrue, valueIfFalse);
        }
        public bool IsAncestorOrSelf(DynamicXml other)
        {
            var descendants = this.DescendantsOrSelf();
			return IsHelper(n =&gt; descendants.FirstOrDefault(descendant =&gt; descendant.BaseElement == other.BaseElement) != null);
        }
        public HtmlString IsAncestorOrSelf(DynamicXml other, string valueIfTrue)
        {
            var descendants = this.DescendantsOrSelf();
			return IsHelper(n =&gt; descendants.FirstOrDefault(descendant =&gt; descendant.BaseElement == other.BaseElement) != null, valueIfTrue);
        }
        public HtmlString IsAncestorOrSelf(DynamicXml other, string valueIfTrue, string valueIfFalse)
        {
            var descendants = this.DescendantsOrSelf();
			return IsHelper(n =&gt; descendants.FirstOrDefault(descendant =&gt; descendant.BaseElement == other.BaseElement) != null, valueIfTrue, valueIfFalse);
        }
        public IEnumerable&lt;DynamicXml&gt; Descendants()
        {
            return Descendants(n =&gt; true);
        }
		public IEnumerable&lt;DynamicXml&gt; Descendants(Func&lt;XElement, bool&gt; func)
        {
            //var flattenedNodes = this.BaseElement.Elements().Map(func, n =&gt; n.Elements());
		    var flattenedNodes = this.BaseElement.Elements().SelectMany(n =&gt; n.Elements()).Where(func);
            return flattenedNodes.ToList().ConvertAll(n =&gt; new DynamicXml(n));
        }
		public IEnumerable&lt;DynamicXml&gt; DescendantsOrSelf()
        {
            return DescendantsOrSelf(n =&gt; true);
        }
		public IEnumerable&lt;DynamicXml&gt; DescendantsOrSelf(Func&lt;XElement, bool&gt; func)
        {
            //var flattenedNodes = this.BaseElement.Elements().Map(func, n =&gt; n.Elements());
		    var flattenedNodes = this.BaseElement.Elements().SelectMany(n =&gt; n.Elements()).Where(func);
            var list = new List&lt;DynamicXml&gt;();
            list.Add(this);
            list.AddRange(flattenedNodes.ToList().ConvertAll(n =&gt; new DynamicXml(n)));
            return list;
        }
		public IEnumerable&lt;DynamicXml&gt; Ancestors()
        {
            return Ancestors(item =&gt; true);
        }
		public IEnumerable&lt;DynamicXml&gt; Ancestors(Func&lt;XElement, bool&gt; func)
        {
            var ancestorList = new List&lt;XElement&gt;();
            var node = this.BaseElement;
            while (node != null)
            {
                if (node.Parent == null) break;
                XElement parent = node.Parent;
                if (parent != null)
                {
                    if (this.BaseElement != parent)
                    {
                        node = parent;
                        if (func(node))
                        {
                            ancestorList.Add(node);
                        }
                    }
                    else
                    {
                        break;
                    }
                }
                else
                {
                    break;
                }
            }
            ancestorList.Reverse();
            return ancestorList.ConvertAll(item =&gt; new DynamicXml(item));
        }
		public IEnumerable&lt;DynamicXml&gt; AncestorsOrSelf()
        {
            return AncestorsOrSelf(item =&gt; true);
        }
		public IEnumerable&lt;DynamicXml&gt; AncestorsOrSelf(Func&lt;XElement, bool&gt; func)
        {
            List&lt;XElement&gt; ancestorList = new List&lt;XElement&gt;();
            var node = this.BaseElement;
            ancestorList.Add(node);
            while (node != null)
            {
                if (node.Parent == null) break;
                XElement parent = node.Parent;
                if (parent != null)
                {
                    if (this.BaseElement != parent)
                    {
                        node = parent;
                        if (func(node))
                        {
                            ancestorList.Add(node);
                        }
                    }
                    else
                    {
                        break;
                    }
                }
                else
                {
                    break;
                }
            }
            ancestorList.Reverse();
            return ancestorList.ConvertAll(item =&gt; new DynamicXml(item));
        }

        public int Index()
        {
            if (this.BaseElement != null &amp;&amp; this.BaseElement.Parent != null)
            {
                var elements = this.BaseElement.Parent.Elements();
                int index = 0;
                foreach (var element in elements)
                {
                    if (element == this.BaseElement) break;
                    index++;
                }
                return index;
            }
            return 0;
        }

        public bool IsHelper(Func&lt;DynamicXml, bool&gt; test)
        {
            return test(this);
        }
        public HtmlString IsHelper(Func&lt;DynamicXml, bool&gt; test, string valueIfTrue)
        {
            return IsHelper(test, valueIfTrue, string.Empty);
        }
        public HtmlString IsHelper(Func&lt;DynamicXml, bool&gt; test, string valueIfTrue, string valueIfFalse)
        {
            return test(this) ? new HtmlString(valueIfTrue) : new HtmlString(valueIfFalse);
        }

        [Obsolete(&quot;Use XmlHelper.StripDashesInElementOrAttributeNames instead&quot;)]
        public static string StripDashesInElementOrAttributeNames(string xml)
        {
            return XmlHelper.StripDashesInElementOrAttributeNames(xml);
        }

	    
    }
}

    </pre>
    <script type="text/javascript">
      highlightRanges([[23,39,23,43,1],[23,44,23,48,1],[34,41,34,45,1],[34,46,34,59,1],[40,9,40,48,1],[41,9,41,10,1],[42,13,42,37,1],[42,38,42,45,1],[45,13,45,41,1],[46,13,46,39,1],[47,9,47,10,1],[54,9,54,67,0],[55,9,55,10,0],[56,13,56,32,0],[56,33,56,40,0],[57,13,57,37,0],[57,38,57,45,0],[59,13,59,36,0],[60,13,60,39,0],[61,9,61,10,0],[68,9,68,63,1],[69,9,69,10,1],[70,13,70,32,1],[70,33,70,40,0],[71,13,71,37,1],[71,38,71,45,0],[73,13,73,52,1],[74,13,74,55,1],[75,9,75,10,1],[81,6,81,35,1],[82,9,82,10,1],[83,13,83,42,1],[83,43,83,50,0],[85,13,85,51,1],[88,13,88,41,1],[89,13,89,39,1],[90,9,90,10,1],[96,9,96,50,0],[97,9,97,10,0],[98,13,98,30,0],[98,31,98,38,0],[99,13,99,38,0],[99,39,99,46,0],[102,13,102,45,0],[103,13,103,51,0],[106,13,106,41,0],[107,13,107,39,0],[108,9,108,10,0],[116,13,116,14,0],[117,17,117,42,0],[118,13,118,14,0],[126,9,126,10,1],[127,13,127,72,1],[128,9,128,10,1],[135,9,135,10,1],[136,13,136,74,1],[137,9,137,10,1],[140,9,140,10,0],[141,13,141,27,0],[142,13,142,36,0],[143,13,143,14,0],[144,17,144,41,0],[145,17,147,62,0],[148,17,148,29,0],[150,13,150,66,0],[151,9,151,10,0],[153,9,153,10,1],[154,13,154,60,1],[155,13,155,14,0],[156,17,156,49,0],[157,17,157,29,0],[159,13,159,60,1],[160,13,160,14,0],[161,17,161,84,0],[162,17,162,65,0],[163,17,163,29,0],[166,13,166,152,1],[169,13,174,8,1],[176,4,176,24,1],[177,4,177,5,1],[178,5,178,42,1],[181,5,181,106,1],[182,5,182,6,1],[184,6,184,94,1],[185,6,185,7,0],[186,7,186,51,0],[187,7,187,8,0],[188,8,188,71,0],[189,7,189,8,0],[190,12,190,69,0],[191,7,191,8,0],[192,8,192,82,0],[192,82,192,99,0],[192,99,192,101,0],[192,8,192,101,0],[193,7,193,8,0],[194,12,194,71,0],[195,7,195,8,0],[196,11,196,88,0],[196,88,198,106,0],[198,106,198,108,0],[196,11,198,108,0],[199,7,199,8,0],[200,6,200,7,0],[201,5,201,6,1],[202,5,202,17,1],[206,4,207,84,0],[208,4,208,5,0],[209,5,209,31,0],[210,5,210,17,0],[213,4,213,18,0],[214,4,214,17,0],[216,9,216,10,1],[218,9,218,10,1],[219,13,219,57,1],[220,13,220,14,1],[221,17,221,31,1],[222,17,222,30,1],[226,13,226,85,1],[227,13,227,46,1],[228,13,228,14,1],[229,17,229,88,1],[230,17,230,18,1],[231,21,231,33,1],[233,13,233,14,0],[236,13,236,92,1],[237,13,237,48,1],[238,13,238,14,1],[239,17,239,63,1],[240,17,240,18,0],[242,21,242,60,0],[243,17,243,18,0],[245,17,245,18,1],[247,21,247,77,1],[248,17,248,18,1],[249,17,249,29,1],[253,13,253,58,0],[254,9,254,10,1],[263,9,263,10,1],[264,13,264,73,1],[264,73,264,83,1],[264,83,264,95,1],[264,13,264,95,1],[265,13,265,34,1],[266,13,266,14,1],[267,17,267,73,1],[270,13,270,102,1],[271,13,271,14,1],[273,17,273,104,1],[273,104,273,114,1],[273,114,273,126,1],[273,17,273,126,1],[274,17,274,41,1],[275,17,275,18,1],[277,21,277,80,1],[279,13,279,14,0],[282,13,282,56,0],[283,6,283,7,1],[292,9,292,10,1],[294,13,294,64,1],[297,13,297,32,1],[298,13,298,14,1],[299,17,299,73,1],[302,13,302,100,1],[303,13,303,14,1],[305,17,305,97,1],[306,17,306,41,1],[307,17,307,18,0],[309,21,309,82,0],[311,13,311,14,1],[314,13,314,58,1],[315,9,315,10,1],[318,9,318,10,1],[320,13,320,42,1],[321,13,321,27,1],[322,13,322,14,1],[323,17,323,62,1],[325,17,325,113,1],[326,17,326,18,0],[328,21,328,49,0],[329,21,329,33,0],[332,17,332,18,1],[336,21,336,64,1],[337,21,337,40,1],[338,21,338,51,1],[342,21,342,33,1],[345,13,345,27,0],[346,13,346,26,0],[347,9,347,10,1],[355,9,355,10,0],[356,13,356,71,0],[357,13,357,53,0],[358,13,358,20,0],[358,22,358,33,0],[358,34,358,36,0],[358,37,358,44,0],[359,13,359,14,0],[360,17,360,47,0],[361,13,361,14,0],[362,13,362,25,0],[363,9,363,10,0],[370,3,370,4,1],[371,4,371,19,1],[372,3,372,4,1],[375,9,375,10,0],[376,13,376,49,0],[377,9,377,10,0],[379,9,379,10,0],[380,13,380,97,0],[381,9,381,10,0],[384,9,384,10,1],[385,13,385,87,1],[386,13,386,97,1],[387,9,387,10,1],[390,6,390,7,1],[391,13,391,59,1],[392,6,392,7,1],[395,6,395,7,1],[396,13,396,55,1],[396,55,396,72,1],[396,72,396,90,1],[396,13,396,90,1],[397,6,397,7,1],[400,3,400,4,0],[401,4,401,27,0],[402,3,402,4,0],[405,9,405,10,1],[406,4,406,49,1],[407,9,407,10,1],[410,9,410,10,0],[411,4,411,47,0],[412,9,412,10,0],[415,3,415,4,1],[416,4,416,55,1],[417,3,417,4,1],[420,3,420,4,0],[421,4,421,55,0],[422,3,422,4,0],[425,9,425,10,0],[426,13,426,26,0],[427,9,427,10,0],[429,9,429,10,0],[430,13,430,25,0],[431,9,431,10,0],[434,9,434,10,0],[435,13,435,34,0],[435,34,435,48,0],[435,48,435,50,0],[435,13,435,50,0],[436,9,436,10,0],[438,9,438,10,0],[439,13,439,34,0],[439,34,439,48,0],[439,48,439,63,0],[439,13,439,63,0],[440,9,440,10,0],[442,9,442,10,0],[443,13,443,34,0],[443,34,443,48,0],[443,48,443,77,0],[443,13,443,77,0],[444,9,444,10,0],[446,9,446,10,0],[447,13,447,35,0],[447,35,447,49,0],[447,49,447,51,0],[447,13,447,51,0],[448,9,448,10,0],[450,9,450,10,0],[451,13,451,34,0],[451,34,451,48,0],[451,48,451,63,0],[451,13,451,63,0],[452,9,452,10,0],[454,9,454,10,0],[455,13,455,34,0],[455,34,455,48,0],[455,48,455,77,0],[455,13,455,77,0],[456,9,456,10,0],[458,9,458,10,0],[459,13,459,67,0],[460,13,460,14,0],[461,17,461,30,0],[463,13,463,34,0],[463,34,463,52,0],[463,52,463,54,0],[463,13,463,54,0],[464,9,464,10,0],[466,9,466,10,0],[467,13,467,67,0],[468,13,468,14,0],[469,17,469,53,0],[471,13,471,34,0],[471,34,471,52,0],[471,52,471,67,0],[471,13,471,67,0],[472,9,472,10,0],[474,9,474,10,0],[475,13,475,67,0],[476,13,476,14,0],[477,17,477,53,0],[479,13,479,34,0],[479,34,479,52,0],[479,52,479,81,0],[479,13,479,81,0],[480,9,480,10,0],[482,9,482,10,0],[483,13,483,67,0],[484,13,484,14,0],[485,17,485,30,0],[487,13,487,34,0],[487,34,487,58,0],[487,58,487,60,0],[487,13,487,60,0],[488,9,488,10,0],[490,9,490,10,0],[491,13,491,67,0],[492,13,492,14,0],[493,17,493,53,0],[495,13,495,34,0],[495,34,495,58,0],[495,58,495,73,0],[495,13,495,73,0],[496,9,496,10,0],[498,9,498,10,0],[499,13,499,67,0],[500,13,500,14,0],[501,17,501,53,0],[503,13,503,34,0],[503,34,503,58,0],[503,58,503,87,0],[503,13,503,87,0],[504,9,504,10,0],[507,9,507,10,0],[508,13,508,67,0],[509,13,509,14,0],[510,17,510,30,0],[512,13,512,34,0],[512,34,512,58,0],[512,58,512,60,0],[512,13,512,60,0],[513,9,513,10,0],[515,9,515,10,0],[516,13,516,72,0],[517,13,517,14,0],[518,17,518,53,0],[520,13,520,34,0],[520,34,520,58,0],[520,58,520,73,0],[520,13,520,73,0],[521,9,521,10,0],[523,9,523,10,0],[524,13,524,77,0],[525,13,525,14,0],[526,17,526,53,0],[528,13,528,34,0],[528,34,528,58,0],[528,58,528,87,0],[528,13,528,87,0],[529,9,529,10,0],[531,9,531,10,0],[532,13,532,77,0],[533,13,533,14,0],[534,17,534,30,0],[536,13,536,35,0],[536,35,536,53,0],[536,53,536,55,0],[536,13,536,55,0],[537,9,537,10,0],[539,9,539,10,0],[540,13,540,77,0],[541,13,541,14,0],[542,17,542,53,0],[544,13,544,34,0],[544,34,544,52,0],[544,52,544,67,0],[544,13,544,67,0],[545,9,545,10,0],[547,9,547,10,0],[548,13,548,77,0],[549,13,549,14,0],[550,17,550,53,0],[552,13,552,34,0],[552,34,552,52,0],[552,52,552,81,0],[552,13,552,81,0],[553,9,553,10,0],[555,9,555,10,0],[556,13,556,77,0],[557,13,557,14,0],[558,17,558,30,0],[560,13,560,68,0],[561,13,561,34,0],[561,34,561,56,0],[561,56,561,58,0],[561,13,561,58,0],[562,9,562,10,0],[564,9,564,10,0],[565,13,565,77,0],[566,13,566,14,0],[567,17,567,53,0],[569,13,569,68,0],[570,13,570,34,0],[570,34,570,56,0],[570,56,570,71,0],[570,13,570,71,0],[571,9,571,10,0],[573,9,573,10,0],[574,13,574,77,0],[575,13,575,14,0],[576,17,576,53,0],[578,13,578,68,0],[579,13,579,34,0],[579,34,579,56,0],[579,56,579,85,0],[579,13,579,85,0],[580,9,580,10,0],[582,9,582,10,0],[583,13,583,77,0],[584,13,584,14,0],[585,17,585,30,0],[587,13,587,68,0],[588,13,588,35,0],[588,35,588,57,0],[588,57,588,59,0],[588,13,588,59,0],[589,9,589,10,0],[591,9,591,10,0],[592,13,592,77,0],[593,13,593,14,0],[594,17,594,53,0],[596,13,596,68,0],[597,13,597,34,0],[597,34,597,56,0],[597,56,597,71,0],[597,13,597,71,0],[598,9,598,10,0],[600,9,600,10,0],[601,13,601,77,0],[602,13,602,14,0],[603,17,603,53,0],[605,13,605,68,0],[606,13,606,34,0],[606,34,606,56,0],[606,56,606,85,0],[606,13,606,85,0],[607,9,607,10,0],[609,9,609,10,0],[610,13,610,34,0],[610,34,610,52,0],[610,52,610,54,0],[610,13,610,54,0],[611,9,611,10,0],[613,9,613,10,0],[614,13,614,34,0],[614,34,614,52,0],[614,52,614,67,0],[614,13,614,67,0],[615,9,615,10,0],[617,9,617,10,0],[618,13,618,34,0],[618,34,618,52,0],[618,52,618,81,0],[618,13,618,81,0],[619,9,619,10,0],[621,9,621,10,0],[622,13,622,34,0],[622,34,622,52,0],[622,52,622,54,0],[622,13,622,54,0],[623,9,623,10,0],[625,9,625,10,0],[626,13,626,34,0],[626,34,626,52,0],[626,52,626,67,0],[626,13,626,67,0],[627,9,627,10,0],[629,9,629,10,0],[630,13,630,34,0],[630,34,630,52,0],[630,52,630,81,0],[630,13,630,81,0],[631,9,631,10,0],[633,9,633,10,0],[634,13,634,34,0],[634,34,634,68,0],[634,68,634,70,0],[634,13,634,70,0],[635,9,635,10,0],[637,9,637,10,0],[638,13,638,34,0],[638,34,638,68,0],[638,68,638,83,0],[638,13,638,83,0],[639,9,639,10,0],[641,9,641,10,0],[642,13,642,34,0],[642,34,642,68,0],[642,68,642,97,0],[642,13,642,97,0],[643,9,643,10,0],[645,9,645,10,0],[646,13,646,34,0],[646,34,646,68,0],[646,68,646,70,0],[646,13,646,70,0],[647,9,647,10,0],[649,9,649,10,0],[650,13,650,34,0],[650,34,650,68,0],[650,68,650,83,0],[650,13,650,83,0],[651,9,651,10,0],[653,9,653,10,0],[654,13,654,34,0],[654,34,654,68,0],[654,68,654,97,0],[654,13,654,97,0],[655,9,655,10,0],[657,9,657,10,0],[658,13,658,46,0],[659,13,659,34,0],[659,34,659,71,0],[659,71,659,112,0],[659,112,659,121,0],[659,34,659,121,0],[659,121,659,123,0],[659,13,659,123,0],[660,9,660,10,0],[662,9,662,10,0],[663,13,663,46,0],[664,4,664,25,0],[664,25,664,62,0],[664,62,664,103,0],[664,103,664,112,0],[664,25,664,112,0],[664,112,664,127,0],[664,4,664,127,0],[665,9,665,10,0],[667,9,667,10,0],[668,13,668,46,0],[669,4,669,25,0],[669,25,669,62,0],[669,62,669,103,0],[669,103,669,112,0],[669,25,669,112,0],[669,112,669,141,0],[669,4,669,141,0],[670,9,670,10,0],[672,9,672,10,0],[673,13,673,52,0],[674,4,674,25,0],[674,25,674,62,0],[674,62,674,103,0],[674,103,674,112,0],[674,25,674,112,0],[674,112,674,114,0],[674,4,674,114,0],[675,9,675,10,0],[677,9,677,10,0],[678,13,678,52,0],[679,4,679,25,0],[679,25,679,62,0],[679,62,679,103,0],[679,103,679,112,0],[679,25,679,112,0],[679,112,679,127,0],[679,4,679,127,0],[680,9,680,10,0],[682,9,682,10,0],[683,13,683,52,0],[684,4,684,25,0],[684,25,684,62,0],[684,62,684,103,0],[684,103,684,112,0],[684,25,684,112,0],[684,112,684,141,0],[684,4,684,141,0],[685,9,685,10,0],[687,9,687,10,0],[688,13,688,50,0],[689,4,689,25,0],[689,25,689,66,0],[689,66,689,109,0],[689,109,689,118,0],[689,25,689,118,0],[689,118,689,120,0],[689,4,689,120,0],[690,9,690,10,0],[692,9,692,10,0],[693,13,693,50,0],[694,4,694,25,0],[694,25,694,66,0],[694,66,694,109,0],[694,109,694,118,0],[694,25,694,118,0],[694,118,694,133,0],[694,4,694,133,0],[695,9,695,10,0],[697,9,697,10,0],[698,13,698,50,0],[699,4,699,25,0],[699,25,699,66,0],[699,66,699,109,0],[699,109,699,118,0],[699,25,699,118,0],[699,118,699,147,0],[699,4,699,147,0],[700,9,700,10,0],[702,9,702,10,0],[703,13,703,56,0],[704,4,704,25,0],[704,25,704,66,0],[704,66,704,109,0],[704,109,704,118,0],[704,25,704,118,0],[704,118,704,120,0],[704,4,704,120,0],[705,9,705,10,0],[707,9,707,10,0],[708,13,708,56,0],[709,4,709,25,0],[709,25,709,66,0],[709,66,709,109,0],[709,109,709,118,0],[709,25,709,118,0],[709,118,709,133,0],[709,4,709,133,0],[710,9,710,10,0],[712,9,712,10,0],[713,13,713,56,0],[714,4,714,25,0],[714,25,714,66,0],[714,66,714,109,0],[714,109,714,118,0],[714,25,714,118,0],[714,118,714,147,0],[714,4,714,147,0],[715,9,715,10,0],[717,9,717,10,0],[718,13,718,37,0],[718,37,718,41,0],[718,41,718,43,0],[718,13,718,43,0],[719,9,719,10,0],[721,9,721,10,0],[723,7,723,72,0],[723,72,723,84,0],[723,84,723,98,0],[723,7,723,98,0],[724,13,724,60,0],[724,60,724,77,0],[724,77,724,79,0],[724,13,724,79,0],[725,9,725,10,0],[727,9,727,10,0],[728,13,728,43,0],[728,43,728,47,0],[728,47,728,49,0],[728,13,728,49,0],[729,9,729,10,0],[731,9,731,10,0],[733,7,733,72,0],[733,72,733,84,0],[733,84,733,98,0],[733,7,733,98,0],[734,13,734,47,0],[735,13,735,28,0],[736,13,736,67,0],[736,67,736,84,0],[736,84,736,87,0],[736,13,736,87,0],[737,13,737,25,0],[738,9,738,10,0],[740,9,740,10,0],[741,13,741,38,0],[741,38,741,42,0],[741,42,741,44,0],[741,13,741,44,0],[742,9,742,10,0],[744,9,744,10,0],[745,13,745,53,0],[746,13,746,41,0],[747,13,747,33,0],[748,13,748,14,0],[749,17,749,41,0],[749,42,749,48,0],[750,17,750,47,0],[751,17,751,36,0],[752,17,752,18,0],[753,21,753,52,0],[754,21,754,22,0],[755,25,755,39,0],[756,25,756,40,0],[757,25,757,26,0],[758,29,758,52,0],[759,25,759,26,0],[760,21,760,22,0],[762,21,762,22,0],[763,25,763,31,0],[765,17,765,18,0],[767,17,767,18,0],[768,21,768,27,0],[770,13,770,14,0],[771,13,771,36,0],[772,13,772,52,0],[772,52,772,72,0],[772,72,772,74,0],[772,13,772,74,0],[773,9,773,10,0],[775,9,775,10,0],[776,13,776,44,0],[776,44,776,48,0],[776,48,776,50,0],[776,13,776,50,0],[777,9,777,10,0],[779,9,779,10,0],[780,13,780,64,0],[781,13,781,41,0],[782,13,782,36,0],[783,13,783,33,0],[784,13,784,14,0],[785,17,785,41,0],[785,42,785,48,0],[786,17,786,47,0],[787,17,787,36,0],[788,17,788,18,0],[789,21,789,52,0],[790,21,790,22,0],[791,25,791,39,0],[792,25,792,40,0],[793,25,793,26,0],[794,29,794,52,0],[795,25,795,26,0],[796,21,796,22,0],[798,21,798,22,0],[799,25,799,31,0],[801,17,801,18,0],[803,17,803,18,0],[804,21,804,27,0],[806,13,806,14,0],[807,13,807,36,0],[808,13,808,52,0],[808,52,808,72,0],[808,72,808,74,0],[808,13,808,74,0],[809,9,809,10,0],[812,9,812,10,0],[813,13,813,77,0],[814,13,814,14,0],[815,17,815,67,0],[816,17,816,31,0],[817,17,817,24,0],[817,26,817,37,0],[817,38,817,40,0],[817,41,817,49,0],[818,17,818,18,0],[819,21,819,53,0],[819,54,819,60,0],[820,21,820,29,0],[821,17,821,18,0],[822,17,822,30,0],[824,13,824,22,0],[825,9,825,10,0],[828,9,828,10,0],[829,13,829,31,0],[830,9,830,10,0],[832,9,832,10,0],[833,13,833,62,0],[834,9,834,10,0],[836,9,836,10,0],[837,13,837,92,0],[838,9,838,10,0],[842,9,842,10,0],[843,13,843,72,0],[844,9,844,10,0]]);
    </script>
  </body>
</html>