<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Tom Pipe\Documents\Hexadigital\Code\Umbraco\Umbraco-CMS\src\Umbraco.Web\umbraco.presentation\umbraco\Trees\loadRelationTypes.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Web;
using umbraco.BusinessLogic.Actions;
using umbraco.cms.businesslogic.relation;
using umbraco.cms.presentation.Trees;
using umbraco.DataLayer;
using umbraco.interfaces;
using umbraco.cms.presentation.developer.RelationTypes.TreeMenu;
using umbraco.businesslogic;
using Umbraco.Core;

namespace umbraco
{
	/// &lt;summary&gt;
	/// RelationTypes tree for developer section
	/// &lt;/summary&gt;
	[Tree(Constants.Applications.Developer, &quot;relationTypes&quot;, &quot;Relation Types&quot;, sortOrder: 4)]
	public class loadRelationTypes : BaseTree
	{
		/// &lt;summary&gt;
		/// Initializes a new instance of the RelationTypeTree class.
		/// &lt;/summary&gt;
		/// &lt;param name=&quot;application&quot;&gt;name of umbraco app to which this tree has been added, (in this case &quot;developer&quot;)&lt;/param&gt;
		public loadRelationTypes(string application)
			: base(application)
		{
		}

		/// &lt;summary&gt;
		/// Builds the javascript methods for use by the nodes in this tree
		/// &lt;/summary&gt;
		/// &lt;param name=&quot;javascript&quot;&gt;string container for javascript&lt;/param&gt;
		public override void RenderJS(ref StringBuilder javascript)
		{
			javascript.Append(@&quot;
				function openRelationType(id) {
					UmbClientMgr.contentFrame(&#39;developer/RelationTypes/EditRelationType.aspx?id=&#39; + id);
				}&quot;);
		}

		/// &lt;summary&gt;
		/// This is called if the tree has been expanded, and it&#39;s used to render and child nodes for this tree
		/// &lt;/summary&gt;
		/// &lt;param name=&quot;tree&quot;&gt;current tree&lt;/param&gt;
		public override void Render(ref XmlTree tree)
		{
			XmlTreeNode node;

			foreach (RelationType relationType in RelationType.GetAll().OrderBy(relationType =&gt; relationType.Name))
			{
				node = XmlTreeNode.Create(this);
				node.NodeID = relationType.Id.ToString();
				node.Text = relationType.Name;
				node.Icon = &quot;icon-trafic&quot;;
				node.Action = string.Concat(&quot;javascript:openRelationType(&#39;&quot;, node.NodeID, &quot;&#39;);&quot;);

				tree.Add(node);
			}
		}

		/// &lt;summary&gt;
		/// Adds right click context tree actions for each child node
		/// &lt;/summary&gt;
		/// &lt;param name=&quot;actions&quot;&gt;collection of actions (expected to be empty)&lt;/param&gt;
		protected override void CreateAllowedActions(ref List&lt;IAction&gt; actions)
		{
			actions.Clear();
			actions.Add(ActionDeleteRelationType.Instance);
		}

		/// &lt;summary&gt;
		/// Adds right click context tree actions for the root &#39;Relation Types&#39; node
		/// &lt;/summary&gt;
		/// &lt;param name=&quot;actions&quot;&gt;collection of actions (expected to be empty)&lt;/param&gt;
		protected override void CreateRootNodeActions(ref List&lt;IAction&gt; actions)
		{
			actions.Clear();
			actions.Add(ActionNewRelationType.Instance);
			actions.Add(ContextMenuSeperator.Instance);
			actions.Add(ActionRefresh.Instance);
		}

		/// &lt;summary&gt;
		/// Configures root node &#39;Relation Types&#39; properties
		/// &lt;/summary&gt;
		/// &lt;param name=&quot;rootNode&quot;&gt;the &#39;Relation Types&#39; root node&lt;/param&gt;
		protected override void CreateRootNode(ref XmlTreeNode rootNode)
		{
			rootNode.Text = &quot;Relation Types&quot;;
			rootNode.Icon = BaseTree.FolderIcon;
			rootNode.OpenIcon = BaseTree.FolderIconOpen;
			rootNode.NodeType = this.TreeAlias; // (Was prefixed with init)
			rootNode.NodeID = &quot;init&quot;;
		}
	}
}

    </pre>
    <script type="text/javascript">
      highlightRanges([[28,6,28,23,0],[29,3,29,4,0],[30,3,30,4,0],[37,3,37,4,0],[38,4,41,9,0],[42,3,42,4,0],[49,3,49,4,0],[52,4,52,11,0],[52,13,52,38,0],[52,39,52,41,0],[52,42,52,88,0],[52,88,52,105,0],[52,105,52,106,0],[52,42,52,106,0],[53,4,53,5,0],[54,5,54,37,0],[55,5,55,46,0],[56,5,56,35,0],[57,5,57,31,0],[58,5,58,86,0],[60,5,60,20,0],[61,4,61,5,0],[62,3,62,4,0],[69,3,69,4,0],[70,4,70,20,0],[71,4,71,51,0],[72,3,72,4,0],[79,3,79,4,0],[80,4,80,20,0],[81,4,81,48,0],[82,4,82,47,0],[83,4,83,40,0],[84,3,84,4,0],[91,3,91,4,0],[92,4,92,37,0],[93,4,93,40,0],[94,4,94,48,0],[95,4,95,39,0],[96,4,96,29,0],[97,3,97,4,0]]);
    </script>
  </body>
</html>