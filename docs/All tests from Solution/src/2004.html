<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Tom Pipe\Documents\Hexadigital\Code\Umbraco\Umbraco-CMS\src\Umbraco.Core\Models\Media.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using System.Runtime.Serialization;
using Umbraco.Core.Persistence.Mappers;

namespace Umbraco.Core.Models
{
    /// &lt;summary&gt;
    /// Represents a Media object
    /// &lt;/summary&gt;
    [Serializable]
    [DataContract(IsReference = true)]
    public class Media : ContentBase, IMedia
    {
        private IMediaType _contentType;

        /// &lt;summary&gt;
        /// Constructor for creating a Media object
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;name&quot;&gt;ame of the Media object&lt;/param&gt;
        /// &lt;param name=&quot;parent&quot;&gt;Parent &lt;see cref=&quot;IMedia&quot;/&gt; object&lt;/param&gt;
        /// &lt;param name=&quot;contentType&quot;&gt;MediaType for the current Media object&lt;/param&gt;
        public Media(string name, IMedia parent, IMediaType contentType)
			: this(name, parent, contentType, new PropertyCollection())
		{
		}

        /// &lt;summary&gt;
        /// Constructor for creating a Media object
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;name&quot;&gt;ame of the Media object&lt;/param&gt;
        /// &lt;param name=&quot;parent&quot;&gt;Parent &lt;see cref=&quot;IMedia&quot;/&gt; object&lt;/param&gt;
        /// &lt;param name=&quot;contentType&quot;&gt;MediaType for the current Media object&lt;/param&gt;
        /// &lt;param name=&quot;properties&quot;&gt;Collection of properties&lt;/param&gt;
        public Media(string name, IMedia parent, IMediaType contentType, PropertyCollection properties)
			: base(name, parent, contentType, properties)
		{
			Mandate.ParameterNotNull(contentType, &quot;contentType&quot;);
			_contentType = contentType;
		}

        /// &lt;summary&gt;
        /// Constructor for creating a Media object
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;name&quot;&gt;ame of the Media object&lt;/param&gt;
        /// &lt;param name=&quot;parentId&quot;&gt;Id of the Parent IMedia&lt;/param&gt;
        /// &lt;param name=&quot;contentType&quot;&gt;MediaType for the current Media object&lt;/param&gt;
        public Media(string name, int parentId, IMediaType contentType)
            : this(name, parentId, contentType, new PropertyCollection())
        {
        }

        /// &lt;summary&gt;
        /// Constructor for creating a Media object
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;name&quot;&gt;Name of the Media object&lt;/param&gt;
        /// &lt;param name=&quot;parentId&quot;&gt;Id of the Parent IMedia&lt;/param&gt;
        /// &lt;param name=&quot;contentType&quot;&gt;MediaType for the current Media object&lt;/param&gt;
        /// &lt;param name=&quot;properties&quot;&gt;Collection of properties&lt;/param&gt;
        public Media(string name, int parentId, IMediaType contentType, PropertyCollection properties) 
            : base(name, parentId, contentType, properties)
        {
			Mandate.ParameterNotNull(contentType, &quot;contentType&quot;);
            _contentType = contentType;
        }

        /// &lt;summary&gt;
        /// Gets the ContentType used by this Media object
        /// &lt;/summary&gt;
        [IgnoreDataMember]
        public IMediaType ContentType
        {
            get { return _contentType; }
        }

        /// &lt;summary&gt;
        /// Changes the &lt;see cref=&quot;IMediaType&quot;/&gt; for the current Media object
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;contentType&quot;&gt;New MediaType for this Media&lt;/param&gt;
        /// &lt;remarks&gt;Leaves PropertyTypes intact after change&lt;/remarks&gt;
        public void ChangeContentType(IMediaType contentType)
        {
            ContentTypeId = contentType.Id;
            _contentType = contentType;
            ContentTypeBase = contentType;
            Properties.EnsurePropertyTypes(PropertyTypes);
            Properties.CollectionChanged += PropertiesChanged;
        }

        /// &lt;summary&gt;
        /// Changes the &lt;see cref=&quot;IMediaType&quot;/&gt; for the current Media object and removes PropertyTypes,
        /// which are not part of the new MediaType.
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;contentType&quot;&gt;New MediaType for this Media&lt;/param&gt;
        /// &lt;param name=&quot;clearProperties&quot;&gt;Boolean indicating whether to clear PropertyTypes upon change&lt;/param&gt;
        public void ChangeContentType(IMediaType contentType, bool clearProperties)
        {
            if (clearProperties)
            {
                ContentTypeId = contentType.Id;
                _contentType = contentType;
                ContentTypeBase = contentType;
                Properties.EnsureCleanPropertyTypes(PropertyTypes);
                Properties.CollectionChanged += PropertiesChanged;
                return;
            }

            ChangeContentType(contentType);
        }

        /// &lt;summary&gt;
        /// Changes the Trashed state of the content object
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;isTrashed&quot;&gt;Boolean indicating whether content is trashed (true) or not trashed (false)&lt;/param&gt;
        /// &lt;param name=&quot;parentId&quot;&gt; &lt;/param&gt;
        public override void ChangeTrashedState(bool isTrashed, int parentId = -20)
        {
            Trashed = isTrashed;
            //The Media Recycle Bin Id is -21 so we correct that here
            ParentId = parentId == -20 ? -21 : parentId;
        }
    }
}
    </pre>
    <script type="text/javascript">
      highlightRanges([[23,6,23,63,0],[24,3,24,4,0],[25,3,25,4,0],[35,6,35,49,0],[36,3,36,4,0],[37,4,37,57,0],[38,4,38,31,0],[39,3,39,4,0],[48,15,48,74,1],[49,9,49,10,1],[50,9,50,10,1],[60,15,60,60,1],[61,9,61,10,1],[62,4,62,57,1],[63,13,63,40,1],[64,9,64,10,1],[72,17,72,18,1],[72,19,72,39,1],[72,40,72,41,1],[81,9,81,10,0],[82,13,82,44,0],[83,13,83,40,0],[84,13,84,43,0],[85,13,85,59,0],[86,13,86,63,0],[87,9,87,10,0],[96,9,96,10,0],[97,13,97,33,0],[98,13,98,14,0],[99,17,99,48,0],[100,17,100,44,0],[101,17,101,47,0],[102,17,102,68,0],[103,17,103,67,0],[104,17,104,24,0],[107,13,107,44,0],[108,9,108,10,0],[116,9,116,10,1],[117,13,117,33,1],[119,13,119,57,1],[120,9,120,10,1]]);
    </script>
  </body>
</html>