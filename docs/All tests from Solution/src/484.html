<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Tom Pipe\Documents\Hexadigital\Code\Umbraco\Umbraco-CMS\src\Umbraco.Web\umbraco.presentation\umbraco\js\language.aspx.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using System.Text;
using System.Xml;
using umbraco.BasePages;
using umbraco.BusinessLogic;

namespace umbraco.js
{
    [Obsolete(&quot;This is no longer used and will be removed from the codebase in future versions&quot;)]
	public partial class language : BasePage
	{
		protected void Page_Load(object sender, EventArgs e)
		{
            Response.ContentType = &quot;application/json&quot;;
            string lang = &quot;en&quot;;
            if(ValidateCurrentUser()){
                lang = UmbracoUser.Language;
            }

    	    XmlDocument all = ui.getLanguageFile(lang);

			if(all == null)
				return;

            StringBuilder sb = new StringBuilder();
            
			foreach(XmlNode x in all.DocumentElement.ChildNodes)
			{
				if(x == null)
					continue;

                for (int i = 0; i &lt; x.ChildNodes.Count; i++)
                {
                    sb.Append(&quot;\n&quot;);

                    XmlNode key = x.ChildNodes[i];
                    if (key.FirstChild == null || string.IsNullOrEmpty(key.FirstChild.Value))
                        continue;

                    XmlNode n1 = x.Attributes.GetNamedItem(&quot;alias&quot;);
                    if (n1 == null)
                        continue;
                    XmlNode n2 = key.Attributes.GetNamedItem(&quot;alias&quot;);
                    if (n2 == null)
                        continue;
                    string _tempKey = string.Format(&quot;{0}_{1}&quot;, n1.Value, n2.Value);

                    // we need to remove linie breaks as they can&#39;t break js
                    string tmpStr = key.FirstChild.Value.Replace(&quot;\\&quot;, &quot;\\\\&quot;).Replace(&quot;\&quot;&quot;, &quot;&#39;&quot;).Replace(&quot;\t&quot;, &quot;&quot;).Replace(&quot;\r&quot;, &quot;&quot;).Replace(&quot;\n&quot;, &quot;&quot;);

                    sb.Append(&quot;\&quot;&quot; + _tempKey + &quot;\&quot;: \&quot;&quot; + tmpStr + &quot;\&quot;,&quot;);

                }
			}
            var f = &quot;{&quot; + sb.ToString().Trim().Trim(&#39;,&#39;).Trim() + &quot;}&quot;;          
            Response.Write(f);
		}

	}
}
    </pre>
    <script type="text/javascript">
      highlightRanges([[13,3,13,4,0],[14,13,14,55,0],[15,13,15,32,0],[16,13,16,38,0],[16,38,16,39,0],[17,17,17,45,0],[18,13,18,14,0],[20,10,20,53,0],[22,4,22,19,0],[23,5,23,12,0],[25,13,25,52,0],[27,4,27,11,0],[27,12,27,21,0],[27,22,27,24,0],[27,25,27,55,0],[28,4,28,5,0],[29,5,29,18,0],[30,6,30,15,0],[32,22,32,31,0],[32,33,32,55,0],[32,57,32,60,0],[33,17,33,18,0],[34,21,34,37,0],[36,21,36,51,0],[37,21,37,94,0],[38,25,38,34,0],[40,21,40,69,0],[41,21,41,36,0],[42,25,42,34,0],[43,21,43,71,0],[44,21,44,36,0],[45,25,45,34,0],[46,21,46,84,0],[49,21,49,153,0],[51,21,51,76,0],[53,17,53,18,0],[54,4,54,5,0],[55,13,55,71,0],[56,13,56,31,0],[57,3,57,4,0]]);
    </script>
  </body>
</html>