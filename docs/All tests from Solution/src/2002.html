<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Tom Pipe\Documents\Hexadigital\Code\Umbraco\Umbraco-CMS\src\Umbraco.Core\Models\ServerRegistration.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using System.Globalization;
using System.Reflection;
using Umbraco.Core.Models.EntityBase;

namespace Umbraco.Core.Models
{
    /// &lt;summary&gt;
    /// Represents a registered server in a multiple-servers environment.
    /// &lt;/summary&gt;
    public class ServerRegistration : Entity, IServerRegistration
    {
        private string _serverAddress;
        private string _serverIdentity;
        private bool _isActive;
        private bool _isMaster;

        private static readonly Lazy&lt;PropertySelectors&gt; Ps = new Lazy&lt;PropertySelectors&gt;();

        private class PropertySelectors
        {
            public readonly PropertyInfo ServerAddressSelector = ExpressionHelper.GetPropertyInfo&lt;ServerRegistration, string&gt;(x =&gt; x.ServerAddress);
            public readonly PropertyInfo ServerIdentitySelector = ExpressionHelper.GetPropertyInfo&lt;ServerRegistration, string&gt;(x =&gt; x.ServerIdentity);
            public readonly PropertyInfo IsActiveSelector = ExpressionHelper.GetPropertyInfo&lt;ServerRegistration, bool&gt;(x =&gt; x.IsActive);
            public readonly PropertyInfo IsMasterSelector = ExpressionHelper.GetPropertyInfo&lt;ServerRegistration, bool&gt;(x =&gt; x.IsMaster);
        }

        /// &lt;summary&gt;
        /// Initialiazes a new instance of the &lt;see cref=&quot;ServerRegistration&quot;/&gt; class.
        /// &lt;/summary&gt;
        public ServerRegistration()
        { }

        /// &lt;summary&gt;
        /// Initialiazes a new instance of the &lt;see cref=&quot;ServerRegistration&quot;/&gt; class.
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;id&quot;&gt;The unique id of the server registration.&lt;/param&gt;
        /// &lt;param name=&quot;serverAddress&quot;&gt;The server url.&lt;/param&gt;
        /// &lt;param name=&quot;serverIdentity&quot;&gt;The unique server identity.&lt;/param&gt;
        /// &lt;param name=&quot;registered&quot;&gt;The date and time the registration was created.&lt;/param&gt;
        /// &lt;param name=&quot;accessed&quot;&gt;The date and time the registration was last accessed.&lt;/param&gt;
        /// &lt;param name=&quot;isActive&quot;&gt;A value indicating whether the registration is active.&lt;/param&gt;
        /// &lt;param name=&quot;isMaster&quot;&gt;A value indicating whether the registration is master.&lt;/param&gt;
        public ServerRegistration(int id, string serverAddress, string serverIdentity, DateTime registered, DateTime accessed, bool isActive, bool isMaster)
        {
            UpdateDate = accessed;
            CreateDate = registered;
            Key = id.ToString(CultureInfo.InvariantCulture).EncodeAsGuid();
            Id = id;
            ServerAddress = serverAddress;
            ServerIdentity = serverIdentity;
            IsActive = isActive;
            IsMaster = isMaster;
        }

        /// &lt;summary&gt;
        /// Initialiazes a new instance of the &lt;see cref=&quot;ServerRegistration&quot;/&gt; class.
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;serverAddress&quot;&gt;The server url.&lt;/param&gt;
        /// &lt;param name=&quot;serverIdentity&quot;&gt;The unique server identity.&lt;/param&gt;
        /// &lt;param name=&quot;registered&quot;&gt;The date and time the registration was created.&lt;/param&gt;
        public ServerRegistration(string serverAddress, string serverIdentity, DateTime registered)
        {
            CreateDate = registered;
            UpdateDate = registered;
            Key = 0.ToString(CultureInfo.InvariantCulture).EncodeAsGuid();
            ServerAddress = serverAddress;
            ServerIdentity = serverIdentity;
        }

        /// &lt;summary&gt;
        /// Gets or sets the server url.
        /// &lt;/summary&gt;
        public string ServerAddress
        {
            get { return _serverAddress; }
            set { SetPropertyValueAndDetectChanges(value, ref _serverAddress, Ps.Value.ServerAddressSelector); }
        }

        /// &lt;summary&gt;
        /// Gets or sets the server unique identity.
        /// &lt;/summary&gt;
        public string ServerIdentity
        {
            get { return _serverIdentity; }
            set { SetPropertyValueAndDetectChanges(value, ref _serverIdentity, Ps.Value.ServerIdentitySelector); }
        }

        /// &lt;summary&gt;
        /// Gets or sets a value indicating whether the server is active.
        /// &lt;/summary&gt;
        public bool IsActive
        {
            get { return _isActive; }
            set { SetPropertyValueAndDetectChanges(value, ref _isActive, Ps.Value.IsActiveSelector); }
        }

        /// &lt;summary&gt;
        /// Gets or sets a value indicating whether the server is master.
        /// &lt;/summary&gt;
        public bool IsMaster
        {
            get { return _isMaster; }
            set { SetPropertyValueAndDetectChanges(value, ref _isMaster, Ps.Value.IsMasterSelector); }
        }

        /// &lt;summary&gt;
        /// Gets the date and time the registration was created.
        /// &lt;/summary&gt;
        public DateTime Registered { get { return CreateDate; } set { CreateDate = value; }}

        /// &lt;summary&gt;
        /// Gets the date and time the registration was last accessed.
        /// &lt;/summary&gt;
        public DateTime Accessed { get { return UpdateDate; } set { UpdateDate = value; }}

        /// &lt;summary&gt;
        /// Converts the value of this instance to its equivalent string representation.
        /// &lt;/summary&gt;
        /// &lt;returns&gt;&lt;/returns&gt;
        public override string ToString()
        {
            return string.Format(&quot;{{\&quot;{0}\&quot;, \&quot;{1}\&quot;, {2}active, {3}master}}&quot;, ServerAddress, ServerIdentity, IsActive ? &quot;&quot; : &quot;!&quot;, IsMaster ? &quot;&quot; : &quot;!&quot;);
        }
    }
}
    </pre>
    <script type="text/javascript">
      highlightRanges([[18,9,18,92,1],[22,13,22,149,1],[23,13,23,151,1],[24,13,24,137,1],[25,13,25,137,1],[31,9,31,36,0],[32,9,32,10,0],[32,11,32,12,0],[44,9,44,157,1],[45,9,45,10,1],[46,13,46,35,1],[47,13,47,37,1],[48,13,48,76,1],[49,13,49,21,1],[50,13,50,43,1],[51,13,51,45,1],[52,13,52,33,1],[53,13,53,33,1],[54,9,54,10,1],[62,9,62,100,1],[63,9,63,10,1],[64,13,64,37,1],[65,13,65,37,1],[66,13,66,75,1],[67,13,67,43,1],[68,13,68,45,1],[69,9,69,10,1],[76,17,76,18,1],[76,19,76,41,1],[76,42,76,43,1],[77,17,77,18,1],[77,19,77,111,1],[77,112,77,113,1],[85,17,85,18,1],[85,19,85,42,1],[85,43,85,44,1],[86,17,86,18,1],[86,19,86,113,1],[86,114,86,115,1],[94,17,94,18,1],[94,19,94,36,1],[94,37,94,38,1],[95,17,95,18,1],[95,19,95,101,1],[95,102,95,103,1],[103,17,103,18,1],[103,19,103,36,1],[103,37,103,38,1],[104,17,104,18,1],[104,19,104,101,1],[104,102,104,103,1],[110,42,110,43,0],[110,44,110,62,0],[110,63,110,64,0],[110,69,110,70,0],[110,71,110,90,0],[110,91,110,92,0],[115,40,115,41,0],[115,42,115,60,0],[115,61,115,62,0],[115,67,115,68,0],[115,69,115,88,0],[115,89,115,90,0],[122,9,122,10,0],[123,13,123,153,0],[124,9,124,10,0]]);
    </script>
  </body>
</html>