<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Tom Pipe\Documents\Hexadigital\Code\Umbraco\Umbraco-CMS\src\Umbraco.Core\Persistence\Migrations\MigrationBase.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using Umbraco.Core.Logging;
using Umbraco.Core.Persistence.Migrations.Syntax.Alter;
using Umbraco.Core.Persistence.Migrations.Syntax.Create;
using Umbraco.Core.Persistence.Migrations.Syntax.Delete;
using Umbraco.Core.Persistence.Migrations.Syntax.Execute;
using Umbraco.Core.Persistence.Migrations.Syntax.IfDatabase;
using Umbraco.Core.Persistence.Migrations.Syntax.Insert;
using Umbraco.Core.Persistence.Migrations.Syntax.Rename;
using Umbraco.Core.Persistence.Migrations.Syntax.Update;
using Umbraco.Core.Persistence.SqlSyntax;

namespace Umbraco.Core.Persistence.Migrations
{
    public abstract class MigrationBase : IMigration
    {
        public ISqlSyntaxProvider SqlSyntax { get; private set; }
        public ILogger Logger { get; private set; }
        
        protected MigrationBase(ISqlSyntaxProvider sqlSyntax, ILogger logger)
        {
            SqlSyntax = sqlSyntax;
            Logger = logger;
        }

        internal IMigrationContext Context;

        public abstract void Up();
        public abstract void Down();

        public virtual void GetUpExpressions(IMigrationContext context)
        {
            Context = context;
            Up();
        }

        public virtual void GetDownExpressions(IMigrationContext context)
        {
            Context = context;
            Down();
        }

        public IAlterSyntaxBuilder Alter
        {
            get { return new AlterSyntaxBuilder(Context, SqlSyntax); }
        }

        public ICreateBuilder Create
        {
            get { return new CreateBuilder(Context, SqlSyntax); }
        }

        public IDeleteBuilder Delete
        {
            get { return new DeleteBuilder(Context, SqlSyntax); }
        }

        public IExecuteBuilder Execute
        {
            get { return new ExecuteBuilder(Context, SqlSyntax); }
        }

        public IInsertBuilder Insert
        {
            get { return new InsertBuilder(Context, SqlSyntax); }
        }

        public IRenameBuilder Rename
        {
            get { return new RenameBuilder(Context, SqlSyntax); }
        }

        public IUpdateBuilder Update
        {
            get { return new UpdateBuilder(Context, SqlSyntax); }
        }

        public IIfDatabaseBuilder IfDatabase(params DatabaseProviders[] databaseProviders)
        {
            return new IfDatabaseBuilder(Context, SqlSyntax, databaseProviders);
        }
    }
}
    </pre>
    <script type="text/javascript">
      highlightRanges([[17,47,17,51,1],[17,52,17,64,1],[18,33,18,37,1],[18,38,18,50,1],[20,9,20,78,1],[21,9,21,10,1],[22,13,22,35,1],[23,13,23,29,1],[24,9,24,10,1],[32,9,32,10,1],[33,13,33,31,1],[34,13,34,18,1],[35,9,35,10,1],[38,9,38,10,0],[39,13,39,31,0],[40,13,40,20,0],[41,9,41,10,0],[45,17,45,18,1],[45,19,45,69,1],[45,70,45,71,1],[50,17,50,18,1],[50,19,50,64,1],[50,65,50,66,1],[55,17,55,18,1],[55,19,55,64,1],[55,65,55,66,1],[60,17,60,18,1],[60,19,60,65,1],[60,66,60,67,1],[65,17,65,18,0],[65,19,65,64,0],[65,65,65,66,0],[70,17,70,18,1],[70,19,70,64,1],[70,65,70,66,1],[75,17,75,18,0],[75,19,75,64,0],[75,65,75,66,0],[79,9,79,10,1],[80,13,80,81,1],[81,9,81,10,1]]);
    </script>
  </body>
</html>