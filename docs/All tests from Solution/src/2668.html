<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Tom Pipe\Documents\Hexadigital\Code\Umbraco\Umbraco-CMS\src\umbraco.editorControls\simpleEditor\simpleEditor.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.ComponentModel;
using System.Collections;
using Umbraco.Core.IO;

namespace umbraco.editorControls.simpleEditor
{
	/// &lt;summary&gt;
	/// Summary description for simpleEditor.
	/// &lt;/summary&gt;
    [Obsolete(&quot;IDataType and all other references to the legacy property editors are no longer used this will be removed from the codebase in future versions&quot;)]
    public class SimpleEditor : System.Web.UI.WebControls.TextBox, interfaces.IDataEditor
	{
		private interfaces.IData _data;
		


		public SimpleEditor(interfaces.IData Data) 
		{
			_data = Data;

		}

		public virtual bool TreatAsRichTextEditor 
		{
			get {return false;}
		}

		public bool ShowLabel 
		{
			get {return true;}
		}

		public Control Editor {get{return this;}}

		public void Save() 
		{
			_data.Value = this.Text;
		}

		protected override void OnInit(EventArgs e)
		{
			base.OnInit (e);
			base.TextMode = System.Web.UI.WebControls.TextBoxMode.MultiLine;
			base.Rows = 8;
			if (this.CssClass == &quot;&quot;)
				this.CssClass = &quot;umbEditorTextField&quot;;
			if (_data != null &amp;&amp; _data.Value != null)
				Text = _data.Value.ToString();


		}

		protected override void OnLoad(EventArgs e)
		{
			base.OnLoad (e);
            string script = &quot;function insertLink(element) {&quot;+
                &quot;var theLink = prompt(&#39;Enter URL for link here:&#39;,&#39;http://&#39;);&quot; +
                &quot;insertTag(element, &#39;a&#39;, &#39; href=\&quot;&#39; + theLink + &#39;\&quot;&#39;)}&quot;;
            script += @&quot;
            function insertTag(element, tag, param) {
            start = &#39;&lt;&#39; + tag + param + &#39;&gt;&#39;;
            eind = &#39;&lt;/&#39; + tag + &#39;&gt;&#39;;
             /* element = document.getElementById(element); */
              if (document.selection) {
                element.focus();
                sel = document.selection.createRange();
                sel.text = start + sel.text + eind;
              } else if (element.selectionStart || element.selectionStart == &#39;0&#39;) {
                element.focus();
                var startPos = element.selectionStart;
                var endPos = element.selectionEnd;
                element.value = element.value.substring(0, startPos) + start + element.value.substring(startPos, endPos) + eind + element.value.substring(endPos, element.value.length);
              } else {
                element.value += start + eind;
              }
            }
            &quot;;

            Page.ClientScript.RegisterClientScriptBlock(Page.GetType(), &quot;simpleEditorJs&quot;,
                script, true);
           
		}

		protected override void Render(HtmlTextWriter output)
		{
			output.WriteLine(&quot;&lt;table border=\&quot;0\&quot; cellspacing=\&quot;0\&quot; cellpadding=\&quot;0\&quot;&gt;&lt;tr&gt;&lt;td&gt;&quot;);
		
			output.WriteLine(	&quot;&lt;p align=\&quot;right\&quot; style=\&quot;margin: 0px; padding:0px\&quot;&gt;&lt;a href=\&quot;javascript:insertLink(document.getElementById(&#39;&quot; + this.ClientID + &quot;&#39;))\&quot;&gt;&quot; +
				&quot;&lt;img src=\&quot;&quot; + IOHelper.ResolveUrl(SystemDirectories.UmbracoClient) + &quot;/simpleEditor/images/link.gif\&quot; border=\&quot;0\&quot; align=\&quot;right\&quot; /&gt;&quot; +
				&quot;&lt;/a&gt;&quot; +
                &quot;&lt;a href=\&quot;javascript:insertTag(document.getElementById(&#39;&quot; + this.ClientID + &quot;&#39;), &#39;em&#39;, &#39;&#39;)\&quot;&gt;&quot; +
                &quot;&lt;img src=\&quot;&quot; + IOHelper.ResolveUrl(SystemDirectories.UmbracoClient) + &quot;/simpleEditor/images/italic.gif\&quot; border=\&quot;0\&quot; style=\&quot;margin-left: 3px; margin-right: 3px;\&quot; align=\&quot;right\&quot; /&gt;&quot; +
				&quot;&lt;/a&gt;&quot; +
				&quot; &lt;a href=\&quot;javascript:insertTag(document.getElementById(&#39;&quot; + this.ClientID + &quot;&#39;), &#39;strong&#39;, &#39;&#39;)\&quot;&gt;&quot; +
                &quot;&lt;img src=\&quot;&quot; + IOHelper.ResolveUrl(SystemDirectories.UmbracoClient) + &quot;/simpleEditor/images/bold.gif\&quot; border=\&quot;0\&quot; align=\&quot;right\&quot; /&gt;&quot; +
				&quot;&lt;/a&gt;&quot; +
				&quot;&lt;br/&gt;&lt;/p&gt;&quot;);
			base.Render(output);
			output.WriteLine(&quot;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&quot;);
		}
	}
}
    </pre>
    <script type="text/javascript">
      highlightRanges([[20,3,20,45,0],[21,3,21,4,0],[22,4,22,17,0],[24,3,24,4,0],[28,8,28,9,0],[28,9,28,22,0],[28,22,28,23,0],[33,8,33,9,0],[33,9,33,21,0],[33,21,33,22,0],[36,29,36,30,0],[36,30,36,42,0],[36,42,36,43,0],[39,3,39,4,0],[40,4,40,28,0],[41,3,41,4,0],[44,3,44,4,0],[45,4,45,20,0],[46,4,46,68,0],[47,4,47,18,0],[48,4,48,28,0],[49,5,49,42,0],[50,4,50,45,0],[51,5,51,35,0],[54,3,54,4,0],[57,3,57,4,0],[58,4,58,20,0],[59,13,61,73,0],[62,13,80,15,0],[82,13,83,31,0],[85,3,85,4,0],[88,3,88,4,0],[89,4,89,89,0],[91,4,100,18,0],[101,4,101,24,0],[102,4,102,43,0],[103,3,103,4,0]]);
    </script>
  </body>
</html>