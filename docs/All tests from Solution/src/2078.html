<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Tom Pipe\Documents\Hexadigital\Code\Umbraco\Umbraco-CMS\src\Umbraco.Core\Models\Rdbms\PropertyDataDto.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using Umbraco.Core.Persistence;
using Umbraco.Core.Persistence.DatabaseAnnotations;

namespace Umbraco.Core.Models.Rdbms
{
    [TableName(&quot;cmsPropertyData&quot;)]
    [PrimaryKey(&quot;id&quot;)]
    [ExplicitColumns]
    internal class PropertyDataDto
    {
        [Column(&quot;id&quot;)]
        [PrimaryKeyColumn]
        public int Id { get; set; }

        [Column(&quot;contentNodeId&quot;)]
        [ForeignKey(typeof(NodeDto))]
        [Index(IndexTypes.UniqueNonClustered, Name = &quot;IX_cmsPropertyData_1&quot;, ForColumns = &quot;contentNodeId,versionId,propertytypeid&quot;)]
        public int NodeId { get; set; }

        [Column(&quot;versionId&quot;)]
        [NullSetting(NullSetting = NullSettings.Null)]
        [Index(IndexTypes.NonClustered, Name = &quot;IX_cmsPropertyData_2&quot;)]
        public Guid? VersionId { get; set; }

        [Column(&quot;propertytypeid&quot;)]
        [ForeignKey(typeof(PropertyTypeDto))]
        [Index(IndexTypes.NonClustered, Name = &quot;IX_cmsPropertyData_3&quot;)]
        public int PropertyTypeId { get; set; }

        [Column(&quot;dataInt&quot;)]
        [NullSetting(NullSetting = NullSettings.Null)]
        public int? Integer { get; set; }

        private decimal? _decimalValue;

        [Column(&quot;dataDecimal&quot;)]
        [NullSetting(NullSetting = NullSettings.Null)]
        public decimal? Decimal
        {
            get
            {
                return _decimalValue;
            }
            set
            {
                // need to normalize the value (change the scaling factor and remove trailing zeroes)
                // because the underlying database probably has messed with the scaling factor.
                _decimalValue = value.HasValue ? (decimal?) value.Value.Normalize() : null;
            }
        }

        [Column(&quot;dataDate&quot;)]
        [NullSetting(NullSetting = NullSettings.Null)]
        public DateTime? Date { get; set; }

        [Column(&quot;dataNvarchar&quot;)]
        [NullSetting(NullSetting = NullSettings.Null)]
        [Length(500)]
        public string VarChar { get; set; }

        [Column(&quot;dataNtext&quot;)]
        [NullSetting(NullSetting = NullSettings.Null)]
        [SpecialDbType(SpecialDbTypes.NTEXT)]
        public string Text { get; set; }

        [ResultColumn]
        public PropertyTypeDto PropertyTypeDto { get; set; }

        [Ignore]
        public object GetValue
        {
            get
            {
                if (Integer.HasValue)
                {
                    return Integer.Value;
                }

                if (Decimal.HasValue)
                {
                    return Decimal.Value;
                }
                
                if (Date.HasValue)
                {
                    return Date.Value;
                }
                
                if (string.IsNullOrEmpty(VarChar) == false)
                {
                    return VarChar;
                }

                if (string.IsNullOrEmpty(Text) == false)
                {
                    return Text;
                }

                return null;
            }
        }

        protected bool Equals(PropertyDataDto other)
        {
            return Id == other.Id;
        }

        public override bool Equals(object obj)
        {
            if (ReferenceEquals(null, obj)) return false;
            if (ReferenceEquals(this, obj)) return true;
            if (obj.GetType() != this.GetType()) return false;
            return Equals((PropertyDataDto) obj);
        }

        public override int GetHashCode()
        {
            return Id;
        }
    }
}
    </pre>
    <script type="text/javascript">
      highlightRanges([[14,25,14,29,1],[14,30,14,34,1],[19,29,19,33,1],[19,34,19,38,1],[24,34,24,38,1],[24,39,24,43,1],[29,37,29,41,1],[29,42,29,46,1],[33,31,33,35,1],[33,36,33,40,1],[42,13,42,14,1],[43,17,43,38,1],[44,13,44,14,1],[46,13,46,14,1],[49,17,49,92,1],[50,13,50,14,1],[55,33,55,37,1],[55,38,55,42,1],[60,33,60,37,1],[60,38,60,42,1],[65,30,65,34,1],[65,35,65,39,1],[68,50,68,54,0],[68,55,68,59,1],[74,13,74,14,1],[75,17,75,38,1],[76,17,76,18,1],[77,21,77,42,1],[80,17,80,38,1],[81,17,81,18,1],[82,21,82,42,1],[85,17,85,35,1],[86,17,86,18,1],[87,21,87,39,1],[90,17,90,60,1],[91,17,91,18,1],[92,21,92,36,1],[95,17,95,57,1],[96,17,96,18,1],[97,21,97,33,1],[100,17,100,29,1],[101,13,101,14,1],[105,9,105,10,0],[106,13,106,35,0],[107,9,107,10,0],[110,9,110,10,0],[111,13,111,44,0],[111,45,111,58,0],[112,13,112,44,0],[112,45,112,57,0],[113,13,113,49,0],[113,50,113,63,0],[114,13,114,50,0],[115,9,115,10,0],[118,9,118,10,0],[119,13,119,23,0],[120,9,120,10,0]]);
    </script>
  </body>
</html>