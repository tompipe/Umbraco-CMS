<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Tom Pipe\Documents\Hexadigital\Code\Umbraco\Umbraco-CMS\src\Umbraco.Web\umbraco.presentation\umbraco\settings\editLanguage.aspx.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using System.Collections;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Globalization;
using System.Web;
using System.Web.SessionState;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.UI.HtmlControls;
using umbraco.cms.presentation.Trees;
using Umbraco.Core;
using Umbraco.Web.Trees;

namespace umbraco.settings
{
	/// &lt;summary&gt;
	/// Summary description for editLanguage.
	/// &lt;/summary&gt;
    [WebformsPageTreeAuthorize(Constants.Trees.Languages)]
	public partial class editLanguage : BasePages.UmbracoEnsuredPage
	{
	    public editLanguage()
	    {
            CurrentApp = BusinessLogic.DefaultApps.settings.ToString();

	    }
		protected System.Web.UI.WebControls.TextBox NameTxt;
		protected System.Web.UI.WebControls.Literal DisplayName;
		cms.businesslogic.language.Language currentLanguage;
	
		protected void Page_Load(object sender, System.EventArgs e)
		{
			currentLanguage = new cms.businesslogic.language.Language(int.Parse(helper.Request(&quot;id&quot;)));
           

			// Put user code to initialize the page here
            Panel1.Text = ui.Text(&quot;editlanguage&quot;);
            pp_language.Text = ui.Text(&quot;language&quot;, &quot;displayName&quot;, base.getUser());
            if (!IsPostBack) 
			{
				updateCultureList();

				ClientTools
					.SetActiveTreeType(Constants.Trees.Languages)
					.SyncTree(helper.Request(&quot;id&quot;), false);
			}
			
		}

		private void updateCultureList() 
		{
            SortedList sortedCultures = new SortedList();
            Cultures.Items.Clear();
            Cultures.Items.Add(new ListItem(ui.Text(&quot;choose&quot;) + &quot;...&quot;, &quot;&quot;));
            foreach (CultureInfo ci in CultureInfo.GetCultures(CultureTypes.AllCultures))
                sortedCultures.Add(ci.DisplayName + &quot;|||&quot; + Guid.NewGuid().ToString(), ci.Name);

            IDictionaryEnumerator ide = sortedCultures.GetEnumerator();
            while (ide.MoveNext())
            {
                ListItem li = new ListItem(ide.Key.ToString().Substring(0, ide.Key.ToString().IndexOf(&quot;|||&quot;)), ide.Value.ToString());
                if (ide.Value.ToString() == currentLanguage.CultureAlias)
                    li.Selected = true;

                Cultures.Items.Add(li);
            }
        }

		private void save_click(object sender, EventArgs e) 
		{
			currentLanguage.CultureAlias = Cultures.SelectedValue;
		    currentLanguage.Save();
			updateCultureList();

            ClientTools.ShowSpeechBubble(speechBubbleIcon.save, ui.Text(&quot;speechBubbles&quot;, &quot;languageSaved&quot;), &quot;&quot;);	
		}

		#region Web Form Designer generated code
		override protected void OnInit(EventArgs e)
		{
			Panel1.hasMenu = true;
			var save = Panel1.Menu.NewButton();
			save.Click += save_click;
			save.ToolTip = ui.Text(&quot;save&quot;);
            save.Text = ui.Text(&quot;save&quot;);
		    save.ID = &quot;save&quot;;
            save.ButtonType = uicontrols.MenuButtonType.Primary;
	
			Panel1.Text = ui.Text(&quot;language&quot;, &quot;editLanguage&quot;);

			InitializeComponent();
			base.OnInit(e);
		}
		
		/// &lt;summary&gt;
		/// Required method for Designer support - do not modify
		/// the contents of this method with the code editor.
		/// &lt;/summary&gt;
		private void InitializeComponent()
		{    

		}
		#endregion
	}
}

    </pre>
    <script type="text/javascript">
      highlightRanges([[24,6,24,27,0],[25,6,25,7,0],[26,13,26,72,0],[28,6,28,7,0],[34,3,34,4,0],[35,4,35,95,0],[39,13,39,51,0],[40,13,40,83,0],[41,13,41,29,0],[42,4,42,5,0],[43,5,43,25,0],[45,5,47,45,0],[48,4,48,5,0],[50,3,50,4,0],[53,3,53,4,0],[54,13,54,58,0],[55,13,55,36,0],[56,13,56,77,0],[57,13,57,20,0],[57,22,57,36,0],[57,37,57,39,0],[57,40,57,89,0],[58,17,58,97,0],[60,13,60,72,0],[61,13,61,35,0],[62,13,62,14,0],[63,17,63,134,0],[64,17,64,74,0],[65,21,65,40,0],[67,17,67,40,0],[68,13,68,14,0],[69,9,69,10,0],[72,3,72,4,0],[73,4,73,58,0],[74,7,74,30,0],[75,4,75,24,0],[77,13,77,112,0],[78,3,78,4,0],[82,3,82,4,0],[83,4,83,26,0],[84,4,84,39,0],[85,4,85,29,0],[86,4,86,35,0],[87,13,87,41,0],[88,7,88,24,0],[89,13,89,65,0],[91,4,91,54,0],[93,4,93,26,0],[94,4,94,19,0],[95,3,95,4,0],[102,3,102,4,0],[104,3,104,4,0]]);
    </script>
  </body>
</html>