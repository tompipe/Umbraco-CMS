<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Tom Pipe\Documents\Hexadigital\Code\Umbraco\Umbraco-CMS\src\Umbraco.Tests\Services\PreValueConverterTests.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using System.Collections.Generic;
using System.Linq;
using NUnit.Framework;
using Umbraco.Core.Models;
using Umbraco.Core.Persistence.Repositories;
using Umbraco.Core.Services;

namespace Umbraco.Tests.Services
{
    [TestFixture]
    public class PreValueConverterTests
    {
        [Test]
        public void Can_Convert_To_Dictionary_Pre_Value_Collection()
        {
            var list = new List&lt;Tuple&lt;PreValue, string, int&gt;&gt;
                {
                    new Tuple&lt;PreValue, string, int&gt;(new PreValue(10, &quot;value1&quot;), &quot;key1&quot;, 0),
                    new Tuple&lt;PreValue, string, int&gt;(new PreValue(11, &quot;value2&quot;), &quot;key2&quot;, 3),
                    new Tuple&lt;PreValue, string, int&gt;(new PreValue(12, &quot;value3&quot;), &quot;key3&quot;, 2),
                    new Tuple&lt;PreValue, string, int&gt;(new PreValue(13, &quot;value4&quot;), &quot;key4&quot;, 1)
                };

            var result = DataTypeDefinitionRepository.PreValueConverter.ConvertToPreValuesCollection(list);

            Assert.Throws&lt;InvalidOperationException&gt;(() =&gt;
                {
                    var blah = result.PreValuesAsArray;
                });

            Assert.AreEqual(4, result.PreValuesAsDictionary.Count);
            Assert.AreEqual(&quot;key1&quot;, result.PreValuesAsDictionary.ElementAt(0).Key);
            Assert.AreEqual(&quot;key4&quot;, result.PreValuesAsDictionary.ElementAt(1).Key);
            Assert.AreEqual(&quot;key3&quot;, result.PreValuesAsDictionary.ElementAt(2).Key);
            Assert.AreEqual(&quot;key2&quot;, result.PreValuesAsDictionary.ElementAt(3).Key);

        }

        [Test]
        public void Can_Convert_To_Array_Pre_Value_Collection_When_Empty_Key()
        {
            var list = new List&lt;Tuple&lt;PreValue, string, int&gt;&gt;
                {
                    new Tuple&lt;PreValue, string, int&gt;(new PreValue(10, &quot;value1&quot;), &quot;&quot;, 0),
                    new Tuple&lt;PreValue, string, int&gt;(new PreValue(11, &quot;value2&quot;), &quot;&quot;, 3),
                    new Tuple&lt;PreValue, string, int&gt;(new PreValue(12, &quot;value3&quot;), &quot;&quot;, 2),
                    new Tuple&lt;PreValue, string, int&gt;(new PreValue(13, &quot;value4&quot;), &quot;&quot;, 1)
                };

            var result = DataTypeDefinitionRepository.PreValueConverter.ConvertToPreValuesCollection(list);

            Assert.Throws&lt;InvalidOperationException&gt;(() =&gt;
                {
                    var blah = result.PreValuesAsDictionary;
                });

            Assert.AreEqual(4, result.PreValuesAsArray.Count());
            Assert.AreEqual(&quot;value1&quot;, result.PreValuesAsArray.ElementAt(0).Value);
            Assert.AreEqual(&quot;value4&quot;, result.PreValuesAsArray.ElementAt(1).Value);
            Assert.AreEqual(&quot;value3&quot;, result.PreValuesAsArray.ElementAt(2).Value);
            Assert.AreEqual(&quot;value2&quot;, result.PreValuesAsArray.ElementAt(3).Value);

        }

        [Test]
        public void Can_Convert_To_Array_Pre_Value_Collection()
        {
            var list = new List&lt;Tuple&lt;PreValue, string, int&gt;&gt;
                {
                    new Tuple&lt;PreValue, string, int&gt;(new PreValue(10, &quot;value1&quot;), &quot;key1&quot;, 0),
                    new Tuple&lt;PreValue, string, int&gt;(new PreValue(11, &quot;value2&quot;), &quot;key1&quot;, 3),
                    new Tuple&lt;PreValue, string, int&gt;(new PreValue(12, &quot;value3&quot;), &quot;key3&quot;, 2),
                    new Tuple&lt;PreValue, string, int&gt;(new PreValue(13, &quot;value4&quot;), &quot;key4&quot;, 1)
                };

            var result = DataTypeDefinitionRepository.PreValueConverter.ConvertToPreValuesCollection(list);

            Assert.Throws&lt;InvalidOperationException&gt;(() =&gt;
                {
                    var blah = result.PreValuesAsDictionary;
                });

            Assert.AreEqual(4, result.PreValuesAsArray.Count());
            Assert.AreEqual(&quot;value1&quot;, result.PreValuesAsArray.ElementAt(0).Value);
            Assert.AreEqual(&quot;value4&quot;, result.PreValuesAsArray.ElementAt(1).Value);
            Assert.AreEqual(&quot;value3&quot;, result.PreValuesAsArray.ElementAt(2).Value);
            Assert.AreEqual(&quot;value2&quot;, result.PreValuesAsArray.ElementAt(3).Value);

        }
    }
}
    </pre>
    <script type="text/javascript">
      highlightRanges([[16,9,16,10,1],[17,13,23,19,1],[25,13,25,108,1],[27,13,28,17,1],[28,17,28,18,1],[28,18,29,21,1],[29,21,29,56,1],[29,56,30,17,1],[30,17,30,18,0],[30,18,30,20,1],[27,13,30,20,1],[32,13,32,68,1],[33,13,33,84,1],[34,13,34,84,1],[35,13,35,84,1],[36,13,36,84,1],[38,9,38,10,1],[42,9,42,10,1],[43,13,49,19,1],[51,13,51,108,1],[53,13,54,17,1],[54,17,54,18,1],[54,18,55,21,1],[55,21,55,61,1],[55,61,56,17,1],[56,17,56,18,0],[56,18,56,20,1],[53,13,56,20,1],[58,13,58,65,1],[59,13,59,83,1],[60,13,60,83,1],[61,13,61,83,1],[62,13,62,83,1],[64,9,64,10,1],[68,9,68,10,1],[69,13,75,19,1],[77,13,77,108,1],[79,13,80,17,1],[80,17,80,18,1],[80,18,81,21,1],[81,21,81,61,1],[81,61,82,17,1],[82,17,82,18,0],[82,18,82,20,1],[79,13,82,20,1],[84,13,84,65,1],[85,13,85,83,1],[86,13,86,83,1],[87,13,87,83,1],[88,13,88,83,1],[90,9,90,10,1]]);
    </script>
  </body>
</html>