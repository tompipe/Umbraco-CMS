<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Tom Pipe\Documents\Hexadigital\Code\Umbraco\Umbraco-CMS\src\Umbraco.Tests\Services\MemberServiceTests.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using System.Linq;
using NUnit.Framework;
using Umbraco.Core;
using Umbraco.Core.Events;
using Umbraco.Core.Models;
using Umbraco.Core.Models.EntityBase;
using Umbraco.Core.Models.Membership;
using Umbraco.Core.Models.Rdbms;
using Umbraco.Core.Persistence;
using Umbraco.Core.Persistence.DatabaseModelDefinitions;
using Umbraco.Core.Persistence.Querying;
using Umbraco.Core.Persistence.Repositories;
using Umbraco.Core.Persistence.UnitOfWork;
using Umbraco.Core.Services;
using Umbraco.Tests.TestHelpers;
using Umbraco.Tests.TestHelpers.Entities;

namespace Umbraco.Tests.Services
{
    [DatabaseTestBehavior(DatabaseBehavior.NewDbFileAndSchemaPerTest)]
    [TestFixture, RequiresSTA]
    public class MemberServiceTests : BaseServiceTest
    {
        [SetUp]
        public override void Initialize()
        {
            base.Initialize();
        }

        [TearDown]
        public override void TearDown()
        {
            base.TearDown();
        }

        [Test]
        public void Can_Create_Member()
        {
            IMemberType memberType = MockedContentTypes.CreateSimpleMemberType();
            ServiceContext.MemberTypeService.Save(memberType);
            IMember member = MockedMember.CreateSimpleMember(memberType, &quot;test&quot;, &quot;test@test.com&quot;, &quot;pass&quot;, &quot;test&quot;);
            ServiceContext.MemberService.Save(member);

            Assert.AreNotEqual(0, member.Id);
            var foundMember = ServiceContext.MemberService.GetById(member.Id);
            Assert.IsNotNull(foundMember);
            Assert.AreEqual(&quot;test@test.com&quot;, foundMember.Email);
        }

        [Test]
        public void Can_Create_Member_With_Long_TLD_In_Email()
        {
            IMemberType memberType = MockedContentTypes.CreateSimpleMemberType();
            ServiceContext.MemberTypeService.Save(memberType);
            IMember member = MockedMember.CreateSimpleMember(memberType, &quot;test&quot;, &quot;test@test.marketing&quot;, &quot;pass&quot;, &quot;test&quot;);
            ServiceContext.MemberService.Save(member);

            Assert.AreNotEqual(0, member.Id);
            var foundMember = ServiceContext.MemberService.GetById(member.Id);
            Assert.IsNotNull(foundMember);
            Assert.AreEqual(&quot;test@test.marketing&quot;, foundMember.Email);
        }

        [Test]
        public void Can_Create_Role()
        {
            ServiceContext.MemberService.AddRole(&quot;MyTestRole&quot;);

            var found = ServiceContext.MemberService.GetAllRoles();

            Assert.AreEqual(1, found.Count());
            Assert.AreEqual(&quot;MyTestRole&quot;, found.Single());
        }

        [Test]
        public void Can_Create_Duplicate_Role()
        {
            ServiceContext.MemberService.AddRole(&quot;MyTestRole&quot;);
            ServiceContext.MemberService.AddRole(&quot;MyTestRole&quot;);

            var found = ServiceContext.MemberService.GetAllRoles();

            Assert.AreEqual(1, found.Count());
            Assert.AreEqual(&quot;MyTestRole&quot;, found.Single());
        }

        [Test]
        public void Can_Get_All_Roles()
        {
            ServiceContext.MemberService.AddRole(&quot;MyTestRole1&quot;);
            ServiceContext.MemberService.AddRole(&quot;MyTestRole2&quot;);
            ServiceContext.MemberService.AddRole(&quot;MyTestRole3&quot;);

            var found = ServiceContext.MemberService.GetAllRoles();

            Assert.AreEqual(3, found.Count());
        }

        [Test]
        public void Can_Get_All_Roles_By_Member_Id()
        {
            IMemberType memberType = MockedContentTypes.CreateSimpleMemberType();
            ServiceContext.MemberTypeService.Save(memberType);
            IMember member = MockedMember.CreateSimpleMember(memberType, &quot;test&quot;, &quot;test@test.com&quot;, &quot;pass&quot;, &quot;test&quot;);
            ServiceContext.MemberService.Save(member);

            ServiceContext.MemberService.AddRole(&quot;MyTestRole1&quot;);
            ServiceContext.MemberService.AddRole(&quot;MyTestRole2&quot;);
            ServiceContext.MemberService.AddRole(&quot;MyTestRole3&quot;);
            ServiceContext.MemberService.AssignRoles(new[] { member.Id }, new[] { &quot;MyTestRole1&quot;, &quot;MyTestRole2&quot; });

            var memberRoles = ServiceContext.MemberService.GetAllRoles(member.Id);

            Assert.AreEqual(2, memberRoles.Count());

        }

        [Test]
        public void Can_Get_All_Roles_By_Member_Username()
        {
            IMemberType memberType = MockedContentTypes.CreateSimpleMemberType();
            ServiceContext.MemberTypeService.Save(memberType);
            IMember member = MockedMember.CreateSimpleMember(memberType, &quot;test&quot;, &quot;test@test.com&quot;, &quot;pass&quot;, &quot;test&quot;);
            ServiceContext.MemberService.Save(member);
            //need to test with &#39;@&#39; symbol in the lookup
            IMember member2 = MockedMember.CreateSimpleMember(memberType, &quot;test2&quot;, &quot;test2@test.com&quot;, &quot;pass&quot;, &quot;test2@test.com&quot;);
            ServiceContext.MemberService.Save(member2);

            ServiceContext.MemberService.AddRole(&quot;MyTestRole1&quot;);
            ServiceContext.MemberService.AddRole(&quot;MyTestRole2&quot;);
            ServiceContext.MemberService.AddRole(&quot;MyTestRole3&quot;);
            ServiceContext.MemberService.AssignRoles(new[] { member.Id, member2.Id }, new[] { &quot;MyTestRole1&quot;, &quot;MyTestRole2&quot; });

            var memberRoles = ServiceContext.MemberService.GetAllRoles(&quot;test&quot;);
            Assert.AreEqual(2, memberRoles.Count());

            var memberRoles2 = ServiceContext.MemberService.GetAllRoles(&quot;test2@test.com&quot;);
            Assert.AreEqual(2, memberRoles2.Count());
        }

        [Test]
        public void Can_Delete_Role()
        {
            ServiceContext.MemberService.AddRole(&quot;MyTestRole1&quot;);

            ServiceContext.MemberService.DeleteRole(&quot;MyTestRole1&quot;, false);

            var memberRoles = ServiceContext.MemberService.GetAllRoles();

            Assert.AreEqual(0, memberRoles.Count());
        }

        [Test]
        public void Throws_When_Deleting_Assigned_Role()
        {
            IMemberType memberType = MockedContentTypes.CreateSimpleMemberType();
            ServiceContext.MemberTypeService.Save(memberType);
            IMember member = MockedMember.CreateSimpleMember(memberType, &quot;test&quot;, &quot;test@test.com&quot;, &quot;pass&quot;, &quot;test&quot;);
            ServiceContext.MemberService.Save(member);

            ServiceContext.MemberService.AddRole(&quot;MyTestRole1&quot;);            
            ServiceContext.MemberService.AssignRoles(new[] { member.Id }, new[] { &quot;MyTestRole1&quot;, &quot;MyTestRole2&quot; });

            Assert.Throws&lt;InvalidOperationException&gt;(() =&gt; ServiceContext.MemberService.DeleteRole(&quot;MyTestRole1&quot;, true));
        }

        [Test]
        public void Can_Get_Members_In_Role()
        {
            ServiceContext.MemberService.AddRole(&quot;MyTestRole1&quot;);
            var roleId = DatabaseContext.Database.ExecuteScalar&lt;int&gt;(&quot;SELECT id from umbracoNode where [text] = &#39;MyTestRole1&#39;&quot;);

            IMemberType memberType = MockedContentTypes.CreateSimpleMemberType();
            ServiceContext.MemberTypeService.Save(memberType);
            var member1 = MockedMember.CreateSimpleMember(memberType, &quot;test1&quot;, &quot;test1@test.com&quot;, &quot;pass&quot;, &quot;test1&quot;);
            ServiceContext.MemberService.Save(member1);
            var member2 = MockedMember.CreateSimpleMember(memberType, &quot;test2&quot;, &quot;test2@test.com&quot;, &quot;pass&quot;, &quot;test2&quot;);
            ServiceContext.MemberService.Save(member2);

            DatabaseContext.Database.Insert(new Member2MemberGroupDto {MemberGroup = roleId, Member = member1.Id});
            DatabaseContext.Database.Insert(new Member2MemberGroupDto { MemberGroup = roleId, Member = member2.Id });

            var membersInRole = ServiceContext.MemberService.GetMembersInRole(&quot;MyTestRole1&quot;);
            Assert.AreEqual(2, membersInRole.Count());
        }

        [Test]
        public void Cannot_Save_Member_With_Empty_Name()
        {
            IMemberType memberType = MockedContentTypes.CreateSimpleMemberType();
            ServiceContext.MemberTypeService.Save(memberType);
            IMember member = MockedMember.CreateSimpleMember(memberType, string.Empty, &quot;test@test.com&quot;, &quot;pass&quot;, &quot;test&quot;);

            // Act &amp; Assert
            Assert.Throws&lt;ArgumentException&gt;(() =&gt; ServiceContext.MemberService.Save(member));
            
        }

        [TestCase(&quot;MyTestRole1&quot;, &quot;test1&quot;, StringPropertyMatchType.StartsWith, 1)]
        [TestCase(&quot;MyTestRole1&quot;, &quot;test&quot;, StringPropertyMatchType.StartsWith, 3)]
        [TestCase(&quot;MyTestRole1&quot;, &quot;test1&quot;, StringPropertyMatchType.Exact, 1)]
        [TestCase(&quot;MyTestRole1&quot;, &quot;test&quot;, StringPropertyMatchType.Exact, 0)]
        [TestCase(&quot;MyTestRole1&quot;, &quot;st2&quot;, StringPropertyMatchType.EndsWith, 1)]
        [TestCase(&quot;MyTestRole1&quot;, &quot;test%&quot;, StringPropertyMatchType.Wildcard, 3)]
        public void Find_Members_In_Role(string roleName1, string usernameToMatch, StringPropertyMatchType matchType, int resultCount)
        {
            IMemberType memberType = MockedContentTypes.CreateSimpleMemberType();
            ServiceContext.MemberTypeService.Save(memberType);
            var member1 = MockedMember.CreateSimpleMember(memberType, &quot;test1&quot;, &quot;test1@test.com&quot;, &quot;pass&quot;, &quot;test1&quot;);
            ServiceContext.MemberService.Save(member1);
            var member2 = MockedMember.CreateSimpleMember(memberType, &quot;test2&quot;, &quot;test2@test.com&quot;, &quot;pass&quot;, &quot;test2&quot;);
            ServiceContext.MemberService.Save(member2);
            var member3 = MockedMember.CreateSimpleMember(memberType, &quot;test3&quot;, &quot;test3@test.com&quot;, &quot;pass&quot;, &quot;test3&quot;);
            ServiceContext.MemberService.Save(member3);

            ServiceContext.MemberService.AssignRoles(new[] { member1.Id, member2.Id, member3.Id }, new[] { roleName1 });

            var result = ServiceContext.MemberService.FindMembersInRole(roleName1, usernameToMatch, matchType);
            Assert.AreEqual(resultCount, result.Count());
        }

        [Test]
        public void Associate_Members_To_Roles_With_Member_Id()
        {
            ServiceContext.MemberService.AddRole(&quot;MyTestRole1&quot;);

            IMemberType memberType = MockedContentTypes.CreateSimpleMemberType();
            ServiceContext.MemberTypeService.Save(memberType);
            var member1 = MockedMember.CreateSimpleMember(memberType, &quot;test1&quot;, &quot;test1@test.com&quot;, &quot;pass&quot;, &quot;test1&quot;);
            ServiceContext.MemberService.Save(member1);
            var member2 = MockedMember.CreateSimpleMember(memberType, &quot;test2&quot;, &quot;test2@test.com&quot;, &quot;pass&quot;, &quot;test2&quot;);
            ServiceContext.MemberService.Save(member2);

            ServiceContext.MemberService.AssignRoles(new[] { member1.Id, member2.Id }, new[] { &quot;MyTestRole1&quot; });

            var membersInRole = ServiceContext.MemberService.GetMembersInRole(&quot;MyTestRole1&quot;);

            Assert.AreEqual(2, membersInRole.Count());
        }

        [Test]
        public void Associate_Members_To_Roles_With_Member_Username()
        {
            ServiceContext.MemberService.AddRole(&quot;MyTestRole1&quot;);

            IMemberType memberType = MockedContentTypes.CreateSimpleMemberType();
            ServiceContext.MemberTypeService.Save(memberType);
            var member1 = MockedMember.CreateSimpleMember(memberType, &quot;test1&quot;, &quot;test1@test.com&quot;, &quot;pass&quot;, &quot;test1&quot;);
            ServiceContext.MemberService.Save(member1);
            var member2 = MockedMember.CreateSimpleMember(memberType, &quot;test2&quot;, &quot;test2@test.com&quot;, &quot;pass&quot;, &quot;test2&quot;);
            ServiceContext.MemberService.Save(member2);

            ServiceContext.MemberService.AssignRoles(new[] { member1.Username, member2.Username }, new[] { &quot;MyTestRole1&quot; });

            var membersInRole = ServiceContext.MemberService.GetMembersInRole(&quot;MyTestRole1&quot;);

            Assert.AreEqual(2, membersInRole.Count());
        }

        [Test]
        public void Associate_Members_To_Roles_With_Member_Username_Containing_At_Symbols()
        {
            ServiceContext.MemberService.AddRole(&quot;MyTestRole1&quot;);

            IMemberType memberType = MockedContentTypes.CreateSimpleMemberType();
            ServiceContext.MemberTypeService.Save(memberType);
            var member1 = MockedMember.CreateSimpleMember(memberType, &quot;test1&quot;, &quot;test1@test.com&quot;, &quot;pass&quot;, &quot;test1@test.com&quot;);
            ServiceContext.MemberService.Save(member1);
            var member2 = MockedMember.CreateSimpleMember(memberType, &quot;test2&quot;, &quot;test2@test.com&quot;, &quot;pass&quot;, &quot;test2@test.com&quot;);
            ServiceContext.MemberService.Save(member2);

            ServiceContext.MemberService.AssignRoles(new[] { member1.Username, member2.Username }, new[] { &quot;MyTestRole1&quot; });

            var membersInRole = ServiceContext.MemberService.GetMembersInRole(&quot;MyTestRole1&quot;);

            Assert.AreEqual(2, membersInRole.Count());
        }

        [Test]
        public void Associate_Members_To_Roles_With_New_Role()
        {
            IMemberType memberType = MockedContentTypes.CreateSimpleMemberType();
            ServiceContext.MemberTypeService.Save(memberType);
            var member1 = MockedMember.CreateSimpleMember(memberType, &quot;test1&quot;, &quot;test1@test.com&quot;, &quot;pass&quot;, &quot;test1&quot;);
            ServiceContext.MemberService.Save(member1);
            var member2 = MockedMember.CreateSimpleMember(memberType, &quot;test2&quot;, &quot;test2@test.com&quot;, &quot;pass&quot;, &quot;test2&quot;);
            ServiceContext.MemberService.Save(member2);

            //implicitly create the role
            ServiceContext.MemberService.AssignRoles(new[] { member1.Username, member2.Username }, new[] { &quot;MyTestRole1&quot; });

            var membersInRole = ServiceContext.MemberService.GetMembersInRole(&quot;MyTestRole1&quot;);

            Assert.AreEqual(2, membersInRole.Count());
        }

        [Test]
        public void Remove_Members_From_Roles_With_Member_Id()
        {
            IMemberType memberType = MockedContentTypes.CreateSimpleMemberType();
            ServiceContext.MemberTypeService.Save(memberType);
            var member1 = MockedMember.CreateSimpleMember(memberType, &quot;test1&quot;, &quot;test1@test.com&quot;, &quot;pass&quot;, &quot;test1&quot;);
            ServiceContext.MemberService.Save(member1);
            var member2 = MockedMember.CreateSimpleMember(memberType, &quot;test2&quot;, &quot;test2@test.com&quot;, &quot;pass&quot;, &quot;test2&quot;);
            ServiceContext.MemberService.Save(member2);

            ServiceContext.MemberService.AssignRoles(new[] { member1.Id, member2.Id }, new[] { &quot;MyTestRole1&quot;, &quot;MyTestRole2&quot; });

            ServiceContext.MemberService.DissociateRoles(new[] {member1.Id }, new[] {&quot;MyTestRole1&quot;});
            ServiceContext.MemberService.DissociateRoles(new[] { member1.Id, member2.Id }, new[] { &quot;MyTestRole2&quot; });

            var membersInRole = ServiceContext.MemberService.GetMembersInRole(&quot;MyTestRole1&quot;);
            Assert.AreEqual(1, membersInRole.Count());
            membersInRole = ServiceContext.MemberService.GetMembersInRole(&quot;MyTestRole2&quot;);
            Assert.AreEqual(0, membersInRole.Count());
        }

        [Test]
        public void Remove_Members_From_Roles_With_Member_Username()
        {
            IMemberType memberType = MockedContentTypes.CreateSimpleMemberType();
            ServiceContext.MemberTypeService.Save(memberType);
            var member1 = MockedMember.CreateSimpleMember(memberType, &quot;test1&quot;, &quot;test1@test.com&quot;, &quot;pass&quot;, &quot;test1&quot;);
            ServiceContext.MemberService.Save(member1);
            var member2 = MockedMember.CreateSimpleMember(memberType, &quot;test2&quot;, &quot;test2@test.com&quot;, &quot;pass&quot;, &quot;test2&quot;);
            ServiceContext.MemberService.Save(member2);

            ServiceContext.MemberService.AssignRoles(new[] { member1.Username, member2.Username }, new[] { &quot;MyTestRole1&quot;, &quot;MyTestRole2&quot; });

            ServiceContext.MemberService.DissociateRoles(new[] { member1.Username }, new[] { &quot;MyTestRole1&quot; });
            ServiceContext.MemberService.DissociateRoles(new[] { member1.Username, member2.Username }, new[] { &quot;MyTestRole2&quot; });

            var membersInRole = ServiceContext.MemberService.GetMembersInRole(&quot;MyTestRole1&quot;);
            Assert.AreEqual(1, membersInRole.Count());
            membersInRole = ServiceContext.MemberService.GetMembersInRole(&quot;MyTestRole2&quot;);
            Assert.AreEqual(0, membersInRole.Count());
        }

        [Test]
        public void Can_Delete_member()
        {
            IMemberType memberType = MockedContentTypes.CreateSimpleMemberType();
            ServiceContext.MemberTypeService.Save(memberType);
            IMember member = MockedMember.CreateSimpleMember(memberType, &quot;test&quot;, &quot;test@test.com&quot;, &quot;pass&quot;, &quot;test&quot;);
            ServiceContext.MemberService.Save(member);

            ServiceContext.MemberService.Delete(member);
            var deleted = ServiceContext.MemberService.GetById(member.Id);

            // Assert
            Assert.That(deleted, Is.Null);
        }

        [Test]
        public void ContentXml_Created_When_Saved()
        {
            IMemberType memberType = MockedContentTypes.CreateSimpleMemberType();
            ServiceContext.MemberTypeService.Save(memberType);
            IMember member = MockedMember.CreateSimpleMember(memberType, &quot;test&quot;, &quot;test@test.com&quot;, &quot;pass&quot;, &quot;test&quot;);
            ServiceContext.MemberService.Save(member);

            var xml = DatabaseContext.Database.FirstOrDefault&lt;ContentXmlDto&gt;(&quot;WHERE nodeId = @Id&quot;, new { Id = member.Id });
            Assert.IsNotNull(xml);
        }

        [Test]
        public void Exists_By_Username()
        {
            IMemberType memberType = MockedContentTypes.CreateSimpleMemberType();
            ServiceContext.MemberTypeService.Save(memberType);
            IMember member = MockedMember.CreateSimpleMember(memberType, &quot;test&quot;, &quot;test@test.com&quot;, &quot;pass&quot;, &quot;test&quot;);
            ServiceContext.MemberService.Save(member);
            IMember member2 = MockedMember.CreateSimpleMember(memberType, &quot;test&quot;, &quot;test2@test.com&quot;, &quot;pass&quot;, &quot;test2@test.com&quot;);
            ServiceContext.MemberService.Save(member2);

            Assert.IsTrue(ServiceContext.MemberService.Exists(&quot;test&quot;));
            Assert.IsFalse(ServiceContext.MemberService.Exists(&quot;notFound&quot;));
            Assert.IsTrue(ServiceContext.MemberService.Exists(&quot;test2@test.com&quot;));
        }

        [Test]
        public void Exists_By_Id()
        {
            IMemberType memberType = MockedContentTypes.CreateSimpleMemberType();
            ServiceContext.MemberTypeService.Save(memberType);
            IMember member = MockedMember.CreateSimpleMember(memberType, &quot;test&quot;, &quot;test@test.com&quot;, &quot;pass&quot;, &quot;test&quot;);
            ServiceContext.MemberService.Save(member);

            Assert.IsTrue(ServiceContext.MemberService.Exists(member.Id));
            Assert.IsFalse(ServiceContext.MemberService.Exists(9876));
        }

        [Test]
        public void Tracks_Dirty_Changes()
        {
            IMemberType memberType = MockedContentTypes.CreateSimpleMemberType();
            ServiceContext.MemberTypeService.Save(memberType);
            IMember member = MockedMember.CreateSimpleMember(memberType, &quot;test&quot;, &quot;test@test.com&quot;, &quot;pass&quot;, &quot;test&quot;);
            ServiceContext.MemberService.Save(member);

            var resolved = ServiceContext.MemberService.GetByEmail(member.Email);

            //NOTE: This will not trigger a property isDirty because this is not based on a &#39;Property&#39;, it is
            // just a c# property of the Member object
            resolved.Email = &quot;changed@test.com&quot;;
            //NOTE: this WILL trigger a property isDirty because setting this c# property actually sets a value of
            // the underlying &#39;Property&#39;
            resolved.FailedPasswordAttempts = 1234;

            var dirtyMember = (ICanBeDirty)resolved;
            var dirtyProperties = resolved.Properties.Where(x =&gt; x.IsDirty()).ToList();
            Assert.IsTrue(dirtyMember.IsDirty());
            Assert.AreEqual(1, dirtyProperties.Count());
        }

        [Test]
        public void Get_By_Email()
        {
            IMemberType memberType = MockedContentTypes.CreateSimpleMemberType();
            ServiceContext.MemberTypeService.Save(memberType);
            IMember member = MockedMember.CreateSimpleMember(memberType, &quot;test&quot;, &quot;test@test.com&quot;, &quot;pass&quot;, &quot;test&quot;);
            ServiceContext.MemberService.Save(member);

            Assert.IsNotNull(ServiceContext.MemberService.GetByEmail(member.Email));
            Assert.IsNull(ServiceContext.MemberService.GetByEmail(&quot;do@not.find&quot;));
        }

        [Test]
        public void Get_Member_Name()
        {
            IMemberType memberType = MockedContentTypes.CreateSimpleMemberType();
            ServiceContext.MemberTypeService.Save(memberType);
            IMember member = MockedMember.CreateSimpleMember(memberType, &quot;Test Real Name&quot;, &quot;test@test.com&quot;, &quot;pass&quot;, &quot;testUsername&quot;);
            ServiceContext.MemberService.Save(member);


            Assert.AreEqual(&quot;Test Real Name&quot;, member.Name);
        }

        [Test]
        public void Get_Member_Name_In_Created_Event()
        {
            IMemberType memberType = MockedContentTypes.CreateSimpleMemberType();
            ServiceContext.MemberTypeService.Save(memberType);

            TypedEventHandler&lt;IMemberService, NewEventArgs&lt;IMember&gt;&gt; callback = (sender, args) =&gt;
            {
                Assert.AreEqual(&quot;Test Real Name&quot;, args.Entity.Name);
            };

            MemberService.Created += callback;
            var member = ServiceContext.MemberService.CreateMember(&quot;testUsername&quot;, &quot;test@test.com&quot;, &quot;Test Real Name&quot;, memberType);
            MemberService.Created -= callback;
        }

        [Test]
        public void Get_By_Username()
        {
            IMemberType memberType = MockedContentTypes.CreateSimpleMemberType();
            ServiceContext.MemberTypeService.Save(memberType);
            IMember member = MockedMember.CreateSimpleMember(memberType, &quot;test&quot;, &quot;test@test.com&quot;, &quot;pass&quot;, &quot;test&quot;);
            ServiceContext.MemberService.Save(member);

            Assert.IsNotNull(ServiceContext.MemberService.GetByUsername(member.Username));
            Assert.IsNull(ServiceContext.MemberService.GetByUsername(&quot;notFound&quot;));
        }

        [Test]
        public void Get_By_Object_Id()
        {
            IMemberType memberType = MockedContentTypes.CreateSimpleMemberType();
            ServiceContext.MemberTypeService.Save(memberType);
            IMember member = MockedMember.CreateSimpleMember(memberType, &quot;test&quot;, &quot;test@test.com&quot;, &quot;pass&quot;, &quot;test&quot;);
            ServiceContext.MemberService.Save(member);

            Assert.IsNotNull(ServiceContext.MemberService.GetById(member.Id));
            Assert.IsNull(ServiceContext.MemberService.GetById(9876));
        }

        [Test]
        public void Get_All_Paged_Members()
        {
            IMemberType memberType = MockedContentTypes.CreateSimpleMemberType();
            ServiceContext.MemberTypeService.Save(memberType);
            var members = MockedMember.CreateSimpleMember(memberType, 10);
            ServiceContext.MemberService.Save(members);

            int totalRecs;
            var found = ServiceContext.MemberService.GetAll(0, 2, out totalRecs);

            Assert.AreEqual(2, found.Count());
            Assert.AreEqual(10, totalRecs);
            Assert.AreEqual(&quot;test0&quot;, found.First().Username);
            Assert.AreEqual(&quot;test1&quot;, found.Last().Username);
        }

        [Test]
        public void Find_By_Name_Starts_With()
        {
            IMemberType memberType = MockedContentTypes.CreateSimpleMemberType();
            ServiceContext.MemberTypeService.Save(memberType);
            var members = MockedMember.CreateSimpleMember(memberType, 10);
            ServiceContext.MemberService.Save(members);
            
            var customMember = MockedMember.CreateSimpleMember(memberType, &quot;Bob&quot;, &quot;hello@test.com&quot;, &quot;hello&quot;, &quot;hello&quot;);
            ServiceContext.MemberService.Save(customMember);

            int totalRecs;
            var found = ServiceContext.MemberService.FindMembersByDisplayName(&quot;B&quot;, 0, 100, out totalRecs, StringPropertyMatchType.StartsWith);

            Assert.AreEqual(1, found.Count());
        }

        [Test]
        public void Find_By_Email_Starts_With()
        {
            IMemberType memberType = MockedContentTypes.CreateSimpleMemberType();
            ServiceContext.MemberTypeService.Save(memberType);
            var members = MockedMember.CreateSimpleMember(memberType, 10);
            ServiceContext.MemberService.Save(members);
            //don&#39;t find this
            var customMember = MockedMember.CreateSimpleMember(memberType, &quot;hello&quot;, &quot;hello@test.com&quot;, &quot;hello&quot;,&quot;hello&quot;);
            ServiceContext.MemberService.Save(customMember);

            int totalRecs;
            var found = ServiceContext.MemberService.FindByEmail(&quot;tes&quot;, 0, 100, out totalRecs, StringPropertyMatchType.StartsWith);

            Assert.AreEqual(10, found.Count());
        }

        [Test]
        public void Find_By_Email_Ends_With()
        {
            IMemberType memberType = MockedContentTypes.CreateSimpleMemberType();
            ServiceContext.MemberTypeService.Save(memberType);
            var members = MockedMember.CreateSimpleMember(memberType, 10);
            ServiceContext.MemberService.Save(members);
            //include this
            var customMember = MockedMember.CreateSimpleMember(memberType, &quot;hello&quot;, &quot;hello@test.com&quot;, &quot;hello&quot;, &quot;hello&quot;);
            ServiceContext.MemberService.Save(customMember);

            int totalRecs;
            var found = ServiceContext.MemberService.FindByEmail(&quot;test.com&quot;, 0, 100, out totalRecs, StringPropertyMatchType.EndsWith);

            Assert.AreEqual(11, found.Count());
        }

        [Test]
        public void Find_By_Email_Contains()
        {
            IMemberType memberType = MockedContentTypes.CreateSimpleMemberType();
            ServiceContext.MemberTypeService.Save(memberType);
            var members = MockedMember.CreateSimpleMember(memberType, 10);
            ServiceContext.MemberService.Save(members);
            //include this
            var customMember = MockedMember.CreateSimpleMember(memberType, &quot;hello&quot;, &quot;hello@test.com&quot;, &quot;hello&quot;, &quot;hello&quot;);
            ServiceContext.MemberService.Save(customMember);

            int totalRecs;
            var found = ServiceContext.MemberService.FindByEmail(&quot;test&quot;, 0, 100, out totalRecs, StringPropertyMatchType.Contains);

            Assert.AreEqual(11, found.Count());
        }

        [Test]
        public void Find_By_Email_Exact()
        {
            IMemberType memberType = MockedContentTypes.CreateSimpleMemberType();
            ServiceContext.MemberTypeService.Save(memberType);
            var members = MockedMember.CreateSimpleMember(memberType, 10);
            ServiceContext.MemberService.Save(members);
            //include this
            var customMember = MockedMember.CreateSimpleMember(memberType, &quot;hello&quot;, &quot;hello@test.com&quot;, &quot;hello&quot;, &quot;hello&quot;);
            ServiceContext.MemberService.Save(customMember);

            int totalRecs;
            var found = ServiceContext.MemberService.FindByEmail(&quot;hello@test.com&quot;, 0, 100, out totalRecs, StringPropertyMatchType.Exact);

            Assert.AreEqual(1, found.Count());
        }

        [Test]
        public void Find_By_Login_Starts_With()
        {
            IMemberType memberType = MockedContentTypes.CreateSimpleMemberType();
            ServiceContext.MemberTypeService.Save(memberType);
            var members = MockedMember.CreateSimpleMember(memberType, 10);
            ServiceContext.MemberService.Save(members);
            //don&#39;t find this
            var customMember = MockedMember.CreateSimpleMember(memberType, &quot;hello&quot;, &quot;hello@test.com&quot;, &quot;hello&quot;, &quot;hello&quot;);
            ServiceContext.MemberService.Save(customMember);

            int totalRecs;
            var found = ServiceContext.MemberService.FindByUsername(&quot;tes&quot;, 0, 100, out totalRecs, StringPropertyMatchType.StartsWith);

            Assert.AreEqual(10, found.Count());
        }

        [Test]
        public void Find_By_Login_Ends_With()
        {
            IMemberType memberType = MockedContentTypes.CreateSimpleMemberType();
            ServiceContext.MemberTypeService.Save(memberType);
            var members = MockedMember.CreateSimpleMember(memberType, 10);
            ServiceContext.MemberService.Save(members);
            //include this
            var customMember = MockedMember.CreateSimpleMember(memberType, &quot;hello&quot;, &quot;hello@test.com&quot;, &quot;hello&quot;, &quot;hello&quot;);
            ServiceContext.MemberService.Save(customMember);

            int totalRecs;
            var found = ServiceContext.MemberService.FindByUsername(&quot;llo&quot;, 0, 100, out totalRecs, StringPropertyMatchType.EndsWith);

            Assert.AreEqual(1, found.Count());
        }

        [Test]
        public void Find_By_Login_Contains()
        {
            IMemberType memberType = MockedContentTypes.CreateSimpleMemberType();
            ServiceContext.MemberTypeService.Save(memberType);
            var members = MockedMember.CreateSimpleMember(memberType, 10);
            ServiceContext.MemberService.Save(members);
            //include this
            var customMember = MockedMember.CreateSimpleMember(memberType, &quot;hello&quot;, &quot;hello@test.com&quot;, &quot;hello&quot;, &quot;hellotest&quot;);
            ServiceContext.MemberService.Save(customMember);

            int totalRecs;
            var found = ServiceContext.MemberService.FindByUsername(&quot;test&quot;, 0, 100, out totalRecs, StringPropertyMatchType.Contains);

            Assert.AreEqual(11, found.Count());
        }

        [Test]
        public void Find_By_Login_Exact()
        {
            IMemberType memberType = MockedContentTypes.CreateSimpleMemberType();
            ServiceContext.MemberTypeService.Save(memberType);
            var members = MockedMember.CreateSimpleMember(memberType, 10);
            ServiceContext.MemberService.Save(members);
            //include this
            var customMember = MockedMember.CreateSimpleMember(memberType, &quot;hello&quot;, &quot;hello@test.com&quot;, &quot;hello&quot;, &quot;hello&quot;);
            ServiceContext.MemberService.Save(customMember);

            int totalRecs;
            var found = ServiceContext.MemberService.FindByUsername(&quot;hello&quot;, 0, 100, out totalRecs, StringPropertyMatchType.Exact);

            Assert.AreEqual(1, found.Count());
        }

        [Test]
        public void Get_By_Property_String_Value_Exact()
        {
            IMemberType memberType = MockedContentTypes.CreateSimpleMemberType();
            ServiceContext.MemberTypeService.Save(memberType);
            var members = MockedMember.CreateSimpleMember(memberType, 10);
            ServiceContext.MemberService.Save(members);            
            var customMember = MockedMember.CreateSimpleMember(memberType, &quot;hello&quot;, &quot;hello@test.com&quot;, &quot;hello&quot;, &quot;hello&quot;);
            ServiceContext.MemberService.Save(customMember);

            var found = ServiceContext.MemberService.GetMembersByPropertyValue(
                &quot;title&quot;, &quot;hello member&quot;, StringPropertyMatchType.Exact);

            Assert.AreEqual(1, found.Count());
        }

        [Test]
        public void Get_By_Property_String_Value_Contains()
        {
            IMemberType memberType = MockedContentTypes.CreateSimpleMemberType();
            ServiceContext.MemberTypeService.Save(memberType);
            var members = MockedMember.CreateSimpleMember(memberType, 10);
            ServiceContext.MemberService.Save(members);            
            var customMember = MockedMember.CreateSimpleMember(memberType, &quot;hello&quot;, &quot;hello@test.com&quot;, &quot;hello&quot;, &quot;hello&quot;);
            ServiceContext.MemberService.Save(customMember);

            var found = ServiceContext.MemberService.GetMembersByPropertyValue(
                &quot;title&quot;, &quot; member&quot;, StringPropertyMatchType.Contains);

            Assert.AreEqual(11, found.Count());
        }

        [Test]
        public void Get_By_Property_String_Value_Starts_With()
        {
            IMemberType memberType = MockedContentTypes.CreateSimpleMemberType();
            ServiceContext.MemberTypeService.Save(memberType);
            var members = MockedMember.CreateSimpleMember(memberType, 10);
            ServiceContext.MemberService.Save(members);
            var customMember = MockedMember.CreateSimpleMember(memberType, &quot;hello&quot;, &quot;hello@test.com&quot;, &quot;hello&quot;, &quot;hello&quot;);
            ServiceContext.MemberService.Save(customMember);

            var found = ServiceContext.MemberService.GetMembersByPropertyValue(
                &quot;title&quot;, &quot;Member No&quot;, StringPropertyMatchType.StartsWith);

            Assert.AreEqual(10, found.Count());
        }

        [Test]
        public void Get_By_Property_String_Value_Ends_With()
        {
            IMemberType memberType = MockedContentTypes.CreateSimpleMemberType();
            ServiceContext.MemberTypeService.Save(memberType);
            var members = MockedMember.CreateSimpleMember(memberType, 10);
            ServiceContext.MemberService.Save(members);
            var customMember = MockedMember.CreateSimpleMember(memberType, &quot;hello&quot;, &quot;hello@test.com&quot;, &quot;hello&quot;, &quot;hello&quot;);
            customMember.SetValue(&quot;title&quot;, &quot;title of mine&quot;);
            ServiceContext.MemberService.Save(customMember);

            var found = ServiceContext.MemberService.GetMembersByPropertyValue(
                &quot;title&quot;, &quot;mine&quot;, StringPropertyMatchType.EndsWith);

            Assert.AreEqual(1, found.Count());
        }

        [Test]
        public void Get_By_Property_Int_Value_Exact()
        {
            IMemberType memberType = MockedContentTypes.CreateSimpleMemberType();
            memberType.AddPropertyType(new PropertyType(Constants.PropertyEditors.IntegerAlias, DataTypeDatabaseType.Integer, &quot;number&quot;)
                {
                    Name = &quot;Number&quot;,
                    //NOTE: This is what really determines the db type - the above definition doesn&#39;t really do anything
                    DataTypeDefinitionId = -51
                }, &quot;Content&quot;);
            ServiceContext.MemberTypeService.Save(memberType);
            var members = MockedMember.CreateSimpleMember(memberType, 10, (i, member) =&gt; member.SetValue(&quot;number&quot;, i));
            ServiceContext.MemberService.Save(members);

            var customMember = MockedMember.CreateSimpleMember(memberType, &quot;hello&quot;, &quot;hello@test.com&quot;, &quot;hello&quot;, &quot;hello&quot;);
            customMember.SetValue(&quot;number&quot;, 2);
            ServiceContext.MemberService.Save(customMember);

            var found = ServiceContext.MemberService.GetMembersByPropertyValue(
                &quot;number&quot;, 2, ValuePropertyMatchType.Exact);

            Assert.AreEqual(2, found.Count());
        }

        [Test]
        public void Get_By_Property_Int_Value_Greater_Than()
        {
            IMemberType memberType = MockedContentTypes.CreateSimpleMemberType();
            memberType.AddPropertyType(new PropertyType(Constants.PropertyEditors.IntegerAlias, DataTypeDatabaseType.Integer, &quot;number&quot;)
            {
                Name = &quot;Number&quot;,
                //NOTE: This is what really determines the db type - the above definition doesn&#39;t really do anything
                DataTypeDefinitionId = -51
            }, &quot;Content&quot;);
            ServiceContext.MemberTypeService.Save(memberType);
            var members = MockedMember.CreateSimpleMember(memberType, 10, (i, member) =&gt; member.SetValue(&quot;number&quot;, i));
            ServiceContext.MemberService.Save(members);

            var customMember = MockedMember.CreateSimpleMember(memberType, &quot;hello&quot;, &quot;hello@test.com&quot;, &quot;hello&quot;, &quot;hello&quot;);
            customMember.SetValue(&quot;number&quot;, 10);
            ServiceContext.MemberService.Save(customMember);

            var found = ServiceContext.MemberService.GetMembersByPropertyValue(
                &quot;number&quot;, 3, ValuePropertyMatchType.GreaterThan);

            Assert.AreEqual(7, found.Count());
        }

        [Test]
        public void Get_By_Property_Int_Value_Greater_Than_Equal_To()
        {
            IMemberType memberType = MockedContentTypes.CreateSimpleMemberType();
            memberType.AddPropertyType(new PropertyType(Constants.PropertyEditors.IntegerAlias, DataTypeDatabaseType.Integer, &quot;number&quot;)
            {
                Name = &quot;Number&quot;,
                //NOTE: This is what really determines the db type - the above definition doesn&#39;t really do anything
                DataTypeDefinitionId = -51
            }, &quot;Content&quot;);
            ServiceContext.MemberTypeService.Save(memberType);
            var members = MockedMember.CreateSimpleMember(memberType, 10, (i, member) =&gt; member.SetValue(&quot;number&quot;, i));
            ServiceContext.MemberService.Save(members);

            var customMember = MockedMember.CreateSimpleMember(memberType, &quot;hello&quot;, &quot;hello@test.com&quot;, &quot;hello&quot;, &quot;hello&quot;);
            customMember.SetValue(&quot;number&quot;, 10);
            ServiceContext.MemberService.Save(customMember);

            var found = ServiceContext.MemberService.GetMembersByPropertyValue(
                &quot;number&quot;, 3, ValuePropertyMatchType.GreaterThanOrEqualTo);

            Assert.AreEqual(8, found.Count());
        }

        [Test]
        public void Get_By_Property_Int_Value_Less_Than()
        {
            IMemberType memberType = MockedContentTypes.CreateSimpleMemberType();
            memberType.AddPropertyType(new PropertyType(Constants.PropertyEditors.DateAlias, DataTypeDatabaseType.Date, &quot;number&quot;)
            {
                Name = &quot;Number&quot;,
                //NOTE: This is what really determines the db type - the above definition doesn&#39;t really do anything
                DataTypeDefinitionId = -51
            }, &quot;Content&quot;);
            ServiceContext.MemberTypeService.Save(memberType);
            var members = MockedMember.CreateSimpleMember(memberType, 10, (i, member) =&gt; member.SetValue(&quot;number&quot;, i));
            ServiceContext.MemberService.Save(members);

            var customMember = MockedMember.CreateSimpleMember(memberType, &quot;hello&quot;, &quot;hello@test.com&quot;, &quot;hello&quot;, &quot;hello&quot;);
            customMember.SetValue(&quot;number&quot;, 1);
            ServiceContext.MemberService.Save(customMember);

            var found = ServiceContext.MemberService.GetMembersByPropertyValue(
                &quot;number&quot;, 5, ValuePropertyMatchType.LessThan);

            Assert.AreEqual(6, found.Count());
        }

        [Test]
        public void Get_By_Property_Int_Value_Less_Than_Or_Equal()
        {
            IMemberType memberType = MockedContentTypes.CreateSimpleMemberType();
            memberType.AddPropertyType(new PropertyType(Constants.PropertyEditors.IntegerAlias, DataTypeDatabaseType.Integer, &quot;number&quot;)
            {
                Name = &quot;Number&quot;,
                //NOTE: This is what really determines the db type - the above definition doesn&#39;t really do anything
                DataTypeDefinitionId = -51
            }, &quot;Content&quot;);
            ServiceContext.MemberTypeService.Save(memberType);
            var members = MockedMember.CreateSimpleMember(memberType, 10, (i, member) =&gt; member.SetValue(&quot;number&quot;, i));
            ServiceContext.MemberService.Save(members);

            var customMember = MockedMember.CreateSimpleMember(memberType, &quot;hello&quot;, &quot;hello@test.com&quot;, &quot;hello&quot;, &quot;hello&quot;);
            customMember.SetValue(&quot;number&quot;, 1);
            ServiceContext.MemberService.Save(customMember);

            var found = ServiceContext.MemberService.GetMembersByPropertyValue(
                &quot;number&quot;, 5, ValuePropertyMatchType.LessThanOrEqualTo);

            Assert.AreEqual(7, found.Count());
        }

        [Test]
        public void Get_By_Property_Date_Value_Exact()
        {
            IMemberType memberType = MockedContentTypes.CreateSimpleMemberType();
            memberType.AddPropertyType(new PropertyType(Constants.PropertyEditors.IntegerAlias, DataTypeDatabaseType.Integer, &quot;date&quot;)
            {
                Name = &quot;Date&quot;,
                //NOTE: This is what really determines the db type - the above definition doesn&#39;t really do anything
                DataTypeDefinitionId = -36
            }, &quot;Content&quot;);
            ServiceContext.MemberTypeService.Save(memberType);
            var members = MockedMember.CreateSimpleMember(memberType, 10, (i, member) =&gt; member.SetValue(&quot;date&quot;, new DateTime(2013, 12, 20, 1, i, 0)));
            ServiceContext.MemberService.Save(members);

            var customMember = MockedMember.CreateSimpleMember(memberType, &quot;hello&quot;, &quot;hello@test.com&quot;, &quot;hello&quot;, &quot;hello&quot;);
            customMember.SetValue(&quot;date&quot;, new DateTime(2013, 12, 20, 1, 2, 0));
            ServiceContext.MemberService.Save(customMember);

            var found = ServiceContext.MemberService.GetMembersByPropertyValue(
                &quot;date&quot;, new DateTime(2013, 12, 20, 1, 2, 0), ValuePropertyMatchType.Exact);

            Assert.AreEqual(2, found.Count());
        }

        [Test]
        public void Get_By_Property_Date_Value_Greater_Than()
        {
            IMemberType memberType = MockedContentTypes.CreateSimpleMemberType();
            memberType.AddPropertyType(new PropertyType(Constants.PropertyEditors.IntegerAlias, DataTypeDatabaseType.Integer, &quot;date&quot;)
            {
                Name = &quot;Date&quot;,
                //NOTE: This is what really determines the db type - the above definition doesn&#39;t really do anything
                DataTypeDefinitionId = -36
            }, &quot;Content&quot;);
            ServiceContext.MemberTypeService.Save(memberType);
            var members = MockedMember.CreateSimpleMember(memberType, 10, (i, member) =&gt; member.SetValue(&quot;date&quot;, new DateTime(2013, 12, 20, 1, i, 0)));
            ServiceContext.MemberService.Save(members);

            var customMember = MockedMember.CreateSimpleMember(memberType, &quot;hello&quot;, &quot;hello@test.com&quot;, &quot;hello&quot;, &quot;hello&quot;);
            customMember.SetValue(&quot;date&quot;, new DateTime(2013, 12, 20, 1, 10, 0));
            ServiceContext.MemberService.Save(customMember);

            var found = ServiceContext.MemberService.GetMembersByPropertyValue(
                &quot;date&quot;, new DateTime(2013, 12, 20, 1, 3, 0), ValuePropertyMatchType.GreaterThan);

            Assert.AreEqual(7, found.Count());
        }

        [Test]
        public void Get_By_Property_Date_Value_Greater_Than_Equal_To()
        {
            IMemberType memberType = MockedContentTypes.CreateSimpleMemberType();
            memberType.AddPropertyType(new PropertyType(Constants.PropertyEditors.IntegerAlias, DataTypeDatabaseType.Integer, &quot;date&quot;)
            {
                Name = &quot;Date&quot;,
                //NOTE: This is what really determines the db type - the above definition doesn&#39;t really do anything
                DataTypeDefinitionId = -36
            }, &quot;Content&quot;);
            ServiceContext.MemberTypeService.Save(memberType);
            var members = MockedMember.CreateSimpleMember(memberType, 10, (i, member) =&gt; member.SetValue(&quot;date&quot;, new DateTime(2013, 12, 20, 1, i, 0)));
            ServiceContext.MemberService.Save(members);

            var customMember = MockedMember.CreateSimpleMember(memberType, &quot;hello&quot;, &quot;hello@test.com&quot;, &quot;hello&quot;, &quot;hello&quot;);
            customMember.SetValue(&quot;date&quot;, new DateTime(2013, 12, 20, 1, 10, 0));
            ServiceContext.MemberService.Save(customMember);

            var found = ServiceContext.MemberService.GetMembersByPropertyValue(
                &quot;date&quot;, new DateTime(2013, 12, 20, 1, 3, 0), ValuePropertyMatchType.GreaterThanOrEqualTo);

            Assert.AreEqual(8, found.Count());
        }

        [Test]
        public void Get_By_Property_Date_Value_Less_Than()
        {
            IMemberType memberType = MockedContentTypes.CreateSimpleMemberType();
            memberType.AddPropertyType(new PropertyType(Constants.PropertyEditors.IntegerAlias, DataTypeDatabaseType.Integer, &quot;date&quot;)
            {
                Name = &quot;Date&quot;,
                //NOTE: This is what really determines the db type - the above definition doesn&#39;t really do anything
                DataTypeDefinitionId = -36
            }, &quot;Content&quot;);
            ServiceContext.MemberTypeService.Save(memberType);
            var members = MockedMember.CreateSimpleMember(memberType, 10, (i, member) =&gt; member.SetValue(&quot;date&quot;, new DateTime(2013, 12, 20, 1, i, 0)));
            ServiceContext.MemberService.Save(members);

            var customMember = MockedMember.CreateSimpleMember(memberType, &quot;hello&quot;, &quot;hello@test.com&quot;, &quot;hello&quot;, &quot;hello&quot;);
            customMember.SetValue(&quot;date&quot;, new DateTime(2013, 12, 20, 1, 1, 0));
            ServiceContext.MemberService.Save(customMember);

            var found = ServiceContext.MemberService.GetMembersByPropertyValue(
                &quot;date&quot;, new DateTime(2013, 12, 20, 1, 5, 0), ValuePropertyMatchType.LessThan);

            Assert.AreEqual(6, found.Count());            
        }

        [Test]
        public void Get_By_Property_Date_Value_Less_Than_Or_Equal()
        {
            IMemberType memberType = MockedContentTypes.CreateSimpleMemberType();
            memberType.AddPropertyType(new PropertyType(Constants.PropertyEditors.IntegerAlias, DataTypeDatabaseType.Integer, &quot;date&quot;)
            {
                Name = &quot;Date&quot;,
                //NOTE: This is what really determines the db type - the above definition doesn&#39;t really do anything
                DataTypeDefinitionId = -36
            }, &quot;Content&quot;);
            ServiceContext.MemberTypeService.Save(memberType);
            var members = MockedMember.CreateSimpleMember(memberType, 10, (i, member) =&gt; member.SetValue(&quot;date&quot;, new DateTime(2013, 12, 20, 1, i, 0)));
            ServiceContext.MemberService.Save(members);

            var customMember = MockedMember.CreateSimpleMember(memberType, &quot;hello&quot;, &quot;hello@test.com&quot;, &quot;hello&quot;, &quot;hello&quot;);
            customMember.SetValue(&quot;date&quot;, new DateTime(2013, 12, 20, 1, 1, 0));
            ServiceContext.MemberService.Save(customMember);

            var found = ServiceContext.MemberService.GetMembersByPropertyValue(
                &quot;date&quot;, new DateTime(2013, 12, 20, 1, 5, 0), ValuePropertyMatchType.LessThanOrEqualTo);

            Assert.AreEqual(7, found.Count());
        }

        [Test]
        public void Count_All_Members()
        {
            IMemberType memberType = MockedContentTypes.CreateSimpleMemberType();            
            ServiceContext.MemberTypeService.Save(memberType);
            var members = MockedMember.CreateSimpleMember(memberType, 10);
            ServiceContext.MemberService.Save(members);
            var customMember = MockedMember.CreateSimpleMember(memberType, &quot;hello&quot;, &quot;hello@test.com&quot;, &quot;hello&quot;, &quot;hello&quot;);
            ServiceContext.MemberService.Save(customMember);

            var found = ServiceContext.MemberService.GetCount(MemberCountType.All);

            Assert.AreEqual(11, found);
        }

        [Test]
        public void Count_All_Online_Members()
        {
            IMemberType memberType = MockedContentTypes.CreateSimpleMemberType();            
            ServiceContext.MemberTypeService.Save(memberType);
            var members = MockedMember.CreateSimpleMember(memberType, 10, (i, member) =&gt; member.LastLoginDate = DateTime.Now.AddMinutes(i * -2));
            ServiceContext.MemberService.Save(members);

            var customMember = MockedMember.CreateSimpleMember(memberType, &quot;hello&quot;, &quot;hello@test.com&quot;, &quot;hello&quot;, &quot;hello&quot;);
            customMember.SetValue(Constants.Conventions.Member.LastLoginDate, DateTime.Now);
            ServiceContext.MemberService.Save(customMember);

            var found = ServiceContext.MemberService.GetCount(MemberCountType.Online);

            Assert.AreEqual(9, found);
        }

        [Test]
        public void Count_All_Locked_Members()
        {
            IMemberType memberType = MockedContentTypes.CreateSimpleMemberType();
            ServiceContext.MemberTypeService.Save(memberType);
            var members = MockedMember.CreateSimpleMember(memberType, 10, (i, member) =&gt; member.IsLockedOut = i % 2 == 0);
            ServiceContext.MemberService.Save(members);

            var customMember = MockedMember.CreateSimpleMember(memberType, &quot;hello&quot;, &quot;hello@test.com&quot;, &quot;hello&quot;, &quot;hello&quot;);
            customMember.SetValue(Constants.Conventions.Member.IsLockedOut, true);
            ServiceContext.MemberService.Save(customMember);

            var found = ServiceContext.MemberService.GetCount(MemberCountType.LockedOut);

            Assert.AreEqual(6, found);
        }

        [Test]
        public void Count_All_Approved_Members()
        {
            IMemberType memberType = MockedContentTypes.CreateSimpleMemberType();
            ServiceContext.MemberTypeService.Save(memberType);
            var members = MockedMember.CreateSimpleMember(memberType, 10, (i, member) =&gt; member.IsApproved = i % 2 == 0);
            ServiceContext.MemberService.Save(members);

            var customMember = MockedMember.CreateSimpleMember(memberType, &quot;hello&quot;, &quot;hello@test.com&quot;, &quot;hello&quot;, &quot;hello&quot;);
            customMember.SetValue(Constants.Conventions.Member.IsApproved, false);
            ServiceContext.MemberService.Save(customMember);

            var found = ServiceContext.MemberService.GetCount(MemberCountType.Approved);

            Assert.AreEqual(5, found);
        }

        [Test]
        public void Setting_Property_On_Built_In_Member_Property_When_Property_Doesnt_Exist_On_Type_Is_Ok()
        {
            IMemberType memberType = MockedContentTypes.CreateSimpleMemberType();            
            ServiceContext.MemberTypeService.Save(memberType);
            memberType.RemovePropertyType(Constants.Conventions.Member.Comments);
            ServiceContext.MemberTypeService.Save(memberType);
            Assert.IsFalse(memberType.PropertyTypes.Any(x =&gt; x.Alias == Constants.Conventions.Member.Comments));

            var customMember = MockedMember.CreateSimpleMember(memberType, &quot;hello&quot;, &quot;hello@test.com&quot;, &quot;hello&quot;, &quot;hello&quot;);
            //this should not throw an exception
            customMember.Comments = &quot;hello world&quot;;
            ServiceContext.MemberService.Save(customMember);

            var found = ServiceContext.MemberService.GetById(customMember.Id);

            Assert.IsTrue(found.Comments.IsNullOrWhiteSpace());
        }

        /// &lt;summary&gt;
        /// Because we are forcing some of the built-ins to be Labels which have an underlying db type as nvarchar but we need
        /// to ensure that the dates/int get saved to the correct column anyways. 
        /// &lt;/summary&gt;
        [Test]
        public void Setting_DateTime_Property_On_Built_In_Member_Property_Saves_To_Correct_Column()
        {
            IMemberType memberType = MockedContentTypes.CreateSimpleMemberType();
            ServiceContext.MemberTypeService.Save(memberType);
            var member = MockedMember.CreateSimpleMember(memberType, &quot;test&quot;, &quot;test@test.com&quot;, &quot;test&quot;, &quot;test&quot;);
            var date = DateTime.Now;
            member.LastLoginDate = DateTime.Now;            
            ServiceContext.MemberService.Save(member);

            var result = ServiceContext.MemberService.GetById(member.Id);
            Assert.AreEqual(
                date.TruncateTo(DateTimeExtensions.DateTruncate.Second), 
                result.LastLoginDate.TruncateTo(DateTimeExtensions.DateTruncate.Second));

            //now ensure the col is correct
            var sql = new Sql().Select(&quot;cmsPropertyData.*&quot;)
                .From&lt;PropertyDataDto&gt;()
                .InnerJoin&lt;PropertyTypeDto&gt;()
                .On&lt;PropertyDataDto, PropertyTypeDto&gt;(dto =&gt; dto.PropertyTypeId, dto =&gt; dto.Id)
                .Where&lt;PropertyDataDto&gt;(dto =&gt; dto.NodeId == member.Id)
                .Where&lt;PropertyTypeDto&gt;(dto =&gt; dto.Alias == Constants.Conventions.Member.LastLoginDate);
            
            var colResult = DatabaseContext.Database.Fetch&lt;PropertyDataDto&gt;(sql);

            Assert.AreEqual(1, colResult.Count);
            Assert.IsTrue(colResult.First().Date.HasValue);
            Assert.IsFalse(colResult.First().Integer.HasValue);
            Assert.IsNull(colResult.First().Text);
            Assert.IsNull(colResult.First().VarChar);
        }

        [Test]
        public void New_Member_Approved_By_Default()
        {
            IMemberType memberType = MockedContentTypes.CreateSimpleMemberType();
            ServiceContext.MemberTypeService.Save(memberType);

            var customMember = MockedMember.CreateSimpleMember(memberType, &quot;hello&quot;, &quot;hello@test.com&quot;, &quot;hello&quot;, &quot;hello&quot;);
            ServiceContext.MemberService.Save(customMember);

            var found = ServiceContext.MemberService.GetById(customMember.Id);

            Assert.IsTrue(found.IsApproved);
        }

        [Test]
        public void Ensure_Content_Xml_Created()
        {
            IMemberType memberType = MockedContentTypes.CreateSimpleMemberType();
            ServiceContext.MemberTypeService.Save(memberType);

            var customMember = MockedMember.CreateSimpleMember(memberType, &quot;hello&quot;, &quot;hello@test.com&quot;, &quot;hello&quot;, &quot;hello&quot;);
            ServiceContext.MemberService.Save(customMember);

            var provider = new PetaPocoUnitOfWorkProvider(Logger);

            using (var uow = provider.GetUnitOfWork())
            {
                Assert.IsTrue(uow.Database.Exists&lt;ContentXmlDto&gt;(customMember.Id));
            }

        }

    }
}
    </pre>
    <script type="text/javascript">
      highlightRanges([[27,9,27,10,1],[28,13,28,31,1],[29,9,29,10,1],[33,9,33,10,1],[34,13,34,29,1],[35,9,35,10,1],[39,9,39,10,1],[40,13,40,82,1],[41,13,41,63,1],[42,13,42,115,1],[43,13,43,55,1],[45,13,45,46,1],[46,13,46,79,1],[47,13,47,43,1],[48,13,48,65,1],[49,9,49,10,1],[53,9,53,10,1],[54,13,54,82,1],[55,13,55,63,1],[56,13,56,121,1],[57,13,57,55,1],[59,13,59,46,1],[60,13,60,79,1],[61,13,61,43,1],[62,13,62,71,1],[63,9,63,10,1],[67,9,67,10,1],[68,13,68,64,1],[70,13,70,68,1],[72,13,72,47,1],[73,13,73,59,1],[74,9,74,10,1],[78,9,78,10,1],[79,13,79,64,1],[80,13,80,64,1],[82,13,82,68,1],[84,13,84,47,1],[85,13,85,59,1],[86,9,86,10,1],[90,9,90,10,1],[91,13,91,65,1],[92,13,92,65,1],[93,13,93,65,1],[95,13,95,68,1],[97,13,97,47,1],[98,9,98,10,1],[102,9,102,10,1],[103,13,103,82,1],[104,13,104,63,1],[105,13,105,115,1],[106,13,106,55,1],[108,13,108,65,1],[109,13,109,65,1],[110,13,110,65,1],[111,13,111,115,1],[113,13,113,83,1],[115,13,115,53,1],[117,9,117,10,1],[121,9,121,10,1],[122,13,122,82,1],[123,13,123,63,1],[124,13,124,115,1],[125,13,125,55,1],[127,13,127,128,1],[128,13,128,56,1],[130,13,130,65,1],[131,13,131,65,1],[132,13,132,65,1],[133,13,133,127,1],[135,13,135,80,1],[136,13,136,53,1],[138,13,138,91,1],[139,13,139,54,1],[140,9,140,10,1],[144,9,144,10,1],[145,13,145,65,1],[147,13,147,75,1],[149,13,149,74,1],[151,13,151,53,1],[152,9,152,10,1],[156,9,156,10,1],[157,13,157,82,1],[158,13,158,63,1],[159,13,159,115,1],[160,13,160,55,1],[162,13,162,65,1],[163,13,163,115,1],[165,13,165,60,1],[165,60,165,120,1],[165,120,165,122,1],[165,13,165,122,1],[166,9,166,10,1],[170,9,170,10,1],[171,13,171,65,1],[172,13,172,129,1],[174,13,174,82,1],[175,13,175,63,1],[176,13,176,115,1],[177,13,177,56,1],[178,13,178,115,1],[179,13,179,56,1],[181,13,181,116,1],[182,13,182,118,1],[184,13,184,94,1],[185,13,185,55,1],[186,9,186,10,1],[190,9,190,10,1],[191,13,191,82,1],[192,13,192,63,1],[193,13,193,121,1],[196,13,196,52,1],[196,52,196,93,1],[196,93,196,95,1],[196,13,196,95,1],[198,9,198,10,1],[207,9,207,10,1],[208,13,208,82,1],[209,13,209,63,1],[210,13,210,115,1],[211,13,211,56,1],[212,13,212,115,1],[213,13,213,56,1],[214,13,214,115,1],[215,13,215,56,1],[217,13,217,121,1],[219,13,219,112,1],[220,13,220,58,1],[221,9,221,10,1],[225,9,225,10,1],[226,13,226,65,1],[228,13,228,82,1],[229,13,229,63,1],[230,13,230,115,1],[231,13,231,56,1],[232,13,232,115,1],[233,13,233,56,1],[235,13,235,113,1],[237,13,237,94,1],[239,13,239,55,1],[240,9,240,10,1],[244,9,244,10,1],[245,13,245,65,1],[247,13,247,82,1],[248,13,248,63,1],[249,13,249,115,1],[250,13,250,56,1],[251,13,251,115,1],[252,13,252,56,1],[254,13,254,125,1],[256,13,256,94,1],[258,13,258,55,1],[259,9,259,10,1],[263,9,263,10,1],[264,13,264,65,1],[266,13,266,82,1],[267,13,267,63,1],[268,13,268,124,1],[269,13,269,56,1],[270,13,270,124,1],[271,13,271,56,1],[273,13,273,125,1],[275,13,275,94,1],[277,13,277,55,1],[278,9,278,10,1],[282,9,282,10,1],[283,13,283,82,1],[284,13,284,63,1],[285,13,285,115,1],[286,13,286,56,1],[287,13,287,115,1],[288,13,288,56,1],[291,13,291,125,1],[293,13,293,94,1],[295,13,295,55,1],[296,9,296,10,1],[300,9,300,10,1],[301,13,301,82,1],[302,13,302,63,1],[303,13,303,115,1],[304,13,304,56,1],[305,13,305,115,1],[306,13,306,56,1],[308,13,308,128,1],[310,13,310,102,1],[311,13,311,117,1],[313,13,313,94,1],[314,13,314,55,1],[315,13,315,90,1],[316,13,316,55,1],[317,9,317,10,1],[321,9,321,10,1],[322,13,322,82,1],[323,13,323,63,1],[324,13,324,115,1],[325,13,325,56,1],[326,13,326,115,1],[327,13,327,56,1],[329,13,329,140,1],[331,13,331,111,1],[332,13,332,129,1],[334,13,334,94,1],[335,13,335,55,1],[336,13,336,90,1],[337,13,337,55,1],[338,9,338,10,1],[342,9,342,10,1],[343,13,343,82,1],[344,13,344,63,1],[345,13,345,115,1],[346,13,346,55,1],[348,13,348,57,1],[349,13,349,75,1],[352,13,352,43,1],[353,9,353,10,1],[357,9,357,10,1],[358,13,358,82,1],[359,13,359,63,1],[360,13,360,115,1],[361,13,361,55,1],[363,13,363,124,1],[364,13,364,35,1],[365,9,365,10,1],[369,9,369,10,1],[370,13,370,82,1],[371,13,371,63,1],[372,13,372,115,1],[373,13,373,55,1],[374,13,374,127,1],[375,13,375,56,1],[377,13,377,72,1],[378,13,378,77,1],[379,13,379,82,1],[380,9,380,10,1],[384,9,384,10,1],[385,13,385,82,1],[386,13,386,63,1],[387,13,387,115,1],[388,13,388,55,1],[390,13,390,75,1],[391,13,391,71,1],[392,9,392,10,1],[396,9,396,10,1],[397,13,397,82,1],[398,13,398,63,1],[399,13,399,115,1],[400,13,400,55,1],[402,13,402,82,1],[406,13,406,49,1],[409,13,409,52,1],[411,13,411,53,1],[412,13,412,66,1],[412,66,412,77,1],[412,77,412,88,1],[412,13,412,88,1],[413,13,413,50,1],[414,13,414,57,1],[415,9,415,10,1],[419,9,419,10,1],[420,13,420,82,1],[421,13,421,63,1],[422,13,422,115,1],[423,13,423,55,1],[425,13,425,85,1],[426,13,426,83,1],[427,9,427,10,1],[431,9,431,10,1],[432,13,432,82,1],[433,13,433,63,1],[434,13,434,133,1],[435,13,435,55,1],[438,13,438,60,1],[439,9,439,10,1],[443,9,443,10,1],[444,13,444,82,1],[445,13,445,63,1],[447,13,448,13,1],[448,13,448,14,1],[448,14,449,17,1],[449,17,449,69,1],[449,69,450,13,1],[450,13,450,14,1],[450,14,450,15,1],[447,13,450,15,1],[452,13,452,47,1],[453,13,453,131,1],[454,13,454,47,1],[455,9,455,10,1],[459,9,459,10,1],[460,13,460,82,1],[461,13,461,63,1],[462,13,462,115,1],[463,13,463,55,1],[465,13,465,91,1],[466,13,466,83,1],[467,9,467,10,1],[471,9,471,10,1],[472,13,472,82,1],[473,13,473,63,1],[474,13,474,115,1],[475,13,475,55,1],[477,13,477,79,1],[478,13,478,71,1],[479,9,479,10,1],[483,9,483,10,1],[484,13,484,82,1],[485,13,485,63,1],[486,13,486,75,1],[487,13,487,56,1],[490,13,490,82,1],[492,13,492,47,1],[493,13,493,44,1],[494,13,494,62,1],[495,13,495,61,1],[496,9,496,10,1],[500,9,500,10,1],[501,13,501,82,1],[502,13,502,63,1],[503,13,503,75,1],[504,13,504,56,1],[506,13,506,119,1],[507,13,507,61,1],[510,13,510,143,1],[512,13,512,47,1],[513,9,513,10,1],[517,9,517,10,1],[518,13,518,82,1],[519,13,519,63,1],[520,13,520,75,1],[521,13,521,56,1],[523,13,523,120,1],[524,13,524,61,1],[527,13,527,132,1],[529,13,529,48,1],[530,9,530,10,1],[534,9,534,10,1],[535,13,535,82,1],[536,13,536,63,1],[537,13,537,75,1],[538,13,538,56,1],[540,13,540,121,1],[541,13,541,61,1],[544,13,544,135,1],[546,13,546,48,1],[547,9,547,10,1],[551,9,551,10,1],[552,13,552,82,1],[553,13,553,63,1],[554,13,554,75,1],[555,13,555,56,1],[557,13,557,121,1],[558,13,558,61,1],[561,13,561,131,1],[563,13,563,48,1],[564,9,564,10,1],[568,9,568,10,1],[569,13,569,82,1],[570,13,570,63,1],[571,13,571,75,1],[572,13,572,56,1],[574,13,574,121,1],[575,13,575,61,1],[578,13,578,138,1],[580,13,580,47,1],[581,9,581,10,1],[585,9,585,10,1],[586,13,586,82,1],[587,13,587,63,1],[588,13,588,75,1],[589,13,589,56,1],[591,13,591,121,1],[592,13,592,61,1],[595,13,595,135,1],[597,13,597,48,1],[598,9,598,10,1],[602,9,602,10,1],[603,13,603,82,1],[604,13,604,63,1],[605,13,605,75,1],[606,13,606,56,1],[608,13,608,121,1],[609,13,609,61,1],[612,13,612,133,1],[614,13,614,47,1],[615,9,615,10,1],[619,9,619,10,1],[620,13,620,82,1],[621,13,621,63,1],[622,13,622,75,1],[623,13,623,56,1],[625,13,625,125,1],[626,13,626,61,1],[629,13,629,134,1],[631,13,631,48,1],[632,9,632,10,1],[636,9,636,10,1],[637,13,637,82,1],[638,13,638,63,1],[639,13,639,75,1],[640,13,640,56,1],[642,13,642,121,1],[643,13,643,61,1],[646,13,646,132,1],[648,13,648,47,1],[649,9,649,10,1],[653,9,653,10,1],[654,13,654,82,1],[655,13,655,63,1],[656,13,656,75,1],[657,13,657,56,1],[658,13,658,121,1],[659,13,659,61,1],[661,13,662,73,1],[664,13,664,47,1],[665,9,665,10,1],[669,9,669,10,1],[670,13,670,82,1],[671,13,671,63,1],[672,13,672,75,1],[673,13,673,56,1],[674,13,674,121,1],[675,13,675,61,1],[677,13,678,71,1],[680,13,680,48,1],[681,9,681,10,1],[685,9,685,10,1],[686,13,686,82,1],[687,13,687,63,1],[688,13,688,75,1],[689,13,689,56,1],[690,13,690,121,1],[691,13,691,61,1],[693,13,694,75,1],[696,13,696,48,1],[697,9,697,10,1],[701,9,701,10,1],[702,13,702,82,1],[703,13,703,63,1],[704,13,704,75,1],[705,13,705,56,1],[706,13,706,121,1],[707,13,707,61,1],[708,13,708,61,1],[710,13,711,68,1],[713,13,713,47,1],[714,9,714,10,1],[718,9,718,10,1],[719,13,719,82,1],[720,13,725,31,1],[726,13,726,63,1],[727,13,727,90,1],[727,90,727,118,1],[727,118,727,120,1],[727,13,727,120,1],[728,13,728,56,1],[730,13,730,121,1],[731,13,731,48,1],[732,13,732,61,1],[734,13,735,60,1],[737,13,737,47,1],[738,9,738,10,1],[742,9,742,10,1],[743,13,743,82,1],[744,13,749,27,1],[750,13,750,63,1],[751,13,751,90,1],[751,90,751,118,1],[751,118,751,120,1],[751,13,751,120,1],[752,13,752,56,1],[754,13,754,121,1],[755,13,755,49,1],[756,13,756,61,1],[758,13,759,66,1],[761,13,761,47,1],[762,9,762,10,1],[766,9,766,10,1],[767,13,767,82,1],[768,13,773,27,1],[774,13,774,63,1],[775,13,775,90,1],[775,90,775,118,1],[775,118,775,120,1],[775,13,775,120,1],[776,13,776,56,1],[778,13,778,121,1],[779,13,779,49,1],[780,13,780,61,1],[782,13,783,75,1],[785,13,785,47,1],[786,9,786,10,1],[790,9,790,10,1],[791,13,791,82,1],[792,13,797,27,1],[798,13,798,63,1],[799,13,799,90,1],[799,90,799,118,1],[799,118,799,120,1],[799,13,799,120,1],[800,13,800,56,1],[802,13,802,121,1],[803,13,803,48,1],[804,13,804,61,1],[806,13,807,63,1],[809,13,809,47,1],[810,9,810,10,1],[814,9,814,10,1],[815,13,815,82,1],[816,13,821,27,1],[822,13,822,63,1],[823,13,823,90,1],[823,90,823,118,1],[823,118,823,120,1],[823,13,823,120,1],[824,13,824,56,1],[826,13,826,121,1],[827,13,827,48,1],[828,13,828,61,1],[830,13,831,72,1],[833,13,833,47,1],[834,9,834,10,1],[838,9,838,10,1],[839,13,839,82,1],[840,13,845,27,1],[846,13,846,63,1],[847,13,847,90,1],[847,90,847,150,1],[847,150,847,152,1],[847,13,847,152,1],[848,13,848,56,1],[850,13,850,121,1],[851,13,851,80,1],[852,13,852,61,1],[854,13,855,92,1],[857,13,857,47,1],[858,9,858,10,1],[862,9,862,10,1],[863,13,863,82,1],[864,13,869,27,1],[870,13,870,63,1],[871,13,871,90,1],[871,90,871,150,1],[871,150,871,152,1],[871,13,871,152,1],[872,13,872,56,1],[874,13,874,121,1],[875,13,875,81,1],[876,13,876,61,1],[878,13,879,98,1],[881,13,881,47,1],[882,9,882,10,1],[886,9,886,10,1],[887,13,887,82,1],[888,13,893,27,1],[894,13,894,63,1],[895,13,895,90,1],[895,90,895,150,1],[895,150,895,152,1],[895,13,895,152,1],[896,13,896,56,1],[898,13,898,121,1],[899,13,899,81,1],[900,13,900,61,1],[902,13,903,107,1],[905,13,905,47,1],[906,9,906,10,1],[910,9,910,10,1],[911,13,911,82,1],[912,13,917,27,1],[918,13,918,63,1],[919,13,919,90,1],[919,90,919,150,1],[919,150,919,152,1],[919,13,919,152,1],[920,13,920,56,1],[922,13,922,121,1],[923,13,923,80,1],[924,13,924,61,1],[926,13,927,95,1],[929,13,929,47,1],[930,9,930,10,1],[934,9,934,10,1],[935,13,935,82,1],[936,13,941,27,1],[942,13,942,63,1],[943,13,943,90,1],[943,90,943,150,1],[943,150,943,152,1],[943,13,943,152,1],[944,13,944,56,1],[946,13,946,121,1],[947,13,947,80,1],[948,13,948,61,1],[950,13,951,104,1],[953,13,953,47,1],[954,9,954,10,1],[958,9,958,10,1],[959,13,959,82,1],[960,13,960,63,1],[961,13,961,75,1],[962,13,962,56,1],[963,13,963,121,1],[964,13,964,61,1],[966,13,966,84,1],[968,13,968,40,1],[969,9,969,10,1],[973,9,973,10,1],[974,13,974,82,1],[975,13,975,63,1],[976,13,976,90,1],[976,90,976,144,1],[976,144,976,146,1],[976,13,976,146,1],[977,13,977,56,1],[979,13,979,121,1],[980,13,980,93,1],[981,13,981,61,1],[983,13,983,87,1],[985,13,985,39,1],[986,9,986,10,1],[990,9,990,10,1],[991,13,991,82,1],[992,13,992,63,1],[993,13,993,90,1],[993,90,993,121,1],[993,121,993,123,1],[993,13,993,123,1],[994,13,994,56,1],[996,13,996,121,1],[997,13,997,83,1],[998,13,998,61,1],[1000,13,1000,90,1],[1002,13,1002,39,1],[1003,9,1003,10,1],[1007,9,1007,10,1],[1008,13,1008,82,1],[1009,13,1009,63,1],[1010,13,1010,90,1],[1010,90,1010,120,1],[1010,120,1010,122,1],[1010,13,1010,122,1],[1011,13,1011,56,1],[1013,13,1013,121,1],[1014,13,1014,83,1],[1015,13,1015,61,1],[1017,13,1017,89,1],[1019,13,1019,39,1],[1020,9,1020,10,1],[1024,9,1024,10,1],[1025,13,1025,82,1],[1026,13,1026,63,1],[1027,13,1027,82,1],[1028,13,1028,63,1],[1029,13,1029,62,1],[1029,62,1029,110,1],[1029,110,1029,113,1],[1029,13,1029,113,1],[1031,13,1031,121,1],[1033,13,1033,51,1],[1034,13,1034,61,1],[1036,13,1036,79,1],[1038,13,1038,64,1],[1039,9,1039,10,1],[1047,9,1047,10,1],[1048,13,1048,82,1],[1049,13,1049,63,1],[1050,13,1050,111,1],[1051,13,1051,37,1],[1052,13,1052,49,1],[1053,13,1053,55,1],[1055,13,1055,74,1],[1056,13,1058,90,1],[1061,13,1066,105,1],[1068,13,1068,82,1],[1070,13,1070,49,1],[1071,13,1071,60,1],[1072,13,1072,64,1],[1073,13,1073,51,1],[1074,13,1074,54,1],[1075,9,1075,10,1],[1079,9,1079,10,1],[1080,13,1080,82,1],[1081,13,1081,63,1],[1083,13,1083,121,1],[1084,13,1084,61,1],[1086,13,1086,79,1],[1088,13,1088,45,1],[1089,9,1089,10,1],[1093,9,1093,10,1],[1094,13,1094,82,1],[1095,13,1095,63,1],[1097,13,1097,121,1],[1098,13,1098,61,1],[1100,13,1100,67,1],[1102,20,1102,54,1],[1103,13,1103,14,1],[1104,17,1104,84,1],[1105,13,1105,14,1],[1107,9,1107,10,1]]);
    </script>
  </body>
</html>