<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Tom Pipe\Documents\Hexadigital\Code\Umbraco\Umbraco-CMS\src\Umbraco.Web\Mvc\ReflectedFixedRazorViewEngine.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using System.Reflection;
using System.Web.Mvc;

namespace Umbraco.Web.Mvc
{
    /// &lt;summary&gt;
    /// This is here to support compatibility with both MVC4 and MVC5
    /// &lt;/summary&gt;
    [Obsolete(&quot;MVC5 does not have a &#39;fixed&#39; viewengine so there&#39;s no reason to use this any more&quot;, false)]
    public abstract class ReflectedFixedRazorViewEngine : IViewEngine
    {
        protected ReflectedFixedRazorViewEngine()
        {
            if (MvcVersionCheck.MvcVersion &gt;= System.Version.Parse(&quot;5.0.0&quot;))
            {
                _wrappedEngine = new RazorViewEngine();
            }
            else
            {
                var assembly = Assembly.Load(&quot;Microsoft.Web.Mvc.FixedDisplayModes&quot;);
                var engineType = assembly.GetType(&quot;Microsoft.Web.Mvc.FixedRazorViewEngine&quot;);
                _wrappedEngine = (IViewEngine)Activator.CreateInstance(engineType);
            }
        }

        public string[] ViewLocationFormats
        {
            get { return _viewLocationFormats; }
            set
            {
                _wrappedEngine.GetType().GetProperty(&quot;ViewLocationFormats&quot;).SetValue(_wrappedEngine, value);
                _viewLocationFormats = value;
            }
        }

        public string[] PartialViewLocationFormats
        {
            get { return _partialViewLocationFormats; }
            set
            {
                _wrappedEngine.GetType().GetProperty(&quot;PartialViewLocationFormats&quot;).SetValue(_wrappedEngine, value);
                _partialViewLocationFormats = value;
            }
        }

        public string[] AreaViewLocationFormats
        {
            get { return _areaViewLocationFormats; }
            set
            {
                _wrappedEngine.GetType().GetProperty(&quot;AreaViewLocationFormats&quot;).SetValue(_wrappedEngine, value);
                _areaViewLocationFormats = value;
            }
        }

        public string[] AreaMasterLocationFormats
        {
            get { return _areaMasterLocationFormats; }
            set
            {
                _wrappedEngine.GetType().GetProperty(&quot;AreaMasterLocationFormats&quot;).SetValue(_wrappedEngine, value);
                _areaMasterLocationFormats = value;
            }
        }

        public string[] AreaPartialViewLocationFormats
        {
            get { return _areaPartialViewLocationFormats; }
            set
            {
                _wrappedEngine.GetType().GetProperty(&quot;AreaPartialViewLocationFormats&quot;).SetValue(_wrappedEngine, value);
                _areaPartialViewLocationFormats = value;
            }
        }

        private readonly IViewEngine _wrappedEngine;
        private string[] _areaViewLocationFormats;
        private string[] _areaMasterLocationFormats;
        private string[] _areaPartialViewLocationFormats;
        private string[] _viewLocationFormats;
        private string[] _partialViewLocationFormats;

        public virtual ViewEngineResult FindPartialView(ControllerContext controllerContext, string partialViewName, bool useCache)
        {
            return _wrappedEngine.FindPartialView(controllerContext, partialViewName, useCache);
        }

        public virtual ViewEngineResult FindView(ControllerContext controllerContext, string viewName, string masterName, bool useCache)
        {
            return _wrappedEngine.FindView(controllerContext, viewName, masterName, useCache);
        }
        
        public void ReleaseView(ControllerContext controllerContext, IView view)
        {
            _wrappedEngine.ReleaseView(controllerContext, view);
        }
    }
}
    </pre>
    <script type="text/javascript">
      highlightRanges([[13,9,13,50,1],[14,9,14,10,1],[15,13,15,77,1],[16,13,16,14,1],[17,17,17,56,1],[18,13,18,14,1],[20,13,20,14,0],[21,17,21,85,0],[22,17,22,93,0],[23,17,23,84,0],[24,13,24,14,0],[25,9,25,10,1],[29,17,29,18,0],[29,19,29,47,0],[29,48,29,49,0],[31,13,31,14,1],[32,17,32,109,1],[33,17,33,46,1],[34,13,34,14,1],[39,17,39,18,0],[39,19,39,54,0],[39,55,39,56,0],[41,13,41,14,1],[42,17,42,116,1],[43,17,43,53,1],[44,13,44,14,1],[49,17,49,18,0],[49,19,49,51,0],[49,52,49,53,0],[51,13,51,14,1],[52,17,52,113,1],[53,17,53,50,1],[54,13,54,14,1],[59,17,59,18,0],[59,19,59,53,0],[59,54,59,55,0],[61,13,61,14,0],[62,17,62,115,0],[63,17,63,52,0],[64,13,64,14,0],[69,17,69,18,0],[69,19,69,58,0],[69,59,69,60,0],[71,13,71,14,1],[72,17,72,120,1],[73,17,73,57,1],[74,13,74,14,1],[85,9,85,10,0],[86,13,86,97,0],[87,9,87,10,0],[90,9,90,10,0],[91,13,91,95,0],[92,9,92,10,0],[95,9,95,10,0],[96,13,96,65,0],[97,9,97,10,0]]);
    </script>
  </body>
</html>