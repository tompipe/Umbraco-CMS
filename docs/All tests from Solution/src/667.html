<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Tom Pipe\Documents\Hexadigital\Code\Umbraco\Umbraco-CMS\src\Umbraco.Web\umbraco.presentation\umbraco\developer\RelationTypes\RelationTypesWebService.asmx.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System.Web.Services;
using Umbraco.Core;
using Umbraco.Web;

namespace umbraco.cms.presentation.developer.RelationTypes
{
	/// &lt;summary&gt;
	/// Webservice to delete relation types, this allows deletion via a javacscript call hooked into the tree UI
	/// &lt;/summary&gt;
	[WebService(Namespace = &quot;http://tempuri.org/&quot;)]
	[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
	[System.ComponentModel.ToolboxItem(false)]
	[System.Web.Script.Services.ScriptService] // Allows this Web Service to be called from script, using ASP.NET AJAX
	public class RelationTypesWebService : WebService
	{
		/// &lt;summary&gt;
		/// Delete an Umbraco RelationType and all it&#39;s associated Relations
		/// &lt;/summary&gt;
		/// &lt;param name=&quot;relationTypeId&quot;&gt;database id of the relation type to delete&lt;/param&gt;
		[WebMethod]
		public void DeleteRelationType(int relationTypeId)
		{
		    var user = UmbracoContext.Current.Security.CurrentUser;
            
			if (user.UserType.Name == &quot;Administrators&quot;)
			{
                var relationService = ApplicationContext.Current.Services.RelationService;
			    var relationType = relationService.GetRelationTypeById(relationTypeId);
			    relationService.Delete(relationType);
			}
		}
	}
}

    </pre>
    <script type="text/javascript">
      highlightRanges([[22,3,22,4,0],[23,7,23,62,0],[25,4,25,47,0],[26,4,26,5,0],[27,17,27,91,0],[28,8,28,79,0],[29,8,29,45,0],[30,4,30,5,0],[31,3,31,4,0]]);
    </script>
  </body>
</html>