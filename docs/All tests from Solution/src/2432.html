<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Tom Pipe\Documents\Hexadigital\Code\Umbraco\Umbraco-CMS\src\umbraco.cms\businesslogic\Packager\PackageActions\publishRootDocument.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using System.Xml;

namespace umbraco.cms.businesslogic.packager.standardPackageActions
{
	/// &lt;summary&gt;
	/// This class implements the IPackageAction Interface, used to execute code when packages are installed.
	/// All IPackageActions only takes a PackageName and a XmlNode as input, and executes based on the data in the xmlnode.
	/// &lt;/summary&gt;
	public class publishRootDocument : umbraco.interfaces.IPackageAction
	{
		#region IPackageAction Members

		/// &lt;summary&gt;
		/// Executes the specified package action.
		/// &lt;/summary&gt;
		/// &lt;param name=&quot;packageName&quot;&gt;Name of the package.&lt;/param&gt;
		/// &lt;param name=&quot;xmlData&quot;&gt;The XML data.&lt;/param&gt;
		/// &lt;example&gt;
		/// &lt;Action runat=&quot;install&quot; alias=&quot;publishRootDocument&quot; documentName=&quot;News&quot;  /&gt;
		/// &lt;/example&gt;
		/// &lt;returns&gt;True if executed succesfully&lt;/returns&gt;
		public bool Execute(string packageName, XmlNode xmlData)
		{

			string documentName = xmlData.Attributes[&quot;documentName&quot;].Value;

			int parentDocid = 0;

			web.Document[] rootDocs = web.Document.GetRootDocuments();

			foreach (web.Document rootDoc in rootDocs)
			{
				if (rootDoc.Text.Trim() == documentName.Trim() &amp;&amp; rootDoc != null &amp;&amp; rootDoc.ContentType != null)
				{

					rootDoc.PublishWithChildrenWithResult(umbraco.BusinessLogic.User.GetUser(0));


					break;
				}
			}
			return true;
		}

		//this has no undo.
		/// &lt;summary&gt;
		/// This action has no undo.
		/// &lt;/summary&gt;
		/// &lt;param name=&quot;packageName&quot;&gt;Name of the package.&lt;/param&gt;
		/// &lt;param name=&quot;xmlData&quot;&gt;The XML data.&lt;/param&gt;
		/// &lt;returns&gt;&lt;/returns&gt;
		public bool Undo(string packageName, XmlNode xmlData)
		{
			return true;
		}

		/// &lt;summary&gt;
		/// Action alias
		/// &lt;/summary&gt;
		/// &lt;returns&gt;&lt;/returns&gt;
		public string Alias()
		{
			return &quot;publishRootDocument&quot;;
		}
		#endregion

		public XmlNode SampleXml()
		{
			throw new NotImplementedException();
		}

	}
}
    </pre>
    <script type="text/javascript">
      highlightRanges([[24,3,24,4,0],[26,4,26,67,0],[28,4,28,24,0],[30,4,30,62,0],[32,4,32,11,0],[32,13,32,33,0],[32,34,32,36,0],[32,37,32,45,0],[33,4,33,5,0],[34,5,34,102,0],[35,5,35,6,0],[37,6,37,83,0],[40,6,40,12,0],[42,4,42,5,0],[43,4,43,16,0],[44,3,44,4,0],[54,3,54,4,0],[55,4,55,16,0],[56,3,56,4,0],[63,3,63,4,0],[64,4,64,33,0],[65,3,65,4,0],[69,3,69,4,0],[70,4,70,40,0]]);
    </script>
  </body>
</html>