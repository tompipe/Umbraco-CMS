<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Tom Pipe\Documents\Hexadigital\Code\Umbraco\Umbraco-CMS\src\umbraco.cms\businesslogic\task\TaskType.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using System.Collections.Generic;
using System.Data;
using System.Linq;
using System.Text;
using System.Runtime.CompilerServices;

using umbraco.BusinessLogic;
using Umbraco.Core;
using umbraco.DataLayer;


namespace umbraco.cms.businesslogic.task
{
    [Obsolete(&quot;Use Umbraco.Core.Service.ITaskService instead&quot;)]
    public class TaskType
    {
        internal Umbraco.Core.Models.TaskType TaskTypeEntity;

        #region Public Properties

        public int Id
        {
            get { return TaskTypeEntity.Id; }
            set { TaskTypeEntity.Id = value; }
        }

        public string Alias
        {
            get { return TaskTypeEntity.Alias; }
            set { TaskTypeEntity.Alias = value; }
        }

        /// &lt;summary&gt;
        /// All tasks associated with this task type
        /// &lt;/summary&gt;
        public Tasks Tasks
        {
            get
            {
                //lazy load the tasks
                if (_tasks == null)
                {
                    _tasks = Task.GetTasksByType(this.Id);
                }
                return _tasks;
            }
        }

        #endregion

        #region Private/protected members

        /// &lt;summary&gt;
        /// Unused, please do not use
        /// &lt;/summary&gt;
        [Obsolete(&quot;Obsolete, For querying the database use the new UmbracoDatabase object ApplicationContext.Current.DatabaseContext.Database&quot;, false)]
        protected static ISqlHelper SqlHelper
        {
            get { return Application.SqlHelper; }
        }

        private Tasks _tasks;

        #endregion

        #region Constructors

        internal TaskType(Umbraco.Core.Models.TaskType tt)
        {
            TaskTypeEntity = tt;
        }
        
        public TaskType()
        {
        }

        public TaskType(string TypeAlias)
        {
            TaskTypeEntity = ApplicationContext.Current.Services.TaskService.GetTaskTypeByAlias(TypeAlias);
            if (TaskTypeEntity == null) throw new NullReferenceException(&quot;No task type found by alias &quot; + TypeAlias);            
        }

        public TaskType(int TaskTypeId)
        {
            TaskTypeEntity = ApplicationContext.Current.Services.TaskService.GetTaskTypeById(TaskTypeId);
            if (TaskTypeEntity == null) throw new NullReferenceException(&quot;No task type found by alias &quot; + TaskTypeId);            
        } 
        #endregion      

        #region Public methods

        public void Save()
        {
            ApplicationContext.Current.Services.TaskService.Save(TaskTypeEntity);
        }

        /// &lt;summary&gt;
        /// Deletes the current task type.
        /// This will remove all tasks associated with this type
        /// &lt;/summary&gt;
        public void Delete()
        {
            ApplicationContext.Current.Services.TaskService.Delete(TaskTypeEntity);
        } 

        #endregion

        #region Static methods
        /// &lt;summary&gt;
        /// Returns all task types stored in the database
        /// &lt;/summary&gt;
        /// &lt;returns&gt;&lt;/returns&gt;
        public static IEnumerable&lt;TaskType&gt; GetAll()
        {
            return ApplicationContext.Current.Services.TaskService.GetAllTaskTypes()
                .Select(x =&gt; new TaskType(x));
        } 
        #endregion
	
    }
}

    </pre>
    <script type="text/javascript">
      highlightRanges([[24,17,24,18,0],[24,19,24,44,0],[24,45,24,46,0],[25,17,25,18,0],[25,19,25,45,0],[25,46,25,47,0],[30,17,30,18,0],[30,19,30,47,0],[30,48,30,49,0],[31,17,31,18,0],[31,19,31,48,0],[31,49,31,50,0],[40,13,40,14,0],[42,17,42,36,0],[43,17,43,18,0],[44,21,44,59,0],[45,17,45,18,0],[46,17,46,31,0],[47,13,47,14,0],[60,17,60,18,0],[60,19,60,48,0],[60,49,60,50,0],[69,9,69,59,0],[70,9,70,10,0],[71,13,71,33,0],[72,9,72,10,0],[74,9,74,26,0],[75,9,75,10,0],[76,9,76,10,0],[78,9,78,42,0],[79,9,79,10,0],[80,13,80,108,0],[81,13,81,40,0],[81,41,81,118,0],[82,9,82,10,0],[84,9,84,40,0],[85,9,85,10,0],[86,13,86,106,0],[87,13,87,40,0],[87,41,87,119,0],[88,9,88,10,0],[94,9,94,10,0],[95,13,95,82,0],[96,9,96,10,0],[103,9,103,10,0],[104,13,104,84,0],[105,9,105,10,0],[115,9,115,10,0],[116,13,117,30,0],[117,30,117,45,0],[117,45,117,47,0],[116,13,117,47,0],[118,9,118,10,0]]);
    </script>
  </body>
</html>