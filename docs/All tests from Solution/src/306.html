<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Tom Pipe\Documents\Hexadigital\Code\Umbraco\Umbraco-CMS\src\Umbraco.Tests\Routing\NiceUrlsProviderWithDomainsTests.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Moq;
using NUnit.Framework;
using Umbraco.Core.Configuration.UmbracoSettings;
using Umbraco.Core.Models;
using Umbraco.Tests.TestHelpers;
using Umbraco.Web.PublishedCache.XmlPublishedCache;
using Umbraco.Web.Routing;
using umbraco.cms.businesslogic.web;
using System.Configuration;
namespace Umbraco.Tests.Routing
{
    [TestFixture]
    public class NiceUrlsProviderWithDomainsTests : UrlRoutingTestBase
    {
        protected override void FreezeResolution()
        {
            SiteDomainHelperResolver.Current = new SiteDomainHelperResolver(new SiteDomainHelper());
            base.FreezeResolution();
        }


        void SetDomains1()
        {

            SetupDomainServiceMock(new[]
		    {
		        new UmbracoDomain(&quot;domain1.com&quot;) {Id = 1, LanguageId = LangFrId, RootContentId = 1001, LanguageIsoCode = &quot;fr-FR&quot;}
		    });
        }

        void SetDomains2()
        {
            SetupDomainServiceMock(new[]
            {
                new UmbracoDomain(&quot;http://domain1.com/foo&quot;) {Id = 1, LanguageId = LangFrId, RootContentId = 1001, LanguageIsoCode = &quot;fr-FR&quot;}
            });
        }

        void SetDomains3()
        {
            SetupDomainServiceMock(new[]
            {
                new UmbracoDomain(&quot;http://domain1.com/&quot;) {Id = 1, LanguageId = LangFrId, RootContentId = 10011, LanguageIsoCode = &quot;fr-FR&quot;}
            });
        }

        void SetDomains4()
        {
            SetupDomainServiceMock(new[]
            {
                new UmbracoDomain(&quot;http://domain1.com/&quot;) {Id = 1, LanguageId = LangEngId, RootContentId = 1001, LanguageIsoCode = &quot;en-US&quot;},
                new UmbracoDomain(&quot;http://domain1.com/en&quot;) {Id = 1, LanguageId = LangEngId, RootContentId = 10011, LanguageIsoCode = &quot;en-US&quot;},
                new UmbracoDomain(&quot;http://domain1.com/fr&quot;) {Id = 1, LanguageId = LangFrId, RootContentId = 10012, LanguageIsoCode = &quot;fr-FR&quot;},
                new UmbracoDomain(&quot;http://domain3.com/&quot;) {Id = 1, LanguageId = LangEngId, RootContentId = 1003, LanguageIsoCode = &quot;en-US&quot;},
                new UmbracoDomain(&quot;http://domain3.com/en&quot;) {Id = 1, LanguageId = LangEngId, RootContentId = 10031, LanguageIsoCode = &quot;en-US&quot;},
                new UmbracoDomain(&quot;http://domain3.com/fr&quot;) {Id = 1, LanguageId = LangFrId, RootContentId = 10032, LanguageIsoCode = &quot;fr-FR&quot;}
            });
        }

        void SetDomains5()
        {
            SetupDomainServiceMock(new[]
            {
                new UmbracoDomain(&quot;http://domain1.com/en&quot;) {Id = 1, LanguageId = LangEngId, RootContentId = 10011, LanguageIsoCode = &quot;en-US&quot;},
                new UmbracoDomain(&quot;http://domain1a.com/en&quot;) {Id = 1, LanguageId = LangEngId, RootContentId = 10011, LanguageIsoCode = &quot;en-US&quot;},
                new UmbracoDomain(&quot;http://domain1b.com/en&quot;) {Id = 1, LanguageId = LangEngId, RootContentId = 10011, LanguageIsoCode = &quot;en-US&quot;},
                new UmbracoDomain(&quot;http://domain1.com/fr&quot;) {Id = 1, LanguageId = LangFrId, RootContentId = 10012, LanguageIsoCode = &quot;fr-FR&quot;},
                new UmbracoDomain(&quot;http://domain1a.com/fr&quot;) {Id = 1, LanguageId = LangFrId, RootContentId = 10012, LanguageIsoCode = &quot;fr-FR&quot;},
                new UmbracoDomain(&quot;http://domain1b.com/fr&quot;) {Id = 1, LanguageId = LangFrId, RootContentId = 10012, LanguageIsoCode = &quot;fr-FR&quot;},
                new UmbracoDomain(&quot;http://domain3.com/en&quot;) {Id = 1, LanguageId = LangEngId, RootContentId = 10031, LanguageIsoCode = &quot;en-US&quot;},
                new UmbracoDomain(&quot;http://domain3.com/fr&quot;) {Id = 1, LanguageId = LangFrId, RootContentId = 10032, LanguageIsoCode = &quot;fr-FR&quot;}
            });
        }

        protected override string GetXmlContent(int templateId)
        {
            return @&quot;&lt;?xml version=&quot;&quot;1.0&quot;&quot; encoding=&quot;&quot;utf-8&quot;&quot;?&gt;
&lt;!DOCTYPE root[
&lt;!ELEMENT Doc ANY&gt;
&lt;!ATTLIST Doc id ID #REQUIRED&gt;
]&gt;
&lt;root id=&quot;&quot;-1&quot;&quot;&gt;
	&lt;Doc id=&quot;&quot;1001&quot;&quot; parentID=&quot;&quot;-1&quot;&quot; level=&quot;&quot;1&quot;&quot; writerID=&quot;&quot;0&quot;&quot; creatorID=&quot;&quot;0&quot;&quot; nodeType=&quot;&quot;1044&quot;&quot; template=&quot;&quot;&quot; + templateId + @&quot;&quot;&quot; sortOrder=&quot;&quot;1&quot;&quot; createDate=&quot;&quot;2012-06-12T14:13:17&quot;&quot; updateDate=&quot;&quot;2012-07-20T18:50:43&quot;&quot; nodeName=&quot;&quot;Home&quot;&quot; urlName=&quot;&quot;1001&quot;&quot; writerName=&quot;&quot;admin&quot;&quot; creatorName=&quot;&quot;admin&quot;&quot; path=&quot;&quot;-1,1001&quot;&quot; isDoc=&quot;&quot;&quot;&quot;&gt;
		&lt;content&gt;&lt;![CDATA[]]&gt;&lt;/content&gt;
		&lt;Doc id=&quot;&quot;10011&quot;&quot; parentID=&quot;&quot;1001&quot;&quot; level=&quot;&quot;2&quot;&quot; writerID=&quot;&quot;0&quot;&quot; creatorID=&quot;&quot;0&quot;&quot; nodeType=&quot;&quot;1044&quot;&quot; template=&quot;&quot;&quot; + templateId + @&quot;&quot;&quot; sortOrder=&quot;&quot;1&quot;&quot; createDate=&quot;&quot;2012-07-20T18:06:45&quot;&quot; updateDate=&quot;&quot;2012-07-20T19:07:31&quot;&quot; nodeName=&quot;&quot;Sub1&quot;&quot; urlName=&quot;&quot;1001-1&quot;&quot; writerName=&quot;&quot;admin&quot;&quot; creatorName=&quot;&quot;admin&quot;&quot; path=&quot;&quot;-1,1001,10011&quot;&quot; isDoc=&quot;&quot;&quot;&quot;&gt;
			&lt;content&gt;&lt;![CDATA[&lt;div&gt;This is some content&lt;/div&gt;]]&gt;&lt;/content&gt;
			&lt;Doc id=&quot;&quot;100111&quot;&quot; parentID=&quot;&quot;10011&quot;&quot; level=&quot;&quot;3&quot;&quot; writerID=&quot;&quot;0&quot;&quot; creatorID=&quot;&quot;0&quot;&quot; nodeType=&quot;&quot;1044&quot;&quot; template=&quot;&quot;&quot; + templateId + @&quot;&quot;&quot; sortOrder=&quot;&quot;1&quot;&quot; createDate=&quot;&quot;2012-07-20T18:07:54&quot;&quot; updateDate=&quot;&quot;2012-07-20T19:10:27&quot;&quot; nodeName=&quot;&quot;Sub2&quot;&quot; urlName=&quot;&quot;1001-1-1&quot;&quot; writerName=&quot;&quot;admin&quot;&quot; creatorName=&quot;&quot;admin&quot;&quot; path=&quot;&quot;-1,1001,10011,100111&quot;&quot; isDoc=&quot;&quot;&quot;&quot;&gt;
				&lt;content&gt;&lt;![CDATA[]]&gt;&lt;/content&gt;
			&lt;/Doc&gt;
			&lt;Doc id=&quot;&quot;100112&quot;&quot; parentID=&quot;&quot;10011&quot;&quot; level=&quot;&quot;3&quot;&quot; writerID=&quot;&quot;0&quot;&quot; creatorID=&quot;&quot;0&quot;&quot; nodeType=&quot;&quot;1044&quot;&quot; template=&quot;&quot;&quot; + templateId + @&quot;&quot;&quot; sortOrder=&quot;&quot;2&quot;&quot; createDate=&quot;&quot;2012-07-20T18:08:08&quot;&quot; updateDate=&quot;&quot;2012-07-20T19:10:52&quot;&quot; nodeName=&quot;&quot;Sub 3&quot;&quot; urlName=&quot;&quot;1001-1-2&quot;&quot; writerName=&quot;&quot;admin&quot;&quot; creatorName=&quot;&quot;admin&quot;&quot; path=&quot;&quot;-1,1001,10011,100112&quot;&quot; isDoc=&quot;&quot;&quot;&quot;&gt;
				&lt;content&gt;&lt;![CDATA[]]&gt;&lt;/content&gt;
				&lt;Doc id=&quot;&quot;1001121&quot;&quot; parentID=&quot;&quot;100112&quot;&quot; level=&quot;&quot;4&quot;&quot; writerID=&quot;&quot;0&quot;&quot; creatorID=&quot;&quot;0&quot;&quot; nodeType=&quot;&quot;1044&quot;&quot; template=&quot;&quot;&quot; + templateId + @&quot;&quot;&quot; sortOrder=&quot;&quot;2&quot;&quot; createDate=&quot;&quot;2012-07-20T18:08:08&quot;&quot; updateDate=&quot;&quot;2012-07-20T19:10:52&quot;&quot; nodeName=&quot;&quot;Sub 3&quot;&quot; urlName=&quot;&quot;1001-1-2-1&quot;&quot; writerName=&quot;&quot;admin&quot;&quot; creatorName=&quot;&quot;admin&quot;&quot; path=&quot;&quot;-1,1001,10011,100112,1001121&quot;&quot; isDoc=&quot;&quot;&quot;&quot;&gt;
					&lt;content&gt;&lt;![CDATA[]]&gt;&lt;/content&gt;
				&lt;/Doc&gt;
				&lt;Doc id=&quot;&quot;1001122&quot;&quot; parentID=&quot;&quot;100112&quot;&quot; level=&quot;&quot;4&quot;&quot; writerID=&quot;&quot;0&quot;&quot; creatorID=&quot;&quot;0&quot;&quot; nodeType=&quot;&quot;1044&quot;&quot; template=&quot;&quot;&quot; + templateId + @&quot;&quot;&quot; sortOrder=&quot;&quot;2&quot;&quot; createDate=&quot;&quot;2012-07-20T18:08:08&quot;&quot; updateDate=&quot;&quot;2012-07-20T19:10:52&quot;&quot; nodeName=&quot;&quot;Sub 3&quot;&quot; urlName=&quot;&quot;1001-1-2-2&quot;&quot; writerName=&quot;&quot;admin&quot;&quot; creatorName=&quot;&quot;admin&quot;&quot; path=&quot;&quot;-1,1001,10011,100112,1001122&quot;&quot; isDoc=&quot;&quot;&quot;&quot;&gt;
					&lt;content&gt;&lt;![CDATA[]]&gt;&lt;/content&gt;
				&lt;/Doc&gt;
			&lt;/Doc&gt;
		&lt;/Doc&gt;
		&lt;Doc id=&quot;&quot;10012&quot;&quot; parentID=&quot;&quot;1001&quot;&quot; level=&quot;&quot;2&quot;&quot; writerID=&quot;&quot;0&quot;&quot; creatorID=&quot;&quot;0&quot;&quot; nodeType=&quot;&quot;1044&quot;&quot; template=&quot;&quot;&quot; + templateId + @&quot;&quot;&quot; sortOrder=&quot;&quot;2&quot;&quot; createDate=&quot;&quot;2012-07-20T18:08:01&quot;&quot; updateDate=&quot;&quot;2012-07-20T18:49:32&quot;&quot; nodeName=&quot;&quot;Sub 2&quot;&quot; urlName=&quot;&quot;1001-2&quot;&quot; writerName=&quot;&quot;admin&quot;&quot; creatorName=&quot;&quot;admin&quot;&quot; path=&quot;&quot;-1,1001,10012&quot;&quot; isDoc=&quot;&quot;&quot;&quot;&gt;
			&lt;content&gt;&lt;![CDATA[&lt;div&gt;This is some content&lt;/div&gt;]]&gt;&lt;/content&gt;
			&lt;Doc id=&quot;&quot;100121&quot;&quot; parentID=&quot;&quot;10012&quot;&quot; level=&quot;&quot;3&quot;&quot; writerID=&quot;&quot;0&quot;&quot; creatorID=&quot;&quot;0&quot;&quot; nodeType=&quot;&quot;1044&quot;&quot; template=&quot;&quot;&quot; + templateId + @&quot;&quot;&quot; sortOrder=&quot;&quot;1&quot;&quot; createDate=&quot;&quot;2012-07-20T18:07:54&quot;&quot; updateDate=&quot;&quot;2012-07-20T19:10:27&quot;&quot; nodeName=&quot;&quot;Sub2&quot;&quot; urlName=&quot;&quot;1001-2-1&quot;&quot; writerName=&quot;&quot;admin&quot;&quot; creatorName=&quot;&quot;admin&quot;&quot; path=&quot;&quot;-1,1001,10012,100121&quot;&quot; isDoc=&quot;&quot;&quot;&quot;&gt;
				&lt;content&gt;&lt;![CDATA[]]&gt;&lt;/content&gt;
			&lt;/Doc&gt;
			&lt;Doc id=&quot;&quot;100122&quot;&quot; parentID=&quot;&quot;10012&quot;&quot; level=&quot;&quot;3&quot;&quot; writerID=&quot;&quot;0&quot;&quot; creatorID=&quot;&quot;0&quot;&quot; nodeType=&quot;&quot;1044&quot;&quot; template=&quot;&quot;&quot; + templateId + @&quot;&quot;&quot; sortOrder=&quot;&quot;2&quot;&quot; createDate=&quot;&quot;2012-07-20T18:08:08&quot;&quot; updateDate=&quot;&quot;2012-07-20T19:10:52&quot;&quot; nodeName=&quot;&quot;Sub 3&quot;&quot; urlName=&quot;&quot;1001-2-2&quot;&quot; writerName=&quot;&quot;admin&quot;&quot; creatorName=&quot;&quot;admin&quot;&quot; path=&quot;&quot;-1,1001,10012,100122&quot;&quot; isDoc=&quot;&quot;&quot;&quot;&gt;
				&lt;content&gt;&lt;![CDATA[]]&gt;&lt;/content&gt;
				&lt;Doc id=&quot;&quot;1001221&quot;&quot; parentID=&quot;&quot;100122&quot;&quot; level=&quot;&quot;4&quot;&quot; writerID=&quot;&quot;0&quot;&quot; creatorID=&quot;&quot;0&quot;&quot; nodeType=&quot;&quot;1044&quot;&quot; template=&quot;&quot;&quot; + templateId + @&quot;&quot;&quot; sortOrder=&quot;&quot;2&quot;&quot; createDate=&quot;&quot;2012-07-20T18:08:08&quot;&quot; updateDate=&quot;&quot;2012-07-20T19:10:52&quot;&quot; nodeName=&quot;&quot;Sub 3&quot;&quot; urlName=&quot;&quot;1001-2-2-1&quot;&quot; writerName=&quot;&quot;admin&quot;&quot; creatorName=&quot;&quot;admin&quot;&quot; path=&quot;&quot;-1,1001,10012,100122,1001221&quot;&quot; isDoc=&quot;&quot;&quot;&quot;&gt;
					&lt;content&gt;&lt;![CDATA[]]&gt;&lt;/content&gt;
				&lt;/Doc&gt;
				&lt;Doc id=&quot;&quot;1001222&quot;&quot; parentID=&quot;&quot;100122&quot;&quot; level=&quot;&quot;4&quot;&quot; writerID=&quot;&quot;0&quot;&quot; creatorID=&quot;&quot;0&quot;&quot; nodeType=&quot;&quot;1044&quot;&quot; template=&quot;&quot;&quot; + templateId + @&quot;&quot;&quot; sortOrder=&quot;&quot;2&quot;&quot; createDate=&quot;&quot;2012-07-20T18:08:08&quot;&quot; updateDate=&quot;&quot;2012-07-20T19:10:52&quot;&quot; nodeName=&quot;&quot;Sub 3&quot;&quot; urlName=&quot;&quot;1001-2-2-2&quot;&quot; writerName=&quot;&quot;admin&quot;&quot; creatorName=&quot;&quot;admin&quot;&quot; path=&quot;&quot;-1,1001,10012,100122,1001222&quot;&quot; isDoc=&quot;&quot;&quot;&quot;&gt;
					&lt;content&gt;&lt;![CDATA[]]&gt;&lt;/content&gt;
				&lt;/Doc&gt;
			&lt;/Doc&gt;
		&lt;/Doc&gt;
		&lt;Doc id=&quot;&quot;10013&quot;&quot; parentID=&quot;&quot;1001&quot;&quot; level=&quot;&quot;2&quot;&quot; writerID=&quot;&quot;0&quot;&quot; creatorID=&quot;&quot;0&quot;&quot; nodeType=&quot;&quot;1044&quot;&quot; template=&quot;&quot;&quot; + templateId + @&quot;&quot;&quot; sortOrder=&quot;&quot;3&quot;&quot; createDate=&quot;&quot;2012-07-20T18:08:01&quot;&quot; updateDate=&quot;&quot;2012-07-20T18:49:32&quot;&quot; nodeName=&quot;&quot;Sub 2&quot;&quot; urlName=&quot;&quot;1001-3&quot;&quot; writerName=&quot;&quot;admin&quot;&quot; creatorName=&quot;&quot;admin&quot;&quot; path=&quot;&quot;-1,1001,10013&quot;&quot; isDoc=&quot;&quot;&quot;&quot;&gt;
		&lt;/Doc&gt;
	&lt;/Doc&gt;
	&lt;Doc id=&quot;&quot;1002&quot;&quot; parentID=&quot;&quot;-1&quot;&quot; level=&quot;&quot;1&quot;&quot; writerID=&quot;&quot;0&quot;&quot; creatorID=&quot;&quot;0&quot;&quot; nodeType=&quot;&quot;1234&quot;&quot; template=&quot;&quot;&quot; + templateId + @&quot;&quot;&quot; sortOrder=&quot;&quot;3&quot;&quot; createDate=&quot;&quot;2012-07-16T15:26:59&quot;&quot; updateDate=&quot;&quot;2012-07-18T14:23:35&quot;&quot; nodeName=&quot;&quot;Test&quot;&quot; urlName=&quot;&quot;1002&quot;&quot; writerName=&quot;&quot;admin&quot;&quot; creatorName=&quot;&quot;admin&quot;&quot; path=&quot;&quot;-1,1002&quot;&quot; isDoc=&quot;&quot;&quot;&quot;&gt;
	&lt;/Doc&gt;
	&lt;Doc id=&quot;&quot;1003&quot;&quot; parentID=&quot;&quot;-1&quot;&quot; level=&quot;&quot;1&quot;&quot; writerID=&quot;&quot;0&quot;&quot; creatorID=&quot;&quot;0&quot;&quot; nodeType=&quot;&quot;1044&quot;&quot; template=&quot;&quot;&quot; + templateId + @&quot;&quot;&quot; sortOrder=&quot;&quot;1&quot;&quot; createDate=&quot;&quot;2012-06-12T14:13:17&quot;&quot; updateDate=&quot;&quot;2012-07-20T18:50:43&quot;&quot; nodeName=&quot;&quot;Home&quot;&quot; urlName=&quot;&quot;1003&quot;&quot; writerName=&quot;&quot;admin&quot;&quot; creatorName=&quot;&quot;admin&quot;&quot; path=&quot;&quot;-1,1003&quot;&quot; isDoc=&quot;&quot;&quot;&quot;&gt;
		&lt;content&gt;&lt;![CDATA[]]&gt;&lt;/content&gt;
		&lt;Doc id=&quot;&quot;10031&quot;&quot; parentID=&quot;&quot;1003&quot;&quot; level=&quot;&quot;2&quot;&quot; writerID=&quot;&quot;0&quot;&quot; creatorID=&quot;&quot;0&quot;&quot; nodeType=&quot;&quot;1044&quot;&quot; template=&quot;&quot;&quot; + templateId + @&quot;&quot;&quot; sortOrder=&quot;&quot;1&quot;&quot; createDate=&quot;&quot;2012-07-20T18:06:45&quot;&quot; updateDate=&quot;&quot;2012-07-20T19:07:31&quot;&quot; nodeName=&quot;&quot;Sub1&quot;&quot; urlName=&quot;&quot;1003-1&quot;&quot; writerName=&quot;&quot;admin&quot;&quot; creatorName=&quot;&quot;admin&quot;&quot; path=&quot;&quot;-1,1003,10031&quot;&quot; isDoc=&quot;&quot;&quot;&quot;&gt;
			&lt;content&gt;&lt;![CDATA[&lt;div&gt;This is some content&lt;/div&gt;]]&gt;&lt;/content&gt;
			&lt;Doc id=&quot;&quot;100311&quot;&quot; parentID=&quot;&quot;10031&quot;&quot; level=&quot;&quot;3&quot;&quot; writerID=&quot;&quot;0&quot;&quot; creatorID=&quot;&quot;0&quot;&quot; nodeType=&quot;&quot;1044&quot;&quot; template=&quot;&quot;&quot; + templateId + @&quot;&quot;&quot; sortOrder=&quot;&quot;1&quot;&quot; createDate=&quot;&quot;2012-07-20T18:07:54&quot;&quot; updateDate=&quot;&quot;2012-07-20T19:10:27&quot;&quot; nodeName=&quot;&quot;Sub2&quot;&quot; urlName=&quot;&quot;1003-1-1&quot;&quot; writerName=&quot;&quot;admin&quot;&quot; creatorName=&quot;&quot;admin&quot;&quot; path=&quot;&quot;-1,1003,10031,100311&quot;&quot; isDoc=&quot;&quot;&quot;&quot;&gt;
				&lt;content&gt;&lt;![CDATA[]]&gt;&lt;/content&gt;
			&lt;/Doc&gt;
			&lt;Doc id=&quot;&quot;100312&quot;&quot; parentID=&quot;&quot;10031&quot;&quot; level=&quot;&quot;3&quot;&quot; writerID=&quot;&quot;0&quot;&quot; creatorID=&quot;&quot;0&quot;&quot; nodeType=&quot;&quot;1044&quot;&quot; template=&quot;&quot;&quot; + templateId + @&quot;&quot;&quot; sortOrder=&quot;&quot;2&quot;&quot; createDate=&quot;&quot;2012-07-20T18:08:08&quot;&quot; updateDate=&quot;&quot;2012-07-20T19:10:52&quot;&quot; nodeName=&quot;&quot;Sub 3&quot;&quot; urlName=&quot;&quot;1003-1-2&quot;&quot; writerName=&quot;&quot;admin&quot;&quot; creatorName=&quot;&quot;admin&quot;&quot; path=&quot;&quot;-1,1003,10031,100312&quot;&quot; isDoc=&quot;&quot;&quot;&quot;&gt;
				&lt;content&gt;&lt;![CDATA[]]&gt;&lt;/content&gt;
				&lt;Doc id=&quot;&quot;1003121&quot;&quot; parentID=&quot;&quot;100312&quot;&quot; level=&quot;&quot;4&quot;&quot; writerID=&quot;&quot;0&quot;&quot; creatorID=&quot;&quot;0&quot;&quot; nodeType=&quot;&quot;1044&quot;&quot; template=&quot;&quot;&quot; + templateId + @&quot;&quot;&quot; sortOrder=&quot;&quot;2&quot;&quot; createDate=&quot;&quot;2012-07-20T18:08:08&quot;&quot; updateDate=&quot;&quot;2012-07-20T19:10:52&quot;&quot; nodeName=&quot;&quot;Sub 3&quot;&quot; urlName=&quot;&quot;1003-1-2-1&quot;&quot; writerName=&quot;&quot;admin&quot;&quot; creatorName=&quot;&quot;admin&quot;&quot; path=&quot;&quot;-1,1003,10031,100312,1003121&quot;&quot; isDoc=&quot;&quot;&quot;&quot;&gt;
					&lt;content&gt;&lt;![CDATA[]]&gt;&lt;/content&gt;
				&lt;/Doc&gt;
				&lt;Doc id=&quot;&quot;1003122&quot;&quot; parentID=&quot;&quot;100312&quot;&quot; level=&quot;&quot;4&quot;&quot; writerID=&quot;&quot;0&quot;&quot; creatorID=&quot;&quot;0&quot;&quot; nodeType=&quot;&quot;1044&quot;&quot; template=&quot;&quot;&quot; + templateId + @&quot;&quot;&quot; sortOrder=&quot;&quot;2&quot;&quot; createDate=&quot;&quot;2012-07-20T18:08:08&quot;&quot; updateDate=&quot;&quot;2012-07-20T19:10:52&quot;&quot; nodeName=&quot;&quot;Sub 3&quot;&quot; urlName=&quot;&quot;1003-1-2-2&quot;&quot; writerName=&quot;&quot;admin&quot;&quot; creatorName=&quot;&quot;admin&quot;&quot; path=&quot;&quot;-1,1003,10031,100312,1003122&quot;&quot; isDoc=&quot;&quot;&quot;&quot;&gt;
					&lt;content&gt;&lt;![CDATA[]]&gt;&lt;/content&gt;
				&lt;/Doc&gt;
			&lt;/Doc&gt;
		&lt;/Doc&gt;
		&lt;Doc id=&quot;&quot;10032&quot;&quot; parentID=&quot;&quot;1003&quot;&quot; level=&quot;&quot;2&quot;&quot; writerID=&quot;&quot;0&quot;&quot; creatorID=&quot;&quot;0&quot;&quot; nodeType=&quot;&quot;1044&quot;&quot; template=&quot;&quot;&quot; + templateId + @&quot;&quot;&quot; sortOrder=&quot;&quot;2&quot;&quot; createDate=&quot;&quot;2012-07-20T18:08:01&quot;&quot; updateDate=&quot;&quot;2012-07-20T18:49:32&quot;&quot; nodeName=&quot;&quot;Sub 2&quot;&quot; urlName=&quot;&quot;1003-2&quot;&quot; writerName=&quot;&quot;admin&quot;&quot; creatorName=&quot;&quot;admin&quot;&quot; path=&quot;&quot;-1,1003,10032&quot;&quot; isDoc=&quot;&quot;&quot;&quot;&gt;
			&lt;content&gt;&lt;![CDATA[&lt;div&gt;This is some content&lt;/div&gt;]]&gt;&lt;/content&gt;
			&lt;Doc id=&quot;&quot;100321&quot;&quot; parentID=&quot;&quot;10032&quot;&quot; level=&quot;&quot;3&quot;&quot; writerID=&quot;&quot;0&quot;&quot; creatorID=&quot;&quot;0&quot;&quot; nodeType=&quot;&quot;1044&quot;&quot; template=&quot;&quot;&quot; + templateId + @&quot;&quot;&quot; sortOrder=&quot;&quot;1&quot;&quot; createDate=&quot;&quot;2012-07-20T18:07:54&quot;&quot; updateDate=&quot;&quot;2012-07-20T19:10:27&quot;&quot; nodeName=&quot;&quot;Sub2&quot;&quot; urlName=&quot;&quot;1003-2-1&quot;&quot; writerName=&quot;&quot;admin&quot;&quot; creatorName=&quot;&quot;admin&quot;&quot; path=&quot;&quot;-1,1003,10032,100321&quot;&quot; isDoc=&quot;&quot;&quot;&quot;&gt;
				&lt;content&gt;&lt;![CDATA[]]&gt;&lt;/content&gt;
			&lt;/Doc&gt;
			&lt;Doc id=&quot;&quot;100322&quot;&quot; parentID=&quot;&quot;10032&quot;&quot; level=&quot;&quot;3&quot;&quot; writerID=&quot;&quot;0&quot;&quot; creatorID=&quot;&quot;0&quot;&quot; nodeType=&quot;&quot;1044&quot;&quot; template=&quot;&quot;&quot; + templateId + @&quot;&quot;&quot; sortOrder=&quot;&quot;2&quot;&quot; createDate=&quot;&quot;2012-07-20T18:08:08&quot;&quot; updateDate=&quot;&quot;2012-07-20T19:10:52&quot;&quot; nodeName=&quot;&quot;Sub 3&quot;&quot; urlName=&quot;&quot;1003-2-2&quot;&quot; writerName=&quot;&quot;admin&quot;&quot; creatorName=&quot;&quot;admin&quot;&quot; path=&quot;&quot;-1,1003,10032,100322&quot;&quot; isDoc=&quot;&quot;&quot;&quot;&gt;
				&lt;content&gt;&lt;![CDATA[]]&gt;&lt;/content&gt;
				&lt;Doc id=&quot;&quot;1003221&quot;&quot; parentID=&quot;&quot;100322&quot;&quot; level=&quot;&quot;4&quot;&quot; writerID=&quot;&quot;0&quot;&quot; creatorID=&quot;&quot;0&quot;&quot; nodeType=&quot;&quot;1044&quot;&quot; template=&quot;&quot;&quot; + templateId + @&quot;&quot;&quot; sortOrder=&quot;&quot;2&quot;&quot; createDate=&quot;&quot;2012-07-20T18:08:08&quot;&quot; updateDate=&quot;&quot;2012-07-20T19:10:52&quot;&quot; nodeName=&quot;&quot;Sub 3&quot;&quot; urlName=&quot;&quot;1003-2-2-1&quot;&quot; writerName=&quot;&quot;admin&quot;&quot; creatorName=&quot;&quot;admin&quot;&quot; path=&quot;&quot;-1,1003,10032,100322,1003221&quot;&quot; isDoc=&quot;&quot;&quot;&quot;&gt;
					&lt;content&gt;&lt;![CDATA[]]&gt;&lt;/content&gt;
				&lt;/Doc&gt;
				&lt;Doc id=&quot;&quot;1003222&quot;&quot; parentID=&quot;&quot;100322&quot;&quot; level=&quot;&quot;4&quot;&quot; writerID=&quot;&quot;0&quot;&quot; creatorID=&quot;&quot;0&quot;&quot; nodeType=&quot;&quot;1044&quot;&quot; template=&quot;&quot;&quot; + templateId + @&quot;&quot;&quot; sortOrder=&quot;&quot;2&quot;&quot; createDate=&quot;&quot;2012-07-20T18:08:08&quot;&quot; updateDate=&quot;&quot;2012-07-20T19:10:52&quot;&quot; nodeName=&quot;&quot;Sub 3&quot;&quot; urlName=&quot;&quot;1003-2-2-2&quot;&quot; writerName=&quot;&quot;admin&quot;&quot; creatorName=&quot;&quot;admin&quot;&quot; path=&quot;&quot;-1,1003,10032,100322,1003222&quot;&quot; isDoc=&quot;&quot;&quot;&quot;&gt;
					&lt;content&gt;&lt;![CDATA[]]&gt;&lt;/content&gt;
				&lt;/Doc&gt;
			&lt;/Doc&gt;
		&lt;/Doc&gt;
		&lt;Doc id=&quot;&quot;10033&quot;&quot; parentID=&quot;&quot;1003&quot;&quot; level=&quot;&quot;2&quot;&quot; writerID=&quot;&quot;0&quot;&quot; creatorID=&quot;&quot;0&quot;&quot; nodeType=&quot;&quot;1044&quot;&quot; template=&quot;&quot;&quot; + templateId + @&quot;&quot;&quot; sortOrder=&quot;&quot;3&quot;&quot; createDate=&quot;&quot;2012-07-20T18:08:01&quot;&quot; updateDate=&quot;&quot;2012-07-20T18:49:32&quot;&quot; nodeName=&quot;&quot;Sub 2&quot;&quot; urlName=&quot;&quot;1003-3&quot;&quot; writerName=&quot;&quot;admin&quot;&quot; creatorName=&quot;&quot;admin&quot;&quot; path=&quot;&quot;-1,1003,10033&quot;&quot; isDoc=&quot;&quot;&quot;&quot;&gt;
		&lt;/Doc&gt;
	&lt;/Doc&gt;
&lt;/root&gt;&quot;;
        }

        // with one simple domain &quot;domain1.com&quot;
        // basic tests
        [TestCase(1001, &quot;http://domain1.com&quot;, false, &quot;/&quot;)]
        [TestCase(10011, &quot;http://domain1.com&quot;, false, &quot;/1001-1/&quot;)]
        [TestCase(1002, &quot;http://domain1.com&quot;, false, &quot;/1002/&quot;)]
        // absolute tests
        [TestCase(1001, &quot;http://domain1.com&quot;, true, &quot;http://domain1.com/&quot;)]
        [TestCase(10011, &quot;http://domain1.com&quot;, true, &quot;http://domain1.com/1001-1/&quot;)]
        // different current tests
        [TestCase(1001, &quot;http://domain2.com&quot;, false, &quot;http://domain1.com/&quot;)]
        [TestCase(10011, &quot;http://domain2.com&quot;, false, &quot;http://domain1.com/1001-1/&quot;)]
        [TestCase(1001, &quot;https://domain1.com&quot;, false, &quot;/&quot;)]
        [TestCase(10011, &quot;https://domain1.com&quot;, false, &quot;/1001-1/&quot;)]
        public void Get_Nice_Url_SimpleDomain(int nodeId, string currentUrl, bool absolute, string expected)
        {
            var settings = SettingsForTests.GenerateMockSettings();
            var request = Mock.Get(settings.RequestHandler);
            request.Setup(x =&gt; x.UseDomainPrefixes).Returns(false);

            var routingContext = GetRoutingContext(&quot;/test&quot;, 1111, umbracoSettings: settings);

            SettingsForTests.UseDirectoryUrls = true;
            SettingsForTests.HideTopLevelNodeFromPath = false; // ignored w/domains

            SetDomains1();

            var currentUri = new Uri(currentUrl);
            var result = routingContext.UrlProvider.GetUrl(nodeId, currentUri, absolute);
            Assert.AreEqual(expected, result);
        }

        // with one complete domain &quot;http://domain1.com/foo&quot;
        // basic tests
        [TestCase(1001, &quot;http://domain1.com&quot;, false, &quot;/foo/&quot;)]
        [TestCase(10011, &quot;http://domain1.com&quot;, false, &quot;/foo/1001-1/&quot;)]
        [TestCase(1002, &quot;http://domain1.com&quot;, false, &quot;/1002/&quot;)]
        // absolute tests
        [TestCase(1001, &quot;http://domain1.com&quot;, true, &quot;http://domain1.com/foo/&quot;)]
        [TestCase(10011, &quot;http://domain1.com&quot;, true, &quot;http://domain1.com/foo/1001-1/&quot;)]
        // different current tests
        [TestCase(1001, &quot;http://domain2.com&quot;, false, &quot;http://domain1.com/foo/&quot;)]
        [TestCase(10011, &quot;http://domain2.com&quot;, false, &quot;http://domain1.com/foo/1001-1/&quot;)]
        [TestCase(1001, &quot;https://domain1.com&quot;, false, &quot;http://domain1.com/foo/&quot;)]
        [TestCase(10011, &quot;https://domain1.com&quot;, false, &quot;http://domain1.com/foo/1001-1/&quot;)]
        public void Get_Nice_Url_SimpleWithSchemeAndPath(int nodeId, string currentUrl, bool absolute, string expected)
        {
            var settings = SettingsForTests.GenerateMockSettings();
            var request = Mock.Get(settings.RequestHandler);
            request.Setup(x =&gt; x.UseDomainPrefixes).Returns(false);

            var routingContext = GetRoutingContext(&quot;/test&quot;, 1111, umbracoSettings: settings);

            SettingsForTests.UseDirectoryUrls = true;
            SettingsForTests.HideTopLevelNodeFromPath = false; // ignored w/domains

            SetDomains2();

            var currentUri = new Uri(currentUrl);
            var result = routingContext.UrlProvider.GetUrl(nodeId, currentUri, absolute);
            Assert.AreEqual(expected, result);
        }

        // with one domain, not at root
        [TestCase(1001, &quot;http://domain1.com&quot;, false, &quot;/1001/&quot;)]
        [TestCase(10011, &quot;http://domain1.com&quot;, false, &quot;/&quot;)]
        [TestCase(100111, &quot;http://domain1.com&quot;, false, &quot;/1001-1-1/&quot;)]
        [TestCase(1002, &quot;http://domain1.com&quot;, false, &quot;/1002/&quot;)]
        public void Get_Nice_Url_DeepDomain(int nodeId, string currentUrl, bool absolute, string expected)
        {
            var settings = SettingsForTests.GenerateMockSettings();
            var request = Mock.Get(settings.RequestHandler);
            request.Setup(x =&gt; x.UseDomainPrefixes).Returns(false);

            var routingContext = GetRoutingContext(&quot;/test&quot;, 1111, umbracoSettings: settings);

            SettingsForTests.UseDirectoryUrls = true;
            SettingsForTests.HideTopLevelNodeFromPath = false; // ignored w/domains

            SetDomains3();

            var currentUri = new Uri(currentUrl);
            var result = routingContext.UrlProvider.GetUrl(nodeId, currentUri, absolute);
            Assert.AreEqual(expected, result);
        }

        // with nested domains
        [TestCase(1001, &quot;http://domain1.com&quot;, false, &quot;/&quot;)]
        [TestCase(10011, &quot;http://domain1.com&quot;, false, &quot;/en/&quot;)]
        [TestCase(100111, &quot;http://domain1.com&quot;, false, &quot;/en/1001-1-1/&quot;)]
        [TestCase(10012, &quot;http://domain1.com&quot;, false, &quot;/fr/&quot;)]
        [TestCase(100121, &quot;http://domain1.com&quot;, false, &quot;/fr/1001-2-1/&quot;)]
        [TestCase(10013, &quot;http://domain1.com&quot;, false, &quot;/1001-3/&quot;)]
        [TestCase(1002, &quot;http://domain1.com&quot;, false, &quot;/1002/&quot;)]
        [TestCase(1003, &quot;http://domain3.com&quot;, false, &quot;/&quot;)]
        [TestCase(10031, &quot;http://domain3.com&quot;, false, &quot;/en/&quot;)]
        [TestCase(100321, &quot;http://domain3.com&quot;, false, &quot;/fr/1003-2-1/&quot;)]
        public void Get_Nice_Url_NestedDomains(int nodeId, string currentUrl, bool absolute, string expected)
        {
            var settings = SettingsForTests.GenerateMockSettings();
            var request = Mock.Get(settings.RequestHandler);
            request.Setup(x =&gt; x.UseDomainPrefixes).Returns(false);

            var routingContext = GetRoutingContext(&quot;/test&quot;, 1111, umbracoSettings: settings);

            SettingsForTests.UseDirectoryUrls = true;
            SettingsForTests.HideTopLevelNodeFromPath = false; // ignored w/domains

            SetDomains4();

            var currentUri = new Uri(currentUrl);
            var result = routingContext.UrlProvider.GetUrl(nodeId, currentUri, absolute);
            Assert.AreEqual(expected, result);
        }

        [Test]
        public void Get_Nice_Url_DomainsAndCache()
        {
            var settings = SettingsForTests.GenerateMockSettings();
            var request = Mock.Get(settings.RequestHandler);
            request.Setup(x =&gt; x.UseDomainPrefixes).Returns(false);

            var routingContext = GetRoutingContext(&quot;/test&quot;, 1111, umbracoSettings: settings);

            SettingsForTests.UseDirectoryUrls = true;
            SettingsForTests.HideTopLevelNodeFromPath = false; // ignored w/domains

            SetDomains4();

            string ignore;
            ignore = routingContext.UrlProvider.GetUrl(1001, new Uri(&quot;http://domain1.com&quot;), false);
            ignore = routingContext.UrlProvider.GetUrl(10011, new Uri(&quot;http://domain1.com&quot;), false);
            ignore = routingContext.UrlProvider.GetUrl(100111, new Uri(&quot;http://domain1.com&quot;), false);
            ignore = routingContext.UrlProvider.GetUrl(10012, new Uri(&quot;http://domain1.com&quot;), false);
            ignore = routingContext.UrlProvider.GetUrl(100121, new Uri(&quot;http://domain1.com&quot;), false);
            ignore = routingContext.UrlProvider.GetUrl(10013, new Uri(&quot;http://domain1.com&quot;), false);
            ignore = routingContext.UrlProvider.GetUrl(1002, new Uri(&quot;http://domain1.com&quot;), false);
            ignore = routingContext.UrlProvider.GetUrl(1001, new Uri(&quot;http://domain2.com&quot;), false);
            ignore = routingContext.UrlProvider.GetUrl(10011, new Uri(&quot;http://domain2.com&quot;), false);
            ignore = routingContext.UrlProvider.GetUrl(100111, new Uri(&quot;http://domain2.com&quot;), false);
            ignore = routingContext.UrlProvider.GetUrl(1002, new Uri(&quot;http://domain2.com&quot;), false);

            var cache = routingContext.UmbracoContext.ContentCache.InnerCache as PublishedContentCache;
            if (cache == null) throw new Exception(&quot;Unsupported IPublishedContentCache, only the Xml one is supported.&quot;);

            var cachedRoutes = cache.RoutesCache.GetCachedRoutes();
            Assert.AreEqual(7, cachedRoutes.Count);

            var cachedIds = cache.RoutesCache.GetCachedIds();
            Assert.AreEqual(0, cachedIds.Count);

            CheckRoute(cachedRoutes, cachedIds, 1001, &quot;1001/&quot;);
            CheckRoute(cachedRoutes, cachedIds, 10011, &quot;10011/&quot;);
            CheckRoute(cachedRoutes, cachedIds, 100111, &quot;10011/1001-1-1&quot;);
            CheckRoute(cachedRoutes, cachedIds, 10012, &quot;10012/&quot;);
            CheckRoute(cachedRoutes, cachedIds, 100121, &quot;10012/1001-2-1&quot;);
            CheckRoute(cachedRoutes, cachedIds, 10013, &quot;1001/1001-3&quot;);
            CheckRoute(cachedRoutes, cachedIds, 1002, &quot;/1002&quot;);

            // use the cache
            Assert.AreEqual(&quot;/&quot;, routingContext.UrlProvider.GetUrl(1001, new Uri(&quot;http://domain1.com&quot;), false));
            Assert.AreEqual(&quot;/en/&quot;, routingContext.UrlProvider.GetUrl(10011, new Uri(&quot;http://domain1.com&quot;), false));
            Assert.AreEqual(&quot;/en/1001-1-1/&quot;, routingContext.UrlProvider.GetUrl(100111, new Uri(&quot;http://domain1.com&quot;), false));
            Assert.AreEqual(&quot;/fr/&quot;, routingContext.UrlProvider.GetUrl(10012, new Uri(&quot;http://domain1.com&quot;), false));
            Assert.AreEqual(&quot;/fr/1001-2-1/&quot;, routingContext.UrlProvider.GetUrl(100121, new Uri(&quot;http://domain1.com&quot;), false));
            Assert.AreEqual(&quot;/1001-3/&quot;, routingContext.UrlProvider.GetUrl(10013, new Uri(&quot;http://domain1.com&quot;), false));
            Assert.AreEqual(&quot;/1002/&quot;, routingContext.UrlProvider.GetUrl(1002, new Uri(&quot;http://domain1.com&quot;), false));

            Assert.AreEqual(&quot;http://domain1.com/fr/1001-2-1/&quot;, routingContext.UrlProvider.GetUrl(100121, new Uri(&quot;http://domain2.com&quot;), false));
        }

        private static void CheckRoute(IDictionary&lt;int, string&gt; routes, IDictionary&lt;string, int&gt; ids, int id, string route)
        {
            Assert.IsTrue(routes.ContainsKey(id));
            Assert.AreEqual(route, routes[id]);
            Assert.IsFalse(ids.ContainsKey(route));
        }

        [Test]
        public void Get_Nice_Url_Relative_Or_Absolute()
        {
            var settings = SettingsForTests.GenerateMockSettings();
            var requestMock = Mock.Get(settings.RequestHandler);
            requestMock.Setup(x =&gt; x.UseDomainPrefixes).Returns(false);

            var routingContext = GetRoutingContext(&quot;http://domain1.com/test&quot;, 1111, umbracoSettings: settings);

            SettingsForTests.UseDirectoryUrls = true;
            SettingsForTests.HideTopLevelNodeFromPath = false;

            SetDomains4();

            Assert.AreEqual(&quot;/en/1001-1-1/&quot;, routingContext.UrlProvider.GetUrl(100111));
            Assert.AreEqual(&quot;http://domain3.com/en/1003-1-1/&quot;, routingContext.UrlProvider.GetUrl(100311));

            requestMock.Setup(x =&gt; x.UseDomainPrefixes).Returns(true);

            Assert.AreEqual(&quot;http://domain1.com/en/1001-1-1/&quot;, routingContext.UrlProvider.GetUrl(100111));
            Assert.AreEqual(&quot;http://domain3.com/en/1003-1-1/&quot;, routingContext.UrlProvider.GetUrl(100311));

            requestMock.Setup(x =&gt; x.UseDomainPrefixes).Returns(false);
            routingContext.UrlProvider.Mode = UrlProviderMode.Absolute;

            Assert.AreEqual(&quot;http://domain1.com/en/1001-1-1/&quot;, routingContext.UrlProvider.GetUrl(100111));
            Assert.AreEqual(&quot;http://domain3.com/en/1003-1-1/&quot;, routingContext.UrlProvider.GetUrl(100311));
        }

        [Test]
        public void Get_Nice_Url_Alternate()
        {
            var settings = SettingsForTests.GenerateMockSettings();
            var routingContext = GetRoutingContext(&quot;http://domain1.com/en/test&quot;, 1111, umbracoSettings: settings);

            SettingsForTests.UseDirectoryUrls = true;
            SettingsForTests.HideTopLevelNodeFromPath = false;

            SetDomains5();

            var url = routingContext.UrlProvider.GetUrl(100111, true);
            Assert.AreEqual(&quot;http://domain1.com/en/1001-1-1/&quot;, url);

            var result = routingContext.UrlProvider.GetOtherUrls(100111).ToArray();

            Assert.AreEqual(2, result.Count());
            Assert.IsTrue(result.Contains(&quot;http://domain1a.com/en/1001-1-1/&quot;));
            Assert.IsTrue(result.Contains(&quot;http://domain1b.com/en/1001-1-1/&quot;));
        }
    }
}

    </pre>
    <script type="text/javascript">
      highlightRanges([[20,9,20,10,1],[21,13,21,101,1],[22,13,22,37,1],[23,9,23,10,1],[27,9,27,10,1],[29,13,32,10,1],[33,9,33,10,1],[36,9,36,10,1],[37,13,40,16,1],[41,9,41,10,1],[44,9,44,10,1],[45,13,48,16,1],[49,9,49,10,1],[52,9,52,10,1],[53,13,61,16,1],[62,9,62,10,1],[65,9,65,10,1],[66,13,76,16,1],[77,9,77,10,1],[80,9,80,10,1],[81,13,159,10,1],[160,9,160,10,1],[176,9,176,10,1],[177,13,177,68,1],[178,13,178,61,1],[179,13,179,68,1],[181,13,181,94,1],[183,13,183,54,1],[184,13,184,63,1],[186,13,186,27,1],[188,13,188,50,1],[189,13,189,90,1],[190,13,190,47,1],[191,9,191,10,1],[207,9,207,10,1],[208,13,208,68,1],[209,13,209,61,1],[210,13,210,68,1],[212,13,212,94,1],[214,13,214,54,1],[215,13,215,63,1],[217,13,217,27,1],[219,13,219,50,1],[220,13,220,90,1],[221,13,221,47,1],[222,9,222,10,1],[230,9,230,10,1],[231,13,231,68,1],[232,13,232,61,1],[233,13,233,68,1],[235,13,235,94,1],[237,13,237,54,1],[238,13,238,63,1],[240,13,240,27,1],[242,13,242,50,1],[243,13,243,90,1],[244,13,244,47,1],[245,9,245,10,1],[259,9,259,10,1],[260,13,260,68,1],[261,13,261,61,1],[262,13,262,68,1],[264,13,264,94,1],[266,13,266,54,1],[267,13,267,63,1],[269,13,269,27,1],[271,13,271,50,1],[272,13,272,90,1],[273,13,273,47,1],[274,9,274,10,1],[278,9,278,10,1],[279,13,279,68,1],[280,13,280,61,1],[281,13,281,68,1],[283,13,283,94,1],[285,13,285,54,1],[286,13,286,63,1],[288,13,288,27,1],[291,13,291,100,1],[292,13,292,101,1],[293,13,293,102,1],[294,13,294,101,1],[295,13,295,102,1],[296,13,296,101,1],[297,13,297,100,1],[298,13,298,100,1],[299,13,299,101,1],[300,13,300,102,1],[301,13,301,100,1],[303,13,303,104,1],[304,13,304,31,1],[304,32,304,122,0],[306,13,306,68,1],[307,13,307,52,1],[309,13,309,62,1],[310,13,310,49,1],[312,13,312,64,1],[313,13,313,66,1],[314,13,314,75,1],[315,13,315,66,1],[316,13,316,75,1],[317,13,317,71,1],[318,13,318,64,1],[321,13,321,113,1],[322,13,322,117,1],[323,13,323,127,1],[324,13,324,117,1],[325,13,325,127,1],[326,13,326,121,1],[327,13,327,118,1],[329,13,329,145,1],[330,9,330,10,1],[333,9,333,10,1],[334,13,334,51,1],[335,13,335,48,1],[336,13,336,52,1],[337,9,337,10,1],[341,9,341,10,1],[342,13,342,68,1],[343,13,343,65,1],[344,13,344,72,1],[346,13,346,112,1],[348,13,348,54,1],[349,13,349,63,1],[351,13,351,27,1],[353,13,353,89,1],[354,13,354,107,1],[356,13,356,71,1],[358,13,358,107,1],[359,13,359,107,1],[361,13,361,72,1],[362,13,362,72,1],[364,13,364,107,1],[365,13,365,107,1],[366,9,366,10,1],[370,9,370,10,1],[371,13,371,68,1],[372,13,372,115,1],[374,13,374,54,1],[375,13,375,63,1],[377,13,377,27,1],[379,13,379,71,1],[380,13,380,69,1],[382,13,382,84,1],[384,13,384,48,1],[385,13,385,80,1],[386,13,386,80,1],[387,9,387,10,1]]);
    </script>
  </body>
</html>