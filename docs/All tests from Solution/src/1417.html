<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Tom Pipe\Documents\Hexadigital\Code\Umbraco\Umbraco-CMS\src\Umbraco.Core\LambdaExpressionCacheKey.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using System.Collections.Generic;
using System.Linq;
using System.Linq.Expressions;

namespace Umbraco.Core
{
	/// &lt;summary&gt;
	/// Represents a simple &lt;see cref=&quot;LambdaExpression&quot;/&gt; in a form which is suitable for using as a dictionary key
	/// by exposing the return type, argument types and expression string form in a single concatenated string.
	/// &lt;/summary&gt;
	internal struct LambdaExpressionCacheKey
	{
		public LambdaExpressionCacheKey(string returnType, string expression, params string[] argTypes)
		{
			ReturnType = returnType;
			ExpressionAsString = expression;
			ArgTypes = new HashSet&lt;string&gt;(argTypes);
			_toString = null;
		}

		public LambdaExpressionCacheKey(LambdaExpression obj)
		{
			ReturnType = obj.ReturnType.FullName;
			ExpressionAsString = obj.ToString();
			ArgTypes = new HashSet&lt;string&gt;(obj.Parameters.Select(x =&gt; x.Type.FullName));
			_toString = null;
		}

		/// &lt;summary&gt;
		/// The argument type names of the &lt;see cref=&quot;LambdaExpression&quot;/&gt;
		/// &lt;/summary&gt;
		public readonly HashSet&lt;string&gt; ArgTypes;

		/// &lt;summary&gt;
		/// The return type of the &lt;see cref=&quot;LambdaExpression&quot;/&gt;
		/// &lt;/summary&gt;
		public readonly string ReturnType;

		/// &lt;summary&gt;
		/// The original string representation of the &lt;see cref=&quot;LambdaExpression&quot;/&gt;
		/// &lt;/summary&gt;
		public readonly string ExpressionAsString;

		private string _toString;

		/// &lt;summary&gt;
		/// Returns a &lt;see cref=&quot;System.String&quot;/&gt; that represents this instance.
		/// &lt;/summary&gt;
		/// &lt;returns&gt;
		/// A &lt;see cref=&quot;System.String&quot;/&gt; that represents this instance.
		/// &lt;/returns&gt;
		public override string ToString()
		{
			return _toString ?? (_toString = String.Concat(String.Join(&quot;|&quot;, ArgTypes), &quot;,&quot;, ReturnType, &quot;,&quot;, ExpressionAsString));
		}

		/// &lt;summary&gt;
		/// Determines whether the specified &lt;see cref=&quot;System.Object&quot;/&gt; is equal to this instance.
		/// &lt;/summary&gt;
		/// &lt;param name=&quot;obj&quot;&gt;The &lt;see cref=&quot;System.Object&quot;/&gt; to compare with this instance.&lt;/param&gt;
		/// &lt;returns&gt;
		/// 	&lt;c&gt;true&lt;/c&gt; if the specified &lt;see cref=&quot;System.Object&quot;/&gt; is equal to this instance; otherwise, &lt;c&gt;false&lt;/c&gt;.
		/// &lt;/returns&gt;
		public override bool Equals(object obj)
		{
			if (ReferenceEquals(obj, null)) return false;
			var casted = (LambdaExpressionCacheKey)obj;
			return casted.ToString() == ToString();
		}

		/// &lt;summary&gt;
		/// Returns a hash code for this instance.
		/// &lt;/summary&gt;
		/// &lt;returns&gt;
		/// A hash code for this instance, suitable for use in hashing algorithms and data structures like a hash table. 
		/// &lt;/returns&gt;
		public override int GetHashCode()
		{
			return ToString().GetHashCode();
		}
	}
}
    </pre>
    <script type="text/javascript">
      highlightRanges([[15,3,15,4,0],[16,4,16,28,0],[17,4,17,36,0],[18,4,18,45,0],[19,4,19,21,0],[20,3,20,4,0],[23,3,23,4,1],[24,4,24,41,1],[25,4,25,40,1],[26,4,26,62,1],[26,62,26,77,1],[26,77,26,80,1],[26,4,26,80,1],[27,4,27,21,1],[28,3,28,4,1],[54,3,54,4,1],[55,4,55,122,1],[56,3,56,4,1],[66,3,66,4,1],[67,4,67,35,1],[67,36,67,49,0],[68,4,68,47,1],[69,4,69,43,1],[70,3,70,4,1],[79,3,79,4,1],[80,4,80,36,1],[81,3,81,4,1]]);
    </script>
  </body>
</html>