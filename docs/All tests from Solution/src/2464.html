<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Tom Pipe\Documents\Hexadigital\Code\Umbraco\Umbraco-CMS\src\umbraco.cms\businesslogic\datatype\PreValues.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using System.Collections;
using System.Collections.Generic;
using System.Data;
using System.Text;
using System.Runtime.CompilerServices;

using umbraco.DataLayer;
using umbraco.BusinessLogic;

namespace umbraco.cms.businesslogic.datatype
{
    /// &lt;summary&gt;
    /// Any data type in umbraco can have PreValues, which is a simple Key/Value collection of items attached to a specific instance of the data type.
    /// &lt;/summary&gt;
    [Obsolete(&quot;This class is no longer used and will be removed from the codebase in the future.&quot;)]
    public class PreValues
    {
        /// &lt;summary&gt;
        /// Gets the pre values collection.
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;DataTypeId&quot;&gt;The data type id.&lt;/param&gt;
        /// &lt;returns&gt;&lt;/returns&gt;
        public static SortedList GetPreValues(int DataTypeId)
        {
            var retval = new SortedList();
            using (var sqlHelper = Application.SqlHelper)
            using (var dr = sqlHelper.ExecuteReader(
                &quot;select id, sortorder, [value], alias from cmsDataTypePreValues where DataTypeNodeId = @dataTypeId order by sortorder&quot;,
                sqlHelper.CreateParameter(&quot;@dataTypeId&quot;, DataTypeId)))
            {
                var counter = 0;
                while (dr.Read())
                {
                    retval.Add(counter, new PreValue(dr.GetInt(&quot;id&quot;), dr.GetInt(&quot;sortorder&quot;), dr.GetString(&quot;value&quot;), dr.GetString(&quot;alias&quot;)));

                    counter++;
                }
                return retval;
            }
        }

        /// &lt;summary&gt;
        /// Removes all prevalues with the specified data type definition id
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;dataTypeDefId&quot;&gt;&lt;/param&gt;
        public static void DeleteByDataTypeDefinition(int dataTypeDefId)
        {
            using (var sqlHelper = Application.SqlHelper)
                sqlHelper.ExecuteNonQuery(&quot;delete from cmsDataTypePreValues where datatypenodeid = @dtdefid&quot;,
                sqlHelper.CreateParameter(&quot;@dtdefid&quot;, dataTypeDefId));
        }

        /// &lt;summary&gt;
        /// Returns the number of prevalues for data type definition
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;dataTypeDefId&quot;&gt;&lt;/param&gt;
        /// &lt;returns&gt;&lt;/returns&gt;
        public static int CountOfPreValues(int dataTypeDefId)
        {
            using (var sqlHelper = Application.SqlHelper)
                return sqlHelper.ExecuteScalar&lt;int&gt;(
                    &quot;select count(id) from cmsDataTypePreValues where dataTypeNodeId = @dataTypeId&quot;,
                    sqlHelper.CreateParameter(&quot;@dataTypeId&quot;, dataTypeDefId));
        }
    }
}
    </pre>
    <script type="text/javascript">
      highlightRanges([[25,9,25,10,0],[26,13,26,43,0],[27,20,27,57,0],[28,20,30,70,0],[31,13,31,14,0],[32,17,32,33,0],[33,17,33,34,0],[34,17,34,18,0],[35,21,35,142,0],[37,21,37,31,0],[38,17,38,18,0],[39,17,39,31,0],[41,9,41,10,0],[48,9,48,10,0],[49,20,49,57,0],[50,17,51,71,0],[52,9,52,10,0],[60,9,60,10,0],[61,20,61,57,0],[62,17,64,78,0],[65,9,65,10,0]]);
    </script>
  </body>
</html>