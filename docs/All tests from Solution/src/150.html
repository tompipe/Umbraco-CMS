<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Tom Pipe\Documents\Hexadigital\Code\Umbraco\Umbraco-CMS\src\Umbraco.Tests\FrontEnd\UmbracoHelperTests.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System.Collections.Generic;
using NUnit.Framework;
using Umbraco.Core;
using Umbraco.Web;

namespace Umbraco.Tests.FrontEnd
{
    [TestFixture]
    public class UmbracoHelperTests
    {
       
        [Test]
        public void Truncate_Simple()
        {
            var text = &quot;Hello world, this is some text &lt;a href=&#39;blah&#39;&gt;with a link&lt;/a&gt;&quot;;

            var helper = new UmbracoHelper();

            var result = helper.Truncate(text, 25).ToString();

            Assert.AreEqual(&quot;Hello world, this is some&amp;hellip;&quot;, result);
        }

        [Test]
        public void Truncate_Inside_Word()
        {
            var text = &quot;Hello world, this is some text &lt;a href=&#39;blah&#39;&gt;with a link&lt;/a&gt;&quot;;

            var helper = new UmbracoHelper();

            var result = helper.Truncate(text, 24).ToString();

            Assert.AreEqual(&quot;Hello world, this is som&amp;hellip;&quot;, result);
        }

        [Test]
        public void Truncate_With_Tag()
        {
            var text = &quot;Hello world, this is some text &lt;a href=&#39;blah&#39;&gt;with a link&lt;/a&gt;&quot;;

            var helper = new UmbracoHelper();

            var result = helper.Truncate(text, 35).ToString();

            Assert.AreEqual(&quot;Hello world, this is some text &lt;a href=&#39;blah&#39;&gt;with&amp;hellip;&lt;/a&gt;&quot;, result);
        }

        [Test]
        public void Create_Encrypted_RouteString_From_Anonymous_Object()
        {
            var additionalRouteValues = new
            {
                key1 = &quot;value1&quot;,
                key2 = &quot;value2&quot;,
                Key3 = &quot;Value3&quot;,
                keY4 = &quot;valuE4&quot;
        };
            var encryptedRouteString = UmbracoHelper.CreateEncryptedRouteString(&quot;FormController&quot;, &quot;FormAction&quot;, &quot;&quot;, additionalRouteValues);
            var result = encryptedRouteString.DecryptWithMachineKey();
            var expectedResult = &quot;c=FormController&amp;a=FormAction&amp;ar=&amp;key1=value1&amp;key2=value2&amp;Key3=Value3&amp;keY4=valuE4&quot;;

            Assert.AreEqual(expectedResult, result);
        }

        [Test]
        public void Create_Encrypted_RouteString_From_Dictionary()
        {
            var additionalRouteValues = new Dictionary&lt;string, object&gt;()
            {
                {&quot;key1&quot;, &quot;value1&quot;},
                {&quot;key2&quot;, &quot;value2&quot;},
                {&quot;Key3&quot;, &quot;Value3&quot;},
                {&quot;keY4&quot;, &quot;valuE4&quot;}
            };
            var encryptedRouteString = UmbracoHelper.CreateEncryptedRouteString(&quot;FormController&quot;, &quot;FormAction&quot;, &quot;&quot;, additionalRouteValues);
            var result = encryptedRouteString.DecryptWithMachineKey();
            var expectedResult = &quot;c=FormController&amp;a=FormAction&amp;ar=&amp;key1=value1&amp;key2=value2&amp;Key3=Value3&amp;keY4=valuE4&quot;;
            
            Assert.AreEqual(expectedResult, result);
        }
    }
}

    </pre>
    <script type="text/javascript">
      highlightRanges([[14,9,14,10,1],[15,13,15,88,1],[17,13,17,46,1],[19,13,19,63,1],[21,13,21,74,1],[22,9,22,10,1],[26,9,26,10,1],[27,13,27,88,1],[29,13,29,46,1],[31,13,31,63,1],[33,13,33,73,1],[34,9,34,10,1],[38,9,38,10,1],[39,13,39,88,1],[41,13,41,46,1],[43,13,43,63,1],[45,13,45,103,1],[46,9,46,10,1],[50,9,50,10,1],[51,13,57,11,1],[58,13,58,140,1],[59,13,59,71,1],[60,13,60,118,1],[62,13,62,53,1],[63,9,63,10,1],[67,9,67,10,1],[68,13,74,15,1],[75,13,75,140,1],[76,13,76,71,1],[77,13,77,118,1],[79,13,79,53,1],[80,9,80,10,1]]);
    </script>
  </body>
</html>