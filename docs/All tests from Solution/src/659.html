<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Tom Pipe\Documents\Hexadigital\Code\Umbraco\Umbraco-CMS\src\Umbraco.Web\umbraco.presentation\umbraco\Trees\UserTypes.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using System.Data;
using System.Configuration;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Web.UI.HtmlControls;
using umbraco.BusinessLogic;
using System.Collections.Generic;
using umbraco.businesslogic;
using Umbraco.Core;

namespace umbraco.cms.presentation.Trees
{
    [Tree(Constants.Applications.Users, &quot;userTypes&quot;, &quot;User Types&quot;, sortOrder: 1)]
    public class UserTypes : BaseTree
    {

        public UserTypes(string application) : base(application) { }

        public override void RenderJS(ref System.Text.StringBuilder Javascript)
        {
            Javascript.Append(
                @&quot;
function openUserTypes(id) {
	UmbClientMgr.contentFrame(&#39;users/EditUserType.aspx?id=&#39; + id);
}
&quot;);
        }

        public override void Render(ref XmlTree tree)
        {
            List&lt;UserType&gt; userTypes = UserType.GetAllUserTypes();
            foreach (UserType userType in userTypes)
            {
                if (userType.Id &gt; 1) //don&#39;t show the admin user type, they should always have full permissions
                {
                    XmlTreeNode node = XmlTreeNode.Create(this);
                    node.NodeID = userType.Id.ToString();
                    node.Action = string.Format(&quot;javascript:openUserTypes({0})&quot;, userType.Id.ToString());
                    node.Icon = &quot;icon-users&quot;;
                    node.Text = userType.Name;

                    OnBeforeNodeRender(ref tree, ref node, EventArgs.Empty);
                    if (node != null)
                    {
                        tree.Add(node);
                        OnAfterNodeRender(ref tree, ref node, EventArgs.Empty);
                    }
                }                
            }            
        }

        protected override void CreateRootNode(ref XmlTreeNode rootNode)
        {            
            rootNode.Text = ui.Text(&quot;user&quot;, &quot;userTypes&quot;);
        }
    }
}

    </pre>
    <script type="text/javascript">
      highlightRanges([[21,48,21,65,0],[21,66,21,67,0],[21,68,21,69,0],[24,9,24,10,0],[25,13,30,4,0],[31,9,31,10,0],[34,9,34,10,0],[35,13,35,67,0],[36,13,36,20,0],[36,22,36,39,0],[36,40,36,42,0],[36,43,36,52,0],[37,13,37,14,0],[38,17,38,37,0],[39,17,39,18,0],[40,21,40,65,0],[41,21,41,58,0],[42,21,42,106,0],[43,21,43,46,0],[44,21,44,47,0],[46,21,46,77,0],[47,21,47,38,0],[48,21,48,22,0],[49,25,49,40,0],[50,25,50,80,0],[51,21,51,22,0],[52,17,52,18,0],[53,13,53,14,0],[54,9,54,10,0],[57,9,57,10,0],[58,13,58,58,0],[59,9,59,10,0]]);
    </script>
  </body>
</html>