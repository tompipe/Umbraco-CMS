<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Tom Pipe\Documents\Hexadigital\Code\Umbraco\Umbraco-CMS\src\Umbraco.Tests\BootManagers\WebBootManagerTests.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System.Collections.Generic;
using System.Web.Mvc;
using NUnit.Framework;
using Umbraco.Core.Profiling;
using Umbraco.Web;
using Umbraco.Web.Mvc;

namespace Umbraco.Tests.BootManagers
{
	[TestFixture]
	public class WebBootManagerTests
	{
		[Test]
		public void WrapViewEngines_HasEngines_WrapsAll()
		{
			IList&lt;IViewEngine&gt; engines = new List&lt;IViewEngine&gt;
				{
					new RenderViewEngine(),
					new PluginViewEngine()
				};

			WebBootManager.WrapViewEngines(engines);

			Assert.That(engines.Count, Is.EqualTo(2));
			Assert.That(engines[0], Is.InstanceOf&lt;ProfilingViewEngine&gt;());
			Assert.That(engines[1], Is.InstanceOf&lt;ProfilingViewEngine&gt;());
		}

		[Test]
		public void WrapViewEngines_HasEngines_KeepsSortOrder()
		{
            IList&lt;IViewEngine&gt; engines = new List&lt;IViewEngine&gt;
				{
					new RenderViewEngine(),
					new PluginViewEngine()
				};

			WebBootManager.WrapViewEngines(engines);

			Assert.That(engines.Count, Is.EqualTo(2));
			Assert.That(((ProfilingViewEngine)engines[0]).Inner, Is.InstanceOf&lt;RenderViewEngine&gt;());
			Assert.That(((ProfilingViewEngine)engines[1]).Inner, Is.InstanceOf&lt;PluginViewEngine&gt;());
		}


		[Test]
		public void WrapViewEngines_HasProfiledEngine_AddsSameInstance()
		{
			var profiledEngine = new ProfilingViewEngine(new PluginViewEngine());
			IList&lt;IViewEngine&gt; engines = new List&lt;IViewEngine&gt;
				{
					profiledEngine
				};

			WebBootManager.WrapViewEngines(engines);

			Assert.That(engines[0], Is.SameAs(profiledEngine));
		}

		[Test]
		public void WrapViewEngines_CollectionIsNull_DoesNotThrow()
		{
			IList&lt;IViewEngine&gt; engines = null;
			Assert.DoesNotThrow(() =&gt; WebBootManager.WrapViewEngines(engines));
			Assert.That(engines, Is.Null);
		}

	}
}
    </pre>
    <script type="text/javascript">
      highlightRanges([[15,3,15,4,1],[16,4,20,7,1],[22,4,22,44,1],[24,4,24,46,1],[25,4,25,66,1],[26,4,26,66,1],[27,3,27,4,1],[31,3,31,4,1],[32,13,36,7,1],[38,4,38,44,1],[40,4,40,46,1],[41,4,41,92,1],[42,4,42,92,1],[43,3,43,4,1],[48,3,48,4,1],[49,4,49,73,1],[50,4,53,7,1],[55,4,55,44,1],[57,4,57,55,1],[58,3,58,4,1],[62,3,62,4,1],[63,4,63,38,1],[64,4,64,30,1],[64,30,64,69,1],[64,69,64,71,1],[64,4,64,71,1],[65,4,65,34,1],[66,3,66,4,1]]);
    </script>
  </body>
</html>