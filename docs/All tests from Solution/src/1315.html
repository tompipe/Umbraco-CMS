<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Tom Pipe\Documents\Hexadigital\Code\Umbraco\Umbraco-CMS\src\Umbraco.Web\Editors\EditorModelEventManager.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using System.Web.Http.Filters;
using Umbraco.Core.Events;
using Umbraco.Web.Models.ContentEditing;

namespace Umbraco.Web.Editors
{
    public class EditorModelEventArgs : EventArgs
    {
        public EditorModelEventArgs(object model, UmbracoContext umbracoContext)
        {
            Model = model;
            UmbracoContext = umbracoContext;
        }

        public object Model { get; private set; }
        public UmbracoContext UmbracoContext { get; private set; }
    }

    public sealed class EditorModelEventArgs&lt;T&gt; : EditorModelEventArgs
    {
        public EditorModelEventArgs(EditorModelEventArgs baseArgs)
            : base(baseArgs.Model, baseArgs.UmbracoContext)
        {
            Model = (T)baseArgs.Model;
        }

        public EditorModelEventArgs(T model, UmbracoContext umbracoContext)
            : base(model, umbracoContext)
        {
            Model = model;
        }

        public new T Model { get; private set; }
    }

    /// &lt;summary&gt;
    /// Used to emit events for editor models in the back office
    /// &lt;/summary&gt;
    public sealed class EditorModelEventManager
    {
        public static event TypedEventHandler&lt;HttpActionExecutedContext, EditorModelEventArgs&lt;ContentItemDisplay&gt;&gt; SendingContentModel;
        public static event TypedEventHandler&lt;HttpActionExecutedContext, EditorModelEventArgs&lt;MediaItemDisplay&gt;&gt; SendingMediaModel;
        public static event TypedEventHandler&lt;HttpActionExecutedContext, EditorModelEventArgs&lt;MemberDisplay&gt;&gt; SendingMemberModel;

        private static void OnSendingContentModel(HttpActionExecutedContext sender, EditorModelEventArgs&lt;ContentItemDisplay&gt; e)
        {
            var handler = SendingContentModel;
            if (handler != null) handler(sender, e);
        }

        private static void OnSendingMediaModel(HttpActionExecutedContext sender, EditorModelEventArgs&lt;MediaItemDisplay&gt; e)
        {
            var handler = SendingMediaModel;
            if (handler != null) handler(sender, e);
        }

        private static void OnSendingMemberModel(HttpActionExecutedContext sender, EditorModelEventArgs&lt;MemberDisplay&gt; e)
        {
            var handler = SendingMemberModel;
            if (handler != null) handler(sender, e);
        }

        /// &lt;summary&gt;
        /// Based on the type, emit&#39;s a specific event
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;sender&quot;&gt;&lt;/param&gt;
        /// &lt;param name=&quot;e&quot;&gt;&lt;/param&gt;
        internal static void EmitEvent(HttpActionExecutedContext sender, EditorModelEventArgs e)
        {
            var contentItemDisplay = e.Model as ContentItemDisplay;
            if (contentItemDisplay != null)
            {
                OnSendingContentModel(sender, new EditorModelEventArgs&lt;ContentItemDisplay&gt;(e));
            }

            var mediaItemDisplay = e.Model as MediaItemDisplay;
            if (mediaItemDisplay != null)
            {
                OnSendingMediaModel(sender, new EditorModelEventArgs&lt;MediaItemDisplay&gt;(e));
            }

            var memberItemDisplay = e.Model as MemberDisplay;
            if (memberItemDisplay != null)
            {
                OnSendingMemberModel(sender, new EditorModelEventArgs&lt;MemberDisplay&gt;(e));
            }
        }
        
    }
}
    </pre>
    <script type="text/javascript">
      highlightRanges([[10,9,10,81,0],[11,9,11,10,0],[12,13,12,27,0],[13,13,13,45,0],[14,9,14,10,0],[16,31,16,35,0],[16,36,16,48,0],[17,48,17,52,0],[17,53,17,65,0],[23,15,23,60,0],[24,9,24,10,0],[25,13,25,39,0],[26,9,26,10,0],[29,15,29,42,0],[30,9,30,10,0],[31,13,31,27,0],[32,9,32,10,0],[34,30,34,34,0],[34,35,34,47,0],[47,9,47,10,0],[48,13,48,47,0],[49,13,49,33,0],[49,34,49,53,0],[50,9,50,10,0],[53,9,53,10,0],[54,13,54,45,0],[55,13,55,33,0],[55,34,55,53,0],[56,9,56,10,0],[59,9,59,10,0],[60,13,60,46,0],[61,13,61,33,0],[61,34,61,53,0],[62,9,62,10,0],[70,9,70,10,0],[71,13,71,68,0],[72,13,72,44,0],[73,13,73,14,0],[74,17,74,96,0],[75,13,75,14,0],[77,13,77,64,0],[78,13,78,42,0],[79,13,79,14,0],[80,17,80,92,0],[81,13,81,14,0],[83,13,83,62,0],[84,13,84,43,0],[85,13,85,14,0],[86,17,86,90,0],[87,13,87,14,0],[88,9,88,10,0]]);
    </script>
  </body>
</html>