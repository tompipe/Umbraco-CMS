<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Tom Pipe\Documents\Hexadigital\Code\Umbraco\Umbraco-CMS\src\Umbraco.Web\Security\LegacyDefaultAppMapping.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using System.Collections.Concurrent;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace Umbraco.Web.Security
{
    /// &lt;summary&gt;
    /// This is used specifically to assign a default &#39;app&#39; to a particular section in order to validate the 
    /// currently logged in user&#39;s allowed applications
    /// &lt;/summary&gt;
    /// &lt;remarks&gt;
    /// This relates to these issues:
    /// http://issues.umbraco.org/issue/U4-2021
    /// http://issues.umbraco.org/issue/U4-529
    /// 
    /// In order to fix these issues we need to pass in an &#39;app&#39; parameter but since we don&#39;t want to break compatibility 
    /// we will create this mapping to map a &#39;default application&#39; to a section action (like creating or deleting)
    /// &lt;/remarks&gt;
    public static class LegacyDefaultAppMapping
    {
        /// &lt;summary&gt;
        /// Constructor that assigns all initial known mappings
        /// &lt;/summary&gt;
        static LegacyDefaultAppMapping()
        {            
        }

        private static readonly ConcurrentDictionary&lt;string, string&gt; NodeTypeAliasMapping = new ConcurrentDictionary&lt;string, string&gt;();

        /// &lt;summary&gt;
        /// Adds the default app mapping to the node type
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;nodeType&quot;&gt;The nodeType is the same nodeType found in the UI.xml&lt;/param&gt;
        /// &lt;param name=&quot;defaultApp&quot;&gt;The default app associated with this nodeType if the &#39;app&#39; parameter was not detected&lt;/param&gt;
        public static void AddNodeTypeMappingForCreateDialog(string nodeType, string defaultApp)
        {
            NodeTypeAliasMapping.AddOrUpdate(nodeType, s =&gt; defaultApp, (s, s1) =&gt; defaultApp);
        }

        internal static string GetDefaultAppForCreateDialog(string nodeTypeAlias)
        {
            string app;
            return NodeTypeAliasMapping.TryGetValue(nodeTypeAlias, out app) ? app : null;
        }

    }
}

    </pre>
    <script type="text/javascript">
      highlightRanges([[27,9,27,10,0],[28,9,28,10,0],[30,9,30,136,0],[38,9,38,10,0],[39,13,39,61,0],[39,61,39,71,0],[39,71,39,84,0],[39,84,39,94,0],[39,94,39,96,0],[39,13,39,96,0],[40,9,40,10,0],[43,9,43,10,0],[45,13,45,90,0],[46,9,46,10,0]]);
    </script>
  </body>
</html>