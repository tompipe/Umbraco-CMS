<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Tom Pipe\Documents\Hexadigital\Code\Umbraco\Umbraco-CMS\src\Umbraco.Web\Dynamics\Grouping.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using System.Collections.Generic;
using System.Linq;
using System.Collections;
using System.Dynamic;
using Umbraco.Core.Dynamics;
using Umbraco.Web.Models;

namespace Umbraco.Web.Dynamics
{
    internal class Grouping&lt;K, T&gt; : IGrouping&lt;K, T&gt; where T : DynamicObject
    {
        public K Key { get; set; }
        public IEnumerable&lt;T&gt; Elements { get; set; }

        public IEnumerator&lt;T&gt; GetEnumerator()
        {
            var temp = new DynamicPublishedContentList(Elements.Cast&lt;DynamicPublishedContent&gt;());
            return (IEnumerator&lt;T&gt;)temp.GetEnumerator();
        }
        IEnumerator IEnumerable.GetEnumerator()
        {
            return (IEnumerator)GetEnumerator();
        }

        public DynamicPublishedContentList OrderBy(string ordering)
        {
            bool descending = false;
            if (ordering.IndexOf(&quot; descending&quot;, StringComparison.CurrentCultureIgnoreCase) &gt;= 0)
            {
                ordering = ordering.Replace(&quot; descending&quot;, &quot;&quot;);
                descending = true;
            }
            if (ordering.IndexOf(&quot; desc&quot;, StringComparison.CurrentCultureIgnoreCase) &gt;= 0)
            {
                ordering = ordering.Replace(&quot; desc&quot;, &quot;&quot;);
                descending = true;
            }

            if (!descending)
            {
                return new DynamicPublishedContentList(Elements.OrderBy(item =&gt;
                {
                    object key = null;
                    (item as DynamicObject).TryGetMember(new DynamicQueryableGetMemberBinder(ordering, false), out key);
                    return key;
                }).Cast&lt;DynamicPublishedContent&gt;());
            }
            else
            {
                return new DynamicPublishedContentList(Elements.OrderByDescending(item =&gt;
                {
                    object key = null;
                    (item as DynamicObject).TryGetMember(new DynamicQueryableGetMemberBinder(ordering, false), out key);
                    return key;
                }).Cast&lt;DynamicPublishedContent&gt;());
            }
        }
    }

}

    </pre>
    <script type="text/javascript">
      highlightRanges([[13,24,13,28,1],[13,29,13,33,1],[14,42,14,46,1],[14,47,14,51,1],[17,9,17,10,1],[18,13,18,98,1],[19,13,19,57,1],[20,9,20,10,1],[22,9,22,10,0],[23,13,23,49,0],[24,9,24,10,0],[27,9,27,10,0],[28,13,28,37,0],[29,13,29,97,0],[30,13,30,14,0],[31,17,31,64,0],[32,17,32,35,0],[33,13,33,14,0],[34,13,34,91,0],[35,13,35,14,0],[36,17,36,58,0],[37,17,37,35,0],[38,13,38,14,0],[40,13,40,29,0],[41,13,41,14,0],[42,17,43,17,0],[43,17,43,18,0],[43,18,44,21,0],[44,21,44,39,0],[44,39,45,21,0],[45,21,45,121,0],[45,121,46,21,0],[46,21,46,32,0],[46,32,47,17,0],[47,17,47,18,0],[47,18,47,53,0],[42,17,47,53,0],[50,13,50,14,0],[51,17,52,17,0],[52,17,52,18,0],[52,18,53,21,0],[53,21,53,39,0],[53,39,54,21,0],[54,21,54,121,0],[54,121,55,21,0],[55,21,55,32,0],[55,32,56,17,0],[56,17,56,18,0],[56,18,56,53,0],[51,17,56,53,0],[58,9,58,10,0]]);
    </script>
  </body>
</html>