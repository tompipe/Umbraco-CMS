<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Tom Pipe\Documents\Hexadigital\Code\Umbraco\Umbraco-CMS\src\Umbraco.Tests\Models\ContentTests.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.Globalization;
using System.IO;
using System.Linq;
using System.Web;
using Moq;
using NUnit.Framework;
using Umbraco.Core;
using Umbraco.Core.Cache;
using Umbraco.Core.Exceptions;
using Umbraco.Core.Models;
using Umbraco.Core.Models.EntityBase;

using Umbraco.Core.Serialization;
using Umbraco.Tests.TestHelpers;
using Umbraco.Tests.TestHelpers.Entities;

namespace Umbraco.Tests.Models
{
    [TestFixture]
    public class ContentTests : BaseUmbracoConfigurationTest
    {
        [SetUp]
        public void Init()
        {
            var config = SettingsForTests.GetDefault();
            SettingsForTests.ConfigureSettings(config);
        }

        [TearDown]
        public void Dispose()
        {
            
        }

        [TestCase(&quot;-1,-20,12,34,56&quot;, false)]
        [TestCase(&quot;-1,-21,12,34,56&quot;, true)]
        [TestCase(&quot;-1,12,34,56&quot;, false)]
        public void Is_Media_In_Recycle_Bin(string path, bool isInBin)
        {
            var mediaType = MockedContentTypes.CreateImageMediaType();
            var media = MockedMedia.CreateMediaFile(mediaType, -1);
            media.Path = path;
            media.Id = 34;

            Assert.AreEqual(isInBin, media.IsInRecycleBin());
        }

        [TestCase(&quot;-1,-20,12,34,56&quot;, true)]
        [TestCase(&quot;-1,-21,12,34,56&quot;, false)]
        [TestCase(&quot;-1,12,34,56&quot;, false)]
        public void Is_Content_In_Recycle_Bin(string path, bool isInBin)
        {
            var contentType = MockedContentTypes.CreateSimpleContentType();
            var content = MockedContent.CreateSimpleContent(contentType);
            content.Path = path;
            content.Id = 34;

            Assert.AreEqual(isInBin, content.IsInRecycleBin());
        }

        [Test]
        public void Get_Non_Grouped_Properties()
        {
            var contentType = MockedContentTypes.CreateSimpleContentType();
            //add non-grouped properties
            contentType.AddPropertyType(new PropertyType(&quot;test&quot;, DataTypeDatabaseType.Ntext, &quot;nonGrouped1&quot;) { Name = &quot;Non Grouped 1&quot;, Description = &quot;&quot;, Mandatory = false, SortOrder = 1, DataTypeDefinitionId = -88 });
            contentType.AddPropertyType(new PropertyType(&quot;test&quot;, DataTypeDatabaseType.Ntext, &quot;nonGrouped2&quot;) { Name = &quot;Non Grouped 2&quot;, Description = &quot;&quot;, Mandatory = false, SortOrder = 1, DataTypeDefinitionId = -88 });
            
            //ensure that nothing is marked as dirty
            contentType.ResetDirtyProperties(false);


            var content = MockedContent.CreateSimpleContent(contentType);
            //need to id the p

            var nonGrouped = content.GetNonGroupedProperties();

            Assert.AreEqual(2, nonGrouped.Count());
            Assert.AreEqual(5, content.Properties.Count());
        }

        [Test]
        public void All_Dirty_Properties_Get_Reset()
        {
            var contentType = MockedContentTypes.CreateTextpageContentType();
            var content = MockedContent.CreateTextpageContent(contentType, &quot;Textpage&quot;, -1);

            content.ResetDirtyProperties(false);

            Assert.IsFalse(content.IsDirty());
            foreach (var prop in content.Properties)
            {
                Assert.IsFalse(prop.IsDirty());
            }
        }

        [Test]
        public void Can_Verify_Mocked_Content()
        {
            // Arrange
            var contentType = MockedContentTypes.CreateTextpageContentType();
            var content = MockedContent.CreateTextpageContent(contentType, &quot;Textpage&quot;, -1);

            // Act

            // Assert
            Assert.That(content, Is.Not.Null);
        }

        [Test]
        public void Can_Change_Property_Value()
        {
            // Arrange
            var contentType = MockedContentTypes.CreateTextpageContentType();
            var content = MockedContent.CreateTextpageContent(contentType, &quot;Textpage&quot;, -1);

            // Act
            content.Properties[&quot;title&quot;].Value = &quot;This is the new title&quot;;

            // Assert
            Assert.That(content.Properties.Any(), Is.True);
            Assert.That(content.Properties[&quot;title&quot;], Is.Not.Null);
            Assert.That(content.Properties[&quot;title&quot;].Value, Is.EqualTo(&quot;This is the new title&quot;));
        }

        [Test]
        public void Can_Set_Property_Value_As_String()
        {
            // Arrange
            var contentType = MockedContentTypes.CreateTextpageContentType();
            var content = MockedContent.CreateTextpageContent(contentType, &quot;Textpage&quot;, -1);

            // Act
            content.SetValue(&quot;title&quot;, &quot;This is the new title&quot;);

            // Assert
            Assert.That(content.Properties.Any(), Is.True);
            Assert.That(content.Properties[&quot;title&quot;], Is.Not.Null);
            Assert.That(content.Properties[&quot;title&quot;].Value, Is.EqualTo(&quot;This is the new title&quot;));
        }

        [Test]
        public void Can_Set_Property_Value_As_HttpPostedFileBase()
        {
            // Arrange
            var contentType = MockedContentTypes.CreateTextpageContentType();
            var content = MockedContent.CreateTextpageContent(contentType, &quot;Textpage&quot;, -1);

            var stream = new MemoryStream(System.Text.Encoding.Default.GetBytes(&quot;TestContent&quot;));
            var postedFileMock = new Mock&lt;HttpPostedFileBase&gt;();
            postedFileMock.Setup(x =&gt; x.ContentLength).Returns(Convert.ToInt32(stream.Length));
            postedFileMock.Setup(x =&gt; x.ContentType).Returns(&quot;text/plain&quot;);
            postedFileMock.Setup(x =&gt; x.FileName).Returns(&quot;sample.txt&quot;);
            postedFileMock.Setup(x =&gt; x.InputStream).Returns(stream);

            // Assert
            content.SetValue(&quot;title&quot;, postedFileMock.Object);

            // Assert
            Assert.That(content.Properties.Any(), Is.True);
            Assert.That(content.Properties[&quot;title&quot;], Is.Not.Null);
            Assert.That(content.Properties[&quot;title&quot;].Value, Is.StringContaining(&quot;sample.txt&quot;));
        }


        [Test]
        public void Can_Clone_Content_With_Reset_Identity()
        {
            // Arrange
            var contentType = MockedContentTypes.CreateTextpageContentType();
            var content = MockedContent.CreateTextpageContent(contentType, &quot;Textpage&quot;, -1);
            content.Id = 10;
            content.Key = new Guid(&quot;29181B97-CB8F-403F-86DE-5FEB497F4800&quot;);

            // Act
            var clone = content.Clone();

            // Assert
            Assert.AreNotSame(clone, content);
            Assert.AreNotSame(clone.Id, content.Id);
            Assert.AreNotSame(clone.Version, content.Version);
            Assert.That(clone.HasIdentity, Is.False);

            Assert.AreNotSame(content.Properties, clone.Properties);
        }

        [Ignore]
        [Test]
        public void Can_Deep_Clone_Perf_Test()
        {
            // Arrange
            var contentType = MockedContentTypes.CreateTextpageContentType();
            contentType.Id = 99;
            var content = MockedContent.CreateTextpageContent(contentType, &quot;Textpage&quot;, -1);
            var i = 200;
            foreach (var property in content.Properties)
            {
                property.Id = ++i;
            }
            content.Id = 10;
            content.CreateDate = DateTime.Now;
            content.CreatorId = 22;
            content.ExpireDate = DateTime.Now;
            content.Key = Guid.NewGuid();
            content.Language = &quot;en&quot;;
            content.Level = 3;
            content.Path = &quot;-1,4,10&quot;;
            content.ReleaseDate = DateTime.Now;
            content.ChangePublishedState(PublishedState.Published);
            content.SortOrder = 5;
            content.Template = new Template(&quot;-1,2,3,4&quot;, &quot;Test Template&quot;, &quot;testTemplate&quot;)
            {
                Id = 88
            };
            content.Trashed = false;
            content.UpdateDate = DateTime.Now;
            content.Version = Guid.NewGuid();
            content.WriterId = 23;

            ((IUmbracoEntity)content).AdditionalData.Add(&quot;test1&quot;, 123);
            ((IUmbracoEntity)content).AdditionalData.Add(&quot;test2&quot;, &quot;hello&quot;);

            var runtimeCache = new ObjectCacheRuntimeCacheProvider();
            runtimeCache.InsertCacheItem(content.Id.ToString(CultureInfo.InvariantCulture), () =&gt; content);

            using (DisposableTimer.DebugDuration&lt;ContentTests&gt;(&quot;STARTING PERF TEST WITH RUNTIME CACHE&quot;))
            {
                for (int j = 0; j &lt; 1000; j++)
                {
                    var clone = runtimeCache.GetCacheItem(content.Id.ToString(CultureInfo.InvariantCulture));
                }
            }

            using (DisposableTimer.DebugDuration&lt;ContentTests&gt;(&quot;STARTING PERF TEST WITHOUT RUNTIME CACHE&quot;))
            {
                for (int j = 0; j &lt; 1000; j++)
                {
                    var clone = (ContentType)contentType.DeepClone();
                }
            }
        }

        [Test]
        public void Can_Deep_Clone()
        {
            // Arrange
            var contentType = MockedContentTypes.CreateTextpageContentType();
            contentType.Id = 99;
            var content = MockedContent.CreateTextpageContent(contentType, &quot;Textpage&quot;, -1);
            var i = 200;
            foreach (var property in content.Properties)
            {
                property.Id = ++i;
            }
            content.Id = 10;
            content.CreateDate = DateTime.Now;
            content.CreatorId = 22;
            content.ExpireDate = DateTime.Now;
            content.Key = Guid.NewGuid();
            content.Language = &quot;en&quot;;
            content.Level = 3;
            content.Path = &quot;-1,4,10&quot;;
            content.ReleaseDate = DateTime.Now;
            content.ChangePublishedState(PublishedState.Published);
            content.SortOrder = 5;
            content.Template = new Template(&quot;-1,2,3,4&quot;, &quot;Test Template&quot;, &quot;testTemplate&quot;)
            {
                Id = 88
            };
            content.Trashed = false;
            content.UpdateDate = DateTime.Now;
            content.Version = Guid.NewGuid();
            content.WriterId = 23;

            ((IUmbracoEntity)content).AdditionalData.Add(&quot;test1&quot;, 123);
            ((IUmbracoEntity)content).AdditionalData.Add(&quot;test2&quot;, &quot;hello&quot;);

            // Act
            var clone = (Content)content.DeepClone();

            // Assert
            Assert.AreNotSame(clone, content);
            Assert.AreEqual(clone, content);
            Assert.AreEqual(clone.Id, content.Id);
            Assert.AreEqual(clone.Version, content.Version);
            Assert.AreEqual(((IUmbracoEntity)clone).AdditionalData, ((IUmbracoEntity)content).AdditionalData);
            Assert.AreNotSame(clone.ContentType, content.ContentType);
            Assert.AreEqual(clone.ContentType, content.ContentType);
            Assert.AreEqual(clone.ContentType.PropertyGroups.Count, content.ContentType.PropertyGroups.Count);
            for (var index = 0; index &lt; content.ContentType.PropertyGroups.Count; index++)
            {
                Assert.AreNotSame(clone.ContentType.PropertyGroups[index], content.ContentType.PropertyGroups[index]);
                Assert.AreEqual(clone.ContentType.PropertyGroups[index], content.ContentType.PropertyGroups[index]);
            }
            Assert.AreEqual(clone.ContentType.PropertyTypes.Count(), content.ContentType.PropertyTypes.Count());
            for (var index = 0; index &lt; content.ContentType.PropertyTypes.Count(); index++)
            {
                Assert.AreNotSame(clone.ContentType.PropertyTypes.ElementAt(index), content.ContentType.PropertyTypes.ElementAt(index));
                Assert.AreEqual(clone.ContentType.PropertyTypes.ElementAt(index), content.ContentType.PropertyTypes.ElementAt(index));
            }
            Assert.AreEqual(clone.ContentTypeId, content.ContentTypeId);
            Assert.AreEqual(clone.CreateDate, content.CreateDate);
            Assert.AreEqual(clone.CreatorId, content.CreatorId);
            Assert.AreEqual(clone.ExpireDate, content.ExpireDate);
            Assert.AreEqual(clone.Key, content.Key);
            Assert.AreEqual(clone.Language, content.Language);
            Assert.AreEqual(clone.Level, content.Level);
            Assert.AreEqual(clone.Path, content.Path);
            Assert.AreEqual(clone.ReleaseDate, content.ReleaseDate);
            Assert.AreEqual(clone.Published, content.Published);
            Assert.AreEqual(clone.PublishedState, content.PublishedState);
            Assert.AreEqual(clone.SortOrder, content.SortOrder);
            Assert.AreEqual(clone.PublishedState, content.PublishedState);
            Assert.AreNotSame(clone.Template, content.Template);
            Assert.AreEqual(clone.Template, content.Template);
            Assert.AreEqual(clone.Trashed, content.Trashed);
            Assert.AreEqual(clone.UpdateDate, content.UpdateDate);
            Assert.AreEqual(clone.Version, content.Version);
            Assert.AreEqual(clone.WriterId, content.WriterId);
            Assert.AreNotSame(clone.Properties, content.Properties);
            Assert.AreEqual(clone.Properties.Count(), content.Properties.Count());
            for (var index = 0; index &lt; content.Properties.Count; index++)
            {
                Assert.AreNotSame(clone.Properties[index], content.Properties[index]);
                Assert.AreEqual(clone.Properties[index], content.Properties[index]);
            }

            //This double verifies by reflection
            var allProps = clone.GetType().GetProperties();
            foreach (var propertyInfo in allProps)
            {
                Assert.AreEqual(propertyInfo.GetValue(clone, null), propertyInfo.GetValue(content, null));
            }

            //need to ensure the event handlers are wired

            var asDirty = (ICanBeDirty)clone;

            Assert.IsFalse(asDirty.IsPropertyDirty(&quot;Properties&quot;));
            clone.Properties.Add(new Property(1, Guid.NewGuid(), new PropertyType(&quot;test&quot;, DataTypeDatabaseType.Ntext, &quot;blah&quot;), &quot;blah&quot;));
            Assert.IsTrue(asDirty.IsPropertyDirty(&quot;Properties&quot;));
        }

        [Test]
        public void Can_Serialize_Without_Error()
        {
            var ss = new SerializationService(new JsonNetSerializer());

            // Arrange
            var contentType = MockedContentTypes.CreateTextpageContentType();
            contentType.Id = 99;
            var content = MockedContent.CreateTextpageContent(contentType, &quot;Textpage&quot;, -1);
            var i = 200;
            foreach (var property in content.Properties)
            {
                property.Id = ++i;
            }
            content.Id = 10;
            content.CreateDate = DateTime.Now;
            content.CreatorId = 22;
            content.ExpireDate = DateTime.Now;
            content.Key = Guid.NewGuid();
            content.Language = &quot;en&quot;;
            content.Level = 3;
            content.Path = &quot;-1,4,10&quot;;
            content.ReleaseDate = DateTime.Now;
            content.ChangePublishedState(PublishedState.Published);
            content.SortOrder = 5;
            content.Template = new Template(&quot;-1,2,3,4&quot;, &quot;Test Template&quot;, &quot;testTemplate&quot;)
            {
                Id = 88
            };
            content.Trashed = false;
            content.UpdateDate = DateTime.Now;
            content.Version = Guid.NewGuid();
            content.WriterId = 23;

            ((IUmbracoEntity)content).AdditionalData.Add(&quot;test1&quot;, 123);
            ((IUmbracoEntity)content).AdditionalData.Add(&quot;test2&quot;, &quot;hello&quot;);

            var result = ss.ToStream(content);
            var json = result.ResultStream.ToJsonString();
            Debug.Print(json);
        }

        /*[Test]
        public void Cannot_Change_Property_With_Invalid_Value()
        {
            // Arrange
            var contentType = MockedContentTypes.CreateTextpageContentType();
            var content = MockedContent.CreateTextpageContent(contentType);

            // Act
            var model = new TestEditorModel
                            {
                                TestDateTime = DateTime.Now,
                                TestDouble = 1.2,
                                TestInt = 2,
                                TestReadOnly = &quot;Read-only string&quot;,
                                TestString = &quot;This is a test string&quot;
                            };

            // Assert
            Assert.Throws&lt;Exception&gt;(() =&gt; content.Properties[&quot;title&quot;].Value = model);
        }*/

        [Test]
        public void Can_Change_Property_Value_Through_Anonymous_Object()
        {
            // Arrange
            var contentType = MockedContentTypes.CreateTextpageContentType();
            var content = MockedContent.CreateTextpageContent(contentType, &quot;Textpage&quot;, -1);

            // Act
            content.PropertyValues(new {title = &quot;This is the new title&quot;});

            // Assert
            Assert.That(content.Properties.Any(), Is.True);
            Assert.That(content.Properties[&quot;title&quot;], Is.Not.Null);
            Assert.That(content.Properties[&quot;title&quot;].Alias, Is.EqualTo(&quot;title&quot;));
            Assert.That(content.Properties[&quot;title&quot;].Value, Is.EqualTo(&quot;This is the new title&quot;));
            Assert.That(content.Properties[&quot;description&quot;].Value, Is.EqualTo(&quot;This is the meta description for a textpage&quot;));
        }

        [Test]
        public void Can_Verify_Dirty_Property_On_Content()
        {
            // Arrange
            var contentType = MockedContentTypes.CreateTextpageContentType();
            var content = MockedContent.CreateTextpageContent(contentType, &quot;Textpage&quot;, -1);

            // Act
            content.ResetDirtyProperties();
            content.Name = &quot;New Home&quot;;

            // Assert
            Assert.That(content.Name, Is.EqualTo(&quot;New Home&quot;));
            Assert.That(content.IsPropertyDirty(&quot;Name&quot;), Is.True);
        }

        [Test]
        public void Can_Add_PropertyGroup_On_ContentType()
        {
            // Arrange
            var contentType = MockedContentTypes.CreateTextpageContentType();
            var content = MockedContent.CreateTextpageContent(contentType, &quot;Textpage&quot;, -1);

            // Act
            contentType.PropertyGroups.Add(new PropertyGroup{ Name = &quot;Test Group&quot;, SortOrder = 3 });

            // Assert
            Assert.That(contentType.PropertyGroups.Count, Is.EqualTo(3));
            Assert.That(content.PropertyGroups.Count(), Is.EqualTo(3));
        }

        [Test]
        public void Can_Remove_PropertyGroup_From_ContentType()
        {
            // Arrange
            var contentType = MockedContentTypes.CreateTextpageContentType();
            contentType.ResetDirtyProperties();

            // Act
            contentType.PropertyGroups.Remove(&quot;Content&quot;);

            // Assert
            Assert.That(contentType.PropertyGroups.Count, Is.EqualTo(1));
            //Assert.That(contentType.IsPropertyDirty(&quot;PropertyGroups&quot;), Is.True);
        }

        [Test]
        public void Can_Add_PropertyType_To_Group_On_ContentType()
        {
            // Arrange
            var contentType = MockedContentTypes.CreateTextpageContentType();
            var content = MockedContent.CreateTextpageContent(contentType, &quot;Textpage&quot;, -1);

            // Act
            contentType.PropertyGroups[&quot;Content&quot;].PropertyTypes.Add(new PropertyType(&quot;test&quot;, DataTypeDatabaseType.Ntext, &quot;subtitle&quot;)
                                                                        {
                                                                            Name = &quot;Subtitle&quot;,
                                                                            Description = &quot;Optional subtitle&quot;,
                                                                            Mandatory = false,
                                                                            SortOrder = 3,
                                                                            DataTypeDefinitionId = -88
                                                                        });

            // Assert
            Assert.That(contentType.PropertyGroups[&quot;Content&quot;].PropertyTypes.Count, Is.EqualTo(3));
            Assert.That(content.PropertyGroups.First(x =&gt; x.Name == &quot;Content&quot;).PropertyTypes.Count, Is.EqualTo(3));
        }

        [Test]
        public void Can_Add_New_Property_To_New_PropertyType()
        {
            // Arrange
            var contentType = MockedContentTypes.CreateTextpageContentType();
            var content = MockedContent.CreateTextpageContent(contentType, &quot;Textpage&quot;, -1);

            // Act
            var propertyType = new PropertyType(&quot;test&quot;, DataTypeDatabaseType.Ntext, &quot;subtitle&quot;)
                                   {
                                        Name = &quot;Subtitle&quot;, Description = &quot;Optional subtitle&quot;, Mandatory = false, SortOrder = 3, DataTypeDefinitionId = -88
                                   };
            contentType.PropertyGroups[&quot;Content&quot;].PropertyTypes.Add(propertyType);
            content.Properties.Add(new Property(propertyType){Value = &quot;This is a subtitle Test&quot;});

            // Assert
            Assert.That(content.Properties.Contains(&quot;subtitle&quot;), Is.True);
            Assert.That(content.Properties[&quot;subtitle&quot;].Value, Is.EqualTo(&quot;This is a subtitle Test&quot;));
        }

        [Test]
        public void Can_Add_New_Property_To_New_PropertyType_In_New_PropertyGroup()
        {
            // Arrange
            var contentType = MockedContentTypes.CreateTextpageContentType();
            var content = MockedContent.CreateTextpageContent(contentType, &quot;Textpage&quot;, -1);

            // Act
            var propertyType = new PropertyType(&quot;test&quot;, DataTypeDatabaseType.Ntext, &quot;subtitle&quot;)
                                   {
                                       Name = &quot;Subtitle&quot;,
                                       Description = &quot;Optional subtitle&quot;,
                                       Mandatory = false,
                                       SortOrder = 3,
                                       DataTypeDefinitionId = -88
                                   };
            var propertyGroup = new PropertyGroup {Name = &quot;Test Group&quot;, SortOrder = 3};
            propertyGroup.PropertyTypes.Add(propertyType);
            contentType.PropertyGroups.Add(propertyGroup);
            content.Properties.Add(new Property(propertyType){ Value = &quot;Subtitle Test&quot;});

            // Assert
            Assert.That(content.Properties.Count, Is.EqualTo(5));
            Assert.That(content.PropertyTypes.Count(), Is.EqualTo(5));
            Assert.That(content.PropertyGroups.Count(), Is.EqualTo(3));
            Assert.That(content.Properties[&quot;subtitle&quot;].Value, Is.EqualTo(&quot;Subtitle Test&quot;));
            Assert.That(content.Properties[&quot;title&quot;].Value, Is.EqualTo(&quot;Textpage textpage&quot;));
        }

        [Test]
        public void Can_Update_PropertyType_Through_Content_Properties()
        {
            // Arrange
            var contentType = MockedContentTypes.CreateTextpageContentType();
            var content = MockedContent.CreateTextpageContent(contentType, &quot;Textpage&quot;, -1);

            // Act - note that the PropertyType&#39;s properties like SortOrder is not updated through the Content object
            var propertyType = new PropertyType(&quot;test&quot;, DataTypeDatabaseType.Ntext, &quot;title&quot;)
                                   {
                                        Name = &quot;Title&quot;, Description = &quot;Title description added&quot;, Mandatory = false, SortOrder = 10, DataTypeDefinitionId = -88
                                   };
            content.Properties.Add(new Property(propertyType));

            // Assert
            Assert.That(content.Properties.Count, Is.EqualTo(4));
            Assert.That(contentType.PropertyTypes.First(x =&gt; x.Alias == &quot;title&quot;).SortOrder, Is.EqualTo(1));
            Assert.That(content.Properties[&quot;title&quot;].Value, Is.EqualTo(&quot;Textpage textpage&quot;));
        }

        [Test]
        public void Can_Change_ContentType_On_Content()
        {
            // Arrange
            var contentType = MockedContentTypes.CreateTextpageContentType();
            var simpleContentType = MockedContentTypes.CreateSimpleContentType();
            var content = MockedContent.CreateTextpageContent(contentType, &quot;Textpage&quot;, -1);

            // Act
            content.ChangeContentType(simpleContentType);

            // Assert
            Assert.That(content.Properties.Contains(&quot;author&quot;), Is.True);
            Assert.That(content.PropertyGroups.Count(), Is.EqualTo(1));
            Assert.That(content.PropertyTypes.Count(), Is.EqualTo(3));
            //Note: There was 4 properties, after changing ContentType 1 has been added (no properties are deleted)
            Assert.That(content.Properties.Count, Is.EqualTo(5));
        }

        [Test]
        public void Can_Change_ContentType_On_Content_And_Set_Property_Value()
        {
            // Arrange
            var contentType = MockedContentTypes.CreateTextpageContentType();
            var simpleContentType = MockedContentTypes.CreateSimpleContentType();
            var content = MockedContent.CreateTextpageContent(contentType, &quot;Textpage&quot;, -1);

            // Act
            content.ChangeContentType(simpleContentType);
            content.SetValue(&quot;author&quot;, &quot;John Doe&quot;);

            // Assert
            Assert.That(content.Properties.Contains(&quot;author&quot;), Is.True);
            Assert.That(content.Properties[&quot;author&quot;].Value, Is.EqualTo(&quot;John Doe&quot;));
        }

        [Test]
        public void Can_Change_ContentType_On_Content_And_Still_Get_Old_Properties()
        {
            // Arrange
            var contentType = MockedContentTypes.CreateTextpageContentType();
            var simpleContentType = MockedContentTypes.CreateSimpleContentType();
            var content = MockedContent.CreateTextpageContent(contentType, &quot;Textpage&quot;, -1);

            // Act
            content.ChangeContentType(simpleContentType);

            // Assert
            Assert.That(content.Properties.Contains(&quot;author&quot;), Is.True);
            Assert.That(content.Properties.Contains(&quot;keywords&quot;), Is.True);
            Assert.That(content.Properties.Contains(&quot;description&quot;), Is.True);
            Assert.That(content.Properties[&quot;keywords&quot;].Value, Is.EqualTo(&quot;text,page,meta&quot;));
            Assert.That(content.Properties[&quot;description&quot;].Value, Is.EqualTo(&quot;This is the meta description for a textpage&quot;));
        }

        [Test]
        public void Can_Change_ContentType_On_Content_And_Clear_Old_PropertyTypes()
        {
            // Arrange
            var contentType = MockedContentTypes.CreateTextpageContentType();
            var simpleContentType = MockedContentTypes.CreateSimpleContentType();
            var content = MockedContent.CreateTextpageContent(contentType, &quot;Textpage&quot;, -1);

            // Act
            content.ChangeContentType(simpleContentType, true);

            // Assert
            Assert.That(content.Properties.Contains(&quot;author&quot;), Is.True);
            Assert.That(content.Properties.Contains(&quot;keywords&quot;), Is.False);
            Assert.That(content.Properties.Contains(&quot;description&quot;), Is.False);
        }

        [Test]
        public void Can_Verify_Content_Is_Published()
        {
            // Arrange
            var contentType = MockedContentTypes.CreateTextpageContentType();
            var content = MockedContent.CreateTextpageContent(contentType, &quot;Textpage&quot;, -1);

            // Act
            content.ResetDirtyProperties();
            content.ChangePublishedState(PublishedState.Published);

            // Assert
            Assert.That(content.IsPropertyDirty(&quot;Published&quot;), Is.True);
            Assert.That(content.Published, Is.True);
            Assert.That(content.IsPropertyDirty(&quot;Name&quot;), Is.False);
        }

        [Test]
        public void Can_Verify_Content_Is_Trashed()
        {
            // Arrange
            var contentType = MockedContentTypes.CreateTextpageContentType();
            var content = MockedContent.CreateTextpageContent(contentType, &quot;Textpage&quot;, -1);

            // Act
            content.ResetDirtyProperties();
            content.ChangeTrashedState(true);

            // Assert
            Assert.That(content.IsPropertyDirty(&quot;Trashed&quot;), Is.True);
            Assert.That(content.Trashed, Is.True);
            Assert.That(content.IsPropertyDirty(&quot;Name&quot;), Is.False);
        }

        [Test]
        public void Adding_PropertyGroup_To_ContentType_Results_In_Dirty_Entity()
        {
            // Arrange
            var contentType = MockedContentTypes.CreateTextpageContentType();
            contentType.ResetDirtyProperties();

            // Act
            var propertyGroup = new PropertyGroup { Name = &quot;Test Group&quot;, SortOrder = 3 };
            contentType.PropertyGroups.Add(propertyGroup);

            // Assert
            Assert.That(contentType.IsDirty(), Is.True);
            Assert.That(contentType.PropertyGroups.Any(x =&gt; x.Name == &quot;Test Group&quot;), Is.True);
            //Assert.That(contentType.IsPropertyDirty(&quot;PropertyGroups&quot;), Is.True);
        }

        [Test]
        public void After_Committing_Changes_Was_Dirty_Is_True()
        {
            // Arrange
            var contentType = MockedContentTypes.CreateTextpageContentType();
            contentType.ResetDirtyProperties(); //reset 

            // Act
            contentType.Alias = &quot;newAlias&quot;;
            contentType.ResetDirtyProperties(); //this would be like committing the entity

            // Assert
            Assert.That(contentType.IsDirty(), Is.False);
            Assert.That(contentType.WasDirty(), Is.True);
            Assert.That(contentType.WasPropertyDirty(&quot;Alias&quot;), Is.True);
        }

        [Test]
        public void After_Committing_Changes_Was_Dirty_Is_True_On_Changed_Property()
        {
            // Arrange
            var contentType = MockedContentTypes.CreateTextpageContentType();
            contentType.ResetDirtyProperties(); //reset
            var content = MockedContent.CreateTextpageContent(contentType, &quot;test&quot;, -1);
            content.ResetDirtyProperties();

            // Act
            content.SetPropertyValue(&quot;title&quot;, &quot;new title&quot;);
            Assert.That(content.IsEntityDirty(), Is.False);
            Assert.That(content.IsDirty(), Is.True);
            Assert.That(content.IsPropertyDirty(&quot;title&quot;), Is.True);
            Assert.That(content.IsAnyUserPropertyDirty(), Is.True);
            Assert.That(content.GetDirtyUserProperties().Count(), Is.EqualTo(1));
            Assert.That(content.Properties[0].IsDirty(), Is.True);
            Assert.That(content.Properties[&quot;title&quot;].IsDirty(), Is.True);
            
            content.ResetDirtyProperties(); //this would be like committing the entity

            // Assert
            Assert.That(content.WasDirty(), Is.True);
            Assert.That(content.Properties[0].WasDirty(), Is.True);


            Assert.That(content.WasPropertyDirty(&quot;title&quot;), Is.True);
            Assert.That(content.Properties[&quot;title&quot;].IsDirty(), Is.False);
            Assert.That(content.Properties[&quot;title&quot;].WasDirty(), Is.True);
        }

        [Test]
        public void If_Not_Committed_Was_Dirty_Is_False()
        {
            // Arrange
            var contentType = MockedContentTypes.CreateTextpageContentType();

            // Act
            contentType.Alias = &quot;newAlias&quot;;           

            // Assert
            Assert.That(contentType.IsDirty(), Is.True);
            Assert.That(contentType.WasDirty(), Is.False);
        }

        [Test]
        public void Detect_That_A_Property_Is_Removed()
        {
            // Arrange
            var contentType = MockedContentTypes.CreateTextpageContentType();
            Assert.That(contentType.WasPropertyDirty(&quot;HasPropertyTypeBeenRemoved&quot;), Is.False);

            // Act
            contentType.RemovePropertyType(&quot;title&quot;);

            // Assert
            Assert.That(contentType.IsPropertyDirty(&quot;HasPropertyTypeBeenRemoved&quot;), Is.True);
        }

        [Test]
        public void Adding_PropertyType_To_PropertyGroup_On_ContentType_Results_In_Dirty_Entity()
        {
            // Arrange
            var contentType = MockedContentTypes.CreateTextpageContentType();
            contentType.ResetDirtyProperties();

            // Act
            var propertyType = new PropertyType(&quot;test&quot;, DataTypeDatabaseType.Ntext, &quot;subtitle&quot;)
                                   {
                                       Name = &quot;Subtitle&quot;,
                                       Description = &quot;Optional subtitle&quot;,
                                       Mandatory = false,
                                       SortOrder = 3,
                                       DataTypeDefinitionId = -88
                                   };
            contentType.PropertyGroups[&quot;Content&quot;].PropertyTypes.Add(propertyType);

            // Assert
            Assert.That(contentType.PropertyGroups[&quot;Content&quot;].IsDirty(), Is.True);
            Assert.That(contentType.PropertyGroups[&quot;Content&quot;].IsPropertyDirty(&quot;PropertyTypes&quot;), Is.True);
            Assert.That(contentType.PropertyGroups.Any(x =&gt; x.IsDirty()), Is.True);
        }

        [Test]
        public void Can_Compose_Composite_ContentType_Collection()
        {
            // Arrange
            var simpleContentType = MockedContentTypes.CreateSimpleContentType();
            var simple2ContentType = MockedContentTypes.CreateSimpleContentType(&quot;anotherSimple&quot;, &quot;Another Simple Page&quot;,
                                                                                new PropertyTypeCollection(
                                                                                    new List&lt;PropertyType&gt;
                                                                                        {
                                                                                            new PropertyType(&quot;test&quot;, DataTypeDatabaseType.Ntext, &quot;coauthor&quot;)
                                                                                                {
                                                                                                    Name = &quot;Co-Author&quot;,
                                                                                                    Description = &quot;Name of the Co-Author&quot;,
                                                                                                    Mandatory = false,
                                                                                                    SortOrder = 4,
                                                                                                    DataTypeDefinitionId = -88
                                                                                                }
                                                                                        }));

            // Act
            var added = simpleContentType.AddContentType(simple2ContentType);
            var compositionPropertyGroups = simpleContentType.CompositionPropertyGroups;
            var compositionPropertyTypes = simpleContentType.CompositionPropertyTypes;

            // Assert
            Assert.That(added, Is.True);
            Assert.That(compositionPropertyGroups.Count(), Is.EqualTo(1));
            Assert.That(compositionPropertyTypes.Count(), Is.EqualTo(4));
        }

        [Test]
        public void Can_Compose_Nested_Composite_ContentType_Collection()
        {
            // Arrange
            var metaContentType = MockedContentTypes.CreateMetaContentType();
            var simpleContentType = MockedContentTypes.CreateSimpleContentType();
            var simple2ContentType = MockedContentTypes.CreateSimpleContentType(&quot;anotherSimple&quot;, &quot;Another Simple Page&quot;,
                                                                                new PropertyTypeCollection(
                                                                                    new List&lt;PropertyType&gt;
                                                                                        {
                                                                                            new PropertyType(&quot;test&quot;, DataTypeDatabaseType.Ntext, &quot;coauthor&quot;)
                                                                                                {
                                                                                                    Name = &quot;Co-Author&quot;,
                                                                                                    Description = &quot;Name of the Co-Author&quot;,
                                                                                                    Mandatory = false,
                                                                                                    SortOrder = 4,
                                                                                                    DataTypeDefinitionId = -88
                                                                                                }
                                                                                        }));

            // Act
            var addedMeta = simple2ContentType.AddContentType(metaContentType);
            var added = simpleContentType.AddContentType(simple2ContentType);
            var compositionPropertyGroups = simpleContentType.CompositionPropertyGroups;
            var compositionPropertyTypes = simpleContentType.CompositionPropertyTypes;

            // Assert
            Assert.That(addedMeta, Is.True);
            Assert.That(added, Is.True);
            Assert.That(compositionPropertyGroups.Count(), Is.EqualTo(2));
            Assert.That(compositionPropertyTypes.Count(), Is.EqualTo(6));
            Assert.That(simpleContentType.ContentTypeCompositionExists(&quot;meta&quot;), Is.True);
        }

        [Test]
        public void Can_Avoid_Circular_Dependencies_In_Composition()
        {
            var textPage = MockedContentTypes.CreateTextpageContentType();
            var parent = MockedContentTypes.CreateSimpleContentType(&quot;parent&quot;, &quot;Parent&quot;, null, true);
            var meta = MockedContentTypes.CreateMetaContentType();
            var mixin1 = MockedContentTypes.CreateSimpleContentType(&quot;mixin1&quot;, &quot;Mixin1&quot;, new PropertyTypeCollection(
                                                                                    new List&lt;PropertyType&gt;
                                                                                        {
                                                                                            new PropertyType(&quot;test&quot;, DataTypeDatabaseType.Ntext, &quot;coauthor&quot;)
                                                                                                {
                                                                                                    Name = &quot;Co-Author&quot;,
                                                                                                    Description = &quot;Name of the Co-Author&quot;,
                                                                                                    Mandatory = false,
                                                                                                    SortOrder = 4,
                                                                                                    DataTypeDefinitionId = -88
                                                                                                }
                                                                                        }));
            var mixin2 = MockedContentTypes.CreateSimpleContentType(&quot;mixin2&quot;, &quot;Mixin2&quot;, new PropertyTypeCollection(
                                                                                    new List&lt;PropertyType&gt;
                                                                                        {
                                                                                            new PropertyType(&quot;test&quot;, DataTypeDatabaseType.Ntext, &quot;author&quot;)
                                                                                                {
                                                                                                    Name = &quot;Author&quot;,
                                                                                                    Description = &quot;Name of the Author&quot;,
                                                                                                    Mandatory = false,
                                                                                                    SortOrder = 4,
                                                                                                    DataTypeDefinitionId = -88
                                                                                                }
                                                                                        }));

            // Act
            var addedMetaMixin2 = mixin2.AddContentType(meta);
            var addedMixin2 = mixin1.AddContentType(mixin2);
            var addedMeta = parent.AddContentType(meta);

            var addedMixin1 = parent.AddContentType(mixin1);

            var addedMixin1Textpage = textPage.AddContentType(mixin1);
            var addedTextpageParent = parent.AddContentType(textPage);

            var aliases = textPage.CompositionAliases();
            var propertyTypes = textPage.CompositionPropertyTypes;
            var propertyGroups = textPage.CompositionPropertyGroups;

            // Assert
            Assert.That(mixin2.ContentTypeCompositionExists(&quot;meta&quot;), Is.True);
            Assert.That(mixin1.ContentTypeCompositionExists(&quot;meta&quot;), Is.True);
            Assert.That(parent.ContentTypeCompositionExists(&quot;meta&quot;), Is.True);
            Assert.That(textPage.ContentTypeCompositionExists(&quot;meta&quot;), Is.True);

            Assert.That(aliases.Count(), Is.EqualTo(3));
            Assert.That(propertyTypes.Count(), Is.EqualTo(8));
            Assert.That(propertyGroups.Count(), Is.EqualTo(2));

            Assert.That(addedMeta, Is.True);
            Assert.That(addedMetaMixin2, Is.True);
            Assert.That(addedMixin2, Is.True);
            Assert.That(addedMixin1, Is.False);
            Assert.That(addedMixin1Textpage, Is.True);
            Assert.That(addedTextpageParent, Is.False);
        }
    }
}
    </pre>
    <script type="text/javascript">
      highlightRanges([[27,9,27,10,1],[28,13,28,56,1],[29,13,29,56,1],[30,9,30,10,1],[34,9,34,10,1],[36,9,36,10,1],[42,9,42,10,1],[43,13,43,71,1],[44,13,44,68,1],[45,13,45,31,1],[46,13,46,27,1],[48,13,48,62,1],[49,9,49,10,1],[55,9,55,10,1],[56,13,56,76,1],[57,13,57,74,1],[58,13,58,33,1],[59,13,59,29,1],[61,13,61,64,1],[62,9,62,10,1],[66,9,66,10,1],[67,13,67,76,1],[69,13,69,217,1],[70,13,70,217,1],[73,13,73,53,1],[76,13,76,74,1],[79,13,79,64,1],[81,13,81,52,1],[82,13,82,60,1],[83,9,83,10,1],[87,9,87,10,1],[88,13,88,78,1],[89,13,89,92,1],[91,13,91,49,1],[93,13,93,47,1],[94,13,94,20,1],[94,22,94,30,1],[94,31,94,33,1],[94,34,94,52,1],[95,13,95,14,1],[96,17,96,48,1],[97,13,97,14,1],[98,9,98,10,1],[102,9,102,10,1],[104,13,104,78,1],[105,13,105,92,1],[110,13,110,47,1],[111,9,111,10,1],[115,9,115,10,1],[117,13,117,78,1],[118,13,118,92,1],[121,13,121,73,1],[124,13,124,60,1],[125,13,125,67,1],[126,13,126,97,1],[127,9,127,10,1],[131,9,131,10,1],[133,13,133,78,1],[134,13,134,92,1],[137,13,137,64,1],[140,13,140,60,1],[141,13,141,67,1],[142,13,142,97,1],[143,9,143,10,1],[147,9,147,10,1],[149,13,149,78,1],[150,13,150,92,1],[152,13,152,97,1],[153,13,153,65,1],[154,13,154,96,1],[155,13,155,76,1],[156,13,156,73,1],[157,13,157,70,1],[160,13,160,62,1],[163,13,163,60,1],[164,13,164,67,1],[165,13,165,95,1],[166,9,166,10,1],[171,9,171,10,1],[173,13,173,78,1],[174,13,174,92,1],[175,13,175,29,1],[176,13,176,76,1],[179,13,179,41,1],[182,13,182,47,1],[183,13,183,53,1],[184,13,184,63,1],[185,13,185,54,1],[187,13,187,69,1],[188,9,188,10,1],[193,9,193,10,0],[195,13,195,78,0],[196,13,196,33,0],[197,13,197,92,0],[198,13,198,25,0],[199,13,199,20,0],[199,22,199,34,0],[199,35,199,37,0],[199,38,199,56,0],[200,13,200,14,0],[201,17,201,35,0],[202,13,202,14,0],[203,13,203,29,0],[204,13,204,47,0],[205,13,205,36,0],[206,13,206,47,0],[207,13,207,42,0],[208,13,208,37,0],[209,13,209,31,0],[210,13,210,38,0],[211,13,211,48,0],[212,13,212,68,0],[213,13,213,35,0],[214,13,217,15,0],[218,13,218,37,0],[219,13,219,47,0],[220,13,220,46,0],[221,13,221,35,0],[223,13,223,72,0],[224,13,224,76,0],[226,13,226,70,0],[227,13,227,99,0],[227,99,227,106,0],[227,106,227,108,0],[227,13,227,108,0],[229,13,229,105,0],[230,13,230,14,0],[231,22,231,31,0],[231,33,231,41,0],[231,43,231,46,0],[232,17,232,18,0],[233,21,233,110,0],[234,17,234,18,0],[235,13,235,14,0],[237,13,237,108,0],[238,13,238,14,0],[239,22,239,31,0],[239,33,239,41,0],[239,43,239,46,0],[240,17,240,18,0],[241,21,241,70,0],[242,17,242,18,0],[243,13,243,14,0],[244,9,244,10,0],[248,9,248,10,1],[250,13,250,78,1],[251,13,251,33,1],[252,13,252,92,1],[253,13,253,25,1],[254,13,254,20,1],[254,22,254,34,1],[254,35,254,37,1],[254,38,254,56,1],[255,13,255,14,1],[256,17,256,35,1],[257,13,257,14,1],[258,13,258,29,1],[259,13,259,47,1],[260,13,260,36,1],[261,13,261,47,1],[262,13,262,42,1],[263,13,263,37,1],[264,13,264,31,1],[265,13,265,38,1],[266,13,266,48,1],[267,13,267,68,1],[268,13,268,35,1],[269,13,272,15,1],[273,13,273,37,1],[274,13,274,47,1],[275,13,275,46,1],[276,13,276,35,1],[278,13,278,72,1],[279,13,279,76,1],[282,13,282,54,1],[285,13,285,47,1],[286,13,286,45,1],[287,13,287,51,1],[288,13,288,61,1],[289,13,289,111,1],[290,13,290,71,1],[291,13,291,69,1],[292,13,292,111,1],[293,18,293,31,1],[293,33,293,81,1],[293,83,293,90,1],[294,13,294,14,1],[295,17,295,119,1],[296,17,296,117,1],[297,13,297,14,1],[298,13,298,113,1],[299,18,299,31,1],[299,33,299,82,1],[299,84,299,91,1],[300,13,300,14,1],[301,17,301,137,1],[302,17,302,135,1],[303,13,303,14,1],[304,13,304,73,1],[305,13,305,67,1],[306,13,306,65,1],[307,13,307,67,1],[308,13,308,53,1],[309,13,309,63,1],[310,13,310,57,1],[311,13,311,55,1],[312,13,312,69,1],[313,13,313,65,1],[314,13,314,75,1],[315,13,315,65,1],[316,13,316,75,1],[317,13,317,65,1],[318,13,318,63,1],[319,13,319,61,1],[320,13,320,67,1],[321,13,321,61,1],[322,13,322,63,1],[323,13,323,69,1],[324,13,324,83,1],[325,18,325,31,1],[325,33,325,65,1],[325,67,325,74,1],[326,13,326,14,1],[327,17,327,87,1],[328,17,328,85,1],[329,13,329,14,1],[332,13,332,60,1],[333,13,333,20,1],[333,22,333,38,1],[333,39,333,41,1],[333,42,333,50,1],[334,13,334,14,1],[335,17,335,107,1],[336,13,336,14,1],[340,13,340,46,1],[342,13,342,67,1],[343,13,343,137,1],[344,13,344,66,1],[345,9,345,10,1],[349,9,349,10,1],[350,13,350,72,1],[353,13,353,78,1],[354,13,354,33,1],[355,13,355,92,1],[356,13,356,25,1],[357,13,357,20,1],[357,22,357,34,1],[357,35,357,37,1],[357,38,357,56,1],[358,13,358,14,1],[359,17,359,35,1],[360,13,360,14,1],[361,13,361,29,1],[362,13,362,47,1],[363,13,363,36,1],[364,13,364,47,1],[365,13,365,42,1],[366,13,366,37,1],[367,13,367,31,1],[368,13,368,38,1],[369,13,369,48,1],[370,13,370,68,1],[371,13,371,35,1],[372,13,375,15,1],[376,13,376,37,1],[377,13,377,47,1],[378,13,378,46,1],[379,13,379,35,1],[381,13,381,72,1],[382,13,382,76,1],[384,13,384,47,1],[385,13,385,59,1],[386,13,386,31,1],[387,9,387,10,1],[412,9,412,10,1],[414,13,414,78,1],[415,13,415,92,1],[418,13,418,75,1],[421,13,421,60,1],[422,13,422,67,1],[423,13,423,81,1],[424,13,424,97,1],[425,13,425,125,1],[426,9,426,10,1],[430,9,430,10,1],[432,13,432,78,1],[433,13,433,92,1],[436,13,436,44,1],[437,13,437,39,1],[440,13,440,63,1],[441,13,441,67,1],[442,9,442,10,1],[446,9,446,10,1],[448,13,448,78,1],[449,13,449,92,1],[452,13,452,101,1],[455,13,455,74,1],[456,13,456,72,1],[457,9,457,10,1],[461,9,461,10,1],[463,13,463,78,1],[464,13,464,48,1],[467,13,467,58,1],[470,13,470,74,1],[472,9,472,10,1],[476,9,476,10,1],[478,13,478,78,1],[479,13,479,92,1],[482,13,489,76,1],[492,13,492,99,1],[493,13,493,59,1],[493,59,493,78,1],[493,78,493,116,1],[493,13,493,116,1],[494,9,494,10,1],[498,9,498,10,1],[500,13,500,78,1],[501,13,501,92,1],[504,13,507,38,1],[508,13,508,83,1],[509,13,509,99,1],[512,13,512,75,1],[513,13,513,102,1],[514,9,514,10,1],[518,9,518,10,1],[520,13,520,78,1],[521,13,521,92,1],[524,13,531,38,1],[532,13,532,88,1],[533,13,533,59,1],[534,13,534,59,1],[535,13,535,90,1],[538,13,538,66,1],[539,13,539,71,1],[540,13,540,72,1],[541,13,541,92,1],[542,13,542,93,1],[543,9,543,10,1],[547,9,547,10,1],[549,13,549,78,1],[550,13,550,92,1],[553,13,556,38,1],[557,13,557,64,1],[560,13,560,66,1],[561,13,561,62,1],[561,62,561,80,1],[561,80,561,108,1],[561,13,561,108,1],[562,13,562,93,1],[563,9,563,10,1],[567,9,567,10,1],[569,13,569,78,1],[570,13,570,82,1],[571,13,571,92,1],[574,13,574,58,1],[577,13,577,73,1],[578,13,578,72,1],[579,13,579,71,1],[581,13,581,66,1],[582,9,582,10,1],[586,9,586,10,1],[588,13,588,78,1],[589,13,589,82,1],[590,13,590,92,1],[593,13,593,58,1],[594,13,594,52,1],[597,13,597,73,1],[598,13,598,85,1],[599,9,599,10,1],[603,9,603,10,1],[605,13,605,78,1],[606,13,606,82,1],[607,13,607,92,1],[610,13,610,58,1],[613,13,613,73,1],[614,13,614,75,1],[615,13,615,78,1],[616,13,616,93,1],[617,13,617,125,1],[618,9,618,10,1],[622,9,622,10,1],[624,13,624,78,1],[625,13,625,82,1],[626,13,626,92,1],[629,13,629,64,1],[632,13,632,73,1],[633,13,633,76,1],[634,13,634,79,1],[635,9,635,10,1],[639,9,639,10,1],[641,13,641,78,1],[642,13,642,92,1],[645,13,645,44,1],[646,13,646,68,1],[649,13,649,72,1],[650,13,650,53,1],[651,13,651,68,1],[652,9,652,10,1],[656,9,656,10,1],[658,13,658,78,1],[659,13,659,92,1],[662,13,662,44,1],[663,13,663,46,1],[666,13,666,70,1],[667,13,667,51,1],[668,13,668,68,1],[669,9,669,10,1],[673,9,673,10,1],[675,13,675,78,1],[676,13,676,48,1],[679,13,679,90,1],[680,13,680,59,1],[683,13,683,57,1],[684,13,684,61,1],[684,61,684,83,1],[684,83,684,95,1],[684,13,684,95,1],[686,9,686,10,1],[690,9,690,10,1],[692,13,692,78,1],[693,13,693,48,1],[696,13,696,44,1],[697,13,697,48,1],[700,13,700,58,1],[701,13,701,58,1],[702,13,702,73,1],[703,9,703,10,1],[707,9,707,10,1],[709,13,709,78,1],[710,13,710,48,1],[711,13,711,88,1],[712,13,712,44,1],[715,13,715,60,1],[716,13,716,60,1],[717,13,717,53,1],[718,13,718,68,1],[719,13,719,68,1],[720,13,720,82,1],[721,13,721,67,1],[722,13,722,73,1],[724,13,724,44,1],[727,13,727,54,1],[728,13,728,68,1],[731,13,731,69,1],[732,13,732,74,1],[733,13,733,74,1],[734,9,734,10,1],[738,9,738,10,1],[740,13,740,78,1],[743,13,743,44,1],[746,13,746,57,1],[747,13,747,59,1],[748,9,748,10,1],[752,9,752,10,1],[754,13,754,78,1],[755,13,755,95,1],[758,13,758,53,1],[761,13,761,93,1],[762,9,762,10,1],[766,9,766,10,1],[768,13,768,78,1],[769,13,769,48,1],[772,13,779,38,1],[780,13,780,83,1],[783,13,783,83,1],[784,13,784,106,1],[785,13,785,61,1],[785,61,785,72,1],[785,72,785,84,1],[785,13,785,84,1],[786,9,786,10,1],[790,9,790,10,1],[792,13,792,82,1],[793,13,805,93,1],[808,13,808,78,1],[809,13,809,89,1],[810,13,810,87,1],[813,13,813,41,1],[814,13,814,75,1],[815,13,815,74,1],[816,9,816,10,1],[820,9,820,10,1],[822,13,822,78,1],[823,13,823,82,1],[824,13,836,93,1],[839,13,839,80,1],[840,13,840,78,1],[841,13,841,89,1],[842,13,842,87,1],[845,13,845,45,1],[846,13,846,41,1],[847,13,847,75,1],[848,13,848,74,1],[849,13,849,90,1],[850,9,850,10,1],[854,9,854,10,1],[855,13,855,75,1],[856,13,856,101,1],[857,13,857,67,1],[858,13,869,93,1],[870,13,881,93,1],[884,13,884,63,1],[885,13,885,61,1],[886,13,886,57,1],[888,13,888,61,1],[890,13,890,71,1],[891,13,891,71,1],[893,13,893,57,1],[894,13,894,67,1],[895,13,895,69,1],[898,13,898,79,1],[899,13,899,79,1],[900,13,900,79,1],[901,13,901,81,1],[903,13,903,57,1],[904,13,904,63,1],[905,13,905,64,1],[907,13,907,45,1],[908,13,908,51,1],[909,13,909,47,1],[910,13,910,48,1],[911,13,911,55,1],[912,13,912,56,1],[913,9,913,10,1]]);
    </script>
  </body>
</html>