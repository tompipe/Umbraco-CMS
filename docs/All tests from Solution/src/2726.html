<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Tom Pipe\Documents\Hexadigital\Code\Umbraco\Umbraco-CMS\src\umbraco.editorControls\imagecropper\Config.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using System.Collections;

namespace umbraco.editorControls.imagecropper
{
    [Obsolete(&quot;IDataType and all other references to the legacy property editors are no longer used this will be removed from the codebase in future versions&quot;)]
    public class Config
    {
        public string UploadPropertyAlias { get; set; }
        public bool GenerateImages { get; set; }
        public int Quality { get; set; }
        public bool ShowLabel { get; set; }
        public ArrayList presets { get; set; }

        public Config(string configuration)
        {
            presets = new ArrayList();

            string[] configData = configuration.Split(&#39;|&#39;);

            if (configData.Length != 2) return;

            string[] generalSettings = configData[0].Split(&#39;,&#39;);

            UploadPropertyAlias = generalSettings[0];
            GenerateImages = generalSettings[1] == &quot;1&quot;;
            ShowLabel = generalSettings[2] == &quot;1&quot;;

            int _quality;
            if(generalSettings.Length &gt;= 4 &amp;&amp; Int32.TryParse(generalSettings[3], out _quality))
            {
                Quality = _quality;    
            }
            else
            {
                Quality = 90;
            }
            
            string[] presetData = configData[1].Split(&#39;;&#39;);

            for (int i=0; i &lt; presetData.Length; i++)
            {
                string[] p = presetData[i].Split(&#39;,&#39;);

                int targetWidth, targetHeight;
                
                if (p.Length &gt;= 4 &amp;&amp; Int32.TryParse(p[1], out targetWidth) &amp;&amp; Int32.TryParse(p[2], out targetHeight))
                {
                    char[] cropPosition = { &#39;C&#39;, &#39;M&#39; };

                    if(p.Length &gt;= 5)
                    {
                        cropPosition = p[4].ToCharArray();
                    }

                    presets.Add(new Preset(p[0], targetWidth, targetHeight, p[3] == &quot;1&quot; ? true : false, cropPosition[0].ToString(), cropPosition[1].ToString()));
                }
            }
        }
    }
}
    </pre>
    <script type="text/javascript">
      highlightRanges([[9,45,9,49,0],[9,50,9,54,0],[10,38,10,42,0],[10,43,10,47,0],[11,30,11,34,0],[11,35,11,39,0],[12,33,12,37,0],[12,38,12,42,0],[13,36,13,40,0],[13,41,13,45,0],[15,9,15,44,0],[16,9,16,10,0],[17,13,17,39,0],[19,13,19,60,0],[21,13,21,40,0],[21,41,21,48,0],[23,13,23,65,0],[25,13,25,54,0],[26,13,26,56,0],[27,13,27,51,0],[30,13,30,96,0],[31,13,31,14,0],[32,17,32,36,0],[33,13,33,14,0],[35,13,35,14,0],[36,17,36,30,0],[37,13,37,14,0],[39,13,39,60,0],[41,18,41,25,0],[41,27,41,48,0],[41,50,41,53,0],[42,13,42,14,0],[43,17,43,55,0],[47,17,47,118,0],[48,17,48,18,0],[49,21,49,56,0],[51,21,51,38,0],[52,21,52,22,0],[53,25,53,59,0],[54,21,54,22,0],[56,21,56,162,0],[57,17,57,18,0],[58,13,58,14,0],[59,9,59,10,0]]);
    </script>
  </body>
</html>