<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Tom Pipe\Documents\Hexadigital\Code\Umbraco\Umbraco-CMS\src\Umbraco.Core\Persistence\Factories\MemberGroupFactory.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using Umbraco.Core.Models;
using Umbraco.Core.Models.Rdbms;

namespace Umbraco.Core.Persistence.Factories
{
    internal class MemberGroupFactory 
    {
        
        private readonly Guid _nodeObjectTypeId;

        public MemberGroupFactory()
        {
            _nodeObjectTypeId = new Guid(Constants.ObjectTypes.MemberGroup);
        }

        #region Implementation of IEntityFactory&lt;ITemplate,TemplateDto&gt;

        public IMemberGroup BuildEntity(NodeDto dto)
        {
            var group = new MemberGroup();
            
            try
            {
                group.DisableChangeTracking();

                group.CreateDate = dto.CreateDate;
                group.Id = dto.NodeId;
                group.Key = dto.UniqueId;
                group.Name = dto.Text;

                //on initial construction we don&#39;t want to have dirty properties tracked
                // http://issues.umbraco.org/issue/U4-1946
                group.ResetDirtyProperties(false);
                return group;
            }
            finally
            {
                group.EnableChangeTracking();
            }
        }

        public NodeDto BuildDto(IMemberGroup entity)
        {
            var dto = new NodeDto
            {
                CreateDate = entity.CreateDate,
                NodeId = entity.Id,
                Level = 0,
                NodeObjectType = _nodeObjectTypeId,
                ParentId = -1,
                Path = &quot;&quot;,
                SortOrder = 0,
                Text = entity.Name,
                Trashed = false,
                UniqueId = entity.Key,
                UserId = entity.CreatorId
            };

            if (entity.HasIdentity)
            {
                dto.NodeId = entity.Id;
                dto.Path = &quot;-1,&quot; + entity.Id;
            }

            return dto;
        }

        #endregion

    }
}
    </pre>
    <script type="text/javascript">
      highlightRanges([[12,9,12,36,1],[13,9,13,10,1],[14,13,14,77,1],[15,9,15,10,1],[20,9,20,10,1],[21,13,21,43,1],[24,13,24,14,1],[25,17,25,47,1],[27,17,27,51,1],[28,17,28,39,1],[29,17,29,42,1],[30,17,30,39,1],[34,17,34,51,1],[35,17,35,30,1],[38,13,38,14,1],[39,17,39,46,1],[40,13,40,14,1],[41,9,41,10,1],[44,9,44,10,1],[45,13,58,15,1],[60,13,60,36,1],[61,13,61,14,0],[62,17,62,40,0],[63,17,63,46,0],[64,13,64,14,0],[66,13,66,24,1],[67,9,67,10,1]]);
    </script>
  </body>
</html>