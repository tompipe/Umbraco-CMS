<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Tom Pipe\Documents\Hexadigital\Code\Umbraco\Umbraco-CMS\src\Umbraco.Core\Persistence\Migrations\Initial\DatabaseSchemaCreation.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using System.Collections.Generic;
using System.Linq;
using Umbraco.Core.Events;
using Umbraco.Core.Logging;
using Umbraco.Core.Models.Rdbms;
using Umbraco.Core.Persistence.DatabaseModelDefinitions;
using Umbraco.Core.Persistence.SqlSyntax;

namespace Umbraco.Core.Persistence.Migrations.Initial
{
    /// &lt;summary&gt;
    /// Represents the initial database schema creation by running CreateTable for all DTOs against the db.
    /// &lt;/summary&gt;
    internal class DatabaseSchemaCreation
    {
        /// &lt;summary&gt;
        /// Constructor
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;database&quot;&gt;&lt;/param&gt;
        /// &lt;param name=&quot;logger&quot;&gt;&lt;/param&gt;
        /// &lt;param name=&quot;sqlSyntaxProvider&quot;&gt;&lt;/param&gt;
        public DatabaseSchemaCreation(Database database, ILogger logger, ISqlSyntaxProvider sqlSyntaxProvider)
        {
            _database = database;
            _logger = logger;
            _sqlSyntaxProvider = sqlSyntaxProvider;
             _schemaHelper = new DatabaseSchemaHelper(database, logger, sqlSyntaxProvider);
        }

        #region Private Members

        private readonly DatabaseSchemaHelper _schemaHelper;
        private readonly Database _database;
        private readonly ILogger _logger;
        private readonly ISqlSyntaxProvider _sqlSyntaxProvider;

        private static readonly Dictionary&lt;int, Type&gt; OrderedTables = new Dictionary&lt;int, Type&gt;
                                                                          {
                                                                              {0, typeof (NodeDto)},
                                                                              {1, typeof (ContentTypeDto)},
                                                                              {2, typeof (TemplateDto)},
                                                                              {3, typeof (ContentDto)},
                                                                              {4, typeof (ContentVersionDto)},
                                                                              {5, typeof (DocumentDto)},
                                                                              
                                                                              {6, typeof (ContentTypeTemplateDto)},
                                                                              {7, typeof (DataTypeDto)},
                                                                              {8, typeof (DataTypePreValueDto)},
                                                                              {9, typeof (DictionaryDto)},
                                                                              {10, typeof (LanguageDto)},
                                                                              {11, typeof (LanguageTextDto)},
                                                                              {12, typeof (DomainDto)},
                                                                              {13, typeof (LogDto)},
                                                                              {14, typeof (MacroDto)},
                                                                              {15, typeof (MacroPropertyDto)},
                                                                              {16, typeof (MemberTypeDto)},
                                                                              {17, typeof (MemberDto)},
                                                                              {18, typeof (Member2MemberGroupDto)},
                                                                              {19, typeof (ContentXmlDto)},
                                                                              {20, typeof (PreviewXmlDto)},
                                                                              {21, typeof (PropertyTypeGroupDto)},
                                                                              {22, typeof (PropertyTypeDto)},
                                                                              {23, typeof (PropertyDataDto)},
                                                                              {24, typeof (RelationTypeDto)},
                                                                              {25, typeof (RelationDto)},
                                                                              
                                                                              {28, typeof (TagDto)},
                                                                              {29, typeof (TagRelationshipDto)},
                                                                              {31, typeof (UserTypeDto)},
                                                                              {32, typeof (UserDto)},
                                                                              {33, typeof (TaskTypeDto)},
                                                                              {34, typeof (TaskDto)},
                                                                              {35, typeof (ContentType2ContentTypeDto)},
                                                                              {36, typeof (ContentTypeAllowedContentTypeDto)},
                                                                              {37, typeof (User2AppDto)},
                                                                              {38, typeof (User2NodeNotifyDto)},
                                                                              {39, typeof (User2NodePermissionDto)},
                                                                              {40, typeof (ServerRegistrationDto)},
                                                                              {41, typeof (AccessDto)},
                                                                              {42, typeof (AccessRuleDto)},
                                                                              {43, typeof (CacheInstructionDto)},
                                                                              {44, typeof (ExternalLoginDto)},
                                                                              {45, typeof (MigrationDto)},
                                                                              {46, typeof (UmbracoDeployChecksumDto)},
                                                                              {47, typeof (UmbracoDeployDependencyDto)},
                                                                              {48, typeof (RedirectUrlDto) }
                                                                          };
        #endregion
        
        /// &lt;summary&gt;
        /// Drops all Umbraco tables in the db
        /// &lt;/summary&gt;
        internal void UninstallDatabaseSchema()
        {
            _logger.Info&lt;DatabaseSchemaCreation&gt;(&quot;Start UninstallDatabaseSchema&quot;);

            foreach (var item in OrderedTables.OrderByDescending(x =&gt; x.Key))
            {
                var tableNameAttribute = item.Value.FirstAttribute&lt;TableNameAttribute&gt;();

                string tableName = tableNameAttribute == null ? item.Value.Name : tableNameAttribute.Value;

                _logger.Info&lt;DatabaseSchemaCreation&gt;(&quot;Uninstall&quot; + tableName);

                try
                {
                    if (_schemaHelper.TableExist(tableName))
                    {
                        _schemaHelper.DropTable(tableName);    
                    }
                }
                catch (Exception ex)
                {
                    //swallow this for now, not sure how best to handle this with diff databases... though this is internal
                    // and only used for unit tests. If this fails its because the table doesn&#39;t exist... generally!
                    _logger.Error&lt;DatabaseSchemaCreation&gt;(&quot;Could not drop table &quot; + tableName, ex);
                }
            }
        }

       

        /// &lt;summary&gt;
        /// Initialize the database by creating the umbraco db schema
        /// &lt;/summary&gt;
        public void InitializeDatabaseSchema()
        {
            var e = new DatabaseCreationEventArgs();
            FireBeforeCreation(e);

            if (!e.Cancel)
            {
                foreach (var item in OrderedTables.OrderBy(x =&gt; x.Key))
                {
                    _schemaHelper.CreateTable(false, item.Value);
                }
            }

            FireAfterCreation(e);
        }

        /// &lt;summary&gt;
        /// Validates the schema of the current database
        /// &lt;/summary&gt;
        public DatabaseSchemaResult ValidateSchema()
        {
            var result = new DatabaseSchemaResult();

            //get the db index defs
            result.DbIndexDefinitions = _sqlSyntaxProvider.GetDefinedIndexes(_database)
                .Select(x =&gt; new DbIndexDefinition()
                {
                    TableName = x.Item1,
                    IndexName = x.Item2,
                    ColumnName = x.Item3,
                    IsUnique = x.Item4
                }).ToArray();

            foreach (var item in OrderedTables.OrderBy(x =&gt; x.Key))
            {
                var tableDefinition = DefinitionFactory.GetTableDefinition(_sqlSyntaxProvider, item.Value);
                result.TableDefinitions.Add(tableDefinition);
            }

            ValidateDbTables(result);

            ValidateDbColumns(result);

            ValidateDbIndexes(result);

            ValidateDbConstraints(result);

            return result;
        }

        private void ValidateDbConstraints(DatabaseSchemaResult result)
        {
            //MySql doesn&#39;t conform to the &quot;normal&quot; naming of constraints, so there is currently no point in doing these checks.
            //TODO: At a later point we do other checks for MySql, but ideally it should be necessary to do special checks for different providers.
            // ALso note that to get the constraints for MySql we have to open a connection which we currently have not.
            if (_sqlSyntaxProvider is MySqlSyntaxProvider)
                return;

            //Check constraints in configured database against constraints in schema
            var constraintsInDatabase = _sqlSyntaxProvider.GetConstraintsPerColumn(_database).DistinctBy(x =&gt; x.Item3).ToList();
            var foreignKeysInDatabase = constraintsInDatabase.Where(x =&gt; x.Item3.InvariantStartsWith(&quot;FK_&quot;)).Select(x =&gt; x.Item3).ToList();
            var primaryKeysInDatabase = constraintsInDatabase.Where(x =&gt; x.Item3.InvariantStartsWith(&quot;PK_&quot;)).Select(x =&gt; x.Item3).ToList();
            var indexesInDatabase = constraintsInDatabase.Where(x =&gt; x.Item3.InvariantStartsWith(&quot;IX_&quot;)).Select(x =&gt; x.Item3).ToList();
            var indexesInSchema = result.TableDefinitions.SelectMany(x =&gt; x.Indexes.Select(y =&gt; y.Name)).ToList();
            var unknownConstraintsInDatabase =
                constraintsInDatabase.Where(
                    x =&gt;
                    x.Item3.InvariantStartsWith(&quot;FK_&quot;) == false &amp;&amp; x.Item3.InvariantStartsWith(&quot;PK_&quot;) == false &amp;&amp;
                    x.Item3.InvariantStartsWith(&quot;IX_&quot;) == false).Select(x =&gt; x.Item3).ToList();
            var foreignKeysInSchema = result.TableDefinitions.SelectMany(x =&gt; x.ForeignKeys.Select(y =&gt; y.Name)).ToList();
            var primaryKeysInSchema = result.TableDefinitions.SelectMany(x =&gt; x.Columns.Select(y =&gt; y.PrimaryKeyName))
                .Where(x =&gt; x.IsNullOrWhiteSpace() == false).ToList();

            //Add valid and invalid foreign key differences to the result object
            // We&#39;ll need to do invariant contains with case insensitivity because foreign key, primary key, and even index naming w/ MySQL is not standardized
            // In theory you could have: FK_ or fk_ ...or really any standard that your development department (or developer) chooses to use.
            foreach (var unknown in unknownConstraintsInDatabase)
            {
                if (foreignKeysInSchema.InvariantContains(unknown) || primaryKeysInSchema.InvariantContains(unknown) || indexesInSchema.InvariantContains(unknown))
                {
                    result.ValidConstraints.Add(unknown);
                }
                else
                {
                    result.Errors.Add(new Tuple&lt;string, string&gt;(&quot;Unknown&quot;, unknown));
                }
            }

            //Foreign keys:

            var validForeignKeyDifferences = foreignKeysInDatabase.Intersect(foreignKeysInSchema, StringComparer.InvariantCultureIgnoreCase);
            foreach (var foreignKey in validForeignKeyDifferences)
            {
                result.ValidConstraints.Add(foreignKey);
            }
            var invalidForeignKeyDifferences =
                foreignKeysInDatabase.Except(foreignKeysInSchema, StringComparer.InvariantCultureIgnoreCase)
                                .Union(foreignKeysInSchema.Except(foreignKeysInDatabase, StringComparer.InvariantCultureIgnoreCase));
            foreach (var foreignKey in invalidForeignKeyDifferences)
            {
                result.Errors.Add(new Tuple&lt;string, string&gt;(&quot;Constraint&quot;, foreignKey));
            }


            //Primary keys:

            //Add valid and invalid primary key differences to the result object
            var validPrimaryKeyDifferences = primaryKeysInDatabase.Intersect(primaryKeysInSchema, StringComparer.InvariantCultureIgnoreCase);
            foreach (var primaryKey in validPrimaryKeyDifferences)
            {
                result.ValidConstraints.Add(primaryKey);
            }
            var invalidPrimaryKeyDifferences =
                primaryKeysInDatabase.Except(primaryKeysInSchema, StringComparer.InvariantCultureIgnoreCase)
                                .Union(primaryKeysInSchema.Except(primaryKeysInDatabase, StringComparer.InvariantCultureIgnoreCase));
            foreach (var primaryKey in invalidPrimaryKeyDifferences)
            {
                result.Errors.Add(new Tuple&lt;string, string&gt;(&quot;Constraint&quot;, primaryKey));
            }

            //Constaints:

            //NOTE: SD: The colIndex checks above should really take care of this but I need to keep this here because it was here before
            // and some schema validation checks might rely on this data remaining here!
            //Add valid and invalid index differences to the result object
            var validIndexDifferences = indexesInDatabase.Intersect(indexesInSchema, StringComparer.InvariantCultureIgnoreCase);
            foreach (var index in validIndexDifferences)
            {
                result.ValidConstraints.Add(index);
            }
            var invalidIndexDifferences =
                indexesInDatabase.Except(indexesInSchema, StringComparer.InvariantCultureIgnoreCase)
                                .Union(indexesInSchema.Except(indexesInDatabase, StringComparer.InvariantCultureIgnoreCase));
            foreach (var index in invalidIndexDifferences)
            {
                result.Errors.Add(new Tuple&lt;string, string&gt;(&quot;Constraint&quot;, index));
            }
        }

        private void ValidateDbColumns(DatabaseSchemaResult result)
        {
            //Check columns in configured database against columns in schema
            var columnsInDatabase = _sqlSyntaxProvider.GetColumnsInSchema(_database);
            var columnsPerTableInDatabase = columnsInDatabase.Select(x =&gt; string.Concat(x.TableName, &quot;,&quot;, x.ColumnName)).ToList();
            var columnsPerTableInSchema = result.TableDefinitions.SelectMany(x =&gt; x.Columns.Select(y =&gt; string.Concat(y.TableName, &quot;,&quot;, y.Name))).ToList();
            //Add valid and invalid column differences to the result object
            var validColumnDifferences = columnsPerTableInDatabase.Intersect(columnsPerTableInSchema, StringComparer.InvariantCultureIgnoreCase);
            foreach (var column in validColumnDifferences)
            {
                result.ValidColumns.Add(column);
            }

            var invalidColumnDifferences =
                columnsPerTableInDatabase.Except(columnsPerTableInSchema, StringComparer.InvariantCultureIgnoreCase)
                                .Union(columnsPerTableInSchema.Except(columnsPerTableInDatabase, StringComparer.InvariantCultureIgnoreCase));
            foreach (var column in invalidColumnDifferences)
            {
                result.Errors.Add(new Tuple&lt;string, string&gt;(&quot;Column&quot;, column));
            }
        }

        private void ValidateDbTables(DatabaseSchemaResult result)
        {
            //Check tables in configured database against tables in schema
            var tablesInDatabase = _sqlSyntaxProvider.GetTablesInSchema(_database).ToList();
            var tablesInSchema = result.TableDefinitions.Select(x =&gt; x.Name).ToList();
            //Add valid and invalid table differences to the result object
            var validTableDifferences = tablesInDatabase.Intersect(tablesInSchema, StringComparer.InvariantCultureIgnoreCase);
            foreach (var tableName in validTableDifferences)
            {
                result.ValidTables.Add(tableName);
            }

            var invalidTableDifferences =
                tablesInDatabase.Except(tablesInSchema, StringComparer.InvariantCultureIgnoreCase)
                                .Union(tablesInSchema.Except(tablesInDatabase, StringComparer.InvariantCultureIgnoreCase));
            foreach (var tableName in invalidTableDifferences)
            {
                result.Errors.Add(new Tuple&lt;string, string&gt;(&quot;Table&quot;, tableName));
            }
        }

        private void ValidateDbIndexes(DatabaseSchemaResult result)
        {
            //These are just column indexes NOT constraints or Keys
            //var colIndexesInDatabase = result.DbIndexDefinitions.Where(x =&gt; x.IndexName.InvariantStartsWith(&quot;IX_&quot;)).Select(x =&gt; x.IndexName).ToList();
            var colIndexesInDatabase = result.DbIndexDefinitions.Select(x =&gt; x.IndexName).ToList();
            var indexesInSchema = result.TableDefinitions.SelectMany(x =&gt; x.Indexes.Select(y =&gt; y.Name)).ToList();

            //Add valid and invalid index differences to the result object
            var validColIndexDifferences = colIndexesInDatabase.Intersect(indexesInSchema, StringComparer.InvariantCultureIgnoreCase);
            foreach (var index in validColIndexDifferences)
            {
                result.ValidIndexes.Add(index);
            }

            var invalidColIndexDifferences =
                colIndexesInDatabase.Except(indexesInSchema, StringComparer.InvariantCultureIgnoreCase)
                                .Union(indexesInSchema.Except(colIndexesInDatabase, StringComparer.InvariantCultureIgnoreCase));
            foreach (var index in invalidColIndexDifferences)
            {
                result.Errors.Add(new Tuple&lt;string, string&gt;(&quot;Index&quot;, index));
            }
        }

        #region Events

        /// &lt;summary&gt;
        /// The save event handler
        /// &lt;/summary&gt;
        internal delegate void DatabaseEventHandler(DatabaseCreationEventArgs e);

        /// &lt;summary&gt;
        /// Occurs when [before save].
        /// &lt;/summary&gt;
        internal static event DatabaseEventHandler BeforeCreation;
        /// &lt;summary&gt;
        /// Raises the &lt;see cref=&quot;BeforeCreation&quot;/&gt; event.
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;e&quot;&gt;The &lt;see cref=&quot;System.EventArgs&quot;/&gt; instance containing the event data.&lt;/param&gt;
        protected internal virtual void FireBeforeCreation(DatabaseCreationEventArgs e)
        {
            if (BeforeCreation != null)
            {
                BeforeCreation(e);
            }
        }

        /// &lt;summary&gt;
        /// Occurs when [after save].
        /// &lt;/summary&gt;
        internal static event DatabaseEventHandler AfterCreation;
        /// &lt;summary&gt;
        /// Raises the &lt;see cref=&quot;AfterCreation&quot;/&gt; event.
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;e&quot;&gt;The &lt;see cref=&quot;System.EventArgs&quot;/&gt; instance containing the event data.&lt;/param&gt;
        protected virtual void FireAfterCreation(DatabaseCreationEventArgs e)
        {
            if (AfterCreation != null)
            {
                AfterCreation(e);
            }
        }

        #endregion
    }
}
    </pre>
    <script type="text/javascript">
      highlightRanges([[23,9,23,111,1],[24,9,24,10,1],[25,13,25,34,1],[26,13,26,30,1],[27,13,27,52,1],[28,14,28,92,1],[29,9,29,10,1],[38,9,88,77,1],[95,9,95,10,0],[96,13,96,83,0],[98,13,98,20,0],[98,22,98,30,0],[98,31,98,33,0],[98,34,98,71,0],[98,71,98,76,0],[98,76,98,77,0],[98,34,98,77,0],[99,13,99,14,0],[100,17,100,90,0],[102,17,102,108,0],[104,17,104,79,0],[107,17,107,18,0],[108,21,108,61,0],[109,21,109,22,0],[110,25,110,60,0],[111,21,111,22,0],[112,17,112,18,0],[113,17,113,37,0],[114,17,114,18,0],[117,21,117,100,0],[118,17,118,18,0],[119,13,119,14,0],[120,9,120,10,0],[128,9,128,10,1],[129,13,129,53,1],[130,13,130,35,1],[132,13,132,27,1],[133,13,133,14,1],[134,17,134,24,1],[134,26,134,34,1],[134,35,134,37,1],[134,38,134,65,1],[134,65,134,70,1],[134,70,134,71,1],[134,38,134,71,1],[135,17,135,18,1],[136,21,136,66,1],[137,17,137,18,1],[138,13,138,14,1],[140,13,140,34,1],[141,9,141,10,1],[147,9,147,10,1],[148,13,148,53,1],[151,13,152,30,1],[152,30,158,18,1],[158,18,158,30,1],[151,13,158,30,1],[160,13,160,20,1],[160,22,160,30,1],[160,31,160,33,1],[160,34,160,61,1],[160,61,160,66,1],[160,66,160,67,1],[160,34,160,67,1],[161,13,161,14,1],[162,17,162,108,1],[163,17,163,62,1],[164,13,164,14,1],[166,13,166,38,1],[168,13,168,39,1],[170,13,170,39,1],[172,13,172,43,1],[174,13,174,27,1],[175,9,175,10,1],[178,9,178,10,1],[182,13,182,59,1],[183,17,183,24,0],[186,13,186,111,1],[186,111,186,118,1],[186,118,186,129,1],[186,13,186,129,1],[187,13,187,74,1],[187,74,187,108,1],[187,108,187,122,1],[187,122,187,129,1],[187,129,187,140,1],[187,13,187,140,1],[188,13,188,74,1],[188,74,188,108,1],[188,108,188,122,1],[188,122,188,129,1],[188,129,188,140,1],[188,13,188,140,1],[189,13,189,70,1],[189,70,189,104,1],[189,104,189,118,1],[189,118,189,125,1],[189,125,189,136,1],[189,13,189,136,1],[190,13,190,75,1],[190,75,190,97,1],[190,97,190,103,1],[190,103,190,104,1],[190,75,190,104,1],[190,104,190,115,1],[190,13,190,115,1],[191,13,194,21,1],[194,21,195,64,1],[195,64,195,78,1],[195,78,195,85,0],[195,85,195,96,1],[191,13,195,96,1],[196,13,196,79,1],[196,79,196,105,1],[196,105,196,111,1],[196,111,196,112,1],[196,79,196,112,1],[196,112,196,123,1],[196,13,196,123,1],[197,13,197,79,1],[197,79,197,101,1],[197,101,197,117,1],[197,117,197,118,1],[197,79,197,118,1],[197,118,198,29,1],[198,29,198,60,1],[198,60,198,71,1],[197,13,198,71,1],[203,13,203,20,1],[203,22,203,33,0],[203,34,203,36,1],[203,37,203,65,1],[204,13,204,14,0],[205,17,205,164,0],[206,17,206,18,0],[207,21,207,58,0],[208,17,208,18,0],[210,17,210,18,0],[211,21,211,86,0],[212,17,212,18,0],[213,13,213,14,0],[217,13,217,142,1],[218,13,218,20,1],[218,22,218,36,1],[218,37,218,39,1],[218,40,218,66,1],[219,13,219,14,1],[220,17,220,57,1],[221,13,221,14,1],[222,13,224,134,1],[225,13,225,20,1],[225,22,225,36,1],[225,37,225,39,1],[225,40,225,68,1],[226,13,226,14,1],[227,17,227,88,1],[228,13,228,14,1],[234,13,234,142,1],[235,13,235,20,1],[235,22,235,36,1],[235,37,235,39,1],[235,40,235,66,1],[236,13,236,14,1],[237,17,237,57,1],[238,13,238,14,1],[239,13,241,134,1],[242,13,242,20,1],[242,22,242,36,1],[242,37,242,39,1],[242,40,242,68,1],[243,13,243,14,1],[244,17,244,88,1],[245,13,245,14,1],[252,13,252,129,1],[253,13,253,20,1],[253,22,253,31,1],[253,32,253,34,1],[253,35,253,56,1],[254,13,254,14,1],[255,17,255,52,1],[256,13,256,14,1],[257,13,259,126,1],[260,13,260,20,1],[260,22,260,31,1],[260,32,260,34,1],[260,35,260,58,1],[261,13,261,14,1],[262,17,262,83,1],[263,13,263,14,1],[264,9,264,10,1],[267,9,267,10,1],[269,13,269,86,1],[270,13,270,75,1],[270,75,270,120,1],[270,120,270,131,1],[270,13,270,131,1],[271,13,271,83,1],[271,83,271,105,1],[271,105,271,144,1],[271,144,271,145,1],[271,83,271,145,1],[271,145,271,156,1],[271,13,271,156,1],[273,13,273,146,1],[274,13,274,20,1],[274,22,274,32,1],[274,33,274,35,1],[274,36,274,58,1],[275,13,275,14,1],[276,17,276,49,1],[277,13,277,14,1],[279,13,281,142,1],[282,13,282,20,1],[282,22,282,32,1],[282,33,282,35,1],[282,36,282,60,1],[283,13,283,14,1],[284,17,284,80,1],[285,13,285,14,1],[286,9,286,10,1],[289,9,289,10,1],[291,13,291,93,1],[292,13,292,70,1],[292,70,292,76,1],[292,76,292,87,1],[292,13,292,87,1],[294,13,294,127,1],[295,13,295,20,1],[295,22,295,35,1],[295,36,295,38,1],[295,39,295,60,1],[296,13,296,14,1],[297,17,297,51,1],[298,13,298,14,1],[300,13,302,124,1],[303,13,303,20,1],[303,22,303,35,1],[303,36,303,38,1],[303,39,303,62,1],[304,13,304,14,1],[305,17,305,82,1],[306,13,306,14,1],[307,9,307,10,1],[310,9,310,10,1],[313,13,313,78,1],[313,78,313,89,1],[313,89,313,100,1],[313,13,313,100,1],[314,13,314,75,1],[314,75,314,97,1],[314,97,314,103,1],[314,103,314,104,1],[314,75,314,104,1],[314,104,314,115,1],[314,13,314,115,1],[317,13,317,135,1],[318,13,318,20,1],[318,22,318,31,1],[318,32,318,34,1],[318,35,318,59,1],[319,13,319,14,1],[320,17,320,48,1],[321,13,321,14,1],[323,13,325,129,1],[326,13,326,20,1],[326,22,326,31,1],[326,32,326,34,1],[326,35,326,61,1],[327,13,327,14,1],[328,17,328,78,1],[329,13,329,14,1],[330,9,330,10,1],[348,9,348,10,1],[349,13,349,40,1],[350,13,350,14,0],[351,17,351,35,0],[352,13,352,14,0],[353,9,353,10,1],[364,9,364,10,1],[365,13,365,39,1],[366,13,366,14,0],[367,17,367,34,0],[368,13,368,14,0],[369,9,369,10,1]]);
    </script>
  </body>
</html>