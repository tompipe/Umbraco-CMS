<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Tom Pipe\Documents\Hexadigital\Code\Umbraco\Umbraco-CMS\src\Umbraco.Web\umbraco.presentation\umbraco\dialogs\RegexWs.aspx.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using System.Data;
using System.Configuration;
using System.Collections;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Web.UI.HtmlControls;

namespace umbraco.presentation.dialogs {
    public partial class RegexWs : BasePages.UmbracoEnsuredPage {
        private DataSet ds = new DataSet();

        public RegexWs()
        {
            CurrentApp = BusinessLogic.DefaultApps.settings.ToString();

        }

        protected void Page_Load(object sender, EventArgs e) {
            pp_search.Text = ui.Text(&quot;general&quot;, &quot;search&quot;);
            bt_search.Text = ui.Text(&quot;general&quot;, &quot;search&quot;);
        }

        protected void findRegex(object sender, EventArgs e) {
            regexPanel.Visible = true;

            try {

                ds.Tables.Clear();

                webservices.RegexComWebservice regexLib = new global::umbraco.presentation.webservices.RegexComWebservice();
                ds = regexLib.listRegExp(searchField.Text, &quot;&quot;, 0, 10);
                
                results.DataSource = ds;
                results.DataBind();
                
                regexLib.Dispose();
                ds.Clear();
                ds.Dispose();
            } catch{
                Literal err = new Literal();
                err.Text = &quot;&lt;div class=&#39;diff&#39;&gt;&lt;p&gt;&quot; + ui.Text(&quot;defaultdialogs&quot;, &quot;regexSearchError&quot;) + &quot;&lt;/p&gt;&lt;/div&gt;&quot;;
                regexPanel.Controls.Clear();
                regexPanel.Controls.Add(err);
            }
        }

        protected void onRegexBind(object sender, RepeaterItemEventArgs e) {
            if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem) {
                DataRowView drw = (DataRowView)e.Item.DataItem;

                Literal _header = (Literal)e.Item.FindControl(&quot;header&quot;);
                Literal _desc = (Literal)e.Item.FindControl(&quot;desc&quot;);
                Literal _regex = (Literal)e.Item.FindControl(&quot;regex&quot;);
               
                _header.Text = &quot;&lt;a href=\&quot;javascript:chooseRegex(&#39;&quot; + drw[&quot;expression&quot;].ToString().Replace(&quot;\\&quot;,&quot;\\\\&quot;) + &quot;&#39;);\&quot;&gt;&quot; +  drw[&quot;Title&quot;].ToString() + &quot;&lt;/a&gt;&quot;;
                _desc.Text = drw[&quot;description&quot;].ToString();
                _regex.Text = drw[&quot;expression&quot;].ToString().Trim();
               
            }
        }

    }
}

    </pre>
    <script type="text/javascript">
      highlightRanges([[14,9,14,44,0],[16,9,16,25,0],[17,9,17,10,0],[18,13,18,72,0],[20,9,20,10,0],[22,62,22,63,0],[23,13,23,59,0],[24,13,24,59,0],[25,9,25,10,0],[27,62,27,63,0],[28,13,28,39,0],[30,17,30,18,0],[32,17,32,35,0],[34,17,34,125,0],[35,17,35,71,0],[37,17,37,41,0],[38,17,38,36,0],[40,17,40,36,0],[41,17,41,28,0],[42,17,42,30,0],[43,13,43,14,0],[43,15,43,20,0],[43,20,43,21,0],[44,17,44,45,0],[45,17,45,115,0],[46,17,46,45,0],[47,17,47,46,0],[48,13,48,14,0],[49,9,49,10,0],[51,76,51,77,0],[52,13,52,105,0],[52,106,52,107,0],[53,17,53,64,0],[55,17,55,73,0],[56,17,56,69,0],[57,17,57,71,0],[59,17,59,168,0],[60,17,60,60,0],[61,17,61,67,0],[63,13,63,14,0],[64,9,64,10,0]]);
    </script>
  </body>
</html>