<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Tom Pipe\Documents\Hexadigital\Code\Umbraco\Umbraco-CMS\src\umbraco.datalayer\SqlHelpers\SqlServer\SqlServerInstaller.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
/************************************************************************************
 * 
 *  Umbraco Data Layer
 *  MIT Licensed work
 *  ï¿½2008 Ruben Verborgh
 * 
 ***********************************************************************************/

using System;
using System.Resources;
using umbraco.DataLayer.Utility.Installer;

namespace umbraco.DataLayer.SqlHelpers.SqlServer
{
    /// &lt;summary&gt;
    /// Database installer for an SQL Server data source.
    /// &lt;/summary&gt;
    [Obsolete(&quot;This is not used and will be removed in future versions&quot;)]
    public class SqlServerInstaller : DefaultInstallerUtility&lt;SqlServerHelper&gt;
    {
        #region Private Constants
       
        /// &lt;summary&gt;The latest database version this installer supports.&lt;/summary&gt;
        private const DatabaseVersion LatestVersionSupported = DatabaseVersion.Version4_8;

        /// &lt;summary&gt;The specifications to determine the database version.&lt;/summary&gt;
        private static readonly VersionSpecs[] m_VersionSpecs = new VersionSpecs[] {
					new VersionSpecs(&quot;SELECT CONSTRAINT_NAME FROM INFORMATION_SCHEMA.REFERENTIAL_CONSTRAINTS LEFT OUTER JOIN umbracoApp ON appAlias = appAlias WHERE CONSTRAINT_NAME = &#39;FK_umbracoUser2app_umbracoApp&#39;&quot;, 0, DatabaseVersion.Version4_8), 
					new VersionSpecs(&quot;SELECT id FROM umbracoNode WHERE id = -21&quot;, 1, DatabaseVersion.Version4_1),        
					new VersionSpecs(&quot;SELECT action FROM umbracoAppTree&quot;, DatabaseVersion.Version4),
                    new VersionSpecs(&quot;SELECT description FROM cmsContentType&quot;, DatabaseVersion.Version3),
                    new VersionSpecs(&quot;SELECT id FROM sysobjects&quot;, DatabaseVersion.None) };

        #endregion

        #region Public Properties

        /// &lt;summary&gt;
        /// Gets a value indicating whether the installer can upgrade the data source.
        /// &lt;/summary&gt;
        /// &lt;value&gt;
        /// 	&lt;c&gt;true&lt;/c&gt; if the installer can upgrade the data source; otherwise, &lt;c&gt;false&lt;/c&gt;.
        /// &lt;/value&gt;
        /// &lt;remarks&gt;Empty data sources can&#39;t be upgraded, just installed.&lt;/remarks&gt;
        public override bool CanUpgrade
        {
            get
            {
                return CurrentVersion == DatabaseVersion.Version4_1;
            }
        }

        #endregion

        #region Protected Properties

        /// &lt;summary&gt;
        /// Gets the version specification for evaluation by DetermineCurrentVersion.
        /// Only first matching specification is taken into account.
        /// &lt;/summary&gt;
        /// &lt;value&gt;The version specifications.&lt;/value&gt;
        protected override VersionSpecs[] VersionSpecs
        {
            get { return m_VersionSpecs; }
        }

        #endregion

        #region Public Constructors

        /// &lt;summary&gt;
        /// Initializes a new instance of the &lt;see cref=&quot;SqlServerInstaller&quot;/&gt; class.
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;sqlHelper&quot;&gt;The SQL helper.&lt;/param&gt;
        public SqlServerInstaller(SqlServerHelper sqlHelper) : base(sqlHelper, LatestVersionSupported)
        { }

        #endregion

        #region DefaultInstaller Members       

		/// &lt;summary&gt;
		/// Returns the sql to do a full install
		/// &lt;/summary&gt;
		protected override string FullInstallSql
		{
			get { return string.Empty; }
		}

		/// &lt;summary&gt;
		/// Returns the sql to do an upgrade
		/// &lt;/summary&gt;
		protected override string UpgradeSql
		{
			get { return string.Empty; }
		}		

        #endregion
    }
}

    </pre>
    <script type="text/javascript">
      highlightRanges([[27,9,32,91,0],[48,13,48,14,0],[49,17,49,69,0],[50,13,50,14,0],[64,17,64,18,0],[64,19,64,41,0],[64,42,64,43,0],[75,64,75,103,0],[76,9,76,10,0],[76,11,76,12,0],[87,8,87,9,0],[87,10,87,30,0],[87,31,87,32,0],[95,8,95,9,0],[95,10,95,30,0],[95,31,95,32,0]]);
    </script>
  </body>
</html>