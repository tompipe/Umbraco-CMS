<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Tom Pipe\Documents\Hexadigital\Code\Umbraco\Umbraco-CMS\src\Umbraco.Core\Persistence\Mappers\UserMapper.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using System.Collections.Concurrent;
using System.Linq.Expressions;
using Umbraco.Core.Models.Identity;
using Umbraco.Core.Models.Membership;
using Umbraco.Core.Models.Rdbms;

namespace Umbraco.Core.Persistence.Mappers
{
    [MapperFor(typeof(IIdentityUserLogin))]
    [MapperFor(typeof(IdentityUserLogin))]
    public sealed class ExternalLoginMapper : BaseMapper
    {
        private static readonly ConcurrentDictionary&lt;string, DtoMapModel&gt; PropertyInfoCacheInstance = new ConcurrentDictionary&lt;string, DtoMapModel&gt;();
        public ExternalLoginMapper()
        {
            BuildMap();
        }

        #region Overrides of BaseMapper

        internal override ConcurrentDictionary&lt;string, DtoMapModel&gt; PropertyInfoCache
        {
            get { return PropertyInfoCacheInstance; }
        }

        internal override void BuildMap()
        {
            CacheMap&lt;IdentityUserLogin, ExternalLoginDto&gt;(src =&gt; src.Id, dto =&gt; dto.Id);
            CacheMap&lt;IdentityUserLogin, ExternalLoginDto&gt;(src =&gt; src.CreateDate, dto =&gt; dto.CreateDate);
            CacheMap&lt;IdentityUserLogin, ExternalLoginDto&gt;(src =&gt; src.LoginProvider, dto =&gt; dto.LoginProvider);
            CacheMap&lt;IdentityUserLogin, ExternalLoginDto&gt;(src =&gt; src.ProviderKey, dto =&gt; dto.ProviderKey);
            CacheMap&lt;IdentityUserLogin, ExternalLoginDto&gt;(src =&gt; src.UserId, dto =&gt; dto.UserId);
        }

        #endregion
    }

    [MapperFor(typeof(IUser))]
    [MapperFor(typeof(User))]
    public sealed class UserMapper : BaseMapper
    {
        private static readonly ConcurrentDictionary&lt;string, DtoMapModel&gt; PropertyInfoCacheInstance = new ConcurrentDictionary&lt;string, DtoMapModel&gt;();

        //NOTE: its an internal class but the ctor must be public since we&#39;re using Activator.CreateInstance to create it
        // otherwise that would fail because there is no public constructor.
        public UserMapper()
        {
            BuildMap();
        }

        #region Overrides of BaseMapper

        internal override ConcurrentDictionary&lt;string, DtoMapModel&gt; PropertyInfoCache
        {
            get { return PropertyInfoCacheInstance; }
        }

        internal override void BuildMap()
        {
            CacheMap&lt;User, UserDto&gt;(src =&gt; src.Id, dto =&gt; dto.Id);
            CacheMap&lt;User, UserDto&gt;(src =&gt; src.Email, dto =&gt; dto.Email);
            CacheMap&lt;User, UserDto&gt;(src =&gt; src.Username, dto =&gt; dto.Login);
            CacheMap&lt;User, UserDto&gt;(src =&gt; src.RawPasswordValue, dto =&gt; dto.Password);
            CacheMap&lt;User, UserDto&gt;(src =&gt; src.Name, dto =&gt; dto.UserName);
            //NOTE: This column in the db is *not* used!
            //CacheMap&lt;User, UserDto&gt;(src =&gt; src.DefaultPermissions, dto =&gt; dto.DefaultPermissions);
            CacheMap&lt;User, UserDto&gt;(src =&gt; src.StartMediaId, dto =&gt; dto.MediaStartId);
            CacheMap&lt;User, UserDto&gt;(src =&gt; src.StartContentId, dto =&gt; dto.ContentStartId);
            CacheMap&lt;User, UserDto&gt;(src =&gt; src.IsApproved, dto =&gt; dto.Disabled);
            CacheMap&lt;User, UserDto&gt;(src =&gt; src.IsLockedOut, dto =&gt; dto.NoConsole);
            CacheMap&lt;User, UserDto&gt;(src =&gt; src.UserType, dto =&gt; dto.Type);
            CacheMap&lt;User, UserDto&gt;(src =&gt; src.Language, dto =&gt; dto.UserLanguage);
        }

        #endregion
    }
}
    </pre>
    <script type="text/javascript">
      highlightRanges([[14,9,14,151,1],[15,9,15,37,1],[16,9,16,10,1],[17,13,17,24,1],[18,9,18,10,1],[24,17,24,18,1],[24,19,24,52,1],[24,53,24,54,1],[28,9,28,10,1],[29,13,29,89,1],[30,13,30,105,1],[31,13,31,111,1],[32,13,32,107,1],[33,13,33,97,1],[34,9,34,10,1],[43,9,43,151,1],[47,9,47,28,1],[48,9,48,10,1],[49,13,49,24,1],[50,9,50,10,1],[56,17,56,18,1],[56,19,56,52,1],[56,53,56,54,1],[60,9,60,10,1],[61,13,61,67,1],[62,13,62,73,1],[63,13,63,76,1],[64,13,64,87,1],[65,13,65,75,1],[68,13,68,87,1],[69,13,69,91,1],[70,13,70,81,1],[71,13,71,83,1],[72,13,72,75,1],[73,13,73,83,1],[74,9,74,10,1]]);
    </script>
  </body>
</html>