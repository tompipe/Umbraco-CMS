<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Tom Pipe\Documents\Hexadigital\Code\Umbraco\Umbraco-CMS\src\Umbraco.Tests\Packaging\PackageInstallationTest.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using Moq;
using NUnit.Framework;
using Umbraco.Core;
using Umbraco.Core.Packaging;
using Umbraco.Core.Packaging.Models;
using Umbraco.Core.Services;

namespace Umbraco.Tests.Packaging
{
    [TestFixture]
    public class PackageInstallationTest
    {
        private const string Xml = @&quot;&lt;?xml version=&quot;&quot;1.0&quot;&quot; encoding=&quot;&quot;UTF-8&quot;&quot; standalone=&quot;&quot;no&quot;&quot;?&gt;
&lt;umbPackage&gt;
  &lt;files&gt;
   &lt;file&gt;&lt;guid&gt;095e064b-ba4d-442d-9006-3050983c13d8.dll&lt;/guid&gt;&lt;orgPath&gt;/bin&lt;/orgPath&gt;&lt;orgName&gt;Auros.DocumentTypePicker.dll&lt;/orgName&gt;&lt;/file&gt;&lt;/files&gt;
  &lt;info&gt;
    &lt;package&gt;
      &lt;name&gt;Document Type Picker&lt;/name&gt;
      &lt;version&gt;1.1&lt;/version&gt;
      &lt;license url=&quot;&quot;http://www.opensource.org/licenses/mit-license.php&quot;&quot;&gt;MIT&lt;/license&gt;
      &lt;url&gt;http://www.auros.co.uk&lt;/url&gt;
      &lt;requirements&gt;
        &lt;major&gt;3&lt;/major&gt;
        &lt;minor&gt;0&lt;/minor&gt;
        &lt;patch&gt;0&lt;/patch&gt;
      &lt;/requirements&gt;
    &lt;/package&gt;
    &lt;author&gt;
      &lt;name&gt;@tentonipete&lt;/name&gt;
      &lt;website&gt;auros.co.uk&lt;/website&gt;
    &lt;/author&gt;
    &lt;readme&gt;
      &lt;![CDATA[Document Type Picker datatype that enables back office user to select one or many document types.]]&gt;
    &lt;/readme&gt;
  &lt;/info&gt;
  &lt;DocumentTypes /&gt;
  &lt;Templates /&gt;
  &lt;Stylesheets /&gt;
  &lt;Macros /&gt;
  &lt;DictionaryItems /&gt;
  &lt;Languages /&gt;
  &lt;DataTypes&gt;
    &lt;DataType Name=&quot;&quot;Document Type Picker&quot;&quot; Id=&quot;&quot;790aff36-7fed-47fb-8bcd-9c91ce43ba24&quot;&quot; Definition=&quot;&quot;3593d8e7-8b35-47b9-beda-5e830ca8c93c&quot;&quot; /&gt;
  &lt;/DataTypes&gt;
&lt;/umbPackage&gt;&quot;;

        [Test]
        public void Test()
        {
            // Arrange
            const string pagePath = &quot;Test.umb&quot;;

            var packageExtraction = new Mock&lt;IPackageExtraction&gt;();

            string test;
            packageExtraction.Setup(a =&gt; a.ReadTextFileFromArchive(pagePath, Constants.Packaging.PackageXmlFileName, out test)).Returns(Xml);
            
            var fileService = new Mock&lt;IFileService&gt;();
            var macroService = new Mock&lt;IMacroService&gt;();
            var packagingService = new Mock&lt;IPackagingService&gt;();

            var sut = new PackageInstallation(packagingService.Object, macroService.Object, fileService.Object, packageExtraction.Object);

            // Act
            InstallationSummary installationSummary = sut.InstallPackage(pagePath, -1);

            // Assert
            Assert.IsNotNull(installationSummary);
            //Assert.Inconclusive(&quot;Lots of more tests can be written&quot;);
        }

    }
}

    </pre>
    <script type="text/javascript">
      highlightRanges([[50,9,50,10,1],[54,13,54,68,1],[57,13,57,142,1],[59,13,59,56,1],[60,13,60,58,1],[61,13,61,66,1],[63,13,63,139,1],[66,13,66,88,1],[69,13,69,51,1],[71,9,71,10,1]]);
    </script>
  </body>
</html>