<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Tom Pipe\Documents\Hexadigital\Code\Umbraco\Umbraco-CMS\src\Umbraco.Core\Persistence\FaultHandling\Strategies\FixedInterval.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;

namespace Umbraco.Core.Persistence.FaultHandling.Strategies
{
    /// &lt;summary&gt;
    /// A retry strategy with a specified number of retry attempts and a default fixed time interval between retries.
    /// &lt;/summary&gt;
    public class FixedInterval : RetryStrategy
    {
        private readonly int retryCount;
        private readonly TimeSpan retryInterval;

        /// &lt;summary&gt;
        /// Initializes a new instance of the &lt;see cref=&quot;FixedInterval&quot;/&gt; class. 
        /// &lt;/summary&gt;
        public FixedInterval()
            : this(DefaultClientRetryCount)
        {
        }

        /// &lt;summary&gt;
        /// Initializes a new instance of the &lt;see cref=&quot;FixedInterval&quot;/&gt; class. 
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;retryCount&quot;&gt;The number of retry attempts.&lt;/param&gt;
        public FixedInterval(int retryCount)
            : this(retryCount, DefaultRetryInterval)
        {
        }

        /// &lt;summary&gt;
        /// Initializes a new instance of the &lt;see cref=&quot;FixedInterval&quot;/&gt; class. 
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;retryCount&quot;&gt;The number of retry attempts.&lt;/param&gt;
        /// &lt;param name=&quot;retryInterval&quot;&gt;The time interval between retries.&lt;/param&gt;
        public FixedInterval(int retryCount, TimeSpan retryInterval)
            : this(null, retryCount, retryInterval, DefaultFirstFastRetry)
        {
        }

        /// &lt;summary&gt;
        /// Initializes a new instance of the &lt;see cref=&quot;FixedInterval&quot;/&gt; class. 
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;name&quot;&gt;The retry strategy name.&lt;/param&gt;
        /// &lt;param name=&quot;retryCount&quot;&gt;The number of retry attempts.&lt;/param&gt;
        /// &lt;param name=&quot;retryInterval&quot;&gt;The time interval between retries.&lt;/param&gt;
        public FixedInterval(string name, int retryCount, TimeSpan retryInterval)
            : this(name, retryCount, retryInterval, DefaultFirstFastRetry)
        {
        }

        /// &lt;summary&gt;
        /// Initializes a new instance of the &lt;see cref=&quot;FixedInterval&quot;/&gt; class. 
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;name&quot;&gt;The retry strategy name.&lt;/param&gt;
        /// &lt;param name=&quot;retryCount&quot;&gt;The number of retry attempts.&lt;/param&gt;
        /// &lt;param name=&quot;retryInterval&quot;&gt;The time interval between retries.&lt;/param&gt;
        /// &lt;param name=&quot;firstFastRetry&quot;&gt;a value indicating whether or not the very first retry attempt will be made immediately whereas the subsequent retries will remain subject to retry interval.&lt;/param&gt;
        public FixedInterval(string name, int retryCount, TimeSpan retryInterval, bool firstFastRetry)
            : base(name, firstFastRetry)
        {
            //Guard.ArgumentNotNegativeValue(retryCount, &quot;retryCount&quot;);
            //Guard.ArgumentNotNegativeValue(retryInterval.Ticks, &quot;retryInterval&quot;);

            this.retryCount = retryCount;
            this.retryInterval = retryInterval;
        }

        /// &lt;summary&gt;
        /// Returns the corresponding ShouldRetry delegate.
        /// &lt;/summary&gt;
        /// &lt;returns&gt;The ShouldRetry delegate.&lt;/returns&gt;
        public override ShouldRetry GetShouldRetry()
        {
            if (this.retryCount == 0)
            {
                return delegate(int currentRetryCount, Exception lastException, out TimeSpan interval)
                {
                    interval = TimeSpan.Zero;
                    return false;
                };
            }

            return delegate(int currentRetryCount, Exception lastException, out TimeSpan interval)
            {
                if (currentRetryCount &lt; this.retryCount)
                {
                    interval = this.retryInterval;
                    return true;
                }

                interval = TimeSpan.Zero;
                return false;
            };
        }
    }
}
    </pre>
    <script type="text/javascript">
      highlightRanges([[17,15,17,44,1],[18,9,18,10,1],[19,9,19,10,1],[26,15,26,53,1],[27,9,27,10,1],[28,9,28,10,1],[36,15,36,75,1],[37,9,37,10,1],[38,9,38,10,1],[47,15,47,75,0],[48,9,48,10,0],[49,9,49,10,0],[59,15,59,41,1],[60,9,60,10,1],[64,13,64,42,1],[65,13,65,48,1],[66,9,66,10,1],[73,9,73,10,1],[74,13,74,38,1],[75,13,75,14,0],[76,17,77,17,0],[77,17,77,18,0],[77,18,78,21,0],[78,21,78,46,0],[78,46,79,21,0],[79,21,79,34,0],[79,34,80,17,0],[80,17,80,18,0],[80,18,80,19,0],[76,17,80,19,0],[83,13,84,13,1],[84,13,84,14,0],[84,14,85,17,1],[85,17,85,57,0],[85,57,86,17,1],[86,17,86,18,0],[86,18,87,21,1],[87,21,87,51,0],[87,51,88,21,1],[88,21,88,33,0],[88,33,91,17,1],[91,17,91,42,0],[91,42,92,17,1],[92,17,92,30,0],[92,30,93,13,1],[93,13,93,14,0],[93,14,93,15,1],[83,13,93,15,1],[94,9,94,10,1]]);
    </script>
  </body>
</html>