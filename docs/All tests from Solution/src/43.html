<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Tom Pipe\Documents\Hexadigital\Code\Umbraco\Umbraco-CMS\src\Umbraco.Tests\PublishedContent\DynamicXmlTests.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using System.Diagnostics;
using Microsoft.CSharp.RuntimeBinder;
using NUnit.Framework;
using Umbraco.Core;
using Umbraco.Core.Dynamics;
using System.Linq;

namespace Umbraco.Tests.PublishedContent
{
    [TestFixture]
	public class DynamicXmlTests
	{
        /// &lt;summary&gt;
        /// Ensures that when we return the xml structure we get the real structure, not the replaced hyphen structure
        /// see: http://issues.umbraco.org/issue/U4-1405#comment=67-5113
        ///         http://issues.umbraco.org/issue/U4-1636
        /// &lt;/summary&gt;
        [Test]
        public void Deals_With_Hyphenated_Values()
        {
            var xml = @&quot;&lt;banner1Link&gt;
  &lt;url-picker some-attribute=&#39;Content&#39;&gt;
    &lt;new-window&gt;True&lt;/new-window&gt;
    &lt;node-id&gt;1161&lt;/node-id&gt;
    &lt;url&gt;/content/&lt;/url&gt;
    &lt;link-title&gt;12 december Zorgbeurs Care&lt;/link-title&gt;
  &lt;/url-picker&gt;
&lt;/banner1Link&gt;&quot;;

            var typedXml = new DynamicXml(
                XmlHelper.StripDashesInElementOrAttributeNames(xml),
                xml);
            dynamic dynamicXml = typedXml;

            var typedElement = typedXml.RawXmlElement.Element(&quot;url-picker&quot;);
            var dynamicElementByCleanedName = dynamicXml.urlpicker;

            Assert.IsNotNull(typedElement);
            Assert.IsNotNull(dynamicElementByCleanedName);

            Assert.AreEqual(
                typedElement.Attribute(&quot;some-attribute&quot;).Value,
                dynamicElementByCleanedName.someattribute);            
        }

        [Test]
		public void Custom_Extension_Method_Legacy()
		{
			var xml = &quot;&lt;DAMP fullMedia=\&quot;\&quot;&gt;&lt;mediaItem&gt;&lt;Image id=\&quot;1057\&quot; version=\&quot;d58d5c16-153e-4896-892f-a722e45a69af\&quot; parentID=\&quot;-1\&quot; level=\&quot;1\&quot; writerID=\&quot;0\&quot; nodeType=\&quot;1032\&quot; template=\&quot;0\&quot; sortOrder=\&quot;1\&quot; createDate=\&quot;2012-11-05T16:55:29\&quot; updateDate=\&quot;2012-11-05T16:55:44\&quot; nodeName=\&quot;test12\&quot; urlName=\&quot;test12\&quot; writerName=\&quot;admin\&quot; nodeTypeAlias=\&quot;Image\&quot; path=\&quot;-1,1057\&quot;&gt;&lt;umbracoFile&gt;/media/54/tulips.jpg&lt;/umbracoFile&gt;&lt;umbracoWidth&gt;1024&lt;/umbracoWidth&gt;&lt;umbracoHeight&gt;768&lt;/umbracoHeight&gt;&lt;umbracoBytes&gt;620888&lt;/umbracoBytes&gt;&lt;umbracoExtension&gt;jpg&lt;/umbracoExtension&gt;&lt;newsCrops&gt;&lt;crops date=\&quot;2012-11-05T16:55:34\&quot;&gt;&lt;crop name=\&quot;thumbCrop\&quot; x=\&quot;154\&quot; y=\&quot;1\&quot; x2=\&quot;922\&quot; y2=\&quot;768\&quot; url=\&quot;/media/54/tulips_thumbCrop.jpg\&quot; /&gt;&lt;/crops&gt;&lt;/newsCrops&gt;&lt;/Image&gt;&lt;/mediaItem&gt;&lt;mediaItem&gt;&lt;Image id=\&quot;1055\&quot; version=\&quot;4df1f08a-3552-45f2-b4bf-fa980c762f4a\&quot; parentID=\&quot;-1\&quot; level=\&quot;1\&quot; writerID=\&quot;0\&quot; nodeType=\&quot;1032\&quot; template=\&quot;0\&quot; sortOrder=\&quot;1\&quot; createDate=\&quot;2012-11-05T16:29:58\&quot; updateDate=\&quot;2012-11-05T16:30:27\&quot; nodeName=\&quot;Test\&quot; urlName=\&quot;test\&quot; writerName=\&quot;admin\&quot; nodeTypeAlias=\&quot;Image\&quot; path=\&quot;-1,1055\&quot;&gt;&lt;umbracoFile&gt;/media/41/hydrangeas.jpg&lt;/umbracoFile&gt;&lt;umbracoWidth&gt;1024&lt;/umbracoWidth&gt;&lt;umbracoHeight&gt;768&lt;/umbracoHeight&gt;&lt;umbracoBytes&gt;595284&lt;/umbracoBytes&gt;&lt;umbracoExtension&gt;jpg&lt;/umbracoExtension&gt;&lt;newsCrops&gt;&lt;crops date=\&quot;2012-11-05T16:30:18\&quot;&gt;&lt;crop name=\&quot;thumbCrop\&quot; x=\&quot;133\&quot; y=\&quot;0\&quot; x2=\&quot;902\&quot; y2=\&quot;768\&quot; url=\&quot;/media/41/hydrangeas_thumbCrop.jpg\&quot; /&gt;&lt;/crops&gt;&lt;/newsCrops&gt;&lt;/Image&gt;&lt;/mediaItem&gt;&lt;/DAMP&gt;&quot;;
			var typedXml = new global::umbraco.MacroEngines.DynamicXml(xml);
			dynamic dynamicXml = typedXml;

			//we haven&#39;t explicitly defined ElementAt so this will dynamically invoke this method
			var element = dynamicXml.ElementAt(0);

			Assert.AreEqual(&quot;1057&quot;, Enumerable.First(element.BaseElement.Elements()).Attribute(&quot;id&quot;).Value);
		}

		[Test]
		public void Custom_Extension_Method()
		{
			var xml = &quot;&lt;DAMP fullMedia=\&quot;\&quot;&gt;&lt;mediaItem&gt;&lt;Image id=\&quot;1057\&quot; version=\&quot;d58d5c16-153e-4896-892f-a722e45a69af\&quot; parentID=\&quot;-1\&quot; level=\&quot;1\&quot; writerID=\&quot;0\&quot; nodeType=\&quot;1032\&quot; template=\&quot;0\&quot; sortOrder=\&quot;1\&quot; createDate=\&quot;2012-11-05T16:55:29\&quot; updateDate=\&quot;2012-11-05T16:55:44\&quot; nodeName=\&quot;test12\&quot; urlName=\&quot;test12\&quot; writerName=\&quot;admin\&quot; nodeTypeAlias=\&quot;Image\&quot; path=\&quot;-1,1057\&quot;&gt;&lt;umbracoFile&gt;/media/54/tulips.jpg&lt;/umbracoFile&gt;&lt;umbracoWidth&gt;1024&lt;/umbracoWidth&gt;&lt;umbracoHeight&gt;768&lt;/umbracoHeight&gt;&lt;umbracoBytes&gt;620888&lt;/umbracoBytes&gt;&lt;umbracoExtension&gt;jpg&lt;/umbracoExtension&gt;&lt;newsCrops&gt;&lt;crops date=\&quot;2012-11-05T16:55:34\&quot;&gt;&lt;crop name=\&quot;thumbCrop\&quot; x=\&quot;154\&quot; y=\&quot;1\&quot; x2=\&quot;922\&quot; y2=\&quot;768\&quot; url=\&quot;/media/54/tulips_thumbCrop.jpg\&quot; /&gt;&lt;/crops&gt;&lt;/newsCrops&gt;&lt;/Image&gt;&lt;/mediaItem&gt;&lt;mediaItem&gt;&lt;Image id=\&quot;1055\&quot; version=\&quot;4df1f08a-3552-45f2-b4bf-fa980c762f4a\&quot; parentID=\&quot;-1\&quot; level=\&quot;1\&quot; writerID=\&quot;0\&quot; nodeType=\&quot;1032\&quot; template=\&quot;0\&quot; sortOrder=\&quot;1\&quot; createDate=\&quot;2012-11-05T16:29:58\&quot; updateDate=\&quot;2012-11-05T16:30:27\&quot; nodeName=\&quot;Test\&quot; urlName=\&quot;test\&quot; writerName=\&quot;admin\&quot; nodeTypeAlias=\&quot;Image\&quot; path=\&quot;-1,1055\&quot;&gt;&lt;umbracoFile&gt;/media/41/hydrangeas.jpg&lt;/umbracoFile&gt;&lt;umbracoWidth&gt;1024&lt;/umbracoWidth&gt;&lt;umbracoHeight&gt;768&lt;/umbracoHeight&gt;&lt;umbracoBytes&gt;595284&lt;/umbracoBytes&gt;&lt;umbracoExtension&gt;jpg&lt;/umbracoExtension&gt;&lt;newsCrops&gt;&lt;crops date=\&quot;2012-11-05T16:30:18\&quot;&gt;&lt;crop name=\&quot;thumbCrop\&quot; x=\&quot;133\&quot; y=\&quot;0\&quot; x2=\&quot;902\&quot; y2=\&quot;768\&quot; url=\&quot;/media/41/hydrangeas_thumbCrop.jpg\&quot; /&gt;&lt;/crops&gt;&lt;/newsCrops&gt;&lt;/Image&gt;&lt;/mediaItem&gt;&lt;/DAMP&gt;&quot;;
			var typedXml = new DynamicXml(xml);
			
			dynamic dynamicXml = typedXml;

			//we haven&#39;t explicitly defined ElementAt so this will dynamically invoke this method
			var element = dynamicXml.ElementAt(0);

            Assert.AreEqual(&quot;1057&quot;, Enumerable.First(element.BaseElement.Elements()).Attribute(&quot;id&quot;).Value);
		}

		[Test]
		public void Take_Legacy()
		{
			var xml = &quot;&lt;DAMP fullMedia=\&quot;\&quot;&gt;&lt;mediaItem&gt;&lt;Image id=\&quot;1057\&quot; version=\&quot;d58d5c16-153e-4896-892f-a722e45a69af\&quot; parentID=\&quot;-1\&quot; level=\&quot;1\&quot; writerID=\&quot;0\&quot; nodeType=\&quot;1032\&quot; template=\&quot;0\&quot; sortOrder=\&quot;1\&quot; createDate=\&quot;2012-11-05T16:55:29\&quot; updateDate=\&quot;2012-11-05T16:55:44\&quot; nodeName=\&quot;test12\&quot; urlName=\&quot;test12\&quot; writerName=\&quot;admin\&quot; nodeTypeAlias=\&quot;Image\&quot; path=\&quot;-1,1057\&quot;&gt;&lt;umbracoFile&gt;/media/54/tulips.jpg&lt;/umbracoFile&gt;&lt;umbracoWidth&gt;1024&lt;/umbracoWidth&gt;&lt;umbracoHeight&gt;768&lt;/umbracoHeight&gt;&lt;umbracoBytes&gt;620888&lt;/umbracoBytes&gt;&lt;umbracoExtension&gt;jpg&lt;/umbracoExtension&gt;&lt;newsCrops&gt;&lt;crops date=\&quot;2012-11-05T16:55:34\&quot;&gt;&lt;crop name=\&quot;thumbCrop\&quot; x=\&quot;154\&quot; y=\&quot;1\&quot; x2=\&quot;922\&quot; y2=\&quot;768\&quot; url=\&quot;/media/54/tulips_thumbCrop.jpg\&quot; /&gt;&lt;/crops&gt;&lt;/newsCrops&gt;&lt;/Image&gt;&lt;/mediaItem&gt;&lt;mediaItem&gt;&lt;Image id=\&quot;1055\&quot; version=\&quot;4df1f08a-3552-45f2-b4bf-fa980c762f4a\&quot; parentID=\&quot;-1\&quot; level=\&quot;1\&quot; writerID=\&quot;0\&quot; nodeType=\&quot;1032\&quot; template=\&quot;0\&quot; sortOrder=\&quot;1\&quot; createDate=\&quot;2012-11-05T16:29:58\&quot; updateDate=\&quot;2012-11-05T16:30:27\&quot; nodeName=\&quot;Test\&quot; urlName=\&quot;test\&quot; writerName=\&quot;admin\&quot; nodeTypeAlias=\&quot;Image\&quot; path=\&quot;-1,1055\&quot;&gt;&lt;umbracoFile&gt;/media/41/hydrangeas.jpg&lt;/umbracoFile&gt;&lt;umbracoWidth&gt;1024&lt;/umbracoWidth&gt;&lt;umbracoHeight&gt;768&lt;/umbracoHeight&gt;&lt;umbracoBytes&gt;595284&lt;/umbracoBytes&gt;&lt;umbracoExtension&gt;jpg&lt;/umbracoExtension&gt;&lt;newsCrops&gt;&lt;crops date=\&quot;2012-11-05T16:30:18\&quot;&gt;&lt;crop name=\&quot;thumbCrop\&quot; x=\&quot;133\&quot; y=\&quot;0\&quot; x2=\&quot;902\&quot; y2=\&quot;768\&quot; url=\&quot;/media/41/hydrangeas_thumbCrop.jpg\&quot; /&gt;&lt;/crops&gt;&lt;/newsCrops&gt;&lt;/Image&gt;&lt;/mediaItem&gt;&lt;/DAMP&gt;&quot;;
			var typedXml = new global::umbraco.MacroEngines.DynamicXml(xml);
			dynamic dynamicXml = typedXml;
			var typedTaken = typedXml.Take(1);
			var dynamicTaken = dynamicXml.Take(1);

			Assert.AreEqual(1, typedTaken.Count());
			Assert.AreEqual(1, Enumerable.Count(dynamicTaken));			

			Assert.AreEqual(&quot;1057&quot;, typedTaken.ElementAt(0).BaseElement.Elements().First().Attribute(&quot;id&quot;).Value);
			Assert.AreEqual(&quot;1057&quot;, Enumerable.First(Enumerable.ElementAt(dynamicTaken, 0).BaseElement.Elements()).Attribute(&quot;id&quot;).Value);
		}

		[Test]
		public void Take()
		{
			var xml = &quot;&lt;DAMP fullMedia=\&quot;\&quot;&gt;&lt;mediaItem&gt;&lt;Image id=\&quot;1057\&quot; version=\&quot;d58d5c16-153e-4896-892f-a722e45a69af\&quot; parentID=\&quot;-1\&quot; level=\&quot;1\&quot; writerID=\&quot;0\&quot; nodeType=\&quot;1032\&quot; template=\&quot;0\&quot; sortOrder=\&quot;1\&quot; createDate=\&quot;2012-11-05T16:55:29\&quot; updateDate=\&quot;2012-11-05T16:55:44\&quot; nodeName=\&quot;test12\&quot; urlName=\&quot;test12\&quot; writerName=\&quot;admin\&quot; nodeTypeAlias=\&quot;Image\&quot; path=\&quot;-1,1057\&quot;&gt;&lt;umbracoFile&gt;/media/54/tulips.jpg&lt;/umbracoFile&gt;&lt;umbracoWidth&gt;1024&lt;/umbracoWidth&gt;&lt;umbracoHeight&gt;768&lt;/umbracoHeight&gt;&lt;umbracoBytes&gt;620888&lt;/umbracoBytes&gt;&lt;umbracoExtension&gt;jpg&lt;/umbracoExtension&gt;&lt;newsCrops&gt;&lt;crops date=\&quot;2012-11-05T16:55:34\&quot;&gt;&lt;crop name=\&quot;thumbCrop\&quot; x=\&quot;154\&quot; y=\&quot;1\&quot; x2=\&quot;922\&quot; y2=\&quot;768\&quot; url=\&quot;/media/54/tulips_thumbCrop.jpg\&quot; /&gt;&lt;/crops&gt;&lt;/newsCrops&gt;&lt;/Image&gt;&lt;/mediaItem&gt;&lt;mediaItem&gt;&lt;Image id=\&quot;1055\&quot; version=\&quot;4df1f08a-3552-45f2-b4bf-fa980c762f4a\&quot; parentID=\&quot;-1\&quot; level=\&quot;1\&quot; writerID=\&quot;0\&quot; nodeType=\&quot;1032\&quot; template=\&quot;0\&quot; sortOrder=\&quot;1\&quot; createDate=\&quot;2012-11-05T16:29:58\&quot; updateDate=\&quot;2012-11-05T16:30:27\&quot; nodeName=\&quot;Test\&quot; urlName=\&quot;test\&quot; writerName=\&quot;admin\&quot; nodeTypeAlias=\&quot;Image\&quot; path=\&quot;-1,1055\&quot;&gt;&lt;umbracoFile&gt;/media/41/hydrangeas.jpg&lt;/umbracoFile&gt;&lt;umbracoWidth&gt;1024&lt;/umbracoWidth&gt;&lt;umbracoHeight&gt;768&lt;/umbracoHeight&gt;&lt;umbracoBytes&gt;595284&lt;/umbracoBytes&gt;&lt;umbracoExtension&gt;jpg&lt;/umbracoExtension&gt;&lt;newsCrops&gt;&lt;crops date=\&quot;2012-11-05T16:30:18\&quot;&gt;&lt;crop name=\&quot;thumbCrop\&quot; x=\&quot;133\&quot; y=\&quot;0\&quot; x2=\&quot;902\&quot; y2=\&quot;768\&quot; url=\&quot;/media/41/hydrangeas_thumbCrop.jpg\&quot; /&gt;&lt;/crops&gt;&lt;/newsCrops&gt;&lt;/Image&gt;&lt;/mediaItem&gt;&lt;/DAMP&gt;&quot;;
			var typedXml = new DynamicXml(xml);
			dynamic dynamicXml = typedXml;
			var typedTaken = typedXml.Take(1);
			var dynamicTaken = dynamicXml.Take(1);

			Assert.AreEqual(1, typedTaken.Count());
			Assert.AreEqual(1, Enumerable.Count(dynamicTaken));

            Assert.AreEqual(&quot;1057&quot;, typedTaken.ElementAt(0).BaseElement.Elements().First().Attribute(&quot;id&quot;).Value);
            Assert.AreEqual(&quot;1057&quot;, Enumerable.First(Enumerable.ElementAt(dynamicTaken, 0).BaseElement.Elements()).Attribute(&quot;id&quot;).Value);
		}

		[Test]
		public void Ensure_Legacy_Objects_Are_Returned()
		{
			var xml = &quot;&lt;DAMP fullMedia=\&quot;\&quot;&gt;&lt;mediaItem&gt;&lt;Image id=\&quot;1057\&quot; version=\&quot;d58d5c16-153e-4896-892f-a722e45a69af\&quot; parentID=\&quot;-1\&quot; level=\&quot;1\&quot; writerID=\&quot;0\&quot; nodeType=\&quot;1032\&quot; template=\&quot;0\&quot; sortOrder=\&quot;1\&quot; createDate=\&quot;2012-11-05T16:55:29\&quot; updateDate=\&quot;2012-11-05T16:55:44\&quot; nodeName=\&quot;test12\&quot; urlName=\&quot;test12\&quot; writerName=\&quot;admin\&quot; nodeTypeAlias=\&quot;Image\&quot; path=\&quot;-1,1057\&quot;&gt;&lt;umbracoFile&gt;/media/54/tulips.jpg&lt;/umbracoFile&gt;&lt;umbracoWidth&gt;1024&lt;/umbracoWidth&gt;&lt;umbracoHeight&gt;768&lt;/umbracoHeight&gt;&lt;umbracoBytes&gt;620888&lt;/umbracoBytes&gt;&lt;umbracoExtension&gt;jpg&lt;/umbracoExtension&gt;&lt;newsCrops&gt;&lt;crops date=\&quot;2012-11-05T16:55:34\&quot;&gt;&lt;crop name=\&quot;thumbCrop\&quot; x=\&quot;154\&quot; y=\&quot;1\&quot; x2=\&quot;922\&quot; y2=\&quot;768\&quot; url=\&quot;/media/54/tulips_thumbCrop.jpg\&quot; /&gt;&lt;/crops&gt;&lt;/newsCrops&gt;&lt;/Image&gt;&lt;/mediaItem&gt;&lt;mediaItem&gt;&lt;Image id=\&quot;1055\&quot; version=\&quot;4df1f08a-3552-45f2-b4bf-fa980c762f4a\&quot; parentID=\&quot;-1\&quot; level=\&quot;1\&quot; writerID=\&quot;0\&quot; nodeType=\&quot;1032\&quot; template=\&quot;0\&quot; sortOrder=\&quot;1\&quot; createDate=\&quot;2012-11-05T16:29:58\&quot; updateDate=\&quot;2012-11-05T16:30:27\&quot; nodeName=\&quot;Test\&quot; urlName=\&quot;test\&quot; writerName=\&quot;admin\&quot; nodeTypeAlias=\&quot;Image\&quot; path=\&quot;-1,1055\&quot;&gt;&lt;umbracoFile&gt;/media/41/hydrangeas.jpg&lt;/umbracoFile&gt;&lt;umbracoWidth&gt;1024&lt;/umbracoWidth&gt;&lt;umbracoHeight&gt;768&lt;/umbracoHeight&gt;&lt;umbracoBytes&gt;595284&lt;/umbracoBytes&gt;&lt;umbracoExtension&gt;jpg&lt;/umbracoExtension&gt;&lt;newsCrops&gt;&lt;crops date=\&quot;2012-11-05T16:30:18\&quot;&gt;&lt;crop name=\&quot;thumbCrop\&quot; x=\&quot;133\&quot; y=\&quot;0\&quot; x2=\&quot;902\&quot; y2=\&quot;768\&quot; url=\&quot;/media/41/hydrangeas_thumbCrop.jpg\&quot; /&gt;&lt;/crops&gt;&lt;/newsCrops&gt;&lt;/Image&gt;&lt;/mediaItem&gt;&lt;/DAMP&gt;&quot;;
			var mediaItems = new global::umbraco.MacroEngines.DynamicXml(xml);
			//Debug.WriteLine(&quot;full xml = {0}&quot;, mediaItems.ToXml());

			if (mediaItems.Count() != 0)
			{
				foreach (dynamic item in mediaItems)
				{
					Type itemType = item.GetType();
					Debug.WriteLine(&quot;item type = {0}&quot;, itemType);
					dynamic image = item.Image;

					Type imageType = image.GetType();
					Debug.WriteLine(&quot;image type = {0}&quot;, imageType);
					
					//ensure they are the same
					Assert.AreEqual(itemType, imageType);

					//ensure they are legacy
					Assert.AreEqual(typeof(global::umbraco.MacroEngines.DynamicXml), itemType);
					Assert.AreEqual(typeof(global::umbraco.MacroEngines.DynamicXml), imageType);
				}
			}
		}

		/// &lt;summary&gt;
		/// Test the current Core class
		/// &lt;/summary&gt;
		[Test]
		public void Find_Test_Core_Class()
		{
			RunFindTest(x =&gt; new DynamicXml(x));
		}

		/// &lt;summary&gt;
		/// Tests the macroEngines legacy class
		/// &lt;/summary&gt;
		[Test]
		public void Find_Test_Legacy_Class()
		{
			RunFindTest(x =&gt; new global::umbraco.MacroEngines.DynamicXml(x));
		}

		private void RunFindTest(Func&lt;string, dynamic&gt; getDynamicXml)
		{
			var xmlstring = @&quot;&lt;test&gt;
&lt;item id=&#39;1&#39; name=&#39;test 1&#39; value=&#39;found 1&#39;/&gt;
&lt;item id=&#39;2&#39; name=&#39;test 2&#39; value=&#39;found 2&#39;/&gt;
&lt;item id=&#39;3&#39; name=&#39;test 3&#39; value=&#39;found 3&#39;/&gt;
&lt;/test&gt;&quot;;

			dynamic dXml = getDynamicXml(xmlstring);

			var result1 = dXml.Find(&quot;@name&quot;, &quot;test 1&quot;);
			var result2 = dXml.Find(&quot;@name&quot;, &quot;test 2&quot;);
			var result3 = dXml.Find(&quot;@name&quot;, &quot;test 3&quot;);
			var result4 = dXml.Find(&quot;@name&quot;, &quot;dont find&quot;);

			Assert.AreEqual(&quot;found 1&quot;, result1.value);
			Assert.AreEqual(&quot;found 2&quot;, result2.value);
			Assert.AreEqual(&quot;found 3&quot;, result3.value);
			Assert.Throws&lt;RuntimeBinderException&gt;(() =&gt;
			{
				//this will throw because result4 is not found
				var temp = result4.value;
			});
		}

	}
}
    </pre>
    <script type="text/javascript">
      highlightRanges([[21,9,21,10,1],[22,13,29,17,1],[31,13,33,22,1],[34,13,34,43,1],[36,13,36,77,1],[37,13,37,68,1],[39,13,39,44,1],[40,13,40,59,1],[42,13,44,60,1],[45,9,45,10,1],[49,3,49,4,1],[50,4,50,1497,1],[51,4,51,68,1],[52,4,52,34,1],[55,4,55,42,1],[57,4,57,100,1],[58,3,58,4,1],[62,3,62,4,1],[63,4,63,1497,1],[64,4,64,39,1],[66,4,66,34,1],[69,4,69,42,1],[71,13,71,109,1],[72,3,72,4,1],[76,3,76,4,1],[77,4,77,1497,1],[78,4,78,68,1],[79,4,79,34,1],[80,4,80,38,1],[81,4,81,42,1],[83,4,83,43,1],[84,4,84,55,1],[86,4,86,106,1],[87,4,87,130,1],[88,3,88,4,1],[92,3,92,4,1],[93,4,93,1497,1],[94,4,94,39,1],[95,4,95,34,1],[96,4,96,38,1],[97,4,97,42,1],[99,4,99,43,1],[100,4,100,55,1],[102,13,102,115,1],[103,13,103,139,1],[104,3,104,4,1],[108,3,108,4,1],[109,4,109,1497,1],[110,4,110,70,1],[113,4,113,32,1],[114,4,114,5,1],[115,5,115,12,1],[115,14,115,26,1],[115,27,115,29,1],[115,30,115,40,1],[116,5,116,6,1],[117,6,117,37,1],[118,6,118,51,1],[119,6,119,33,1],[121,6,121,39,1],[122,6,122,53,1],[125,6,125,43,1],[128,6,128,81,1],[129,6,129,82,1],[130,5,130,6,1],[131,4,131,5,1],[132,3,132,4,1],[139,3,139,4,1],[140,4,140,21,1],[140,21,140,38,1],[140,38,140,40,1],[140,4,140,40,1],[141,3,141,4,1],[148,3,148,4,1],[149,4,149,21,1],[149,21,149,67,1],[149,67,149,69,1],[149,4,149,69,1],[150,3,150,4,1],[153,3,153,4,1],[154,4,158,10,1],[160,4,160,44,1],[162,4,162,47,1],[163,4,163,47,1],[164,4,164,47,1],[165,4,165,50,1],[167,4,167,46,1],[168,4,168,46,1],[169,4,169,46,1],[170,4,171,4,1],[171,4,171,5,1],[171,5,173,5,1],[173,5,173,30,1],[173,30,174,4,1],[174,4,174,5,0],[174,5,174,7,1],[170,4,174,7,1],[175,3,175,4,1]]);
    </script>
  </body>
</html>