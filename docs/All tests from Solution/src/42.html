<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Tom Pipe\Documents\Hexadigital\Code\Umbraco\Umbraco-CMS\src\Umbraco.Tests\PublishedContent\DynamicXmlConverterTests.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System.Xml;
using System.Xml.Linq;
using NUnit.Framework;
using Umbraco.Core;
using Umbraco.Core.Dynamics;

namespace Umbraco.Tests.PublishedContent
{
    [TestFixture]
    public class DynamicXmlConverterTests 
    {
        [Test]
        public void Convert_To_Raw_String()
        {
            var xml = &quot;&lt;DAMP fullMedia=\&quot;\&quot; test-attribute=\&quot;someValue\&quot;&gt;&lt;mediaItem&gt;&lt;Image id=\&quot;1057\&quot; version=\&quot;d58d5c16-153e-4896-892f-a722e45a69af\&quot; parentID=\&quot;-1\&quot; level=\&quot;1\&quot; writerID=\&quot;0\&quot; nodeType=\&quot;1032\&quot; template=\&quot;0\&quot; sortOrder=\&quot;1\&quot; createDate=\&quot;2012-11-05T16:55:29\&quot; updateDate=\&quot;2012-11-05T16:55:44\&quot; nodeName=\&quot;test12\&quot; urlName=\&quot;test12\&quot; writerName=\&quot;admin\&quot; nodeTypeAlias=\&quot;Image\&quot; path=\&quot;-1,1057\&quot;&gt;&lt;umbracoFile&gt;/media/54/tulips.jpg&lt;/umbracoFile&gt;&lt;umbracoWidth&gt;1024&lt;/umbracoWidth&gt;&lt;umbracoHeight&gt;768&lt;/umbracoHeight&gt;&lt;umbracoBytes&gt;620888&lt;/umbracoBytes&gt;&lt;umbracoExtension&gt;jpg&lt;/umbracoExtension&gt;&lt;newsCrops&gt;&lt;crops date=\&quot;2012-11-05T16:55:34\&quot;&gt;&lt;crop name=\&quot;thumbCrop\&quot; x=\&quot;154\&quot; y=\&quot;1\&quot; x2=\&quot;922\&quot; y2=\&quot;768\&quot; url=\&quot;/media/54/tulips_thumbCrop.jpg\&quot; /&gt;&lt;/crops&gt;&lt;/newsCrops&gt;&lt;/Image&gt;&lt;/mediaItem&gt;&lt;mediaItem&gt;&lt;Image id=\&quot;1055\&quot; version=\&quot;4df1f08a-3552-45f2-b4bf-fa980c762f4a\&quot; parentID=\&quot;-1\&quot; level=\&quot;1\&quot; writerID=\&quot;0\&quot; nodeType=\&quot;1032\&quot; template=\&quot;0\&quot; sortOrder=\&quot;1\&quot; createDate=\&quot;2012-11-05T16:29:58\&quot; updateDate=\&quot;2012-11-05T16:30:27\&quot; nodeName=\&quot;Test\&quot; urlName=\&quot;test\&quot; writerName=\&quot;admin\&quot; nodeTypeAlias=\&quot;Image\&quot; path=\&quot;-1,1055\&quot;&gt;&lt;umbracoFile&gt;/media/41/hydrangeas.jpg&lt;/umbracoFile&gt;&lt;umbracoWidth&gt;1024&lt;/umbracoWidth&gt;&lt;umbracoHeight&gt;768&lt;/umbracoHeight&gt;&lt;umbracoBytes&gt;595284&lt;/umbracoBytes&gt;&lt;umbracoExtension&gt;jpg&lt;/umbracoExtension&gt;&lt;newsCrops&gt;&lt;crops date=\&quot;2012-11-05T16:30:18\&quot;&gt;&lt;crop name=\&quot;thumbCrop\&quot; x=\&quot;133\&quot; y=\&quot;0\&quot; x2=\&quot;902\&quot; y2=\&quot;768\&quot; url=\&quot;/media/41/hydrangeas_thumbCrop.jpg\&quot; /&gt;&lt;/crops&gt;&lt;/newsCrops&gt;&lt;/Image&gt;&lt;/mediaItem&gt;&lt;/DAMP&gt;&quot;;
            var dXml = new DynamicXml(
                XmlHelper.StripDashesInElementOrAttributeNames(xml),
                xml);
            var result = dXml.TryConvertTo&lt;RawXmlString&gt;();
            Assert.IsTrue(result.Success);
            Assert.AreEqual(xml, result.Result.Value);
        }

        [Test]
        public void Convert_To_Raw_XElement()
        {
            var xml = &quot;&lt;DAMP fullMedia=\&quot;\&quot; test-attribute=\&quot;someValue\&quot;&gt;&lt;mediaItem&gt;&lt;Image id=\&quot;1057\&quot; version=\&quot;d58d5c16-153e-4896-892f-a722e45a69af\&quot; parentID=\&quot;-1\&quot; level=\&quot;1\&quot; writerID=\&quot;0\&quot; nodeType=\&quot;1032\&quot; template=\&quot;0\&quot; sortOrder=\&quot;1\&quot; createDate=\&quot;2012-11-05T16:55:29\&quot; updateDate=\&quot;2012-11-05T16:55:44\&quot; nodeName=\&quot;test12\&quot; urlName=\&quot;test12\&quot; writerName=\&quot;admin\&quot; nodeTypeAlias=\&quot;Image\&quot; path=\&quot;-1,1057\&quot;&gt;&lt;umbracoFile&gt;/media/54/tulips.jpg&lt;/umbracoFile&gt;&lt;umbracoWidth&gt;1024&lt;/umbracoWidth&gt;&lt;umbracoHeight&gt;768&lt;/umbracoHeight&gt;&lt;umbracoBytes&gt;620888&lt;/umbracoBytes&gt;&lt;umbracoExtension&gt;jpg&lt;/umbracoExtension&gt;&lt;newsCrops&gt;&lt;crops date=\&quot;2012-11-05T16:55:34\&quot;&gt;&lt;crop name=\&quot;thumbCrop\&quot; x=\&quot;154\&quot; y=\&quot;1\&quot; x2=\&quot;922\&quot; y2=\&quot;768\&quot; url=\&quot;/media/54/tulips_thumbCrop.jpg\&quot; /&gt;&lt;/crops&gt;&lt;/newsCrops&gt;&lt;/Image&gt;&lt;/mediaItem&gt;&lt;mediaItem&gt;&lt;Image id=\&quot;1055\&quot; version=\&quot;4df1f08a-3552-45f2-b4bf-fa980c762f4a\&quot; parentID=\&quot;-1\&quot; level=\&quot;1\&quot; writerID=\&quot;0\&quot; nodeType=\&quot;1032\&quot; template=\&quot;0\&quot; sortOrder=\&quot;1\&quot; createDate=\&quot;2012-11-05T16:29:58\&quot; updateDate=\&quot;2012-11-05T16:30:27\&quot; nodeName=\&quot;Test\&quot; urlName=\&quot;test\&quot; writerName=\&quot;admin\&quot; nodeTypeAlias=\&quot;Image\&quot; path=\&quot;-1,1055\&quot;&gt;&lt;umbracoFile&gt;/media/41/hydrangeas.jpg&lt;/umbracoFile&gt;&lt;umbracoWidth&gt;1024&lt;/umbracoWidth&gt;&lt;umbracoHeight&gt;768&lt;/umbracoHeight&gt;&lt;umbracoBytes&gt;595284&lt;/umbracoBytes&gt;&lt;umbracoExtension&gt;jpg&lt;/umbracoExtension&gt;&lt;newsCrops&gt;&lt;crops date=\&quot;2012-11-05T16:30:18\&quot;&gt;&lt;crop name=\&quot;thumbCrop\&quot; x=\&quot;133\&quot; y=\&quot;0\&quot; x2=\&quot;902\&quot; y2=\&quot;768\&quot; url=\&quot;/media/41/hydrangeas_thumbCrop.jpg\&quot; /&gt;&lt;/crops&gt;&lt;/newsCrops&gt;&lt;/Image&gt;&lt;/mediaItem&gt;&lt;/DAMP&gt;&quot;;
            var dXml = new DynamicXml(
                XmlHelper.StripDashesInElementOrAttributeNames(xml),
                xml);
            var result = dXml.TryConvertTo&lt;RawXElement&gt;();
            Assert.IsTrue(result.Success);
            Assert.AreEqual(xml, result.Result.Value.ToString(SaveOptions.DisableFormatting));
        }

        [Test]
        public void Convert_To_Raw_XmlElement()
        {
            var xml = &quot;&lt;DAMP fullMedia=\&quot;\&quot; test-attribute=\&quot;someValue\&quot;&gt;&lt;mediaItem&gt;&lt;Image id=\&quot;1057\&quot; version=\&quot;d58d5c16-153e-4896-892f-a722e45a69af\&quot; parentID=\&quot;-1\&quot; level=\&quot;1\&quot; writerID=\&quot;0\&quot; nodeType=\&quot;1032\&quot; template=\&quot;0\&quot; sortOrder=\&quot;1\&quot; createDate=\&quot;2012-11-05T16:55:29\&quot; updateDate=\&quot;2012-11-05T16:55:44\&quot; nodeName=\&quot;test12\&quot; urlName=\&quot;test12\&quot; writerName=\&quot;admin\&quot; nodeTypeAlias=\&quot;Image\&quot; path=\&quot;-1,1057\&quot;&gt;&lt;umbracoFile&gt;/media/54/tulips.jpg&lt;/umbracoFile&gt;&lt;umbracoWidth&gt;1024&lt;/umbracoWidth&gt;&lt;umbracoHeight&gt;768&lt;/umbracoHeight&gt;&lt;umbracoBytes&gt;620888&lt;/umbracoBytes&gt;&lt;umbracoExtension&gt;jpg&lt;/umbracoExtension&gt;&lt;newsCrops&gt;&lt;crops date=\&quot;2012-11-05T16:55:34\&quot;&gt;&lt;crop name=\&quot;thumbCrop\&quot; x=\&quot;154\&quot; y=\&quot;1\&quot; x2=\&quot;922\&quot; y2=\&quot;768\&quot; url=\&quot;/media/54/tulips_thumbCrop.jpg\&quot; /&gt;&lt;/crops&gt;&lt;/newsCrops&gt;&lt;/Image&gt;&lt;/mediaItem&gt;&lt;mediaItem&gt;&lt;Image id=\&quot;1055\&quot; version=\&quot;4df1f08a-3552-45f2-b4bf-fa980c762f4a\&quot; parentID=\&quot;-1\&quot; level=\&quot;1\&quot; writerID=\&quot;0\&quot; nodeType=\&quot;1032\&quot; template=\&quot;0\&quot; sortOrder=\&quot;1\&quot; createDate=\&quot;2012-11-05T16:29:58\&quot; updateDate=\&quot;2012-11-05T16:30:27\&quot; nodeName=\&quot;Test\&quot; urlName=\&quot;test\&quot; writerName=\&quot;admin\&quot; nodeTypeAlias=\&quot;Image\&quot; path=\&quot;-1,1055\&quot;&gt;&lt;umbracoFile&gt;/media/41/hydrangeas.jpg&lt;/umbracoFile&gt;&lt;umbracoWidth&gt;1024&lt;/umbracoWidth&gt;&lt;umbracoHeight&gt;768&lt;/umbracoHeight&gt;&lt;umbracoBytes&gt;595284&lt;/umbracoBytes&gt;&lt;umbracoExtension&gt;jpg&lt;/umbracoExtension&gt;&lt;newsCrops&gt;&lt;crops date=\&quot;2012-11-05T16:30:18\&quot;&gt;&lt;crop name=\&quot;thumbCrop\&quot; x=\&quot;133\&quot; y=\&quot;0\&quot; x2=\&quot;902\&quot; y2=\&quot;768\&quot; url=\&quot;/media/41/hydrangeas_thumbCrop.jpg\&quot; /&gt;&lt;/crops&gt;&lt;/newsCrops&gt;&lt;/Image&gt;&lt;/mediaItem&gt;&lt;/DAMP&gt;&quot;;
            var dXml = new DynamicXml(
                XmlHelper.StripDashesInElementOrAttributeNames(xml),
                xml);
            var result = dXml.TryConvertTo&lt;RawXmlElement&gt;();
            Assert.IsTrue(result.Success);
            Assert.AreEqual(xml, result.Result.Value.OuterXml);
        }

        [Test]
        public void Convert_To_Raw_XmlDocument()
        {
            var xml = &quot;&lt;DAMP fullMedia=\&quot;\&quot; test-attribute=\&quot;someValue\&quot;&gt;&lt;mediaItem&gt;&lt;Image id=\&quot;1057\&quot; version=\&quot;d58d5c16-153e-4896-892f-a722e45a69af\&quot; parentID=\&quot;-1\&quot; level=\&quot;1\&quot; writerID=\&quot;0\&quot; nodeType=\&quot;1032\&quot; template=\&quot;0\&quot; sortOrder=\&quot;1\&quot; createDate=\&quot;2012-11-05T16:55:29\&quot; updateDate=\&quot;2012-11-05T16:55:44\&quot; nodeName=\&quot;test12\&quot; urlName=\&quot;test12\&quot; writerName=\&quot;admin\&quot; nodeTypeAlias=\&quot;Image\&quot; path=\&quot;-1,1057\&quot;&gt;&lt;umbracoFile&gt;/media/54/tulips.jpg&lt;/umbracoFile&gt;&lt;umbracoWidth&gt;1024&lt;/umbracoWidth&gt;&lt;umbracoHeight&gt;768&lt;/umbracoHeight&gt;&lt;umbracoBytes&gt;620888&lt;/umbracoBytes&gt;&lt;umbracoExtension&gt;jpg&lt;/umbracoExtension&gt;&lt;newsCrops&gt;&lt;crops date=\&quot;2012-11-05T16:55:34\&quot;&gt;&lt;crop name=\&quot;thumbCrop\&quot; x=\&quot;154\&quot; y=\&quot;1\&quot; x2=\&quot;922\&quot; y2=\&quot;768\&quot; url=\&quot;/media/54/tulips_thumbCrop.jpg\&quot; /&gt;&lt;/crops&gt;&lt;/newsCrops&gt;&lt;/Image&gt;&lt;/mediaItem&gt;&lt;mediaItem&gt;&lt;Image id=\&quot;1055\&quot; version=\&quot;4df1f08a-3552-45f2-b4bf-fa980c762f4a\&quot; parentID=\&quot;-1\&quot; level=\&quot;1\&quot; writerID=\&quot;0\&quot; nodeType=\&quot;1032\&quot; template=\&quot;0\&quot; sortOrder=\&quot;1\&quot; createDate=\&quot;2012-11-05T16:29:58\&quot; updateDate=\&quot;2012-11-05T16:30:27\&quot; nodeName=\&quot;Test\&quot; urlName=\&quot;test\&quot; writerName=\&quot;admin\&quot; nodeTypeAlias=\&quot;Image\&quot; path=\&quot;-1,1055\&quot;&gt;&lt;umbracoFile&gt;/media/41/hydrangeas.jpg&lt;/umbracoFile&gt;&lt;umbracoWidth&gt;1024&lt;/umbracoWidth&gt;&lt;umbracoHeight&gt;768&lt;/umbracoHeight&gt;&lt;umbracoBytes&gt;595284&lt;/umbracoBytes&gt;&lt;umbracoExtension&gt;jpg&lt;/umbracoExtension&gt;&lt;newsCrops&gt;&lt;crops date=\&quot;2012-11-05T16:30:18\&quot;&gt;&lt;crop name=\&quot;thumbCrop\&quot; x=\&quot;133\&quot; y=\&quot;0\&quot; x2=\&quot;902\&quot; y2=\&quot;768\&quot; url=\&quot;/media/41/hydrangeas_thumbCrop.jpg\&quot; /&gt;&lt;/crops&gt;&lt;/newsCrops&gt;&lt;/Image&gt;&lt;/mediaItem&gt;&lt;/DAMP&gt;&quot;;
            var dXml = new DynamicXml(
                XmlHelper.StripDashesInElementOrAttributeNames(xml),
                xml);
            var result = dXml.TryConvertTo&lt;RawXmlDocument&gt;();
            Assert.IsTrue(result.Success);
            Assert.AreEqual(xml, result.Result.Value.InnerXml);
        }

        [Test]
        public void Convert_To_String()
        {
            var xml = &quot;&lt;DAMP fullMedia=\&quot;\&quot; test-attribute=\&quot;someValue\&quot;&gt;&lt;mediaItem&gt;&lt;Image id=\&quot;1057\&quot; version=\&quot;d58d5c16-153e-4896-892f-a722e45a69af\&quot; parentID=\&quot;-1\&quot; level=\&quot;1\&quot; writerID=\&quot;0\&quot; nodeType=\&quot;1032\&quot; template=\&quot;0\&quot; sortOrder=\&quot;1\&quot; createDate=\&quot;2012-11-05T16:55:29\&quot; updateDate=\&quot;2012-11-05T16:55:44\&quot; nodeName=\&quot;test12\&quot; urlName=\&quot;test12\&quot; writerName=\&quot;admin\&quot; nodeTypeAlias=\&quot;Image\&quot; path=\&quot;-1,1057\&quot;&gt;&lt;umbracoFile&gt;/media/54/tulips.jpg&lt;/umbracoFile&gt;&lt;umbracoWidth&gt;1024&lt;/umbracoWidth&gt;&lt;umbracoHeight&gt;768&lt;/umbracoHeight&gt;&lt;umbracoBytes&gt;620888&lt;/umbracoBytes&gt;&lt;umbracoExtension&gt;jpg&lt;/umbracoExtension&gt;&lt;newsCrops&gt;&lt;crops date=\&quot;2012-11-05T16:55:34\&quot;&gt;&lt;crop name=\&quot;thumbCrop\&quot; x=\&quot;154\&quot; y=\&quot;1\&quot; x2=\&quot;922\&quot; y2=\&quot;768\&quot; url=\&quot;/media/54/tulips_thumbCrop.jpg\&quot; /&gt;&lt;/crops&gt;&lt;/newsCrops&gt;&lt;/Image&gt;&lt;/mediaItem&gt;&lt;mediaItem&gt;&lt;Image id=\&quot;1055\&quot; version=\&quot;4df1f08a-3552-45f2-b4bf-fa980c762f4a\&quot; parentID=\&quot;-1\&quot; level=\&quot;1\&quot; writerID=\&quot;0\&quot; nodeType=\&quot;1032\&quot; template=\&quot;0\&quot; sortOrder=\&quot;1\&quot; createDate=\&quot;2012-11-05T16:29:58\&quot; updateDate=\&quot;2012-11-05T16:30:27\&quot; nodeName=\&quot;Test\&quot; urlName=\&quot;test\&quot; writerName=\&quot;admin\&quot; nodeTypeAlias=\&quot;Image\&quot; path=\&quot;-1,1055\&quot;&gt;&lt;umbracoFile&gt;/media/41/hydrangeas.jpg&lt;/umbracoFile&gt;&lt;umbracoWidth&gt;1024&lt;/umbracoWidth&gt;&lt;umbracoHeight&gt;768&lt;/umbracoHeight&gt;&lt;umbracoBytes&gt;595284&lt;/umbracoBytes&gt;&lt;umbracoExtension&gt;jpg&lt;/umbracoExtension&gt;&lt;newsCrops&gt;&lt;crops date=\&quot;2012-11-05T16:30:18\&quot;&gt;&lt;crop name=\&quot;thumbCrop\&quot; x=\&quot;133\&quot; y=\&quot;0\&quot; x2=\&quot;902\&quot; y2=\&quot;768\&quot; url=\&quot;/media/41/hydrangeas_thumbCrop.jpg\&quot; /&gt;&lt;/crops&gt;&lt;/newsCrops&gt;&lt;/Image&gt;&lt;/mediaItem&gt;&lt;/DAMP&gt;&quot;;
            var dXml = new DynamicXml(xml);
            var result = dXml.TryConvertTo&lt;string&gt;();
            Assert.IsTrue(result.Success);
            Assert.AreEqual(xml, result.Result);
        }

        [Test]
        public void Convert_To_XElement()
        {
            var xml = &quot;&lt;DAMP fullMedia=\&quot;\&quot; test-attribute=\&quot;someValue\&quot;&gt;&lt;mediaItem&gt;&lt;Image id=\&quot;1057\&quot; version=\&quot;d58d5c16-153e-4896-892f-a722e45a69af\&quot; parentID=\&quot;-1\&quot; level=\&quot;1\&quot; writerID=\&quot;0\&quot; nodeType=\&quot;1032\&quot; template=\&quot;0\&quot; sortOrder=\&quot;1\&quot; createDate=\&quot;2012-11-05T16:55:29\&quot; updateDate=\&quot;2012-11-05T16:55:44\&quot; nodeName=\&quot;test12\&quot; urlName=\&quot;test12\&quot; writerName=\&quot;admin\&quot; nodeTypeAlias=\&quot;Image\&quot; path=\&quot;-1,1057\&quot;&gt;&lt;umbracoFile&gt;/media/54/tulips.jpg&lt;/umbracoFile&gt;&lt;umbracoWidth&gt;1024&lt;/umbracoWidth&gt;&lt;umbracoHeight&gt;768&lt;/umbracoHeight&gt;&lt;umbracoBytes&gt;620888&lt;/umbracoBytes&gt;&lt;umbracoExtension&gt;jpg&lt;/umbracoExtension&gt;&lt;newsCrops&gt;&lt;crops date=\&quot;2012-11-05T16:55:34\&quot;&gt;&lt;crop name=\&quot;thumbCrop\&quot; x=\&quot;154\&quot; y=\&quot;1\&quot; x2=\&quot;922\&quot; y2=\&quot;768\&quot; url=\&quot;/media/54/tulips_thumbCrop.jpg\&quot; /&gt;&lt;/crops&gt;&lt;/newsCrops&gt;&lt;/Image&gt;&lt;/mediaItem&gt;&lt;mediaItem&gt;&lt;Image id=\&quot;1055\&quot; version=\&quot;4df1f08a-3552-45f2-b4bf-fa980c762f4a\&quot; parentID=\&quot;-1\&quot; level=\&quot;1\&quot; writerID=\&quot;0\&quot; nodeType=\&quot;1032\&quot; template=\&quot;0\&quot; sortOrder=\&quot;1\&quot; createDate=\&quot;2012-11-05T16:29:58\&quot; updateDate=\&quot;2012-11-05T16:30:27\&quot; nodeName=\&quot;Test\&quot; urlName=\&quot;test\&quot; writerName=\&quot;admin\&quot; nodeTypeAlias=\&quot;Image\&quot; path=\&quot;-1,1055\&quot;&gt;&lt;umbracoFile&gt;/media/41/hydrangeas.jpg&lt;/umbracoFile&gt;&lt;umbracoWidth&gt;1024&lt;/umbracoWidth&gt;&lt;umbracoHeight&gt;768&lt;/umbracoHeight&gt;&lt;umbracoBytes&gt;595284&lt;/umbracoBytes&gt;&lt;umbracoExtension&gt;jpg&lt;/umbracoExtension&gt;&lt;newsCrops&gt;&lt;crops date=\&quot;2012-11-05T16:30:18\&quot;&gt;&lt;crop name=\&quot;thumbCrop\&quot; x=\&quot;133\&quot; y=\&quot;0\&quot; x2=\&quot;902\&quot; y2=\&quot;768\&quot; url=\&quot;/media/41/hydrangeas_thumbCrop.jpg\&quot; /&gt;&lt;/crops&gt;&lt;/newsCrops&gt;&lt;/Image&gt;&lt;/mediaItem&gt;&lt;/DAMP&gt;&quot;;
            var dXml = new DynamicXml(xml);
            var result = dXml.TryConvertTo&lt;XElement&gt;();
            Assert.IsTrue(result.Success);
            Assert.AreEqual(xml, result.Result.ToString(SaveOptions.DisableFormatting));
        }

        [Test]
        public void Convert_To_XmlElement()
        {
            var xml = &quot;&lt;DAMP fullMedia=\&quot;\&quot; test-attribute=\&quot;someValue\&quot;&gt;&lt;mediaItem&gt;&lt;Image id=\&quot;1057\&quot; version=\&quot;d58d5c16-153e-4896-892f-a722e45a69af\&quot; parentID=\&quot;-1\&quot; level=\&quot;1\&quot; writerID=\&quot;0\&quot; nodeType=\&quot;1032\&quot; template=\&quot;0\&quot; sortOrder=\&quot;1\&quot; createDate=\&quot;2012-11-05T16:55:29\&quot; updateDate=\&quot;2012-11-05T16:55:44\&quot; nodeName=\&quot;test12\&quot; urlName=\&quot;test12\&quot; writerName=\&quot;admin\&quot; nodeTypeAlias=\&quot;Image\&quot; path=\&quot;-1,1057\&quot;&gt;&lt;umbracoFile&gt;/media/54/tulips.jpg&lt;/umbracoFile&gt;&lt;umbracoWidth&gt;1024&lt;/umbracoWidth&gt;&lt;umbracoHeight&gt;768&lt;/umbracoHeight&gt;&lt;umbracoBytes&gt;620888&lt;/umbracoBytes&gt;&lt;umbracoExtension&gt;jpg&lt;/umbracoExtension&gt;&lt;newsCrops&gt;&lt;crops date=\&quot;2012-11-05T16:55:34\&quot;&gt;&lt;crop name=\&quot;thumbCrop\&quot; x=\&quot;154\&quot; y=\&quot;1\&quot; x2=\&quot;922\&quot; y2=\&quot;768\&quot; url=\&quot;/media/54/tulips_thumbCrop.jpg\&quot; /&gt;&lt;/crops&gt;&lt;/newsCrops&gt;&lt;/Image&gt;&lt;/mediaItem&gt;&lt;mediaItem&gt;&lt;Image id=\&quot;1055\&quot; version=\&quot;4df1f08a-3552-45f2-b4bf-fa980c762f4a\&quot; parentID=\&quot;-1\&quot; level=\&quot;1\&quot; writerID=\&quot;0\&quot; nodeType=\&quot;1032\&quot; template=\&quot;0\&quot; sortOrder=\&quot;1\&quot; createDate=\&quot;2012-11-05T16:29:58\&quot; updateDate=\&quot;2012-11-05T16:30:27\&quot; nodeName=\&quot;Test\&quot; urlName=\&quot;test\&quot; writerName=\&quot;admin\&quot; nodeTypeAlias=\&quot;Image\&quot; path=\&quot;-1,1055\&quot;&gt;&lt;umbracoFile&gt;/media/41/hydrangeas.jpg&lt;/umbracoFile&gt;&lt;umbracoWidth&gt;1024&lt;/umbracoWidth&gt;&lt;umbracoHeight&gt;768&lt;/umbracoHeight&gt;&lt;umbracoBytes&gt;595284&lt;/umbracoBytes&gt;&lt;umbracoExtension&gt;jpg&lt;/umbracoExtension&gt;&lt;newsCrops&gt;&lt;crops date=\&quot;2012-11-05T16:30:18\&quot;&gt;&lt;crop name=\&quot;thumbCrop\&quot; x=\&quot;133\&quot; y=\&quot;0\&quot; x2=\&quot;902\&quot; y2=\&quot;768\&quot; url=\&quot;/media/41/hydrangeas_thumbCrop.jpg\&quot; /&gt;&lt;/crops&gt;&lt;/newsCrops&gt;&lt;/Image&gt;&lt;/mediaItem&gt;&lt;/DAMP&gt;&quot;;
            var dXml = new DynamicXml(xml);
            var result = dXml.TryConvertTo&lt;XmlElement&gt;();
            Assert.IsTrue(result.Success);
            Assert.AreEqual(xml, result.Result.OuterXml);
        }

        [Test]
        public void Convert_To_XmlDocument()
        {
            var xml = &quot;&lt;DAMP fullMedia=\&quot;\&quot; test-attribute=\&quot;someValue\&quot;&gt;&lt;mediaItem&gt;&lt;Image id=\&quot;1057\&quot; version=\&quot;d58d5c16-153e-4896-892f-a722e45a69af\&quot; parentID=\&quot;-1\&quot; level=\&quot;1\&quot; writerID=\&quot;0\&quot; nodeType=\&quot;1032\&quot; template=\&quot;0\&quot; sortOrder=\&quot;1\&quot; createDate=\&quot;2012-11-05T16:55:29\&quot; updateDate=\&quot;2012-11-05T16:55:44\&quot; nodeName=\&quot;test12\&quot; urlName=\&quot;test12\&quot; writerName=\&quot;admin\&quot; nodeTypeAlias=\&quot;Image\&quot; path=\&quot;-1,1057\&quot;&gt;&lt;umbracoFile&gt;/media/54/tulips.jpg&lt;/umbracoFile&gt;&lt;umbracoWidth&gt;1024&lt;/umbracoWidth&gt;&lt;umbracoHeight&gt;768&lt;/umbracoHeight&gt;&lt;umbracoBytes&gt;620888&lt;/umbracoBytes&gt;&lt;umbracoExtension&gt;jpg&lt;/umbracoExtension&gt;&lt;newsCrops&gt;&lt;crops date=\&quot;2012-11-05T16:55:34\&quot;&gt;&lt;crop name=\&quot;thumbCrop\&quot; x=\&quot;154\&quot; y=\&quot;1\&quot; x2=\&quot;922\&quot; y2=\&quot;768\&quot; url=\&quot;/media/54/tulips_thumbCrop.jpg\&quot; /&gt;&lt;/crops&gt;&lt;/newsCrops&gt;&lt;/Image&gt;&lt;/mediaItem&gt;&lt;mediaItem&gt;&lt;Image id=\&quot;1055\&quot; version=\&quot;4df1f08a-3552-45f2-b4bf-fa980c762f4a\&quot; parentID=\&quot;-1\&quot; level=\&quot;1\&quot; writerID=\&quot;0\&quot; nodeType=\&quot;1032\&quot; template=\&quot;0\&quot; sortOrder=\&quot;1\&quot; createDate=\&quot;2012-11-05T16:29:58\&quot; updateDate=\&quot;2012-11-05T16:30:27\&quot; nodeName=\&quot;Test\&quot; urlName=\&quot;test\&quot; writerName=\&quot;admin\&quot; nodeTypeAlias=\&quot;Image\&quot; path=\&quot;-1,1055\&quot;&gt;&lt;umbracoFile&gt;/media/41/hydrangeas.jpg&lt;/umbracoFile&gt;&lt;umbracoWidth&gt;1024&lt;/umbracoWidth&gt;&lt;umbracoHeight&gt;768&lt;/umbracoHeight&gt;&lt;umbracoBytes&gt;595284&lt;/umbracoBytes&gt;&lt;umbracoExtension&gt;jpg&lt;/umbracoExtension&gt;&lt;newsCrops&gt;&lt;crops date=\&quot;2012-11-05T16:30:18\&quot;&gt;&lt;crop name=\&quot;thumbCrop\&quot; x=\&quot;133\&quot; y=\&quot;0\&quot; x2=\&quot;902\&quot; y2=\&quot;768\&quot; url=\&quot;/media/41/hydrangeas_thumbCrop.jpg\&quot; /&gt;&lt;/crops&gt;&lt;/newsCrops&gt;&lt;/Image&gt;&lt;/mediaItem&gt;&lt;/DAMP&gt;&quot;;
            var dXml = new DynamicXml(xml);
            var result = dXml.TryConvertTo&lt;XmlDocument&gt;();
            Assert.IsTrue(result.Success);
            Assert.AreEqual(xml, result.Result.InnerXml);
        }
    }
}
    </pre>
    <script type="text/javascript">
      highlightRanges([[14,9,14,10,1],[15,13,15,1535,1],[16,13,18,22,1],[19,13,19,60,1],[20,13,20,43,1],[21,13,21,55,1],[22,9,22,10,1],[26,9,26,10,1],[27,13,27,1535,1],[28,13,30,22,1],[31,13,31,59,1],[32,13,32,43,1],[33,13,33,95,1],[34,9,34,10,1],[38,9,38,10,1],[39,13,39,1535,1],[40,13,42,22,1],[43,13,43,61,1],[44,13,44,43,1],[45,13,45,64,1],[46,9,46,10,1],[50,9,50,10,1],[51,13,51,1535,1],[52,13,54,22,1],[55,13,55,62,1],[56,13,56,43,1],[57,13,57,64,1],[58,9,58,10,1],[62,9,62,10,1],[63,13,63,1535,1],[64,13,64,44,1],[65,13,65,54,1],[66,13,66,43,1],[67,13,67,49,1],[68,9,68,10,1],[72,9,72,10,1],[73,13,73,1535,1],[74,13,74,44,1],[75,13,75,56,1],[76,13,76,43,1],[77,13,77,89,1],[78,9,78,10,1],[82,9,82,10,1],[83,13,83,1535,1],[84,13,84,44,1],[85,13,85,58,1],[86,13,86,43,1],[87,13,87,58,1],[88,9,88,10,1],[92,9,92,10,1],[93,13,93,1535,1],[94,13,94,44,1],[95,13,95,59,1],[96,13,96,43,1],[97,13,97,58,1],[98,9,98,10,1]]);
    </script>
  </body>
</html>