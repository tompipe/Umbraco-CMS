<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Tom Pipe\Documents\Hexadigital\Code\Umbraco\Umbraco-CMS\src\umbraco.editorControls\imagecropper\Data.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;

namespace umbraco.editorControls.imagecropper
{
    [Obsolete(&quot;IDataType and all other references to the legacy property editors are no longer used this will be removed from the codebase in future versions&quot;)]
    struct Crop
    {
        public int X;
        public int Y;
        public int X2;
        public int Y2;

        public Crop(int x, int y, int x2, int y2)
        {
            X = x;
            Y = y;
            X2 = x2;
            Y2 = y2;
        }
    }

    [Obsolete(&quot;IDataType and all other references to the legacy property editors are no longer used this will be removed from the codebase in future versions&quot;)]
    enum DefaultCropPosition
    {
        CenterCenter = 0,
        CenterTop,
        CenterBottom,
        LeftCenter,
        LeftTop,
        LeftBottom,
        RightCenter,
        RightTop,
        RightBottom
    }

    [Obsolete(&quot;IDataType and all other references to the legacy property editors are no longer used this will be removed from the codebase in future versions&quot;)]
    struct Preset
    {
        public string Name;
        public int TargetWidth;
        public int TargetHeight;
        public bool KeepAspect;
        public string PositionH;
        public string PositionV;

        public float Aspect
        {
            get { return (float)TargetWidth / TargetHeight; }
        }

        public Crop Fit(ImageInfo imageInfo)
        {
            Crop crop;

            if (Aspect &gt;= imageInfo.Aspect)
            {
                // crop widest            hor    ver
                // relevant positioning: center top, center center, center bottom
                
                float h = ((float)imageInfo.Width / TargetWidth) * TargetHeight;
                
                crop.X = 0;
                crop.X2 = imageInfo.Width;

                switch(PositionV)
                {
                    case &quot;T&quot;:
                        crop.Y = 0;
                        crop.Y2 = (int)h;
                        break;
                    case &quot;B&quot;:
                        crop.Y = imageInfo.Height - (int)h;
                        crop.Y2 = imageInfo.Height;
                        break;
                    default: // CC
                        crop.Y = (int)(imageInfo.Height - h) / 2;
                        crop.Y2 = (int)(crop.Y + h);
                        break;
                }
            }
            else
            {

                // image widest
                // relevant positioning: left/right center, left/right top, left/right bottom
                
                float w = ((float)imageInfo.Height / TargetHeight) * TargetWidth;
                
                crop.Y = 0;
                crop.Y2 = imageInfo.Height;

                switch (PositionH)
                {
                    case &quot;L&quot;:
                        crop.X = 0;
                        crop.X2 = (int)w;
                        break;
                    case &quot;R&quot;:
                        crop.X = imageInfo.Width - (int)w;
                        crop.X2 = imageInfo.Width;
                        break;
                    default: // CC
                        crop.X = (int) (imageInfo.Width - w)/2;
                        crop.X2 = (int) (crop.X + w);
                        break;
                }

            }

            return crop;
        }

        public Preset(string name, int targetWidth, int targetHeight, bool keepAspect, string positionH, string positionV)
        {
            Name = name;
            TargetWidth = targetWidth;
            TargetHeight = targetHeight;
            KeepAspect = keepAspect;
            PositionH = positionH;
            PositionV = positionV;
        }

    }
}
    </pre>
    <script type="text/javascript">
      highlightRanges([[14,9,14,10,0],[15,13,15,19,0],[16,13,16,19,0],[17,13,17,21,0],[18,13,18,21,0],[19,9,19,10,0],[48,17,48,18,0],[48,19,48,60,0],[48,61,48,62,0],[52,9,52,10,0],[55,13,55,44,0],[56,13,56,14,0],[60,17,60,81,0],[62,17,62,28,0],[63,17,63,43,0],[65,17,65,34,0],[68,25,68,36,0],[69,25,69,42,0],[70,25,70,31,0],[72,25,72,60,0],[73,25,73,52,0],[74,25,74,31,0],[76,25,76,66,0],[77,25,77,53,0],[78,25,78,31,0],[80,13,80,14,0],[82,13,82,14,0],[87,17,87,82,0],[89,17,89,28,0],[90,17,90,44,0],[92,17,92,35,0],[95,25,95,36,0],[96,25,96,42,0],[97,25,97,31,0],[99,25,99,59,0],[100,25,100,51,0],[101,25,101,31,0],[103,25,103,64,0],[104,25,104,54,0],[105,25,105,31,0],[108,13,108,14,0],[110,13,110,25,0],[111,9,111,10,0],[114,9,114,10,0],[115,13,115,25,0],[116,13,116,39,0],[117,13,117,41,0],[118,13,118,37,0],[119,13,119,35,0],[120,13,120,35,0],[121,9,121,10,0]]);
    </script>
  </body>
</html>