<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Tom Pipe\Documents\Hexadigital\Code\Umbraco\Umbraco-CMS\src\Umbraco.Web\umbraco.presentation\umbraco\Trees\loadDLRScripts.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System.Text;
using umbraco.cms.presentation.Trees;
using Umbraco.Core.IO;
using Umbraco.Core;


namespace umbraco
{
    /// &lt;summary&gt;
    /// Handles loading of python items into the developer application tree
    /// &lt;/summary&gt;
    public class loadDLRScripts : FileSystemTree
    {
        public loadDLRScripts(string application) : base(application) { }

        protected override void CreateRootNode(ref XmlTreeNode rootNode)
        {
            rootNode.NodeType = &quot;init&quot; + TreeAlias;
            rootNode.NodeID = &quot;init&quot;;
            rootNode.Text = ui.Text(&quot;treeHeaders&quot;, &quot;scripting&quot;);
        }

        /// &lt;summary&gt;
        /// Renders the Javascript.
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;Javascript&quot;&gt;The javascript.&lt;/param&gt;
        public override void RenderJS(ref StringBuilder Javascript)
        {
            Javascript.Append(@&quot;function openDLRScript(id) {UmbClientMgr.contentFrame(&#39;developer/python/editPython.aspx?file=&#39; + id);}&quot;);
        }

        protected override string FilePath
        {
            get
            {
                return SystemDirectories.MacroScripts + &quot;/&quot;;
            }
        }

        protected override string FileSearchPattern
        {
            get
            {
                return &quot;*.*&quot;;
            }
        }

        protected override void OnRenderFileNode(ref XmlTreeNode xNode)
        {

            xNode.Action = xNode.Action.Replace(&quot;openFile&quot;, &quot;openDLRScript&quot;);
            string ex = xNode.Text.Substring(xNode.Text.LastIndexOf(&#39;.&#39;)).Trim(&#39;.&#39;).ToLower();
            string icon = &quot;developerScript.gif&quot;;

            switch (ex)
            {
                case &quot;rb&quot;:
                    icon = &quot;developerRuby.gif&quot;;
                    break;
                case &quot;py&quot;:
                    icon = &quot;developerPython.gif&quot;;
                    break;
                case &quot;config&quot;:
                    //remove all config files
                    xNode = null;
                    return;
                default:
                    icon = &quot;developerScript.gif&quot;;
                    break;
            }

            xNode.Icon = icon;
            xNode.OpenIcon = icon;

            xNode.Text = xNode.Text.StripFileExtension();
        }

    }

}

    </pre>
    <script type="text/javascript">
      highlightRanges([[14,53,14,70,0],[14,71,14,72,0],[14,73,14,74,0],[17,9,17,10,0],[18,13,18,52,0],[19,13,19,38,0],[20,13,20,65,0],[21,9,21,10,0],[28,9,28,10,0],[29,13,29,138,0],[30,9,30,10,0],[35,13,35,14,0],[36,17,36,61,0],[37,13,37,14,0],[43,13,43,14,0],[44,17,44,30,0],[45,13,45,14,0],[49,9,49,10,0],[51,13,51,78,0],[52,13,52,95,0],[53,13,53,49,0],[55,13,55,24,0],[58,21,58,48,0],[59,21,59,27,0],[61,21,61,50,0],[62,21,62,27,0],[65,21,65,34,0],[66,21,66,28,0],[68,21,68,50,0],[69,21,69,27,0],[72,13,72,31,0],[73,13,73,35,0],[75,13,75,58,0],[76,9,76,10,0]]);
    </script>
  </body>
</html>