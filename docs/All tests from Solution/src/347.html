<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Tom Pipe\Documents\Hexadigital\Code\Umbraco\Umbraco-CMS\src\Umbraco.Tests\Persistence\Querying\DataTypeDefinitionRepositorySqlClausesTest.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using System.Diagnostics;
using NUnit.Framework;
using Umbraco.Core;
using Umbraco.Core.Models.Rdbms;
using Umbraco.Core.Persistence;
using Umbraco.Tests.TestHelpers;

namespace Umbraco.Tests.Persistence.Querying
{
    [TestFixture]
    public class DataTypeDefinitionRepositorySqlClausesTest : BaseUsingSqlCeSyntax
    {
        [Test]
        public void Can_Verify_Base_Clause()
        {
            var NodeObjectTypeId = new Guid(Constants.ObjectTypes.DataType);

            var expected = new Sql();
            expected.Select(&quot;*&quot;)
                .From(&quot;[cmsDataType]&quot;)
                .InnerJoin(&quot;[umbracoNode]&quot;).On(&quot;[cmsDataType].[nodeId] = [umbracoNode].[id]&quot;)
                .Where(&quot;([umbracoNode].[nodeObjectType] = @0)&quot;, new Guid(&quot;30a2a501-1978-4ddb-a57b-f7efed43ba3c&quot;));

            var sql = new Sql();
            sql.Select(&quot;*&quot;)
               .From&lt;DataTypeDto&gt;()
               .InnerJoin&lt;NodeDto&gt;()
               .On&lt;DataTypeDto, NodeDto&gt;(left =&gt; left.DataTypeId, right =&gt; right.NodeId)
               .Where&lt;NodeDto&gt;(x =&gt; x.NodeObjectType == NodeObjectTypeId);

            Assert.That(sql.SQL, Is.EqualTo(expected.SQL));

            Assert.AreEqual(expected.Arguments.Length, sql.Arguments.Length);
            for (int i = 0; i &lt; expected.Arguments.Length; i++)
            {
                Assert.AreEqual(expected.Arguments[i], sql.Arguments[i]);
            }

            Debug.Print(sql.SQL);
        }
    }
}
    </pre>
    <script type="text/javascript">
      highlightRanges([[16,9,16,10,1],[17,13,17,77,1],[19,13,19,38,1],[20,13,23,115,1],[25,13,25,33,1],[26,13,30,75,1],[32,13,32,60,1],[34,13,34,78,1],[35,18,35,27,1],[35,29,35,58,1],[35,60,35,63,1],[36,13,36,14,1],[37,17,37,74,1],[38,13,38,14,1],[40,13,40,34,1],[41,9,41,10,1]]);
    </script>
  </body>
</html>