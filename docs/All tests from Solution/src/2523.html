<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Tom Pipe\Documents\Hexadigital\Code\Umbraco\Umbraco-CMS\src\umbraco.businesslogic\ApplicationTree.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Web;
using System.Xml.Linq;
using AutoMapper;
using Umbraco.Core;
using Umbraco.Core.Cache;
using Umbraco.Core.IO;
using Umbraco.Core.Events;
using Umbraco.Core.IO;
using Umbraco.Core.Services;
using umbraco.DataLayer;

namespace umbraco.BusinessLogic
{
    /// &lt;summary&gt;
    /// umbraco.BusinessLogic.ApplicationTree provides access to the application tree structure in umbraco.
    /// An application tree is a collection of nodes belonging to one or more application(s).
    /// Through this class new application trees can be created, modified and deleted. 
    /// &lt;/summary&gt;
    [Obsolete(&quot;This has been superceded by ApplicationContext.Current.ApplicationTreeService&quot;)]
    public class ApplicationTree
    {

        /// &lt;summary&gt;
        /// Gets or sets a value indicating whether this &lt;see cref=&quot;ApplicationTree&quot;/&gt; is silent.
        /// &lt;/summary&gt;
        /// &lt;value&gt;&lt;c&gt;true&lt;/c&gt; if silent; otherwise, &lt;c&gt;false&lt;/c&gt;.&lt;/value&gt;
        public bool Silent { get; set; }

        /// &lt;summary&gt;
        /// Gets or sets a value indicating whether this &lt;see cref=&quot;ApplicationTree&quot;/&gt; should initialize.
        /// &lt;/summary&gt;
        /// &lt;value&gt;&lt;c&gt;true&lt;/c&gt; if initialize; otherwise, &lt;c&gt;false&lt;/c&gt;.&lt;/value&gt;
        public bool Initialize { get; set; }

        /// &lt;summary&gt;
        /// Gets or sets the sort order.
        /// &lt;/summary&gt;
        /// &lt;value&gt;The sort order.&lt;/value&gt;
        public byte SortOrder { get; set; }

        /// &lt;summary&gt;
        /// Gets the application alias.
        /// &lt;/summary&gt;
        /// &lt;value&gt;The application alias.&lt;/value&gt;
        public string ApplicationAlias { get; private set; }

        /// &lt;summary&gt;
        /// Gets the tree alias.
        /// &lt;/summary&gt;
        /// &lt;value&gt;The alias.&lt;/value&gt;
        public string Alias { get; private set; }

        /// &lt;summary&gt;
        /// Gets or sets the tree title.
        /// &lt;/summary&gt;
        /// &lt;value&gt;The title.&lt;/value&gt;
        public string Title { get; set; }

        /// &lt;summary&gt;
        /// Gets or sets the icon closed.
        /// &lt;/summary&gt;
        /// &lt;value&gt;The icon closed.&lt;/value&gt;
        public string IconClosed { get; set; }

        /// &lt;summary&gt;
        /// Gets or sets the icon opened.
        /// &lt;/summary&gt;
        /// &lt;value&gt;The icon opened.&lt;/value&gt;
        public string IconOpened { get; set; }

        /// &lt;summary&gt;
        /// Gets or sets the name of the assembly.
        /// &lt;/summary&gt;
        /// &lt;value&gt;The name of the assembly.&lt;/value&gt;
        public string AssemblyName { get; set; }

        /// &lt;summary&gt;
        /// Gets or sets the tree type.
        /// &lt;/summary&gt;
        /// &lt;value&gt;The type.&lt;/value&gt;
        public string Type { get; set; }

        private Type _runtimeType;

        /// &lt;summary&gt;
        /// Returns the CLR type based on it&#39;s assembly name stored in the config
        /// &lt;/summary&gt;
        /// &lt;returns&gt;&lt;/returns&gt;
        internal Type GetRuntimeType()
        {
            return _runtimeType ?? (_runtimeType = System.Type.GetType(Type));
        }

        /// &lt;summary&gt;
        /// Gets or sets the default tree action.
        /// &lt;/summary&gt;
        /// &lt;value&gt;The action.&lt;/value&gt;
        public string Action { get; set; }

        /// &lt;summary&gt;
        /// Initializes a new instance of the &lt;see cref=&quot;ApplicationTree&quot;/&gt; class.
        /// &lt;/summary&gt;
        public ApplicationTree() { }


        /// &lt;summary&gt;
        /// Initializes a new instance of the &lt;see cref=&quot;ApplicationTree&quot;/&gt; class.
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;silent&quot;&gt;if set to &lt;c&gt;true&lt;/c&gt; [silent].&lt;/param&gt;
        /// &lt;param name=&quot;initialize&quot;&gt;if set to &lt;c&gt;true&lt;/c&gt; [initialize].&lt;/param&gt;
        /// &lt;param name=&quot;sortOrder&quot;&gt;The sort order.&lt;/param&gt;
        /// &lt;param name=&quot;applicationAlias&quot;&gt;The application alias.&lt;/param&gt;
        /// &lt;param name=&quot;alias&quot;&gt;The tree alias.&lt;/param&gt;
        /// &lt;param name=&quot;title&quot;&gt;The tree title.&lt;/param&gt;
        /// &lt;param name=&quot;iconClosed&quot;&gt;The icon closed.&lt;/param&gt;
        /// &lt;param name=&quot;iconOpened&quot;&gt;The icon opened.&lt;/param&gt;
        /// &lt;param name=&quot;assemblyName&quot;&gt;Name of the assembly.&lt;/param&gt;
        /// &lt;param name=&quot;type&quot;&gt;The tree type.&lt;/param&gt;
        /// &lt;param name=&quot;action&quot;&gt;The default tree action.&lt;/param&gt;
        public ApplicationTree(bool silent, bool initialize, byte sortOrder, string applicationAlias, string alias, string title, string iconClosed, string iconOpened, string assemblyName, string type, string action)
        {
            this.Silent = silent;
            this.Initialize = initialize;
            this.SortOrder = sortOrder;
            this.ApplicationAlias = applicationAlias;
            this.Alias = alias;
            this.Title = title;
            this.IconClosed = iconClosed;
            this.IconOpened = iconOpened;
            this.AssemblyName = assemblyName;
            this.Type = type;
            this.Action = action;
        }


        /// &lt;summary&gt;
        /// Creates a new application tree.
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;silent&quot;&gt;if set to &lt;c&gt;true&lt;/c&gt; [silent].&lt;/param&gt;
        /// &lt;param name=&quot;initialize&quot;&gt;if set to &lt;c&gt;true&lt;/c&gt; [initialize].&lt;/param&gt;
        /// &lt;param name=&quot;sortOrder&quot;&gt;The sort order.&lt;/param&gt;
        /// &lt;param name=&quot;applicationAlias&quot;&gt;The application alias.&lt;/param&gt;
        /// &lt;param name=&quot;alias&quot;&gt;The alias.&lt;/param&gt;
        /// &lt;param name=&quot;title&quot;&gt;The title.&lt;/param&gt;
        /// &lt;param name=&quot;iconClosed&quot;&gt;The icon closed.&lt;/param&gt;
        /// &lt;param name=&quot;iconOpened&quot;&gt;The icon opened.&lt;/param&gt;
        /// &lt;param name=&quot;assemblyName&quot;&gt;Name of the assembly.&lt;/param&gt;
        /// &lt;param name=&quot;type&quot;&gt;The type.&lt;/param&gt;
        /// &lt;param name=&quot;action&quot;&gt;The action.&lt;/param&gt;
        public static void MakeNew(bool silent, bool initialize, byte sortOrder, string applicationAlias, string alias, string title, string iconClosed, string iconOpened, string assemblyName, string type, string action)
        {
            ApplicationContext.Current.Services.ApplicationTreeService.MakeNew(initialize, sortOrder, applicationAlias, alias, title, iconClosed, iconOpened,
                assemblyName.IsNullOrWhiteSpace() ? type : string.Format(&quot;{0}.{1},{0}&quot;, assemblyName, type));
        }

        /// &lt;summary&gt;
        /// Saves this instance.
        /// &lt;/summary&gt;
        public void Save()
        {
            ApplicationContext.Current.Services.ApplicationTreeService.SaveTree(
                Mapper.Map&lt;ApplicationTree, Umbraco.Core.Models.ApplicationTree&gt;(this));
        }

        /// &lt;summary&gt;
        /// Deletes this instance.
        /// &lt;/summary&gt;
        public void Delete()
        {
            ApplicationContext.Current.Services.ApplicationTreeService.DeleteTree(
                Mapper.Map&lt;ApplicationTree, Umbraco.Core.Models.ApplicationTree&gt;(this));
        }

        /// &lt;summary&gt;
        /// Gets an ApplicationTree by it&#39;s tree alias.
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;treeAlias&quot;&gt;The tree alias.&lt;/param&gt;
        /// &lt;returns&gt;An ApplicationTree instance&lt;/returns&gt;
        public static ApplicationTree getByAlias(string treeAlias)
        {
            return Mapper.Map&lt;Umbraco.Core.Models.ApplicationTree, ApplicationTree&gt;(
                ApplicationContext.Current.Services.ApplicationTreeService.GetByAlias(treeAlias));
        }

        /// &lt;summary&gt;
        /// Gets all applicationTrees registered in umbraco from the umbracoAppTree table..
        /// &lt;/summary&gt;
        /// &lt;returns&gt;Returns a ApplicationTree Array&lt;/returns&gt;
        public static ApplicationTree[] getAll()
        {
            return ApplicationContext.Current.Services.ApplicationTreeService.GetAll()
                          .Select(Mapper.Map&lt;Umbraco.Core.Models.ApplicationTree, ApplicationTree&gt;)
                          .ToArray();
        }

        /// &lt;summary&gt;
        /// Gets the application tree for the applcation with the specified alias
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;applicationAlias&quot;&gt;The application alias.&lt;/param&gt;
        /// &lt;returns&gt;Returns a ApplicationTree Array&lt;/returns&gt;
        public static ApplicationTree[] getApplicationTree(string applicationAlias)
        {
            return ApplicationContext.Current.Services.ApplicationTreeService.GetApplicationTrees(applicationAlias)
                          .Select(Mapper.Map&lt;Umbraco.Core.Models.ApplicationTree, ApplicationTree&gt;)
                          .ToArray();
        }

        /// &lt;summary&gt;
        /// Gets the application tree for the applcation with the specified alias
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;applicationAlias&quot;&gt;The application alias.&lt;/param&gt;
        /// &lt;param name=&quot;onlyInitializedApplications&quot;&gt;&lt;/param&gt;
        /// &lt;returns&gt;Returns a ApplicationTree Array&lt;/returns&gt;
        public static ApplicationTree[] getApplicationTree(string applicationAlias, bool onlyInitializedApplications)
        {
            return ApplicationContext.Current.Services.ApplicationTreeService.GetApplicationTrees(applicationAlias, onlyInitializedApplications)
                          .Select(Mapper.Map&lt;Umbraco.Core.Models.ApplicationTree, ApplicationTree&gt;)
                          .ToArray();
        }

    }
}

    </pre>
    <script type="text/javascript">
      highlightRanges([[31,30,31,34,0],[31,35,31,39,0],[37,34,37,38,0],[37,39,37,43,0],[43,33,43,37,0],[43,38,43,42,0],[49,42,49,46,0],[49,47,49,59,0],[55,31,55,35,0],[55,36,55,48,0],[61,31,61,35,0],[61,36,61,40,0],[67,36,67,40,0],[67,41,67,45,0],[73,36,73,40,0],[73,41,73,45,0],[79,38,79,42,0],[79,43,79,47,0],[85,30,85,34,0],[85,35,85,39,0],[94,9,94,10,0],[95,13,95,79,0],[96,9,96,10,0],[102,32,102,36,0],[102,37,102,41,0],[107,9,107,33,0],[107,34,107,35,0],[107,36,107,37,0],[124,9,124,217,0],[125,9,125,10,0],[126,13,126,34,0],[127,13,127,42,0],[128,13,128,40,0],[129,13,129,54,0],[130,13,130,32,0],[131,13,131,32,0],[132,13,132,42,0],[133,13,133,42,0],[134,13,134,46,0],[135,13,135,30,0],[136,13,136,34,0],[137,9,137,10,0],[155,9,155,10,0],[156,13,157,110,0],[158,9,158,10,0],[164,9,164,10,0],[165,13,166,89,0],[167,9,167,10,0],[173,9,173,10,0],[174,13,175,89,0],[176,9,176,10,0],[184,9,184,10,0],[185,13,186,99,0],[187,9,187,10,0],[194,9,194,10,0],[195,13,197,38,0],[198,9,198,10,0],[206,9,206,10,0],[207,13,209,38,0],[210,9,210,10,0],[219,9,219,10,0],[220,13,222,38,0],[223,9,223,10,0]]);
    </script>
  </body>
</html>