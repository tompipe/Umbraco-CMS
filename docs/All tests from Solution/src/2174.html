<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Tom Pipe\Documents\Hexadigital\Code\Umbraco\Umbraco-CMS\src\Umbraco.Core\Dynamics\DynamicNull.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using System.Collections.Generic;
using System.Collections;
using System.Dynamic;
using System.Web;

namespace Umbraco.Core.Dynamics
{
    //This type is used as a return type when TryGetMember fails on a DynamicNode
    //.Where explicitly checks for this type, to indicate that nothing was returned
    //Because it&#39;s IEnumerable, if the user is actually trying @Model.TextPages or similar
    //it will still return an enumerable object (assuming the call actually failed because there were no children of that type)
    //but in .Where, if they use a property that doesn&#39;t exist, the lambda will bypass this and return false

    // returned when TryGetMember fails on a DynamicPublishedContent
    //
    // so if user does @CurrentPage.TextPages it will get something that is enumerable (but empty)
    // note - not sure I understand the stuff about .Where, though

    public class DynamicNull : DynamicObject, IEnumerable, IHtmlString
    {
        public static readonly DynamicNull Null = new DynamicNull();

        private DynamicNull() {}

        public IEnumerator GetEnumerator()
        {
            return (new List&lt;DynamicNull&gt;()).GetEnumerator();
        }

        public DynamicNull Where(string predicate, params object[] values)
        {
            return this;
        }

        public DynamicNull OrderBy(string orderBy)
        {
            return this;
        }

        public DynamicNull ToContentSet()
        {
            return this;
        }

        public int Count()
        {
            return 0;
        }

        public override string ToString()
        {
            return string.Empty;
        }

        public override bool TryGetMember(GetMemberBinder binder, out object result)
        {
            result = this;
            return true;
        }

        public override bool TryGetIndex(GetIndexBinder binder, object[] indexes, out object result)
        {
            result = this;
            return true;
        }

        public override bool TryInvoke(InvokeBinder binder, object[] args, out object result)
        {
            result = this;
            return true;
        }

        public bool IsNull()
        {
            return true;
        }

        public bool HasValue()
        {
            return false;
        }

        public string Name
        {
            get { return string.Empty; }
        }

        public int Id
        {
            get { return 0; }
        }

        public static implicit operator bool(DynamicNull n)
        {
            return false;
        }

        public static implicit operator DateTime(DynamicNull n)
        {
            return DateTime.MinValue;
        }

        public static implicit operator int(DynamicNull n)
        {
            return 0;
        }

        public static implicit operator string(DynamicNull n)
        {
            return string.Empty;
        }

        public string ToHtmlString()
        {
            return string.Empty;
        }
    }
}

    </pre>
    <script type="text/javascript">
      highlightRanges([[22,9,22,69,1],[24,9,24,30,1],[24,31,24,32,1],[24,32,24,33,1],[27,9,27,10,0],[28,13,28,62,0],[29,9,29,10,0],[32,9,32,10,0],[33,13,33,25,0],[34,9,34,10,0],[37,9,37,10,0],[38,13,38,25,0],[39,9,39,10,0],[42,9,42,10,0],[43,13,43,25,0],[44,9,44,10,0],[47,9,47,10,0],[48,13,48,22,0],[49,9,49,10,0],[52,9,52,10,1],[53,13,53,33,1],[54,9,54,10,1],[57,9,57,10,0],[58,13,58,27,0],[59,13,59,25,0],[60,9,60,10,0],[63,9,63,10,0],[64,13,64,27,0],[65,13,65,25,0],[66,9,66,10,0],[69,9,69,10,0],[70,13,70,27,0],[71,13,71,25,0],[72,9,72,10,0],[75,9,75,10,0],[76,13,76,25,0],[77,9,77,10,0],[80,9,80,10,0],[81,13,81,26,0],[82,9,82,10,0],[86,17,86,18,0],[86,19,86,39,0],[86,40,86,41,0],[91,17,91,18,0],[91,19,91,28,0],[91,29,91,30,0],[95,9,95,10,0],[96,13,96,26,0],[97,9,97,10,0],[100,9,100,10,0],[101,13,101,38,0],[102,9,102,10,0],[105,9,105,10,0],[106,13,106,22,0],[107,9,107,10,0],[110,9,110,10,0],[111,13,111,33,0],[112,9,112,10,0],[115,9,115,10,0],[116,13,116,33,0],[117,9,117,10,0]]);
    </script>
  </body>
</html>