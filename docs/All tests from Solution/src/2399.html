<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Tom Pipe\Documents\Hexadigital\Code\Umbraco\Umbraco-CMS\src\umbraco.cms\businesslogic\cache\Cache.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using System.Web.Caching;
using System.Web;
using Umbraco.Core;

namespace umbraco.cms.businesslogic.cache
{
    /// &lt;summary&gt;
    /// Used to easily store and retrieve items from the cache.
    /// &lt;/summary&gt;
    /// &lt;remarks&gt;
    /// This whole class will become obsolete, however one of the methods is still used that is not ported over to the new CacheHelper
    /// class so that is why the class declaration is not marked obsolete.
    /// We haven&#39;t migrated it because I don&#39;t know why it is needed.
    /// &lt;/remarks&gt;
    [Obsolete(&quot;Use the ApplicationContext.Current.ApplicationCache instead&quot;)]
    public class Cache
    {
        /// &lt;summary&gt;
        /// Clears everything in umbraco&#39;s runtime cache, which means that not only
        /// umbraco content is removed, but also other cache items from pages running in
        /// the same application / website. Use with care :-)
        /// &lt;/summary&gt;
        [Obsolete(&quot;Use the ApplicationContext.Current.ApplicationCache.ClearAllCache instead&quot;)]
        public static void ClearAllCache()
        {
	        var helper = new CacheHelper(System.Web.HttpRuntime.Cache);
			helper.RuntimeCache.ClearAllCache();
        }

        /// &lt;summary&gt;
        /// Clears the item in umbraco&#39;s runtime cache with the given key 
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;key&quot;&gt;Key&lt;/param&gt;
        [Obsolete(&quot;Use the ApplicationContext.Current.ApplicationCache.ClearCacheItem instead&quot;)]
        public static void ClearCacheItem(string key)
        {
			var helper = new CacheHelper(System.Web.HttpRuntime.Cache);
	        helper.RuntimeCache.ClearCacheItem(key);
        }


        /// &lt;summary&gt;
        /// Clears all objects in the System.Web.Cache with the System.Type name as the
        /// input parameter. (using [object].GetType())
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;TypeName&quot;&gt;The name of the System.Type which should be cleared from cache ex &quot;System.Xml.XmlDocument&quot;&lt;/param&gt;
        [Obsolete(&quot;Use the ApplicationContext.Current.ApplicationCache.ClearCacheObjectTypes instead&quot;)]
        public static void ClearCacheObjectTypes(string TypeName)
        {
			var helper = new CacheHelper(System.Web.HttpRuntime.Cache);
			helper.RuntimeCache.ClearCacheObjectTypes(TypeName);
        }

        /// &lt;summary&gt;
        /// Clears all cache items that starts with the key passed.
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;KeyStartsWith&quot;&gt;The start of the key&lt;/param&gt;
        [Obsolete(&quot;Use the ApplicationContext.Current.ApplicationCache.ClearCacheByKeySearch instead&quot;)]
        public static void ClearCacheByKeySearch(string KeyStartsWith)
        {
			var helper = new CacheHelper(System.Web.HttpRuntime.Cache);
			helper.RuntimeCache.ClearCacheByKeySearch(KeyStartsWith);
        }

        /// &lt;summary&gt;
        /// Retrieve all cached items
        /// &lt;/summary&gt;
        /// &lt;returns&gt;A hastable containing all cacheitems&lt;/returns&gt;
        [Obsolete(&quot;This method should not be used, use other methods to return specific cached items&quot;)]
        public static System.Collections.Hashtable ReturnCacheItemsOrdred()
        {
            System.Collections.Hashtable ht = new System.Collections.Hashtable();
            System.Web.Caching.Cache c = System.Web.HttpRuntime.Cache;
            if (c != null)
            {
                System.Collections.IDictionaryEnumerator cacheEnumerator = c.GetEnumerator();
                while (cacheEnumerator.MoveNext())
                {
                    if (ht[c[cacheEnumerator.Key.ToString()].GetType().ToString()] == null)
                        ht.Add(c[cacheEnumerator.Key.ToString()].GetType().ToString(), new System.Collections.ArrayList());

                    ((System.Collections.ArrayList)ht[c[cacheEnumerator.Key.ToString()].GetType().ToString()]).Add(cacheEnumerator.Key.ToString());
                }
            }
            return ht;
        }

        public delegate TT GetCacheItemDelegate&lt;TT&gt;();

        [Obsolete(&quot;Use the ApplicationContext.Current.ApplicationCache.GetCacheItem instead&quot;)]
        public static TT GetCacheItem&lt;TT&gt;(string cacheKey, object syncLock,
            TimeSpan timeout, GetCacheItemDelegate&lt;TT&gt; getCacheItem)
        {
            return GetCacheItem(cacheKey, syncLock, null, timeout, getCacheItem);
        }

        [Obsolete(&quot;Use the ApplicationContext.Current.ApplicationCache.GetCacheItem instead&quot;)]
        public static TT GetCacheItem&lt;TT&gt;(string cacheKey, object syncLock,
            CacheItemRemovedCallback refreshAction, TimeSpan timeout,
            GetCacheItemDelegate&lt;TT&gt; getCacheItem)
        {
            return GetCacheItem(cacheKey, syncLock, CacheItemPriority.Normal, refreshAction, timeout, getCacheItem);
        }
        
        [Obsolete(&quot;Use the ApplicationContext.Current.ApplicationCache.GetCacheItem instead&quot;)]
        public static TT GetCacheItem&lt;TT&gt;(string cacheKey, object syncLock,
            CacheItemPriority priority, CacheItemRemovedCallback refreshAction, TimeSpan timeout,
            GetCacheItemDelegate&lt;TT&gt; getCacheItem)
        {
            return GetCacheItem(cacheKey, syncLock, priority, refreshAction, null, timeout, getCacheItem);
        }

        [Obsolete(&quot;Use the ApplicationContext.Current.ApplicationCache.GetCacheItem instead&quot;)]
        public static TT GetCacheItem&lt;TT&gt;(string cacheKey, object syncLock,
            CacheItemPriority priority, CacheItemRemovedCallback refreshAction,
            CacheDependency cacheDependency, TimeSpan timeout, GetCacheItemDelegate&lt;TT&gt; getCacheItem)
        {
			var helper = new CacheHelper(System.Web.HttpRuntime.Cache);
			Func&lt;TT&gt; f = () =&gt; getCacheItem();
			return helper.GetCacheItem(cacheKey, priority, refreshAction, cacheDependency, timeout, f);
        }
    }
}

    </pre>
    <script type="text/javascript">
      highlightRanges([[26,9,26,10,0],[27,10,27,69,0],[28,4,28,40,0],[29,9,29,10,0],[37,9,37,10,0],[38,4,38,63,0],[39,10,39,50,0],[40,9,40,10,0],[50,9,50,10,0],[51,4,51,63,0],[52,4,52,56,0],[53,9,53,10,0],[61,9,61,10,0],[62,4,62,63,0],[63,4,63,61,0],[64,9,64,10,0],[72,9,72,10,0],[73,13,73,82,0],[74,13,74,71,0],[75,13,75,27,0],[76,13,76,14,0],[77,17,77,94,0],[78,17,78,51,0],[79,17,79,18,0],[80,21,80,92,0],[81,25,81,124,0],[83,21,83,148,0],[84,17,84,18,0],[85,13,85,14,0],[86,13,86,23,0],[87,9,87,10,0],[94,9,94,10,0],[95,13,95,82,0],[96,9,96,10,0],[102,9,102,10,0],[103,13,103,117,0],[104,9,104,10,0],[110,9,110,10,0],[111,13,111,107,0],[112,9,112,10,0],[118,9,118,10,0],[119,4,119,63,0],[120,4,120,23,0],[120,23,120,37,0],[120,37,120,38,0],[120,4,120,38,0],[121,4,121,95,0],[122,9,122,10,0]]);
    </script>
  </body>
</html>