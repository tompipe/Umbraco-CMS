<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Tom Pipe\Documents\Hexadigital\Code\Umbraco\Umbraco-CMS\src\umbraco.editorControls\dropdownlist\dropdown.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.ComponentModel;
using System.Collections;

using umbraco.cms.businesslogic;
using umbraco.cms.businesslogic.language;
using System.Collections.Generic;

namespace umbraco.editorControls
{
    [Obsolete(&quot;IDataType and all other references to the legacy property editors are no longer used this will be removed from the codebase in future versions&quot;)]
	public class dropdown : System.Web.UI.WebControls.DropDownList, interfaces.IDataEditor
	{
		private interfaces.IData _data;
		private SortedList _prevalues;

		public dropdown(interfaces.IData Data, SortedList Prevalues) 
		{
			_data = Data;
			_prevalues = Prevalues;
		}


        List&lt;KeyValuePair&lt;int, String&gt;&gt; Prevalues;
        public dropdown(interfaces.IData Data, List&lt;KeyValuePair&lt;int, String&gt;&gt; Prevalues)
        {
            _data = Data;
            this.Prevalues = Prevalues;
        }


		public Control Editor {
			get {return this;}
		}

		public virtual bool TreatAsRichTextEditor 
		{
			get {return false;}
		}
		public virtual bool ShowLabel 
		{
			get {return true;}
		}

		public void Save() 
		{
			string tmpVal = &quot;&quot;;
			if (this.SelectedIndex &gt; 0)
				tmpVal = this.SelectedValue;
			_data.Value = tmpVal;
		}

		protected override void OnInit(EventArgs e)
		{
			base.OnInit (e);

            if (_prevalues != null)
            {
                foreach (object key in _prevalues.Keys)
                {
                    this.Items.Add(new ListItem(Dictionary.ReplaceKey(_prevalues[key].ToString()), key.ToString()));
                }

            }
            else if (Prevalues != null)
            {
                foreach (KeyValuePair&lt;int, String&gt; item in Prevalues)
                {
                    this.Items.Add(new ListItem(Dictionary.ReplaceKey(item.Value), item.Key.ToString()));
                }
            }

			base.Items.Insert(0, new ListItem(ui.Text(&quot;choose&quot;) + &quot;...&quot;,&quot;&quot;));

			if (_data != null &amp;&amp; _data.Value != null)
				this.SelectedValue = _data.Value.ToString();			
		}
	}
}
    </pre>
    <script type="text/javascript">
      highlightRanges([[19,3,19,63,0],[20,3,20,4,0],[21,4,21,17,0],[22,4,22,27,0],[23,3,23,4,0],[27,9,27,90,0],[28,9,28,10,0],[29,13,29,26,0],[30,13,30,40,0],[31,9,31,10,0],[35,8,35,9,0],[35,9,35,21,0],[35,21,35,22,0],[40,8,40,9,0],[40,9,40,22,0],[40,22,40,23,0],[44,8,44,9,0],[44,9,44,21,0],[44,21,44,22,0],[48,3,48,4,0],[49,4,49,23,0],[50,4,50,31,0],[51,5,51,33,0],[52,4,52,25,0],[53,3,53,4,0],[56,3,56,4,0],[57,4,57,20,0],[59,13,59,36,0],[60,13,60,14,0],[61,17,61,24,0],[61,26,61,36,0],[61,37,61,39,0],[61,40,61,55,0],[62,17,62,18,0],[63,21,63,117,0],[64,17,64,18,0],[66,13,66,14,0],[67,18,67,40,0],[68,13,68,14,0],[69,17,69,24,0],[69,26,69,56,0],[69,57,69,59,0],[69,60,69,69,0],[70,17,70,18,0],[71,21,71,106,0],[72,17,72,18,0],[73,13,73,14,0],[75,4,75,69,0],[77,4,77,45,0],[78,5,78,49,0],[79,3,79,4,0]]);
    </script>
  </body>
</html>