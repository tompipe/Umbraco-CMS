<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Tom Pipe\Documents\Hexadigital\Code\Umbraco\Umbraco-CMS\src\Umbraco.Core\Models\PropertyGroup.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using System.Collections.Specialized;
using System.Diagnostics;
using System.Linq;
using System.Reflection;
using System.Runtime.Serialization;
using Umbraco.Core.Models.EntityBase;

namespace Umbraco.Core.Models
{
    /// &lt;summary&gt;
    /// A group of property types, which corresponds to the properties grouped under a Tab.
    /// &lt;/summary&gt;
    [Serializable]
    [DataContract(IsReference = true)]
    [DebuggerDisplay(&quot;Id: {Id}, Name: {Name}&quot;)]
    public class PropertyGroup : Entity, IEquatable&lt;PropertyGroup&gt;
    {
        private string _name;
        private int _sortOrder;
        private PropertyTypeCollection _propertyTypes;

        public PropertyGroup() : this(new PropertyTypeCollection())
        {
        }

        public PropertyGroup(PropertyTypeCollection propertyTypeCollection)
        {
            PropertyTypes = propertyTypeCollection;
        }

        private static readonly Lazy&lt;PropertySelectors&gt; Ps = new Lazy&lt;PropertySelectors&gt;();

        private class PropertySelectors
        {
            public readonly PropertyInfo NameSelector = ExpressionHelper.GetPropertyInfo&lt;PropertyGroup, string&gt;(x =&gt; x.Name);
            public readonly PropertyInfo SortOrderSelector = ExpressionHelper.GetPropertyInfo&lt;PropertyGroup, int&gt;(x =&gt; x.SortOrder);
            public readonly PropertyInfo PropertyTypeCollectionSelector = ExpressionHelper.GetPropertyInfo&lt;PropertyGroup, PropertyTypeCollection&gt;(x =&gt; x.PropertyTypes);
        }

        void PropertyTypesChanged(object sender, NotifyCollectionChangedEventArgs e)
        {
            OnPropertyChanged(Ps.Value.PropertyTypeCollectionSelector);
        }

        /// &lt;summary&gt;
        /// Gets or sets the Name of the Group, which corresponds to the Tab-name in the UI
        /// &lt;/summary&gt;
        [DataMember]
        public string Name
        {
            get { return _name; }
            set { SetPropertyValueAndDetectChanges(value, ref _name, Ps.Value.NameSelector); }
        }

        /// &lt;summary&gt;
        /// Gets or sets the Sort Order of the Group
        /// &lt;/summary&gt;
        [DataMember]
        public int SortOrder
        {
            get { return _sortOrder; }
            set { SetPropertyValueAndDetectChanges(value, ref _sortOrder, Ps.Value.SortOrderSelector); }
        }

        /// &lt;summary&gt;
        /// Gets or sets a collection of PropertyTypes for this PropertyGroup
        /// &lt;/summary&gt;
        [DataMember]
        public PropertyTypeCollection PropertyTypes
        {
            get { return _propertyTypes; }
            set
            {
                _propertyTypes = value;

                //since we&#39;re adding this collection to this group, we need to ensure that all the lazy values are set.
                foreach (var propertyType in _propertyTypes)
                {
                    propertyType.PropertyGroupId = new Lazy&lt;int&gt;(() =&gt; this.Id);
                }
                
                _propertyTypes.CollectionChanged += PropertyTypesChanged;
            }
        }

        public bool Equals(PropertyGroup other)
        {
            if (base.Equals(other)) return true;

            //Check whether the PropertyGroup&#39;s properties are equal. 
            return Name.InvariantEquals(other.Name);
        }

        public override int GetHashCode()
        {
            //Get hash code for the Name field if it is not null. 
            int baseHash = base.GetHashCode();

            //Get hash code for the Alias field. 
            int nameHash = Name.ToLowerInvariant().GetHashCode();

            //Calculate the hash code for the product. 
            return baseHash ^ nameHash;
        }

    }
}
    </pre>
    <script type="text/javascript">
      highlightRanges([[23,34,23,68,1],[24,9,24,10,1],[25,9,25,10,1],[27,9,27,76,1],[28,9,28,10,1],[29,13,29,52,1],[30,9,30,10,1],[32,9,32,92,1],[36,13,36,126,1],[37,13,37,133,1],[38,13,38,169,1],[42,9,42,10,1],[43,13,43,72,1],[44,9,44,10,1],[52,17,52,18,1],[52,19,52,32,1],[52,33,52,34,1],[53,17,53,18,1],[53,19,53,93,1],[53,94,53,95,1],[62,17,62,18,1],[62,19,62,37,1],[62,38,62,39,1],[63,17,63,18,1],[63,19,63,103,1],[63,104,63,105,1],[72,17,72,18,1],[72,19,72,41,1],[72,42,72,43,1],[74,13,74,14,1],[75,17,75,40,1],[78,17,78,24,1],[78,26,78,42,1],[78,43,78,45,1],[78,46,78,60,1],[79,17,79,18,1],[80,21,80,72,1],[80,72,80,79,1],[80,79,80,81,1],[80,21,80,81,1],[81,17,81,18,1],[83,17,83,74,1],[84,13,84,14,1],[88,9,88,10,1],[89,13,89,36,1],[89,37,89,49,1],[92,13,92,53,1],[93,9,93,10,1],[96,9,96,10,1],[98,13,98,47,1],[101,13,101,66,1],[104,13,104,40,1],[105,9,105,10,1]]);
    </script>
  </body>
</html>