<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Tom Pipe\Documents\Hexadigital\Code\Umbraco\Umbraco-CMS\src\Umbraco.Web\WebApi\Filters\HttpQueryStringFilterAttribute.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using System.Collections.Generic;
using System.Net.Http.Formatting;
using System.Web.Http.Controllers;
using System.Web.Http.Filters;

namespace Umbraco.Web.WebApi.Filters
{
    /// &lt;summary&gt;
    /// Allows an Action to execute with an arbitrary number of QueryStrings
    /// &lt;/summary&gt;
    /// &lt;remarks&gt;
    /// Just like you can POST an arbitrary number of parameters to an Action, you can&#39;t GET an arbitrary number
    /// but this will allow you to do it
    /// &lt;/remarks&gt;
    public sealed class HttpQueryStringFilterAttribute : ActionFilterAttribute
    {
        public string ParameterName { get; private set; }

        public HttpQueryStringFilterAttribute(string parameterName)
        {
            if (string.IsNullOrEmpty(parameterName))
                throw new ArgumentException(&quot;ParameterName is required.&quot;);
            ParameterName = parameterName;
        }

        public override void OnActionExecuting(HttpActionContext actionContext)
        {
            //get the query strings from the request properties
            if (actionContext.Request.Properties.ContainsKey(&quot;MS_QueryNameValuePairs&quot;))
            {
                var queryStrings = actionContext.Request.Properties[&quot;MS_QueryNameValuePairs&quot;] as IEnumerable&lt;KeyValuePair&lt;string, string&gt;&gt;;
                if (queryStrings == null) return;

                var formData = new FormDataCollection(queryStrings);

                actionContext.ActionArguments[ParameterName] = formData;    
            }
            
            base.OnActionExecuting(actionContext);
        }
    }
}
    </pre>
    <script type="text/javascript">
      highlightRanges([[18,39,18,43,0],[18,44,18,56,0],[20,9,20,68,0],[21,9,21,10,0],[22,13,22,53,0],[23,17,23,75,0],[24,13,24,43,0],[25,9,25,10,0],[28,9,28,10,0],[30,13,30,88,0],[31,13,31,14,0],[32,17,32,140,0],[33,17,33,42,0],[33,43,33,50,0],[35,17,35,69,0],[37,17,37,73,0],[38,13,38,14,0],[40,13,40,51,0],[41,9,41,10,0]]);
    </script>
  </body>
</html>