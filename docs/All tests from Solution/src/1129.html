<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Tom Pipe\Documents\Hexadigital\Code\Umbraco\Umbraco-CMS\src\Umbraco.Web\Install\Models\InstallSetupStep.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using System.Runtime.Serialization;
using Umbraco.Core;

namespace Umbraco.Web.Install.Models
{
    /// &lt;summary&gt;
    /// Model to give to the front-end to collect the information for each step
    /// &lt;/summary&gt;
    [DataContract(Name = &quot;step&quot;, Namespace = &quot;&quot;)]
    public abstract class InstallSetupStep&lt;T&gt; : InstallSetupStep
    {
        /// &lt;summary&gt;
        /// Defines the step model type on the server side so we can bind it
        /// &lt;/summary&gt;
        [IgnoreDataMember]
        public override Type StepType
        {
            get { return typeof(T); }
        }

        /// &lt;summary&gt;
        /// The step execution method
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;model&quot;&gt;&lt;/param&gt;
        /// &lt;returns&gt;&lt;/returns&gt;
        public abstract InstallSetupResult Execute(T model);

        /// &lt;summary&gt;
        /// Determines if this step needs to execute based on the current state of the application and/or install process
        /// &lt;/summary&gt;
        /// &lt;returns&gt;&lt;/returns&gt;
        public abstract bool RequiresExecution(T model);
    }

    [DataContract(Name = &quot;step&quot;, Namespace = &quot;&quot;)]
    public abstract class InstallSetupStep
    {
        protected InstallSetupStep()
        {
            var att = GetType().GetCustomAttribute&lt;InstallSetupStepAttribute&gt;(false);
            if (att == null)
            {
                throw new InvalidOperationException(&quot;Each step must be attributed&quot;);
            }
            Name = att.Name;
            View = att.View;
            ServerOrder = att.ServerOrder;
            Description = att.Description;
            InstallTypeTarget = att.InstallTypeTarget;
            PerformsAppRestart = att.PerformsAppRestart;
        }

        [DataMember(Name = &quot;name&quot;)]
        public string Name { get; private set; }

        [DataMember(Name = &quot;view&quot;)]
        public virtual string View { get; private set; }

        /// &lt;summary&gt;
        /// The view model used to render the view, by default is null but can be populated
        /// &lt;/summary&gt;
        [DataMember(Name = &quot;model&quot;)]
        public virtual object ViewModel { get; private set; }

        [DataMember(Name = &quot;description&quot;)]
        public string Description { get; private set; }

        [IgnoreDataMember]
        public InstallationType InstallTypeTarget { get; private set; }

        [IgnoreDataMember]
        public bool PerformsAppRestart { get; private set; }
        
        /// &lt;summary&gt;
        /// Defines what order this step needs to execute on the server side since the 
        /// steps might be shown out of order on the front-end
        /// &lt;/summary&gt;
        [DataMember(Name = &quot;serverOrder&quot;)]
        public int ServerOrder { get; private set; }

        /// &lt;summary&gt;
        /// Defines the step model type on the server side so we can bind it
        /// &lt;/summary&gt;
        [IgnoreDataMember]
        public abstract Type StepType { get; }
        
        [IgnoreDataMember]
        public bool HasUIElement
        {
            get { return View.IsNullOrWhiteSpace() == false; }
        }

    }
}
    </pre>
    <script type="text/javascript">
      highlightRanges([[19,17,19,18,0],[19,19,19,36,0],[19,37,19,38,0],[39,9,39,37,0],[40,9,40,10,0],[41,13,41,86,0],[42,13,42,29,0],[43,13,43,14,0],[44,17,44,85,0],[46,13,46,29,0],[47,13,47,29,0],[48,13,48,43,0],[49,13,49,43,0],[50,13,50,55,0],[51,13,51,57,0],[52,9,52,10,0],[55,30,55,34,0],[55,35,55,47,0],[58,38,58,42,0],[58,43,58,55,0],[64,43,64,47,0],[64,48,64,60,0],[67,37,67,41,0],[67,42,67,54,0],[70,53,70,57,0],[70,58,70,70,0],[73,42,73,46,0],[73,47,73,59,0],[80,34,80,38,0],[80,39,80,51,0],[91,17,91,18,0],[91,19,91,61,0],[91,62,91,63,0]]);
    </script>
  </body>
</html>