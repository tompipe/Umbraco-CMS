<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Tom Pipe\Documents\Hexadigital\Code\Umbraco\Umbraco-CMS\src\Umbraco.Web\WebApi\Filters\OutgoingDateTimeFormatAttribute.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using System.Linq;
using System.Net.Http.Formatting;
using System.Web.Http.Controllers;
using Umbraco.Core;

namespace Umbraco.Web.WebApi.Filters
{
    /// &lt;summary&gt;
    /// Sets the json outgoing/serialized datetime format
    /// &lt;/summary&gt;
    internal sealed class OutgoingDateTimeFormatAttribute : Attribute, IControllerConfiguration
    {
        private readonly string _format = &quot;yyyy-MM-dd HH:mm:ss&quot;;

        /// &lt;summary&gt;
        /// Specify a custom format
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;format&quot;&gt;&lt;/param&gt;
        public OutgoingDateTimeFormatAttribute(string format)
        {
            Mandate.ParameterNotNullOrEmpty(format, &quot;format&quot;);
            _format = format;
        }

        /// &lt;summary&gt;
        /// Will use the standard ISO format
        /// &lt;/summary&gt;
        public OutgoingDateTimeFormatAttribute()
        {

        }

        public void Initialize(HttpControllerSettings controllerSettings, HttpControllerDescriptor controllerDescriptor)
        {
            var jsonFormatter = controllerSettings.Formatters.OfType&lt;JsonMediaTypeFormatter&gt;();
            foreach (var r in jsonFormatter)
            {
                r.SerializerSettings.Converters.Add(new CustomDateTimeConvertor(_format));
            }
        }

    }
}
    </pre>
    <script type="text/javascript">
      highlightRanges([[14,9,14,65,0],[14,9,14,65,0],[20,9,20,62,0],[21,9,21,10,0],[22,13,22,63,0],[23,13,23,30,0],[24,9,24,10,0],[29,9,29,49,0],[30,9,30,10,0],[32,9,32,10,0],[35,9,35,10,0],[36,13,36,96,0],[37,13,37,20,0],[37,22,37,27,0],[37,28,37,30,0],[37,31,37,44,0],[38,13,38,14,0],[39,17,39,91,0],[40,13,40,14,0],[41,9,41,10,0]]);
    </script>
  </body>
</html>