<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Tom Pipe\Documents\Hexadigital\Code\Umbraco\Umbraco-CMS\src\umbraco.editorControls\Slider\SliderControl.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using System.Text;
using System.Web.UI;
using System.Web.UI.HtmlControls;
using System.Web.UI.WebControls;
using umbraco.cms.businesslogic.datatype;

namespace umbraco.editorControls.Slider
{
    /// &lt;summary&gt;
    /// The jQuery UI Slider control.
    /// &lt;/summary&gt;
    [ClientDependency.Core.ClientDependency(ClientDependency.Core.ClientDependencyType.Javascript, &quot;ui/jqueryui.js&quot;, &quot;UmbracoClient&quot;)]
    [ClientDependency.Core.ClientDependency(ClientDependency.Core.ClientDependencyType.Javascript, &quot;ui/jquery.alphanumeric.js&quot;, &quot;UmbracoClient&quot;)]
    [ClientDependency.Core.ClientDependency(ClientDependency.Core.ClientDependencyType.Css, &quot;DateTimePicker/datetimepicker.css&quot;, &quot;UmbracoClient&quot;)]
    [ValidationProperty(&quot;Text&quot;)]
    [Obsolete(&quot;IDataType and all other references to the legacy property editors are no longer used this will be removed from the codebase in future versions&quot;)]
    public class SliderControl : PlaceHolder
    {
        /// &lt;summary&gt;
        /// Gets or sets the slider options.
        /// &lt;/summary&gt;
        /// &lt;value&gt;The slider options.&lt;/value&gt;
        public SliderOptions Options { get; set; }

        /// &lt;summary&gt;
        /// Gets or sets the text.
        /// &lt;/summary&gt;
        /// &lt;value&gt;The text value.&lt;/value&gt;
        public string Text
        {
            get
            {
                return this.TextBoxControl.Text;
            }

            set
            {
                if (this.TextBoxControl == null)
                {
                    this.TextBoxControl = new TextBox();
                }

                this.TextBoxControl.Text = value;
            }
        }

        /// &lt;summary&gt;
        /// Gets or sets the TextBox control that contains the value(s) of the slider.
        /// &lt;/summary&gt;
        /// &lt;value&gt;The text box control.&lt;/value&gt;
        protected TextBox TextBoxControl { get; set; }

        /// &lt;summary&gt;
        /// Gets or sets the HtmlGenericControl control for the slider &amp;lt;div&amp;gt; tag.
        /// &lt;/summary&gt;
        /// &lt;value&gt;The div slider control.&lt;/value&gt;
        protected HtmlGenericControl DivSliderControl { get; set; }

        /// &lt;summary&gt;
        /// Initialize the control, make sure children are created
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;e&quot;&gt;An &lt;see cref=&quot;T:System.EventArgs&quot;/&gt; object that contains the event data.&lt;/param&gt;
        protected override void OnInit(EventArgs e)
        {
            base.OnInit(e);

            this.EnsureChildControls();
        }

        /// &lt;summary&gt;
        /// Add the resources (sytles/scripts)
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;e&quot;&gt;The &lt;see cref=&quot;T:System.EventArgs&quot;/&gt; object that contains the event data.&lt;/param&gt;
        protected override void OnLoad(EventArgs e)
        {
            base.OnLoad(e);
        }

        /// &lt;summary&gt;
        /// Called by the ASP.NET page framework to notify server controls that use composition-based implementation to create any child controls they contain in preparation for posting back or rendering.
        /// &lt;/summary&gt;
        protected override void CreateChildControls()
        {
            base.CreateChildControls();

            this.EnsureChildControls();

            var divStyle = this.Options.Orientation.Equals(&quot;vertical&quot;) ? &quot;float:left;margin:0 10px 0 0;height:150px;&quot; : &quot;float:left;margin:7px 10px 0 0;width:342px;&quot;;

            this.DivSliderControl = new HtmlGenericControl(&quot;div&quot;);
            this.DivSliderControl.ID = this.DivSliderControl.ClientID;
            this.DivSliderControl.Attributes.Add(&quot;style&quot;, divStyle);
            this.Controls.Add(this.DivSliderControl);

            this.TextBoxControl = new TextBox();
            this.TextBoxControl.ID = this.TextBoxControl.ClientID;
            this.TextBoxControl.CssClass = &quot;guiInputTextTiny&quot;;
            this.TextBoxControl.Attributes.Add(&quot;style&quot;, &quot;float:left;width:40px;&quot;);
            this.TextBoxControl.MaxLength = this.Options.EnableRange ? (this.Options.MaxValue.ToString().Length * 2) + 1 : this.Options.MaxValue.ToString().Length;
            this.Controls.Add(this.TextBoxControl);
        }

        /// &lt;summary&gt;
        /// Sends server control content to a provided &lt;see cref=&quot;T:System.Web.UI.HtmlTextWriter&quot;/&gt; object, which writes the content to be rendered on the client.
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;writer&quot;&gt;The &lt;see cref=&quot;T:System.Web.UI.HtmlTextWriter&quot;/&gt; object that receives the server control content.&lt;/param&gt;
        protected override void Render(HtmlTextWriter writer)
        {
            writer.AddAttribute(&quot;id&quot;, this.ClientID);
            writer.AddAttribute(&quot;class&quot;, &quot;jqueryui-slider&quot;);
            writer.AddAttribute(&quot;style&quot;, &quot;float:left;width:400px;&quot;);
            writer.RenderBeginTag(HtmlTextWriterTag.Div);

            this.DivSliderControl.RenderControl(writer);

            this.TextBoxControl.RenderControl(writer);

            writer.RenderEndTag();

            // construct slider options
            bool hasMultipleValues = false;
            var options = new StringBuilder();

            // add range
            if (this.Options.EnableRange)
            {
                if (!string.IsNullOrEmpty(this.Options.RangeValue))
                {
                    options.Append(&quot;range: &#39;&quot;).Append(this.Options.RangeValue).Append(&quot;&#39;, &quot;);
                }
                else
                {
                    // the options can only have multiple values if the range is set to &#39;true&#39;.
                    if (this.Options.Value2 &gt;= this.Options.Value)
                    {
                        options.Append(&quot;range: true,values: [&quot;).Append(this.Options.Value).Append(&#39;,&#39;).Append(this.Options.Value2).Append(&quot;],&quot;);
                        hasMultipleValues = true;
                    }
                }
            }

            // add value - if multiple values have not been already set.
            if (!hasMultipleValues)
            {
                options.Append(&quot;value: &quot;).Append(this.Options.Value).Append(&#39;,&#39;);
            }

            // add min.max values
            if (this.Options.MaxValue &gt; this.Options.MinValue)
            {
                options.Append(&quot;min: &quot;).Append(this.Options.MinValue).Append(&#39;,&#39;);
                options.Append(&quot;max: &quot;).Append(this.Options.MaxValue).Append(&#39;,&#39;);
            }

            // add step increments
            if (this.Options.EnableStep)
            {
                options.Append(&quot;step: &quot;).Append(this.Options.StepValue).Append(&#39;,&#39;);
            }

            // add orientation
            if (!string.IsNullOrEmpty(this.Options.Orientation))
            {
                options.Append(&quot;orientation: &#39;&quot;).Append(this.Options.Orientation).Append(&quot;&#39;&quot;).Append(&#39;,&#39;);
            }

            // add jquery window load event to create the js slider
            var javascriptMethod = string.Format(
                &quot;jQuery(&#39;#{0}&#39;).slider({{ {2} slide: function(e, ui) {{ $(&#39;#{1}&#39;).val(ui.value{3}); }} }}); $(&#39;#{1}&#39;).val($(&#39;#{0}&#39;).slider(&#39;value{3}&#39;)); jQuery(&#39;#{1}&#39;).numeric({4});&quot;,
                this.DivSliderControl.ClientID,
                this.TextBoxControl.ClientID,
                options,
                (hasMultipleValues ? &quot;s&quot; : string.Empty),
                (hasMultipleValues ? &quot;{ allow: &#39;,&#39; }&quot; : string.Empty));
            var javascript = string.Concat(&quot;&lt;script type=&#39;text/javascript&#39;&gt;jQuery(window).load(function(){&quot;, javascriptMethod, &quot;});&lt;/script&gt;&quot;);
            writer.WriteLine(javascript);

            if (this.Options.EnableRange || !string.IsNullOrEmpty(this.Options.RangeValue))
            {
                // add CSS to override the default style for &#39;.ui-slider-range&#39; (which is used for the DateTime Picker)
                var css = string.Format(&quot;&lt;style type=&#39;text/css&#39;&gt;#{0} .ui-slider-range {{background-image: none;}}&lt;/style&gt;&quot;, this.ClientID);
                writer.WriteLine(css);
            }
        }
    }
}
    </pre>
    <script type="text/javascript">
      highlightRanges([[24,40,24,44,0],[24,45,24,49,0],[33,13,33,14,0],[34,17,34,49,0],[35,13,35,14,0],[38,13,38,14,0],[39,17,39,49,0],[40,17,40,18,0],[41,21,41,57,0],[42,17,42,18,0],[44,17,44,50,0],[45,13,45,14,0],[52,44,52,48,0],[52,49,52,53,0],[58,57,58,61,0],[58,62,58,66,0],[65,9,65,10,0],[66,13,66,28,0],[68,13,68,40,0],[69,9,69,10,0],[76,9,76,10,0],[77,13,77,28,0],[78,9,78,10,0],[84,9,84,10,0],[85,13,85,40,0],[87,13,87,40,0],[89,13,89,167,0],[91,13,91,67,0],[92,13,92,71,0],[93,13,93,69,0],[94,13,94,54,0],[96,13,96,49,0],[97,13,97,67,0],[98,13,98,63,0],[99,13,99,83,0],[100,13,100,164,0],[101,13,101,52,0],[102,9,102,10,0],[109,9,109,10,0],[110,13,110,54,0],[111,13,111,61,0],[112,13,112,69,0],[113,13,113,58,0],[115,13,115,57,0],[117,13,117,55,0],[119,13,119,35,0],[122,13,122,44,0],[123,13,123,47,0],[126,13,126,42,0],[127,13,127,14,0],[128,17,128,68,0],[129,17,129,18,0],[130,21,130,94,0],[131,17,131,18,0],[133,17,133,18,0],[135,21,135,67,0],[136,21,136,22,0],[137,25,137,145,0],[138,25,138,50,0],[139,21,139,22,0],[140,17,140,18,0],[141,13,141,14,0],[144,13,144,36,0],[145,13,145,14,0],[146,17,146,82,0],[147,13,147,14,0],[150,13,150,63,0],[151,13,151,14,0],[152,17,152,83,0],[153,17,153,83,0],[154,13,154,14,0],[157,13,157,41,0],[158,13,158,14,0],[159,17,159,85,0],[160,13,160,14,0],[163,13,163,65,0],[164,13,164,14,0],[165,17,165,107,0],[166,13,166,14,0],[169,13,175,72,0],[176,13,176,144,0],[177,13,177,42,0],[179,13,179,92,0],[180,13,180,14,0],[182,17,182,140,0],[183,17,183,39,0],[184,13,184,14,0],[185,9,185,10,0]]);
    </script>
  </body>
</html>