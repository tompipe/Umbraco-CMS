<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Tom Pipe\Documents\Hexadigital\Code\Umbraco\Umbraco-CMS\src\Umbraco.Core\PropertyEditors\ParameterEditor.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using System.Collections.Generic;
using Newtonsoft.Json;
using Umbraco.Core.IO;

namespace Umbraco.Core.PropertyEditors
{
    /// &lt;summary&gt;
    /// Basic definition of a macro parameter editor
    /// &lt;/summary&gt;
    public class ParameterEditor : IParameterEditor
    {

        private readonly ParameterEditorAttribute _attribute;

        /// &lt;summary&gt;
        /// The constructor will setup the property editor based on the attribute if one is found
        /// &lt;/summary&gt;
        public ParameterEditor()             
        {
            Configuration = new Dictionary&lt;string, object&gt;();
            //assign properties based on the attribute if it is found
            _attribute = GetType().GetCustomAttribute&lt;ParameterEditorAttribute&gt;(false);
            if (_attribute != null)
            {
                //set the id/name from the attribute
                Alias = _attribute.Alias;
                Name = _attribute.Name;
            }
        }

        /// &lt;summary&gt;
        /// These are assigned by default normally based on parameter editor attributes or manifest definitions,
        /// developers have the chance to override CreateValueEditor if they don&#39;t want to use the pre-defined instance
        /// &lt;/summary&gt;
        internal ParameterValueEditor ManifestDefinedParameterValueEditor = null;

        /// &lt;summary&gt;
        /// The id  of the property editor
        /// &lt;/summary&gt;
        [JsonProperty(&quot;alias&quot;, Required = Required.Always)]
        public string Alias { get; internal set; }

        /// &lt;summary&gt;
        /// The name of the property editor
        /// &lt;/summary&gt;
        [JsonProperty(&quot;name&quot;, Required = Required.Always)]
        public string Name { get; internal set; }

        /// &lt;summary&gt;
        /// Allows a parameter editor to be re-used based on the configuration specified.
        /// &lt;/summary&gt;
        [JsonProperty(&quot;config&quot;)]
        public IDictionary&lt;string, object&gt; Configuration { get; set; }

        [JsonIgnore]
        public ParameterValueEditor ValueEditor
        {
            get { return CreateValueEditor(); }
        }

        [JsonIgnore]
        IValueEditor IParameterEditor.ValueEditor 
        {
            get { return ValueEditor; }
        }

        /// &lt;summary&gt;
        /// Creates a value editor instance
        /// &lt;/summary&gt;
        /// &lt;returns&gt;&lt;/returns&gt;
        protected virtual ParameterValueEditor CreateValueEditor()
        {
            if (ManifestDefinedParameterValueEditor != null)
            {
                //detect if the view is a virtual path (in most cases, yes) then convert it
                if (ManifestDefinedParameterValueEditor.View.StartsWith(&quot;~/&quot;))
                {
                    ManifestDefinedParameterValueEditor.View = IOHelper.ResolveUrl(ManifestDefinedParameterValueEditor.View);
                }
                return ManifestDefinedParameterValueEditor;
            }

            //create a new editor
            var editor = new ParameterValueEditor();

            if (_attribute.EditorView.IsNullOrWhiteSpace())
            {
                throw new NotImplementedException(&quot;This method must be implemented if a view is not explicitly set&quot;);
            }

            editor.View = _attribute.EditorView;
            return editor;
        }
    }
}
    </pre>
    <script type="text/javascript">
      highlightRanges([[19,9,19,33,1],[20,9,20,10,1],[21,13,21,62,1],[23,13,23,88,1],[24,13,24,36,1],[25,13,25,14,0],[27,17,27,42,0],[28,17,28,40,0],[29,13,29,14,0],[30,9,30,10,1],[36,9,36,82,1],[42,31,42,35,1],[42,36,42,49,1],[48,30,48,34,1],[48,35,48,48,1],[54,60,54,64,1],[54,65,54,69,1],[59,17,59,18,1],[59,19,59,46,1],[59,47,59,48,1],[65,17,65,18,0],[65,19,65,38,0],[65,39,65,40,0],[73,9,73,10,1],[74,13,74,61,1],[75,13,75,14,1],[77,17,77,79,1],[78,17,78,18,1],[79,21,79,126,1],[80,17,80,18,1],[81,17,81,60,1],[85,13,85,53,0],[87,13,87,60,0],[88,13,88,14,0],[89,17,89,118,0],[92,13,92,49,0],[93,13,93,27,0],[94,9,94,10,1]]);
    </script>
  </body>
</html>