<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Tom Pipe\Documents\Hexadigital\Code\Umbraco\Umbraco-CMS\src\Umbraco.Web\umbraco.presentation\umbraco\create\Language.ascx.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using System.Collections;
using System.Globalization;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using Umbraco.Web.UI;
using umbraco.BasePages;
namespace umbraco.cms.presentation.create.controls
{
    /// &lt;summary&gt;
    ///		Summary description for language.
    /// &lt;/summary&gt;
    public partial class language : UserControl
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            // get all existing languages

            pp1.Text = ui.Text(&quot;choose&quot;) + &quot; &quot; + ui.Text(&quot;language&quot;);
            sbmt.Text = ui.Text(&quot;create&quot;);

            var sortedCultures = new SortedList();
            Cultures.Items.Clear();
            Cultures.Items.Add(new ListItem(ui.Text(&quot;choose&quot;) + &quot;...&quot;, &quot;&quot;));
            foreach (var cultureInfo in CultureInfo.GetCultures(CultureTypes.AllCultures))
                sortedCultures.Add(cultureInfo.DisplayName + &quot;|||&quot; + Guid.NewGuid(), cultureInfo.Name);

            var dictionaryEnumerator = sortedCultures.GetEnumerator();
            while (dictionaryEnumerator.MoveNext())
            {
                var language = dictionaryEnumerator.Key.ToString().Substring(0, dictionaryEnumerator.Key.ToString().IndexOf(&quot;|||&quot;, StringComparison.Ordinal));
                var listItem = new ListItem(string.Format(&quot;{0} [{1}]&quot;, language, dictionaryEnumerator.Value), dictionaryEnumerator.Value.ToString());
                Cultures.Items.Add(listItem);
            }
        }

        protected void sbmt_Click(object sender, EventArgs e)
        {
            LegacyDialogHandler.Create(
                new HttpContextWrapper(Context),
                BasePage.Current.getUser(),
                helper.Request(&quot;nodeType&quot;),
                -1,
                Cultures.SelectedValue);

            BasePage.Current.ClientTools
                .ReloadActionNode(false, true)
                .CloseModalWindow();
        }

        /// &lt;summary&gt;
        /// pp1 control.
        /// &lt;/summary&gt;
        /// &lt;remarks&gt;
        /// Auto-generated field.
        /// To modify move field declaration from designer file to code-behind file.
        /// &lt;/remarks&gt;
        protected global::umbraco.uicontrols.PropertyPanel pp1;

        /// &lt;summary&gt;
        /// Cultures control.
        /// &lt;/summary&gt;
        /// &lt;remarks&gt;
        /// Auto-generated field.
        /// To modify move field declaration from designer file to code-behind file.
        /// &lt;/remarks&gt;
        protected global::System.Web.UI.WebControls.DropDownList Cultures;

        /// &lt;summary&gt;
        /// RequiredFieldValidator1 control.
        /// &lt;/summary&gt;
        /// &lt;remarks&gt;
        /// Auto-generated field.
        /// To modify move field declaration from designer file to code-behind file.
        /// &lt;/remarks&gt;
        protected global::System.Web.UI.WebControls.RequiredFieldValidator RequiredFieldValidator1;

        /// &lt;summary&gt;
        /// sbmt control.
        /// &lt;/summary&gt;
        /// &lt;remarks&gt;
        /// Auto-generated field.
        /// To modify move field declaration from designer file to code-behind file.
        /// &lt;/remarks&gt;
        protected global::System.Web.UI.WebControls.Button sbmt;

    }
}
    </pre>
    <script type="text/javascript">
      highlightRanges([[17,9,17,10,0],[20,13,20,70,0],[21,13,21,43,0],[23,13,23,51,0],[24,13,24,36,0],[25,13,25,77,0],[26,13,26,20,0],[26,22,26,37,0],[26,38,26,40,0],[26,41,26,90,0],[27,17,27,104,0],[29,13,29,71,0],[30,13,30,52,0],[31,13,31,14,0],[32,17,32,159,0],[33,17,33,150,0],[34,17,34,46,0],[35,13,35,14,0],[36,9,36,10,0],[39,9,39,10,0],[40,13,45,41,0],[47,13,49,37,0],[50,9,50,10,0]]);
    </script>
  </body>
</html>