<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Tom Pipe\Documents\Hexadigital\Code\Umbraco\Umbraco-CMS\src\umbraco.MacroEngines\RazorDynamicNode\Grouping.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Collections;
using System.Dynamic;

namespace umbraco.MacroEngines
{
    public class Grouping&lt;K, T&gt; : IGrouping&lt;K, T&gt; where T : DynamicObject
    {
        public K Key { get; set; }
        public IEnumerable&lt;T&gt; Elements;

        public IEnumerator&lt;T&gt; GetEnumerator()
        {
            DynamicNodeList temp = new DynamicNodeList(Elements.Cast&lt;DynamicNode&gt;());
            return (IEnumerator&lt;T&gt;)temp.GetEnumerator();
        }
        IEnumerator IEnumerable.GetEnumerator()
        {
            return (IEnumerator)GetEnumerator();
        }

        public DynamicNodeList OrderBy(string ordering)
        {
            bool descending = false;
            if (ordering.IndexOf(&quot; descending&quot;, StringComparison.CurrentCultureIgnoreCase) &gt;= 0)
            {
                ordering = ordering.Replace(&quot; descending&quot;, &quot;&quot;);
                descending = true;
            }
            if (ordering.IndexOf(&quot; desc&quot;, StringComparison.CurrentCultureIgnoreCase) &gt;= 0)
            {
                ordering = ordering.Replace(&quot; desc&quot;, &quot;&quot;);
                descending = true;
            }

            if (!descending)
            {
                return new DynamicNodeList(Elements.OrderBy(item =&gt;
                {
                    object key = null;
                    (item as DynamicObject).TryGetMember(new DynamicQueryableGetMemberBinder(ordering, false), out key);
                    return key;
                }).Cast&lt;DynamicNode&gt;());
            }
            else
            {
                return new DynamicNodeList(Elements.OrderByDescending(item =&gt;
                {
                    object key = null;
                    (item as DynamicObject).TryGetMember(new DynamicQueryableGetMemberBinder(ordering, false), out key);
                    return key;
                }).Cast&lt;DynamicNode&gt;());
            }
        }
    }

}

    </pre>
    <script type="text/javascript">
      highlightRanges([[12,24,12,28,1],[12,29,12,33,1],[16,9,16,10,1],[17,13,17,86,1],[18,13,18,57,1],[19,9,19,10,1],[21,9,21,10,0],[22,13,22,49,0],[23,9,23,10,0],[26,9,26,10,0],[27,13,27,37,0],[28,13,28,97,0],[29,13,29,14,0],[30,17,30,64,0],[31,17,31,35,0],[32,13,32,14,0],[33,13,33,91,0],[34,13,34,14,0],[35,17,35,58,0],[36,17,36,35,0],[37,13,37,14,0],[39,13,39,29,0],[40,13,40,14,0],[41,17,42,17,0],[42,17,42,18,0],[42,18,43,21,0],[43,21,43,39,0],[43,39,44,21,0],[44,21,44,121,0],[44,121,45,21,0],[45,21,45,32,0],[45,32,46,17,0],[46,17,46,18,0],[46,18,46,41,0],[41,17,46,41,0],[49,13,49,14,0],[50,17,51,17,0],[51,17,51,18,0],[51,18,52,21,0],[52,21,52,39,0],[52,39,53,21,0],[53,21,53,121,0],[53,121,54,21,0],[54,21,54,32,0],[54,32,55,17,0],[55,17,55,18,0],[55,18,55,41,0],[50,17,55,41,0],[57,9,57,10,0]]);
    </script>
  </body>
</html>