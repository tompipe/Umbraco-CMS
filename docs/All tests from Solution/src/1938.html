<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Tom Pipe\Documents\Hexadigital\Code\Umbraco\Umbraco-CMS\src\Umbraco.Core\Media\Exif\BitConverterEx.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;

namespace Umbraco.Core.Media.Exif
{
    /// &lt;summary&gt;
    /// An endian-aware converter for converting between base data types 
    /// and an array of bytes.
    /// &lt;/summary&gt;
    internal class BitConverterEx
    {
        #region Public Enums
        /// &lt;summary&gt;
        /// Represents the byte order.
        /// &lt;/summary&gt;
        public enum ByteOrder
        {
            LittleEndian = 1,
            BigEndian = 2,
        }
        #endregion

        #region Member Variables
        private ByteOrder mFrom, mTo;
        #endregion

        #region Constructors
        public BitConverterEx(ByteOrder from, ByteOrder to)
        {
            mFrom = from;
            mTo = to;
        }
        #endregion

        #region Properties
        /// &lt;summary&gt;
        /// Indicates the byte order in which data is stored in this platform.
        /// &lt;/summary&gt;
        public static ByteOrder SystemByteOrder
        {
            get
            {
                return (BitConverter.IsLittleEndian ? ByteOrder.LittleEndian : ByteOrder.BigEndian);
            }
        }
        #endregion

        #region Predefined Values
        /// &lt;summary&gt;
        /// Returns a bit converter that converts between little-endian and system byte-order.
        /// &lt;/summary&gt;
        public static BitConverterEx LittleEndian
        {
            get
            {
                return new BitConverterEx(ByteOrder.LittleEndian, BitConverterEx.SystemByteOrder);
            }
        }

        /// &lt;summary&gt;
        /// Returns a bit converter that converts between big-endian and system byte-order.
        /// &lt;/summary&gt;
        public static BitConverterEx BigEndian
        {
            get
            {
                return new BitConverterEx(ByteOrder.BigEndian, BitConverterEx.SystemByteOrder);
            }
        }

        /// &lt;summary&gt;
        /// Returns a bit converter that does not do any byte-order conversion.
        /// &lt;/summary&gt;
        public static BitConverterEx SystemEndian
        {
            get
            {
                return new BitConverterEx(BitConverterEx.SystemByteOrder, BitConverterEx.SystemByteOrder);
            }
        }
        #endregion

        #region Static Methods
        /// &lt;summary&gt;
        /// Converts the given array of bytes to a Unicode character.
        /// &lt;/summary&gt;
        public static char ToChar(byte[] value, long startIndex, ByteOrder from, ByteOrder to)
        {
            byte[] data = CheckData(value, startIndex, 2, from, to);
            return BitConverter.ToChar(data, 0);
        }

        /// &lt;summary&gt;
        /// Converts the given array of bytes to a 16-bit unsigned integer.
        /// &lt;/summary&gt;
        public static ushort ToUInt16(byte[] value, long startIndex, ByteOrder from, ByteOrder to)
        {
            byte[] data = CheckData(value, startIndex, 2, from, to);
            return BitConverter.ToUInt16(data, 0);
        }

        /// &lt;summary&gt;
        /// Converts the given array of bytes to a 32-bit unsigned integer.
        /// &lt;/summary&gt;
        public static uint ToUInt32(byte[] value, long startIndex, ByteOrder from, ByteOrder to)
        {
            byte[] data = CheckData(value, startIndex, 4, from, to);
            return BitConverter.ToUInt32(data, 0);
        }

        /// &lt;summary&gt;
        /// Converts the given array of bytes to a 64-bit unsigned integer.
        /// &lt;/summary&gt;
        public static ulong ToUInt64(byte[] value, long startIndex, ByteOrder from, ByteOrder to)
        {
            byte[] data = CheckData(value, startIndex, 8, from, to);
            return BitConverter.ToUInt64(data, 0);
        }

        /// &lt;summary&gt;
        /// Converts the given array of bytes to a 16-bit signed integer.
        /// &lt;/summary&gt;
        public static short ToInt16(byte[] value, long startIndex, ByteOrder from, ByteOrder to)
        {
            byte[] data = CheckData(value, startIndex, 2, from, to);
            return BitConverter.ToInt16(data, 0);
        }

        /// &lt;summary&gt;
        /// Converts the given array of bytes to a 32-bit signed integer.
        /// &lt;/summary&gt;
        public static int ToInt32(byte[] value, long startIndex, ByteOrder from, ByteOrder to)
        {
            byte[] data = CheckData(value, startIndex, 4, from, to);
            return BitConverter.ToInt32(data, 0);
        }

        /// &lt;summary&gt;
        /// Converts the given array of bytes to a 64-bit signed integer.
        /// &lt;/summary&gt;
        public static long ToInt64(byte[] value, long startIndex, ByteOrder from, ByteOrder to)
        {
            byte[] data = CheckData(value, startIndex, 8, from, to);
            return BitConverter.ToInt64(data, 0);
        }

        /// &lt;summary&gt;
        /// Converts the given array of bytes to a single precision floating number.
        /// &lt;/summary&gt;
        public static float ToSingle(byte[] value, long startIndex, ByteOrder from, ByteOrder to)
        {
            byte[] data = CheckData(value, startIndex, 4, from, to);
            return BitConverter.ToSingle(data, 0);
        }

        /// &lt;summary&gt;
        /// Converts the given array of bytes to a double precision floating number.
        /// &lt;/summary&gt;
        public static double ToDouble(byte[] value, long startIndex, ByteOrder from, ByteOrder to)
        {
            byte[] data = CheckData(value, startIndex, 8, from, to);
            return BitConverter.ToDouble(data, 0);
        }

        /// &lt;summary&gt;
        /// Converts the given 16-bit unsigned integer to an array of bytes.
        /// &lt;/summary&gt;
        public static byte[] GetBytes(ushort value, ByteOrder from, ByteOrder to)
        {
            byte[] data = BitConverter.GetBytes(value);
            data = CheckData(data, from, to);
            return data;
        }

        /// &lt;summary&gt;
        /// Converts the given 32-bit unsigned integer to an array of bytes.
        /// &lt;/summary&gt;
        public static byte[] GetBytes(uint value, ByteOrder from, ByteOrder to)
        {
            byte[] data = BitConverter.GetBytes(value);
            data = CheckData(data, from, to);
            return data;
        }

        /// &lt;summary&gt;
        /// Converts the given 64-bit unsigned integer to an array of bytes.
        /// &lt;/summary&gt;
        public static byte[] GetBytes(ulong value, ByteOrder from, ByteOrder to)
        {
            byte[] data = BitConverter.GetBytes(value);
            data = CheckData(data, from, to);
            return data;
        }

        /// &lt;summary&gt;
        /// Converts the given 16-bit signed integer to an array of bytes.
        /// &lt;/summary&gt;
        public static byte[] GetBytes(short value, ByteOrder from, ByteOrder to)
        {
            byte[] data = BitConverter.GetBytes(value);
            data = CheckData(data, from, to);
            return data;
        }

        /// &lt;summary&gt;
        /// Converts the given 32-bit signed integer to an array of bytes.
        /// &lt;/summary&gt;
        public static byte[] GetBytes(int value, ByteOrder from, ByteOrder to)
        {
            byte[] data = BitConverter.GetBytes(value);
            data = CheckData(data, from, to);
            return data;
        }

        /// &lt;summary&gt;
        /// Converts the given 64-bit signed integer to an array of bytes.
        /// &lt;/summary&gt;
        public static byte[] GetBytes(long value, ByteOrder from, ByteOrder to)
        {
            byte[] data = BitConverter.GetBytes(value);
            data = CheckData(data, from, to);
            return data;
        }

        /// &lt;summary&gt;
        /// Converts the given single precision floating-point number to an array of bytes.
        /// &lt;/summary&gt;
        public static byte[] GetBytes(float value, ByteOrder from, ByteOrder to)
        {
            byte[] data = BitConverter.GetBytes(value);
            data = CheckData(data, from, to);
            return data;
        }

        /// &lt;summary&gt;
        /// Converts the given double precision floating-point number to an array of bytes.
        /// &lt;/summary&gt;
        public static byte[] GetBytes(double value, ByteOrder from, ByteOrder to)
        {
            byte[] data = BitConverter.GetBytes(value);
            data = CheckData(data, from, to);
            return data;
        }
        #endregion

        #region Instance Methods
        /// &lt;summary&gt;
        /// Converts the given array of bytes to a 16-bit unsigned integer.
        /// &lt;/summary&gt;
        public char ToChar(byte[] value, long startIndex)
        {
            return BitConverterEx.ToChar(value, startIndex, mFrom, mTo);
        }

        /// &lt;summary&gt;
        /// Converts the given array of bytes to a 16-bit unsigned integer.
        /// &lt;/summary&gt;
        public ushort ToUInt16(byte[] value, long startIndex)
        {
            return BitConverterEx.ToUInt16(value, startIndex, mFrom, mTo);
        }

        /// &lt;summary&gt;
        /// Converts the given array of bytes to a 32-bit unsigned integer.
        /// &lt;/summary&gt;
        public uint ToUInt32(byte[] value, long startIndex)
        {
            return BitConverterEx.ToUInt32(value, startIndex, mFrom, mTo);
        }

        /// &lt;summary&gt;
        /// Converts the given array of bytes to a 64-bit unsigned integer.
        /// &lt;/summary&gt;
        public ulong ToUInt64(byte[] value, long startIndex)
        {
            return BitConverterEx.ToUInt64(value, startIndex, mFrom, mTo);
        }

        /// &lt;summary&gt;
        /// Converts the given array of bytes to a 16-bit signed integer.
        /// &lt;/summary&gt;
        public short ToInt16(byte[] value, long startIndex)
        {
            return BitConverterEx.ToInt16(value, startIndex, mFrom, mTo);
        }

        /// &lt;summary&gt;
        /// Converts the given array of bytes to a 32-bit signed integer.
        /// &lt;/summary&gt;
        public int ToInt32(byte[] value, long startIndex)
        {
            return BitConverterEx.ToInt32(value, startIndex, mFrom, mTo);
        }

        /// &lt;summary&gt;
        /// Converts the given array of bytes to a 64-bit signed integer.
        /// &lt;/summary&gt;
        public long ToInt64(byte[] value, long startIndex)
        {
            return BitConverterEx.ToInt64(value, startIndex, mFrom, mTo);
        }

        /// &lt;summary&gt;
        /// Converts the given array of bytes to a single precision floating number.
        /// &lt;/summary&gt;
        public float ToSingle(byte[] value, long startIndex)
        {
            return BitConverterEx.ToSingle(value, startIndex, mFrom, mTo);
        }

        /// &lt;summary&gt;
        /// Converts the given array of bytes to a double precision floating number.
        /// &lt;/summary&gt;
        public double ToDouble(byte[] value, long startIndex)
        {
            return BitConverterEx.ToDouble(value, startIndex, mFrom, mTo);
        }

        /// &lt;summary&gt;
        /// Converts the given 16-bit unsigned integer to an array of bytes.
        /// &lt;/summary&gt;
        public byte[] GetBytes(ushort value)
        {
            return BitConverterEx.GetBytes(value, mFrom, mTo);
        }

        /// &lt;summary&gt;
        /// Converts the given 32-bit unsigned integer to an array of bytes.
        /// &lt;/summary&gt;
        public byte[] GetBytes(uint value)
        {
            return BitConverterEx.GetBytes(value, mFrom, mTo);
        }

        /// &lt;summary&gt;
        /// Converts the given 64-bit unsigned integer to an array of bytes.
        /// &lt;/summary&gt;
        public byte[] GetBytes(ulong value)
        {
            return BitConverterEx.GetBytes(value, mFrom, mTo);
        }

        /// &lt;summary&gt;
        /// Converts the given 16-bit signed integer to an array of bytes.
        /// &lt;/summary&gt;
        public byte[] GetBytes(short value)
        {
            return BitConverterEx.GetBytes(value, mFrom, mTo);
        }

        /// &lt;summary&gt;
        /// Converts the given 32-bit signed integer to an array of bytes.
        /// &lt;/summary&gt;
        public byte[] GetBytes(int value)
        {
            return BitConverterEx.GetBytes(value, mFrom, mTo);
        }

        /// &lt;summary&gt;
        /// Converts the given 64-bit signed integer to an array of bytes.
        /// &lt;/summary&gt;
        public byte[] GetBytes(long value)
        {
            return BitConverterEx.GetBytes(value, mFrom, mTo);
        }

        /// &lt;summary&gt;
        /// Converts the given single precision floating-point number to an array of bytes.
        /// &lt;/summary&gt;
        public byte[] GetBytes(float value)
        {
            return BitConverterEx.GetBytes(value, mFrom, mTo);
        }

        /// &lt;summary&gt;
        /// Converts the given double precision floating-point number to an array of bytes.
        /// &lt;/summary&gt;
        public byte[] GetBytes(double value)
        {
            return BitConverterEx.GetBytes(value, mFrom, mTo);
        }
        #endregion

        #region Private Helpers
        /// &lt;summary&gt;
        /// Reverse the array of bytes as needed.
        /// &lt;/summary&gt;
        private static byte[] CheckData(byte[] value, long startIndex, long length, ByteOrder from, ByteOrder to)
        {
            byte[] data = new byte[length];
            Array.Copy(value, startIndex, data, 0, length);
            if (from != to)
                Array.Reverse(data);
            return data;
        }

        /// &lt;summary&gt;
        /// Reverse the array of bytes as needed.
        /// &lt;/summary&gt;
        private static byte[] CheckData(byte[] value, ByteOrder from, ByteOrder to)
        {
            return CheckData(value, 0, value.Length, from, to);
        }
        #endregion
    }
}

    </pre>
    <script type="text/javascript">
      highlightRanges([[27,9,27,60,0],[28,9,28,10,0],[29,13,29,26,0],[30,13,30,22,0],[31,9,31,10,0],[41,13,41,14,0],[42,17,42,101,0],[43,13,43,14,0],[54,13,54,14,0],[55,17,55,99,0],[56,13,56,14,0],[65,13,65,14,0],[66,17,66,96,0],[67,13,67,14,0],[76,13,76,14,0],[77,17,77,107,0],[78,13,78,14,0],[87,9,87,10,0],[88,13,88,69,0],[89,13,89,49,0],[90,9,90,10,0],[96,9,96,10,0],[97,13,97,69,0],[98,13,98,51,0],[99,9,99,10,0],[105,9,105,10,0],[106,13,106,69,0],[107,13,107,51,0],[108,9,108,10,0],[114,9,114,10,0],[115,13,115,69,0],[116,13,116,51,0],[117,9,117,10,0],[123,9,123,10,0],[124,13,124,69,0],[125,13,125,50,0],[126,9,126,10,0],[132,9,132,10,0],[133,13,133,69,0],[134,13,134,50,0],[135,9,135,10,0],[141,9,141,10,0],[142,13,142,69,0],[143,13,143,50,0],[144,9,144,10,0],[150,9,150,10,0],[151,13,151,69,0],[152,13,152,51,0],[153,9,153,10,0],[159,9,159,10,0],[160,13,160,69,0],[161,13,161,51,0],[162,9,162,10,0],[168,9,168,10,0],[169,13,169,56,0],[170,13,170,46,0],[171,13,171,25,0],[172,9,172,10,0],[178,9,178,10,0],[179,13,179,56,0],[180,13,180,46,0],[181,13,181,25,0],[182,9,182,10,0],[188,9,188,10,0],[189,13,189,56,0],[190,13,190,46,0],[191,13,191,25,0],[192,9,192,10,0],[198,9,198,10,0],[199,13,199,56,0],[200,13,200,46,0],[201,13,201,25,0],[202,9,202,10,0],[208,9,208,10,0],[209,13,209,56,0],[210,13,210,46,0],[211,13,211,25,0],[212,9,212,10,0],[218,9,218,10,0],[219,13,219,56,0],[220,13,220,46,0],[221,13,221,25,0],[222,9,222,10,0],[228,9,228,10,0],[229,13,229,56,0],[230,13,230,46,0],[231,13,231,25,0],[232,9,232,10,0],[238,9,238,10,0],[239,13,239,56,0],[240,13,240,46,0],[241,13,241,25,0],[242,9,242,10,0],[250,9,250,10,0],[251,13,251,73,0],[252,9,252,10,0],[258,9,258,10,0],[259,13,259,75,0],[260,9,260,10,0],[266,9,266,10,0],[267,13,267,75,0],[268,9,268,10,0],[274,9,274,10,0],[275,13,275,75,0],[276,9,276,10,0],[282,9,282,10,0],[283,13,283,74,0],[284,9,284,10,0],[290,9,290,10,0],[291,13,291,74,0],[292,9,292,10,0],[298,9,298,10,0],[299,13,299,74,0],[300,9,300,10,0],[306,9,306,10,0],[307,13,307,75,0],[308,9,308,10,0],[314,9,314,10,0],[315,13,315,75,0],[316,9,316,10,0],[322,9,322,10,0],[323,13,323,63,0],[324,9,324,10,0],[330,9,330,10,0],[331,13,331,63,0],[332,9,332,10,0],[338,9,338,10,0],[339,13,339,63,0],[340,9,340,10,0],[346,9,346,10,0],[347,13,347,63,0],[348,9,348,10,0],[354,9,354,10,0],[355,13,355,63,0],[356,9,356,10,0],[362,9,362,10,0],[363,13,363,63,0],[364,9,364,10,0],[370,9,370,10,0],[371,13,371,63,0],[372,9,372,10,0],[378,9,378,10,0],[379,13,379,63,0],[380,9,380,10,0],[388,9,388,10,0],[389,13,389,44,0],[390,13,390,60,0],[391,13,391,28,0],[392,17,392,37,0],[393,13,393,25,0],[394,9,394,10,0],[400,9,400,10,0],[401,13,401,64,0],[402,9,402,10,0]]);
    </script>
  </body>
</html>