<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Tom Pipe\Documents\Hexadigital\Code\Umbraco\Umbraco-CMS\src\Umbraco.Web\Trees\MemberTypeTreeController.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using System.Collections.Generic;
using System.Linq;
using System.Net.Http.Formatting;
using System.Text;
using System.Threading.Tasks;
using umbraco;
using umbraco.BusinessLogic.Actions;
using Umbraco.Core;
using Umbraco.Web.Models.Trees;
using Umbraco.Web.WebApi.Filters;

namespace Umbraco.Web.Trees
{
    [UmbracoTreeAuthorize(Constants.Trees.MemberTypes)]
    [Tree(Constants.Applications.Members, Constants.Trees.MemberTypes, null, sortOrder:2  )]
    [Mvc.PluginController(&quot;UmbracoTrees&quot;)]
    [CoreTree]
    [LegacyBaseTree(typeof(loadMemberTypes))]
    public class MemberTypeTreeController : TreeController
    {
        protected override TreeNodeCollection GetTreeNodes(string id, FormDataCollection queryStrings)
        {
            var nodes = new TreeNodeCollection();
            nodes.AddRange(
                Services.MemberTypeService.GetAll()
                    .OrderBy(x =&gt; x.Name)
                    .Select(dt =&gt; CreateTreeNode(dt.Id.ToString(), id, queryStrings, dt.Name, &quot;icon-item-arrangement&quot;, false)));
            
            return nodes;
        }

        protected override MenuItemCollection GetMenuForNode(string id, FormDataCollection queryStrings)
        {
            var menu = new MenuItemCollection();

            if (id == Constants.System.Root.ToInvariantString())
            {
                // root actions              
                menu.Items.Add&lt;CreateChildEntity, ActionNew&gt;(ui.Text(&quot;actions&quot;, ActionNew.Instance.Alias));
                menu.Items.Add&lt;RefreshNode, ActionRefresh&gt;(ui.Text(&quot;actions&quot;, ActionRefresh.Instance.Alias), true);
                return menu;
            }
            else
            {
                //delete member type
                menu.Items.Add&lt;ActionDelete&gt;(ui.Text(&quot;actions&quot;, ActionDelete.Instance.Alias));
            }

            return menu;
        }
    }
}

    </pre>
    <script type="text/javascript">
      highlightRanges([[23,9,23,10,0],[24,13,24,50,0],[25,13,27,35,0],[27,35,27,41,0],[27,41,28,35,0],[28,35,28,126,0],[28,126,28,129,0],[25,13,28,129,0],[30,13,30,26,0],[31,9,31,10,0],[34,9,34,10,0],[35,13,35,49,0],[37,13,37,65,0],[38,13,38,14,0],[40,17,40,108,0],[41,17,41,116,0],[42,17,42,29,0],[45,13,45,14,0],[47,17,47,95,0],[48,13,48,14,0],[50,13,50,25,0],[51,9,51,10,0]]);
    </script>
  </body>
</html>