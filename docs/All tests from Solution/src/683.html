<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Tom Pipe\Documents\Hexadigital\Code\Umbraco\Umbraco-CMS\src\Umbraco.Web\umbraco.presentation\umbraco\create\simple.ascx.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System.Web;
using System.Web.UI;
using ClientDependency.Core;
using Umbraco.Core;
using Umbraco.Core.Logging;
using Umbraco.Web.UI;
using Umbraco.Web;
using System;
using Umbraco.Web.UI.Controls;
using System.Web.UI.WebControls;
using umbraco.BasePages;
using umbraco.BusinessLogic;
using Umbraco.Web;
using System.Linq;
using UmbracoUserControl = Umbraco.Web.UI.Controls.UmbracoUserControl;

namespace umbraco.cms.presentation.create.controls
{
    /// &lt;summary&gt;
    ///		Summary description for simple.
    /// &lt;/summary&gt;
    public partial class simple : UmbracoUserControl
    {

        protected void Page_Load(object sender, EventArgs e)
        {
            sbmt.Text = ui.Text(&quot;create&quot;);
            rename.Attributes[&quot;placeholder&quot;] = ui.Text(&quot;name&quot;);

            // Put user code to initialize the page here
        }

        protected void sbmt_Click(object sender, EventArgs e)
        {
            if (Page.IsValid)
            {
                int nodeId;
                if (int.TryParse(Request.QueryString[&quot;nodeId&quot;], out nodeId) == false)
                    nodeId = -1;

                try
                {

                    var returnUrl = LegacyDialogHandler.Create(
                        new HttpContextWrapper(Context),
                        new User(Security.CurrentUser),
                        Request.GetItemAsString(&quot;nodeType&quot;),
                            nodeId,
                            rename.Text.Trim(),
                            Request.QueryString.AsEnumerable().ToDictionary(x =&gt; x.Key, x =&gt; (object)x.Value));

                    BasePage.Current.ClientTools
                    .ChangeContentFrameUrl(returnUrl)
                    .ReloadActionNode(false, true)
                    .CloseModalWindow();
                }
                catch (Exception ex)
                {
                    CustomValidation.ErrorMessage = &quot;* &quot; + ex.Message;
                    CustomValidation.IsValid = false;
                }
            }

        }

        protected CustomValidator CustomValidation;

        /// &lt;summary&gt;
        /// RequiredFieldValidator1 control.
        /// &lt;/summary&gt;
        /// &lt;remarks&gt;
        /// Auto-generated field.
        /// To modify move field declaration from designer file to code-behind file.
        /// &lt;/remarks&gt;
        protected global::System.Web.UI.WebControls.RequiredFieldValidator RequiredFieldValidator1;

        /// &lt;summary&gt;
        /// rename control.
        /// &lt;/summary&gt;
        /// &lt;remarks&gt;
        /// Auto-generated field.
        /// To modify move field declaration from designer file to code-behind file.
        /// &lt;/remarks&gt;
        protected global::System.Web.UI.WebControls.TextBox rename;

        /// &lt;summary&gt;
        /// Textbox1 control.
        /// &lt;/summary&gt;
        /// &lt;remarks&gt;
        /// Auto-generated field.
        /// To modify move field declaration from designer file to code-behind file.
        /// &lt;/remarks&gt;
        protected global::System.Web.UI.WebControls.TextBox Textbox1;

        /// &lt;summary&gt;
        /// sbmt control.
        /// &lt;/summary&gt;
        /// &lt;remarks&gt;
        /// Auto-generated field.
        /// To modify move field declaration from designer file to code-behind file.
        /// &lt;/remarks&gt;
        protected global::System.Web.UI.WebControls.Button sbmt;
    }
}

    </pre>
    <script type="text/javascript">
      highlightRanges([[26,9,26,10,0],[27,13,27,43,0],[28,13,28,64,0],[31,9,31,10,0],[34,9,34,10,0],[35,13,35,30,0],[36,13,36,14,0],[38,17,38,86,0],[39,21,39,33,0],[42,17,42,18,0],[44,21,50,82,0],[50,82,50,87,0],[50,87,50,94,0],[50,94,50,109,0],[50,109,50,112,0],[44,21,50,112,0],[52,21,55,41,0],[56,17,56,18,0],[57,17,57,37,0],[58,17,58,18,0],[59,21,59,71,0],[60,21,60,54,0],[61,17,61,18,0],[62,13,62,14,0],[64,9,64,10,0]]);
    </script>
  </body>
</html>