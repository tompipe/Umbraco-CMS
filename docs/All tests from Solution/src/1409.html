<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Tom Pipe\Documents\Hexadigital\Code\Umbraco\Umbraco-CMS\src\Umbraco.Core\ActionsResolver.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using System.Collections.Generic;
using System.Linq;
using System.Reflection;
using Umbraco.Core.Logging;
using Umbraco.Core.ObjectResolution;
using umbraco.interfaces;

namespace Umbraco.Core
{
	/// &lt;summary&gt;
	/// A resolver to return all IAction objects
	/// &lt;/summary&gt;
	public sealed class ActionsResolver : LazyManyObjectsResolverBase&lt;ActionsResolver, IAction&gt;
	{
	    /// &lt;summary&gt;
	    /// Constructor
	    /// &lt;/summary&gt;
	    /// &lt;param name=&quot;serviceProvider&quot;&gt;&lt;/param&gt;
	    /// &lt;param name=&quot;logger&quot;&gt;&lt;/param&gt;
	    /// &lt;param name=&quot;packageActions&quot;&gt;&lt;/param&gt;		
	    internal ActionsResolver(IServiceProvider serviceProvider, ILogger logger, Func&lt;IEnumerable&lt;Type&gt;&gt; packageActions)
            : base(serviceProvider, logger, packageActions)
		{

		}

		/// &lt;summary&gt;
		/// Gets the &lt;see cref=&quot;IPackageAction&quot;/&gt; implementations.
		/// &lt;/summary&gt;
		public IEnumerable&lt;IAction&gt; Actions
		{
			get
			{
				return Values;
			}
		}

        /// &lt;summary&gt;
        /// Gets an Action if it exists.
        /// &lt;/summary&gt;
        /// &lt;typeparam name=&quot;T&quot;&gt;&lt;/typeparam&gt;
        /// &lt;returns&gt;&lt;/returns&gt;
        internal IAction GetAction&lt;T&gt;()
            where T : IAction
        {
            return Actions.SingleOrDefault(x =&gt; x.GetType() == typeof (T));
        }

		protected override IEnumerable&lt;IAction&gt; CreateInstances()
		{					
			var actions = new List&lt;IAction&gt;();
			var foundIActions = InstanceTypes;
			foreach (var type in foundIActions)
			{
				IAction typeInstance;
				var instance = type.GetProperty(&quot;Instance&quot;, BindingFlags.Public | BindingFlags.Static);
				//if the singletone initializer is not found, try simply creating an instance of the IAction if it supports public constructors
				if (instance == null)
					typeInstance = ServiceProvider.GetService(type) as IAction;
				else
					typeInstance = instance.GetValue(null, null) as IAction;

				if (typeInstance != null)
				{
					actions.Add(typeInstance);
				}
			}
			return actions;
		}

	}
}
    </pre>
    <script type="text/javascript">
      highlightRanges([[23,15,23,60,1],[24,3,24,4,1],[26,3,26,4,1],[34,4,34,5,1],[35,5,35,19,1],[36,4,36,5,1],[46,9,46,10,0],[47,13,47,49,0],[47,49,47,74,0],[47,74,47,76,0],[47,13,47,76,0],[48,9,48,10,0],[51,3,51,4,1],[52,4,52,38,1],[53,4,53,38,1],[54,4,54,11,1],[54,13,54,21,1],[54,22,54,24,1],[54,25,54,38,1],[55,4,55,5,1],[57,5,57,92,1],[59,5,59,26,1],[60,6,60,65,1],[62,6,62,62,1],[64,5,64,30,1],[65,5,65,6,1],[66,6,66,32,1],[67,5,67,6,1],[68,4,68,5,1],[69,4,69,19,1],[70,3,70,4,1]]);
    </script>
  </body>
</html>