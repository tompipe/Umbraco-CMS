<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Tom Pipe\Documents\Hexadigital\Code\Umbraco\Umbraco-CMS\src\Umbraco.Web\PublishedCache\ContextualPublishedCache.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Xml.XPath;
using Umbraco.Core.Models;
using Umbraco.Core.Xml;

namespace Umbraco.Web.PublishedCache
{
    /// &lt;summary&gt;
    /// Provides access to cached contents in a specified context.
    /// &lt;/summary&gt;
    public abstract class ContextualPublishedCache
    {
        protected readonly UmbracoContext UmbracoContext;

        /// &lt;summary&gt;
        /// Initializes a new instance of the &lt;see cref=&quot;ContextualPublishedCache&quot;/&gt; with a context.
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;umbracoContext&quot;&gt;The context.&lt;/param&gt;
        protected ContextualPublishedCache(UmbracoContext umbracoContext)
        {
            UmbracoContext = umbracoContext;
        }

        /// &lt;summary&gt;
        /// Gets a content identified by its unique identifier.
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;contentId&quot;&gt;The content unique identifier.&lt;/param&gt;
        /// &lt;returns&gt;The content, or null.&lt;/returns&gt;
        /// &lt;remarks&gt;Considers published or unpublished content depending on context.&lt;/remarks&gt;
        public IPublishedContent GetById(int contentId)
        {
            return GetById(UmbracoContext.InPreviewMode, contentId);
        }

        /// &lt;summary&gt;
        /// Gets a content identified by its unique identifier.
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;preview&quot;&gt;A value indicating whether to consider unpublished content.&lt;/param&gt;
        /// &lt;param name=&quot;contentId&quot;&gt;The content unique identifier.&lt;/param&gt;
        /// &lt;returns&gt;The content, or null.&lt;/returns&gt;
        public abstract IPublishedContent GetById(bool preview, int contentId);

        /// &lt;summary&gt;
        /// Gets content at root.
        /// &lt;/summary&gt;
        /// &lt;returns&gt;The contents.&lt;/returns&gt;
        /// &lt;remarks&gt;Considers published or unpublished content depending on context.&lt;/remarks&gt;
        public IEnumerable&lt;IPublishedContent&gt; GetAtRoot()
        {
            return GetAtRoot(UmbracoContext.InPreviewMode);
        }

        /// &lt;summary&gt;
        /// Gets contents at root.
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;preview&quot;&gt;A value indicating whether to consider unpublished content.&lt;/param&gt;
        /// &lt;returns&gt;The contents.&lt;/returns&gt;
        public abstract IEnumerable&lt;IPublishedContent&gt; GetAtRoot(bool preview);

        /// &lt;summary&gt;
        /// Gets a content resulting from an XPath query.
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;xpath&quot;&gt;The XPath query.&lt;/param&gt;
        /// &lt;param name=&quot;vars&quot;&gt;Optional XPath variables.&lt;/param&gt;
        /// &lt;returns&gt;The content, or null.&lt;/returns&gt;
        /// &lt;remarks&gt;
        /// &lt;para&gt;If &lt;param name=&quot;vars&quot; /&gt; is &lt;c&gt;null&lt;/c&gt;, or is empty, or contains only one single
        /// value which itself is &lt;c&gt;null&lt;/c&gt;, then variables are ignored.&lt;/para&gt;
        /// &lt;para&gt;The XPath expression should reference variables as &lt;c&gt;$var&lt;/c&gt;.&lt;/para&gt;
        /// &lt;para&gt;Considers published or unpublished content depending on context.&lt;/para&gt;
        /// &lt;/remarks&gt;
        public IPublishedContent GetSingleByXPath(string xpath, params XPathVariable[] vars)
        {
            return GetSingleByXPath(UmbracoContext.InPreviewMode, xpath, vars);
        }

        /// &lt;summary&gt;
        /// Gets a content resulting from an XPath query.
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;xpath&quot;&gt;The XPath query.&lt;/param&gt;
        /// &lt;param name=&quot;vars&quot;&gt;Optional XPath variables.&lt;/param&gt;
        /// &lt;returns&gt;The content, or null.&lt;/returns&gt;
        /// &lt;remarks&gt;
        /// &lt;para&gt;If &lt;param name=&quot;vars&quot; /&gt; is &lt;c&gt;null&lt;/c&gt;, or is empty, or contains only one single
        /// value which itself is &lt;c&gt;null&lt;/c&gt;, then variables are ignored.&lt;/para&gt;
        /// &lt;para&gt;The XPath expression should reference variables as &lt;c&gt;$var&lt;/c&gt;.&lt;/para&gt;
        /// &lt;para&gt;Considers published or unpublished content depending on context.&lt;/para&gt;
        /// &lt;/remarks&gt;
        public IPublishedContent GetSingleByXPath(XPathExpression xpath, params XPathVariable[] vars)
        {
            return GetSingleByXPath(UmbracoContext.InPreviewMode, xpath, vars);
        }

        /// &lt;summary&gt;
        /// Gets a content resulting from an XPath query.
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;preview&quot;&gt;A value indicating whether to consider unpublished content.&lt;/param&gt;
        /// &lt;param name=&quot;xpath&quot;&gt;The XPath query.&lt;/param&gt;
        /// &lt;param name=&quot;vars&quot;&gt;Optional XPath variables.&lt;/param&gt;
        /// &lt;returns&gt;The content, or null.&lt;/returns&gt;
        /// &lt;remarks&gt;
        /// &lt;para&gt;If &lt;param name=&quot;vars&quot; /&gt; is &lt;c&gt;null&lt;/c&gt;, or is empty, or contains only one single
        /// value which itself is &lt;c&gt;null&lt;/c&gt;, then variables are ignored.&lt;/para&gt;
        /// &lt;para&gt;The XPath expression should reference variables as &lt;c&gt;$var&lt;/c&gt;.&lt;/para&gt;
        /// &lt;/remarks&gt;
        public abstract IPublishedContent GetSingleByXPath(bool preview, string xpath, params XPathVariable[] vars);

        /// &lt;summary&gt;
        /// Gets a content resulting from an XPath query.
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;preview&quot;&gt;A value indicating whether to consider unpublished content.&lt;/param&gt;
        /// &lt;param name=&quot;xpath&quot;&gt;The XPath query.&lt;/param&gt;
        /// &lt;param name=&quot;vars&quot;&gt;Optional XPath variables.&lt;/param&gt;
        /// &lt;returns&gt;The content, or null.&lt;/returns&gt;
        /// &lt;remarks&gt;
        /// &lt;para&gt;If &lt;param name=&quot;vars&quot; /&gt; is &lt;c&gt;null&lt;/c&gt;, or is empty, or contains only one single
        /// value which itself is &lt;c&gt;null&lt;/c&gt;, then variables are ignored.&lt;/para&gt;
        /// &lt;para&gt;The XPath expression should reference variables as &lt;c&gt;$var&lt;/c&gt;.&lt;/para&gt;
        /// &lt;/remarks&gt;
        public abstract IPublishedContent GetSingleByXPath(bool preview, XPathExpression xpath, params XPathVariable[] vars);

        /// &lt;summary&gt;
        /// Gets content resulting from an XPath query.
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;xpath&quot;&gt;The XPath query.&lt;/param&gt;
        /// &lt;param name=&quot;vars&quot;&gt;Optional XPath variables.&lt;/param&gt;
        /// &lt;returns&gt;The contents.&lt;/returns&gt;
        /// &lt;remarks&gt;
        /// &lt;para&gt;If &lt;param name=&quot;vars&quot; /&gt; is &lt;c&gt;null&lt;/c&gt;, or is empty, or contains only one single
        /// value which itself is &lt;c&gt;null&lt;/c&gt;, then variables are ignored.&lt;/para&gt;
        /// &lt;para&gt;The XPath expression should reference variables as &lt;c&gt;$var&lt;/c&gt;.&lt;/para&gt;
        /// &lt;para&gt;Considers published or unpublished content depending on context.&lt;/para&gt;
        /// &lt;/remarks&gt;
        public IEnumerable&lt;IPublishedContent&gt; GetByXPath(string xpath, params XPathVariable[] vars)
        {
            return GetByXPath(UmbracoContext.InPreviewMode, xpath, vars);
        }

        /// &lt;summary&gt;
        /// Gets content resulting from an XPath query.
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;xpath&quot;&gt;The XPath query.&lt;/param&gt;
        /// &lt;param name=&quot;vars&quot;&gt;Optional XPath variables.&lt;/param&gt;
        /// &lt;returns&gt;The contents.&lt;/returns&gt;
        /// &lt;remarks&gt;
        /// &lt;para&gt;If &lt;param name=&quot;vars&quot; /&gt; is &lt;c&gt;null&lt;/c&gt;, or is empty, or contains only one single
        /// value which itself is &lt;c&gt;null&lt;/c&gt;, then variables are ignored.&lt;/para&gt;
        /// &lt;para&gt;The XPath expression should reference variables as &lt;c&gt;$var&lt;/c&gt;.&lt;/para&gt;
        /// &lt;para&gt;Considers published or unpublished content depending on context.&lt;/para&gt;
        /// &lt;/remarks&gt;
        public IEnumerable&lt;IPublishedContent&gt; GetByXPath(XPathExpression xpath, params XPathVariable[] vars)
        {
            return GetByXPath(UmbracoContext.InPreviewMode, xpath, vars);
        }

        /// &lt;summary&gt;
        /// Gets content resulting from an XPath query.
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;preview&quot;&gt;A value indicating whether to consider unpublished content.&lt;/param&gt;
        /// &lt;param name=&quot;xpath&quot;&gt;The XPath query.&lt;/param&gt;
        /// &lt;param name=&quot;vars&quot;&gt;Optional XPath variables.&lt;/param&gt;
        /// &lt;returns&gt;The contents.&lt;/returns&gt;
        /// &lt;remarks&gt;
        /// &lt;para&gt;If &lt;param name=&quot;vars&quot; /&gt; is &lt;c&gt;null&lt;/c&gt;, or is empty, or contains only one single
        /// value which itself is &lt;c&gt;null&lt;/c&gt;, then variables are ignored.&lt;/para&gt;
        /// &lt;para&gt;The XPath expression should reference variables as &lt;c&gt;$var&lt;/c&gt;.&lt;/para&gt;
        /// &lt;/remarks&gt;
        public abstract IEnumerable&lt;IPublishedContent&gt; GetByXPath(bool preview, string xpath, params XPathVariable[] vars);

        /// &lt;summary&gt;
        /// Gets content resulting from an XPath query.
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;preview&quot;&gt;A value indicating whether to consider unpublished content.&lt;/param&gt;
        /// &lt;param name=&quot;xpath&quot;&gt;The XPath query.&lt;/param&gt;
        /// &lt;param name=&quot;vars&quot;&gt;Optional XPath variables.&lt;/param&gt;
        /// &lt;returns&gt;The contents.&lt;/returns&gt;
        /// &lt;remarks&gt;
        /// &lt;para&gt;If &lt;param name=&quot;vars&quot; /&gt; is &lt;c&gt;null&lt;/c&gt;, or is empty, or contains only one single
        /// value which itself is &lt;c&gt;null&lt;/c&gt;, then variables are ignored.&lt;/para&gt;
        /// &lt;para&gt;The XPath expression should reference variables as &lt;c&gt;$var&lt;/c&gt;.&lt;/para&gt;
        /// &lt;/remarks&gt;
        public abstract IEnumerable&lt;IPublishedContent&gt; GetByXPath(bool preview, XPathExpression xpath, params XPathVariable[] vars);

        /// &lt;summary&gt;
        /// Gets an XPath navigator that can be used to navigate content.
        /// &lt;/summary&gt;
        /// &lt;returns&gt;The XPath navigator.&lt;/returns&gt;
        /// &lt;remarks&gt;Considers published or unpublished content depending on context.&lt;/remarks&gt;
        public XPathNavigator GetXPathNavigator()
        {
            return GetXPathNavigator(UmbracoContext.InPreviewMode);
        }

        /// &lt;summary&gt;
        /// Gets an XPath navigator that can be used to navigate content.
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;preview&quot;&gt;A value indicating whether to consider unpublished content.&lt;/param&gt;
        /// &lt;returns&gt;The XPath navigator.&lt;/returns&gt;
        public abstract XPathNavigator GetXPathNavigator(bool preview);

        /// &lt;summary&gt;
        /// Gets a value indicating whether &lt;c&gt;GetXPathNavigator&lt;/c&gt; returns an &lt;c&gt;XPathNavigator&lt;/c&gt;
        /// and that navigator is a &lt;c&gt;NavigableNavigator&lt;/c&gt;.
        /// &lt;/summary&gt;
        public abstract bool XPathNavigatorIsNavigable { get; }

        /// &lt;summary&gt;
        /// Gets a value indicating whether the underlying non-contextual cache contains content.
        /// &lt;/summary&gt;
        /// &lt;returns&gt;A value indicating whether the underlying non-contextual cache contains content.&lt;/returns&gt;
        /// &lt;remarks&gt;Considers published or unpublished content depending on context.&lt;/remarks&gt;
        public bool HasContent()
        {
            return HasContent(UmbracoContext.InPreviewMode);
        }

        /// &lt;summary&gt;
        /// Gets a value indicating whether the underlying non-contextual cache contains content.
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;preview&quot;&gt;A value indicating whether to consider unpublished content.&lt;/param&gt;
        /// &lt;returns&gt;A value indicating whether the underlying non-contextual cache contains content.&lt;/returns&gt;
        public abstract bool HasContent(bool preview);
    }
}

    </pre>
    <script type="text/javascript">
      highlightRanges([[22,9,22,74,1],[23,9,23,10,1],[24,13,24,45,1],[25,9,25,10,1],[34,9,34,10,1],[35,13,35,69,1],[36,9,36,10,1],[52,9,52,10,1],[53,13,53,60,1],[54,9,54,10,1],[76,9,76,10,1],[77,13,77,80,1],[78,9,78,10,1],[93,9,93,10,0],[94,13,94,80,0],[95,9,95,10,0],[138,9,138,10,0],[139,13,139,74,0],[140,9,140,10,0],[155,9,155,10,0],[156,13,156,74,0],[157,9,157,10,0],[193,9,193,10,0],[194,13,194,68,0],[195,9,195,10,0],[216,9,216,10,1],[217,13,217,61,1],[218,9,218,10,1]]);
    </script>
  </body>
</html>