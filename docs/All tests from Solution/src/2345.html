<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Tom Pipe\Documents\Hexadigital\Code\Umbraco\Umbraco-CMS\src\UmbracoExamine\ExamineHelper.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Web;
using Examine;
using Examine.LuceneEngine.Config;
using Umbraco.Core;

namespace UmbracoExamine
{
    internal class ExamineHelper
    {
      
        public static IndexSet GetConfiguredIndexSet(string name, System.Collections.Specialized.NameValueCollection config, string matchingVerb, Func&lt;bool&gt; alreadyConfiguredCheck)
        {
            //Need to check if the index set or IndexerData is specified...

            if (config[&quot;indexSet&quot;] == null &amp;&amp; alreadyConfiguredCheck() == false)
            {
                //if we don&#39;t have either, then we&#39;ll try to set the index set by naming conventions
                if (name.EndsWith(matchingVerb))
                {
                    var setNameByConvension = name.Remove(name.LastIndexOf(matchingVerb)) + &quot;IndexSet&quot;;
                    //check if we can assign the index set by naming convention
                    var set = IndexSets.Instance.Sets.Cast&lt;IndexSet&gt;().SingleOrDefault(x =&gt; x.SetName == setNameByConvension);

                    if (set != null)
                    {
                        //we&#39;ve found an index set by naming conventions :)
                        return set;
                    }
                }

                throw new ArgumentNullException(&quot;indexSet on LuceneExamineIndexer provider has not been set in configuration and/or the IndexerData property has not been explicitly set&quot;);
            }

            if (config[&quot;indexSet&quot;] != null)
            {
                //if an index set is specified, ensure it exists and initialize the indexer based on the set

                if (IndexSets.Instance.Sets[config[&quot;indexSet&quot;]] == null)
                {
                    throw new ArgumentException(&quot;The indexSet specified for the LuceneExamineIndexer provider does not exist&quot;);
                }
                var indexSetName = config[&quot;indexSet&quot;];
                return IndexSets.Instance.Sets[indexSetName];
            }

            //it&#39;s already configured internally
            return null;
        }
    }
}

    </pre>
    <script type="text/javascript">
      highlightRanges([[17,9,17,10,0],[20,13,20,81,0],[21,13,21,14,0],[23,17,23,49,0],[24,17,24,18,0],[25,21,25,104,0],[27,21,27,93,0],[27,93,27,125,0],[27,125,27,127,0],[27,21,27,127,0],[29,21,29,37,0],[30,21,30,22,0],[32,25,32,36,0],[34,17,34,18,0],[36,17,36,188,0],[39,13,39,44,0],[40,13,40,14,0],[43,17,43,73,0],[44,17,44,18,0],[45,21,45,128,0],[47,17,47,55,0],[48,17,48,62,0],[52,13,52,25,0],[53,9,53,10,0]]);
    </script>
  </body>
</html>