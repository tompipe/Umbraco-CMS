<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Tom Pipe\Documents\Hexadigital\Code\Umbraco\Umbraco-CMS\src\Umbraco.Web\Trees\PartialViewMacrosTree.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System.Text;
using Umbraco.Core.IO;
using umbraco.businesslogic;
using umbraco.cms.presentation.Trees;
using Umbraco.Core;

namespace Umbraco.Web.Trees
{
	/// &lt;summary&gt;
	/// Tree for displaying partial view macros in the developer app
	/// &lt;/summary&gt;
	[Tree(Constants.Applications.Developer, &quot;partialViewMacros&quot;, &quot;Partial View Macro Files&quot;, sortOrder: 6)]
	public class PartialViewMacrosTree : PartialViewsTree
	{
		public PartialViewMacrosTree(string application) : base(application)
		{
		}

		protected override string FilePath
		{
			get { return SystemDirectories.MvcViews + &quot;/MacroPartials/&quot;; }
		}

		public override void RenderJS(ref StringBuilder javascript)
		{
			javascript.Append(
                @&quot;
		                 function openMacroPartialView(id) {
		                    UmbClientMgr.contentFrame(&#39;Settings/Views/EditView.aspx?treeType=partialViewMacros&amp;file=&#39; + id);
					    }
		                &quot;);

		}/// &lt;summary&gt;
		/// Ensures that no folders can be added
		/// &lt;/summary&gt;
		/// &lt;param name=&quot;xNode&quot;&gt;&lt;/param&gt;
        protected override void OnRenderFolderNode(ref XmlTreeNode xNode)
        {
            base.OnRenderFolderNode(ref xNode);

            xNode.NodeType = &quot;partialViewMacrosFolder&quot;;
        }

		protected override void ChangeNodeAction(XmlTreeNode xNode)
		{
			xNode.Action = xNode.Action.Replace(&quot;openFile&quot;, &quot;openMacroPartialView&quot;);
		}
	}
}
    </pre>
    <script type="text/javascript">
      highlightRanges([[15,54,15,71,0],[16,3,16,4,0],[17,3,17,4,0],[21,8,21,9,0],[21,10,21,64,0],[21,65,21,66,0],[25,3,25,4,0],[26,4,31,22,0],[33,3,33,4,0],[38,9,38,10,0],[39,13,39,48,0],[41,13,41,56,0],[42,9,42,10,0],[45,3,45,4,0],[46,4,46,76,0],[47,3,47,4,0]]);
    </script>
  </body>
</html>