<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Tom Pipe\Documents\Hexadigital\Code\Umbraco\Umbraco-CMS\src\Umbraco.Core\Models\Rdbms\RedirectUrlDto.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using Umbraco.Core.Persistence;
using Umbraco.Core.Persistence.DatabaseAnnotations;

namespace Umbraco.Core.Models.Rdbms
{
    [TableName(&quot;umbracoRedirectUrl&quot;)]
    [PrimaryKey(&quot;id&quot;, autoIncrement = false)]
    [ExplicitColumns]
    class RedirectUrlDto
    {
        public RedirectUrlDto()
        {
            CreateDateUtc = DateTime.UtcNow;
        }

        // notes
        //
        // we want a unique, non-clustered  index on (url ASC, contentId ASC, createDate DESC) but the
        // problem is that the index key must be 900 bytes max. should we run without an index? done
        // some perfs comparisons, and running with an index on a hash is only slightly slower on
        // inserts, and much faster on reads, so... we have an index on a hash.

        [Column(&quot;id&quot;)]
        [PrimaryKeyColumn(Name = &quot;PK_umbracoRedirectUrl&quot;, AutoIncrement = false)]
        public Guid Id { get; set; }

        [ResultColumn]
        public int ContentId { get; set; }

        [Column(&quot;contentKey&quot;)]
        [NullSetting(NullSetting = NullSettings.NotNull)]
        [ForeignKey(typeof(NodeDto), Column = &quot;uniqueID&quot;)]
        public Guid ContentKey { get; set; }

        [Column(&quot;createDateUtc&quot;)]
        [NullSetting(NullSetting = NullSettings.NotNull)]
        public DateTime CreateDateUtc { get; set; }

        [Column(&quot;url&quot;)]
        [NullSetting(NullSetting = NullSettings.NotNull)]
        public string Url { get; set; }

        [Column(&quot;urlHash&quot;)]
        [NullSetting(NullSetting = NullSettings.NotNull)]
        [Index(IndexTypes.UniqueNonClustered, Name = &quot;IX_umbracoRedirectUrl&quot;, ForColumns = &quot;urlHash, contentKey, createDateUtc&quot;)]
        [Length(40)]
        public string UrlHash { get; set; }
    }
}

    </pre>
    <script type="text/javascript">
      highlightRanges([[12,9,12,32,1],[13,9,13,10,1],[14,13,14,45,1],[15,9,15,10,1],[26,26,26,30,1],[26,31,26,35,1],[29,32,29,36,1],[29,37,29,41,1],[34,34,34,38,1],[34,39,34,43,1],[38,41,38,45,1],[38,46,38,50,1],[42,29,42,33,1],[42,34,42,38,1],[48,33,48,37,1],[48,38,48,42,1]]);
    </script>
  </body>
</html>