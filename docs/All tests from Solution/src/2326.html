<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Tom Pipe\Documents\Hexadigital\Code\Umbraco\Umbraco-CMS\src\umbraco.MacroEngines\RazorDynamicNode\DynamicXml.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Dynamic;
using System.Xml.Linq;
using System.Xml.XPath;
using System.Collections;
using System.IO;
using System.Web;
using Umbraco.Core;

namespace umbraco.MacroEngines
{
	[Obsolete(&quot;This class has been superceded by Umbraco.Core.Dynamics.DynamicXml&quot;)]
	public class DynamicXml : DynamicObject, IEnumerable&lt;DynamicXml&gt;, IEnumerable&lt;XElement&gt;
	{
		private readonly Umbraco.Core.Dynamics.DynamicXml _inner;

		public XElement BaseElement
		{
			get { return _inner.BaseElement; }
			set { _inner.BaseElement = value; }
		}

        public DynamicXml(XElement baseElement)
        {
        	_inner = new Umbraco.Core.Dynamics.DynamicXml(baseElement);
        }
        public DynamicXml(string xml)
        {
			_inner = new Umbraco.Core.Dynamics.DynamicXml(xml);
        }
        public DynamicXml(XPathNodeIterator xpni)
        {
			_inner = new Umbraco.Core.Dynamics.DynamicXml(xpni);
        }
        public string InnerText
        {
            get { return _inner.InnerText; }
        }
        public string ToXml()
        {
        	return _inner.ToXml();
        }
        public override bool TryGetIndex(GetIndexBinder binder, object[] indexes, out object result)
        {
        	var innerResult = _inner.TryGetIndex(binder, indexes, out result);
			//special case, we need to check if the result is of a non-legacy dynamic type because if it is, we need 
			//to return the legacy type
			result = LegacyConverter.ConvertToLegacy(result);
			return innerResult;
        }
        public override bool TryInvokeMember(InvokeMemberBinder binder, object[] args, out object result)
        {
        	var innerResult = _inner.TryInvokeMember(binder, args, out result);
			//special case, we need to check if the result is of a non-legacy dynamic type because if it is, we need 
			//to return the legacy type
			result = LegacyConverter.ConvertToLegacy(result);
			return innerResult;
        }
        public override bool TryGetMember(GetMemberBinder binder, out object result)
        {
			var innerResult = _inner.TryGetMember(binder, out result);
			//special case, we need to check if the result is of a non-legacy dynamic type because if it is, we need 
			//to return the legacy type
			result = LegacyConverter.ConvertToLegacy(result);
	        return innerResult;
        }

        public DynamicXml XPath(string expression)
        {
			var matched = _inner.BaseElement.XPathSelectElements(expression);
            var root = new DynamicXml(&quot;&lt;results/&gt;&quot;);
            foreach (var element in matched)
            {
                root.BaseElement.Add(element);
            }
            return root;
        }
        public IHtmlString ToHtml()
        {
        	return _inner.ToHtml();
        }
        public DynamicXml Find(string expression)
        {
			return new DynamicXml(_inner.BaseElement.XPathSelectElements(expression).FirstOrDefault());
        }

        public DynamicXml Find(string attributeName, object value)
        {
            string expression = string.Format(&quot;//*[{0}=&#39;{1}&#39;]&quot;, attributeName, value);
			return new DynamicXml(_inner.BaseElement.XPathSelectElements(expression).FirstOrDefault());
        }

		IEnumerator&lt;XElement&gt; IEnumerable&lt;XElement&gt;.GetEnumerator()
		{
			return this.BaseElement.Elements().GetEnumerator();
		}

		public IEnumerator&lt;DynamicXml&gt; GetEnumerator()
		{
			return this.BaseElement.Elements().Select(e =&gt; new DynamicXml(e)).GetEnumerator();
		}

		IEnumerator IEnumerable.GetEnumerator()
		{
			return GetEnumerator();
		}

        public int Count()
        {
        	return _inner.Count();
        }

        public bool Any()
        {
            return _inner.Any();
        }

        public bool IsNull()
        {
        	return _inner.IsNull();
        }
        public bool HasValue()
        {
        	return _inner.HasValue();
        }

		public IEnumerable&lt;DynamicXml&gt; Take(int count)
		{
			return _inner.Take(count).Select(x =&gt; new DynamicXml(x.BaseElement));
		}

		public IEnumerable&lt;DynamicXml&gt; Skip(int count)
		{
			return _inner.Skip(count).Select(x =&gt; new DynamicXml(x.BaseElement));
		}

        public bool IsFirst()
        {
        	return _inner.IsFirst();
        }
        public HtmlString IsFirst(string valueIfTrue)
        {
        	return _inner.IsFirst(valueIfTrue);
        }
        public HtmlString IsFirst(string valueIfTrue, string valueIfFalse)
        {
        	return _inner.IsFirst(valueIfTrue, valueIfFalse);
        }
        public bool IsNotFirst()
        {
        	return _inner.IsNotFirst();
        }
        public HtmlString IsNotFirst(string valueIfTrue)
        {
			return _inner.IsNotFirst(valueIfTrue);
        }
        public HtmlString IsNotFirst(string valueIfTrue, string valueIfFalse)
        {
			return _inner.IsNotFirst(valueIfTrue, valueIfFalse);
        }
        public bool IsPosition(int index)
        {
			return _inner.IsPosition(index);
        }
        public HtmlString IsPosition(int index, string valueIfTrue)
        {
			return _inner.IsPosition(index, valueIfTrue);
        }
        public HtmlString IsPosition(int index, string valueIfTrue, string valueIfFalse)
        {
			return _inner.IsPosition(index, valueIfTrue, valueIfFalse);
        }
        public bool IsModZero(int modulus)
        {
			return _inner.IsModZero(modulus);
        }
        public HtmlString IsModZero(int modulus, string valueIfTrue)
        {
			return _inner.IsModZero(modulus, valueIfTrue);
        }
        public HtmlString IsModZero(int modulus, string valueIfTrue, string valueIfFalse)
        {
			return _inner.IsModZero(modulus, valueIfTrue, valueIfFalse);
        }

        public bool IsNotModZero(int modulus)
        {
			return _inner.IsNotModZero(modulus);
        }
        public HtmlString IsNotModZero(int modulus, string valueIfTrue)
        {
			return _inner.IsNotModZero(modulus, valueIfTrue);
        }
        public HtmlString IsNotModZero(int modulus, string valueIfTrue, string valueIfFalse)
        {
			return _inner.IsNotModZero(modulus, valueIfTrue, valueIfFalse);
        }
        public bool IsNotPosition(int index)
        {
			return _inner.IsNotPosition(index);
        }
        public HtmlString IsNotPosition(int index, string valueIfTrue)
        {
			return _inner.IsNotPosition(index, valueIfTrue);
        }
        public HtmlString IsNotPosition(int index, string valueIfTrue, string valueIfFalse)
        {
			return _inner.IsNotPosition(index, valueIfTrue);
        }
        public bool IsLast()
        {
			return _inner.IsLast();
        }
        public HtmlString IsLast(string valueIfTrue)
        {
			return _inner.IsLast(valueIfTrue);
        }
        public HtmlString IsLast(string valueIfTrue, string valueIfFalse)
        {
			return _inner.IsLast(valueIfTrue, valueIfFalse);
        }
        public bool IsNotLast()
        {
			return _inner.IsNotLast();
        }
        public HtmlString IsNotLast(string valueIfTrue)
        {
			return _inner.IsNotLast(valueIfTrue);
        }
        public HtmlString IsNotLast(string valueIfTrue, string valueIfFalse)
        {
			return _inner.IsNotLast(valueIfTrue, valueIfFalse);
        }
        public bool IsEven()
        {
			return _inner.IsEven();
        }
        public HtmlString IsEven(string valueIfTrue)
        {
			return _inner.IsEven(valueIfTrue);
        }
        public HtmlString IsEven(string valueIfTrue, string valueIfFalse)
        {
			return _inner.IsEven(valueIfTrue, valueIfFalse);
        }
        public bool IsOdd()
        {
			return _inner.IsOdd();
        }
        public HtmlString IsOdd(string valueIfTrue)
        {
			return _inner.IsOdd(valueIfTrue);
        }
        public HtmlString IsOdd(string valueIfTrue, string valueIfFalse)
        {
			return _inner.IsOdd(valueIfTrue, valueIfFalse);
        }

        public bool IsEqual(DynamicXml other)
        {
        	return _inner.IsEqual(new Umbraco.Core.Dynamics.DynamicXml(other.BaseElement));
        }
        public HtmlString IsEqual(DynamicXml other, string valueIfTrue)
        {
			return _inner.IsEqual(new Umbraco.Core.Dynamics.DynamicXml(other.BaseElement), valueIfTrue);
        }
        public HtmlString IsEqual(DynamicXml other, string valueIfTrue, string valueIfFalse)
        {
			return _inner.IsEqual(new Umbraco.Core.Dynamics.DynamicXml(other.BaseElement), valueIfTrue, valueIfFalse);
        }
        public bool IsNotEqual(DynamicXml other)
        {
			return _inner.IsNotEqual(new Umbraco.Core.Dynamics.DynamicXml(other.BaseElement));
        }
        public HtmlString IsNotEqual(DynamicXml other, string valueIfTrue)
        {
			return _inner.IsNotEqual(new Umbraco.Core.Dynamics.DynamicXml(other.BaseElement), valueIfTrue);
        }
        public HtmlString IsNotEqual(DynamicXml other, string valueIfTrue, string valueIfFalse)
        {
			return _inner.IsNotEqual(new Umbraco.Core.Dynamics.DynamicXml(other.BaseElement), valueIfTrue, valueIfFalse);
        }
        public bool IsDescendant(DynamicXml other)
        {
			return _inner.IsDescendant(new Umbraco.Core.Dynamics.DynamicXml(other.BaseElement));       
        }
        public HtmlString IsDescendant(DynamicXml other, string valueIfTrue)
        {
			return _inner.IsDescendant(new Umbraco.Core.Dynamics.DynamicXml(other.BaseElement), valueIfTrue);       
        }
        public HtmlString IsDescendant(DynamicXml other, string valueIfTrue, string valueIfFalse)
        {
			return _inner.IsDescendant(new Umbraco.Core.Dynamics.DynamicXml(other.BaseElement), valueIfTrue, valueIfFalse);       
        }
        public bool IsDescendantOrSelf(DynamicXml other)
        {
			return _inner.IsDescendantOrSelf(new Umbraco.Core.Dynamics.DynamicXml(other.BaseElement));       
        }
        public HtmlString IsDescendantOrSelf(DynamicXml other, string valueIfTrue)
        {
			return _inner.IsDescendantOrSelf(new Umbraco.Core.Dynamics.DynamicXml(other.BaseElement), valueIfTrue);   
        }
        public HtmlString IsDescendantOrSelf(DynamicXml other, string valueIfTrue, string valueIfFalse)
        {
			return _inner.IsDescendantOrSelf(new Umbraco.Core.Dynamics.DynamicXml(other.BaseElement), valueIfTrue, valueIfFalse);   
        }
        public bool IsAncestor(DynamicXml other)
        {
			return _inner.IsAncestor(new Umbraco.Core.Dynamics.DynamicXml(other.BaseElement));   
        }
        public HtmlString IsAncestor(DynamicXml other, string valueIfTrue)
        {
			return _inner.IsAncestor(new Umbraco.Core.Dynamics.DynamicXml(other.BaseElement), valueIfTrue);   
        }
        public HtmlString IsAncestor(DynamicXml other, string valueIfTrue, string valueIfFalse)
        {
			return _inner.IsAncestor(new Umbraco.Core.Dynamics.DynamicXml(other.BaseElement), valueIfTrue, valueIfFalse);   
        }
        public bool IsAncestorOrSelf(DynamicXml other)
        {
			return _inner.IsAncestorOrSelf(new Umbraco.Core.Dynamics.DynamicXml(other.BaseElement));   
        }
        public HtmlString IsAncestorOrSelf(DynamicXml other, string valueIfTrue)
        {
			return _inner.IsAncestorOrSelf(new Umbraco.Core.Dynamics.DynamicXml(other.BaseElement), valueIfTrue);   
        }
        public HtmlString IsAncestorOrSelf(DynamicXml other, string valueIfTrue, string valueIfFalse)
        {
			return _inner.IsAncestorOrSelf(new Umbraco.Core.Dynamics.DynamicXml(other.BaseElement), valueIfTrue, valueIfFalse);   
        }
        public List&lt;DynamicXml&gt; Descendants()
        {
			return _inner.Descendants().Select(x =&gt; new DynamicXml(x.BaseElement)).ToList();   
        }
        public List&lt;DynamicXml&gt; Descendants(Func&lt;XElement, bool&gt; func)
        {
			return _inner.Descendants(func).Select(x =&gt; new DynamicXml(x.BaseElement)).ToList();   
        }
        public List&lt;DynamicXml&gt; DescendantsOrSelf()
        {
			return _inner.DescendantsOrSelf().Select(x =&gt; new DynamicXml(x.BaseElement)).ToList();   
        }
        public List&lt;DynamicXml&gt; DescendantsOrSelf(Func&lt;XElement, bool&gt; func)
        {
			return _inner.DescendantsOrSelf(func).Select(x =&gt; new DynamicXml(x.BaseElement)).ToList();   
        }
        public List&lt;DynamicXml&gt; Ancestors()
        {
			return _inner.Ancestors().Select(x =&gt; new DynamicXml(x.BaseElement)).ToList();   
        }
        public List&lt;DynamicXml&gt; Ancestors(Func&lt;XElement, bool&gt; func)
        {
			return _inner.Ancestors(func).Select(x =&gt; new DynamicXml(x.BaseElement)).ToList();   
        }
        public List&lt;DynamicXml&gt; AncestorsOrSelf()
        {
			return _inner.AncestorsOrSelf().Select(x =&gt; new DynamicXml(x.BaseElement)).ToList();  
        }
        public List&lt;DynamicXml&gt; AncestorsOrSelf(Func&lt;XElement, bool&gt; func)
        {
			return _inner.AncestorsOrSelf(func).Select(x =&gt; new DynamicXml(x.BaseElement)).ToList();  
        }

        public int Index()
        {
			return _inner.Index();  
        }

        public bool IsHelper(Func&lt;DynamicXml, bool&gt; test)
        {
            return test(this);
        }
        public HtmlString IsHelper(Func&lt;DynamicXml, bool&gt; test, string valueIfTrue)
        {
            return IsHelper(test, valueIfTrue, string.Empty);
        }
        public HtmlString IsHelper(Func&lt;DynamicXml, bool&gt; test, string valueIfTrue, string valueIfFalse)
        {
            return test(this) ? new HtmlString(valueIfTrue) : new HtmlString(valueIfFalse);
        }

        [Obsolete(&quot;Use XmlHelper.StripDashesInElementOrAttributeNames instead&quot;)]
        public static string StripDashesInElementOrAttributeNames(string xml)
        {
            return XmlHelper.StripDashesInElementOrAttributeNames(xml);
        }
    }
}

    </pre>
    <script type="text/javascript">
      highlightRanges([[22,8,22,9,1],[22,10,22,36,1],[22,37,22,38,1],[23,8,23,9,0],[23,10,23,37,0],[23,38,23,39,0],[26,9,26,48,1],[27,9,27,10,1],[28,10,28,69,1],[29,9,29,10,1],[30,9,30,38,1],[31,9,31,10,1],[32,4,32,55,1],[33,9,33,10,1],[34,9,34,50,0],[35,9,35,10,0],[36,4,36,56,0],[37,9,37,10,0],[40,17,40,18,0],[40,19,40,43,0],[40,44,40,45,0],[43,9,43,10,0],[44,10,44,32,0],[45,9,45,10,0],[47,9,47,10,0],[48,10,48,76,0],[51,4,51,53,0],[52,4,52,23,0],[53,9,53,10,0],[55,9,55,10,1],[56,10,56,77,1],[59,4,59,53,1],[60,4,60,23,1],[61,9,61,10,1],[63,9,63,10,1],[64,4,64,62,1],[67,4,67,53,1],[68,10,68,29,1],[69,9,69,10,1],[72,9,72,10,0],[73,4,73,69,0],[74,13,74,53,0],[75,13,75,20,0],[75,22,75,33,0],[75,34,75,36,0],[75,37,75,44,0],[76,13,76,14,0],[77,17,77,47,0],[78,13,78,14,0],[79,13,79,25,0],[80,9,80,10,0],[82,9,82,10,0],[83,10,83,33,0],[84,9,84,10,0],[86,9,86,10,0],[87,4,87,95,0],[88,9,88,10,0],[91,9,91,10,1],[92,13,92,87,1],[93,4,93,95,1],[94,9,94,10,1],[97,3,97,4,0],[98,4,98,55,0],[99,3,99,4,0],[102,3,102,4,1],[103,4,103,51,1],[103,51,103,68,1],[103,68,103,86,1],[103,4,103,86,1],[104,3,104,4,1],[107,3,107,4,0],[108,4,108,27,0],[109,3,109,4,0],[112,9,112,10,1],[113,10,113,32,1],[114,9,114,10,1],[117,9,117,10,0],[118,13,118,33,0],[119,9,119,10,0],[122,9,122,10,0],[123,10,123,33,0],[124,9,124,10,0],[126,9,126,10,0],[127,10,127,35,0],[128,9,128,10,0],[131,3,131,4,1],[132,4,132,42,1],[132,42,132,71,1],[132,71,132,73,1],[132,4,132,73,1],[133,3,133,4,1],[136,3,136,4,0],[137,4,137,42,0],[137,42,137,71,0],[137,71,137,73,0],[137,4,137,73,0],[138,3,138,4,0],[141,9,141,10,0],[142,10,142,34,0],[143,9,143,10,0],[145,9,145,10,0],[146,10,146,45,0],[147,9,147,10,0],[149,9,149,10,0],[150,10,150,59,0],[151,9,151,10,0],[153,9,153,10,0],[154,10,154,37,0],[155,9,155,10,0],[157,9,157,10,0],[158,4,158,42,0],[159,9,159,10,0],[161,9,161,10,0],[162,4,162,56,0],[163,9,163,10,0],[165,9,165,10,0],[166,4,166,36,0],[167,9,167,10,0],[169,9,169,10,0],[170,4,170,49,0],[171,9,171,10,0],[173,9,173,10,0],[174,4,174,63,0],[175,9,175,10,0],[177,9,177,10,0],[178,4,178,37,0],[179,9,179,10,0],[181,9,181,10,0],[182,4,182,50,0],[183,9,183,10,0],[185,9,185,10,0],[186,4,186,64,0],[187,9,187,10,0],[190,9,190,10,0],[191,4,191,40,0],[192,9,192,10,0],[194,9,194,10,0],[195,4,195,53,0],[196,9,196,10,0],[198,9,198,10,0],[199,4,199,67,0],[200,9,200,10,0],[202,9,202,10,0],[203,4,203,39,0],[204,9,204,10,0],[206,9,206,10,0],[207,4,207,52,0],[208,9,208,10,0],[210,9,210,10,0],[211,4,211,52,0],[212,9,212,10,0],[214,9,214,10,0],[215,4,215,27,0],[216,9,216,10,0],[218,9,218,10,0],[219,4,219,38,0],[220,9,220,10,0],[222,9,222,10,0],[223,4,223,52,0],[224,9,224,10,0],[226,9,226,10,0],[227,4,227,30,0],[228,9,228,10,0],[230,9,230,10,0],[231,4,231,41,0],[232,9,232,10,0],[234,9,234,10,0],[235,4,235,55,0],[236,9,236,10,0],[238,9,238,10,0],[239,4,239,27,0],[240,9,240,10,0],[242,9,242,10,0],[243,4,243,38,0],[244,9,244,10,0],[246,9,246,10,0],[247,4,247,52,0],[248,9,248,10,0],[250,9,250,10,0],[251,4,251,26,0],[252,9,252,10,0],[254,9,254,10,0],[255,4,255,37,0],[256,9,256,10,0],[258,9,258,10,0],[259,4,259,51,0],[260,9,260,10,0],[263,9,263,10,0],[264,10,264,89,0],[265,9,265,10,0],[267,9,267,10,0],[268,4,268,96,0],[269,9,269,10,0],[271,9,271,10,0],[272,4,272,110,0],[273,9,273,10,0],[275,9,275,10,0],[276,4,276,86,0],[277,9,277,10,0],[279,9,279,10,0],[280,4,280,99,0],[281,9,281,10,0],[283,9,283,10,0],[284,4,284,113,0],[285,9,285,10,0],[287,9,287,10,0],[288,4,288,88,0],[289,9,289,10,0],[291,9,291,10,0],[292,4,292,101,0],[293,9,293,10,0],[295,9,295,10,0],[296,4,296,115,0],[297,9,297,10,0],[299,9,299,10,0],[300,4,300,94,0],[301,9,301,10,0],[303,9,303,10,0],[304,4,304,107,0],[305,9,305,10,0],[307,9,307,10,0],[308,4,308,121,0],[309,9,309,10,0],[311,9,311,10,0],[312,4,312,86,0],[313,9,313,10,0],[315,9,315,10,0],[316,4,316,99,0],[317,9,317,10,0],[319,9,319,10,0],[320,4,320,113,0],[321,9,321,10,0],[323,9,323,10,0],[324,4,324,92,0],[325,9,325,10,0],[327,9,327,10,0],[328,4,328,105,0],[329,9,329,10,0],[331,9,331,10,0],[332,4,332,119,0],[333,9,333,10,0],[335,9,335,10,0],[336,4,336,44,0],[336,44,336,73,0],[336,73,336,84,0],[336,4,336,84,0],[337,9,337,10,0],[339,9,339,10,0],[340,4,340,48,0],[340,48,340,77,0],[340,77,340,88,0],[340,4,340,88,0],[341,9,341,10,0],[343,9,343,10,0],[344,4,344,50,0],[344,50,344,79,0],[344,79,344,90,0],[344,4,344,90,0],[345,9,345,10,0],[347,9,347,10,0],[348,4,348,54,0],[348,54,348,83,0],[348,83,348,94,0],[348,4,348,94,0],[349,9,349,10,0],[351,9,351,10,0],[352,4,352,42,0],[352,42,352,71,0],[352,71,352,82,0],[352,4,352,82,0],[353,9,353,10,0],[355,9,355,10,0],[356,4,356,46,0],[356,46,356,75,0],[356,75,356,86,0],[356,4,356,86,0],[357,9,357,10,0],[359,9,359,10,0],[360,4,360,48,0],[360,48,360,77,0],[360,77,360,88,0],[360,4,360,88,0],[361,9,361,10,0],[363,9,363,10,0],[364,4,364,52,0],[364,52,364,81,0],[364,81,364,92,0],[364,4,364,92,0],[365,9,365,10,0],[368,9,368,10,0],[369,4,369,26,0],[370,9,370,10,0],[373,9,373,10,0],[374,13,374,31,0],[375,9,375,10,0],[377,9,377,10,0],[378,13,378,62,0],[379,9,379,10,0],[381,9,381,10,0],[382,13,382,92,0],[383,9,383,10,0],[387,9,387,10,0],[388,13,388,72,0],[389,9,389,10,0]]);
    </script>
  </body>
</html>