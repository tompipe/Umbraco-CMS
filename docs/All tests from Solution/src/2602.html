<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Tom Pipe\Documents\Hexadigital\Code\Umbraco\Umbraco-CMS\src\umbraco.editorControls\colorpicker\colorPicker.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.ComponentModel;
using System.Collections;
using Umbraco.Core.IO;
using System.Collections.Generic;

namespace umbraco.editorControls
{
    /// &lt;summary&gt;
    /// Summary description for colorPicker.
    /// &lt;/summary&gt;
    [Obsolete(&quot;IDataType and all other references to the legacy property editors are no longer used this will be removed from the codebase in future versions&quot;)]
    public class colorPicker : System.Web.UI.WebControls.HiddenField, interfaces.IDataEditor
    {
        private interfaces.IData _data;
        private SortedList _prevalues;
        
        public colorPicker(interfaces.IData Data, SortedList Prevalues)
        {
            _data = Data;
            _prevalues = Prevalues;
        }

        List&lt;KeyValuePair&lt;int, String&gt;&gt; Prevalues;
        public colorPicker(interfaces.IData Data, List&lt;KeyValuePair&lt;int, String&gt;&gt; Prevalues)
        {
            _data = Data;
            this.Prevalues = Prevalues;
        }

        private ArrayList _colors = new ArrayList();

        public Control Editor { get { return this; } }

        public colorPicker()
        {
        }

        public virtual bool TreatAsRichTextEditor
        {
            get { return false; }
        }
        public bool ShowLabel
        {
            get { return true; }
        }

        public void Save()
        {
            _data.Value = this.Value;
        }

        protected override void OnInit(EventArgs e)
        {
            base.OnInit(e);

		  if (_data != null &amp;&amp; _data.Value != null)
               this.Value = _data.Value.ToString();

            _colors.Add(new ListItem(&quot;&quot;));

            try
            {
                if (_prevalues != null)
                {
                    foreach (string val in _prevalues.Values)
                    {
                        _colors.Add(new ListItem(val));
                    }
                }
                else if (Prevalues != null)
                {
                    foreach (KeyValuePair&lt;int, String&gt; item in Prevalues)
                    {
                        _colors.Add(new ListItem(item.Value));
                    }
                }
            }
            catch { }
        }

        protected override void Render(HtmlTextWriter writer)
        {
            string _bgColor = this.Value;
            if (_bgColor == &quot;&quot;)
                _bgColor = &quot;FFF&quot;;
		
			base.Render(writer);
            writer.WriteLine(&quot;&lt;div style=\&quot;clear:both;padding-top:5px\&quot;&gt;&lt;span id=\&quot;&quot; + this.ClientID + &quot;holder\&quot; style=\&quot;border: 1px solid black; background-color: #&quot; + _bgColor + &quot;\&quot;&gt;&lt;img src=\&quot;&quot; + this.ResolveUrl(SystemDirectories.Umbraco) + &quot;/images/nada.gif\&quot; width=\&quot;15\&quot; height=\&quot;15\&quot; border=\&quot;0\&quot; /&gt;&lt;/span&gt;&amp;nbsp; - &quot;);

            foreach (object color in _colors)
            {
                string colorValue = color.ToString();
                if (colorValue == &quot;&quot;)
                    colorValue = &quot;FFF&quot;;

                writer.WriteLine(&quot;&lt;span style=\&quot;margin: 2px; border: 1px solid black; background-color: #&quot; + color.ToString() + &quot;\&quot;&gt;&lt;a href=\&quot;javascript:void(0);\&quot; onClick=\&quot;document.forms[0][&#39;&quot; + this.ClientID + &quot;&#39;].value = &#39;&quot; + color.ToString() + &quot;&#39;; document.getElementById(&#39;&quot; + this.ClientID + &quot;holder&#39;).style.backgroundColor = &#39;#&quot; + colorValue + &quot;&#39;\&quot;&gt;&lt;img src=\&quot;&quot; + this.ResolveUrl(SystemDirectories.Umbraco) + &quot;/images/nada.gif\&quot; width=\&quot;15\&quot; height=\&quot;15\&quot; border=\&quot;0\&quot; /&gt;&lt;/a&gt;&lt;/span&gt;&quot;);
            }

            writer.WriteLine(&quot;&lt;/div&gt;&quot;);
        }
    }
}

    </pre>
    <script type="text/javascript">
      highlightRanges([[20,9,20,72,0],[21,9,21,10,0],[22,13,22,26,0],[23,13,23,36,0],[24,9,24,10,0],[27,9,27,93,0],[28,9,28,10,0],[29,13,29,26,0],[30,13,30,40,0],[31,9,31,10,0],[33,9,33,53,0],[33,9,33,53,0],[33,9,33,53,0],[35,37,35,38,0],[35,39,35,51,0],[35,52,35,53,0],[37,9,37,29,0],[38,9,38,10,0],[39,9,39,10,0],[43,17,43,18,0],[43,19,43,32,0],[43,33,43,34,0],[47,17,47,18,0],[47,19,47,31,0],[47,32,47,33,0],[51,9,51,10,0],[52,13,52,38,0],[53,9,53,10,0],[56,9,56,10,0],[57,13,57,28,0],[59,5,59,46,0],[60,16,60,52,0],[62,13,62,43,0],[65,13,65,14,0],[66,17,66,40,0],[67,17,67,18,0],[68,21,68,28,0],[68,30,68,40,0],[68,41,68,43,0],[68,44,68,61,0],[69,21,69,22,0],[70,25,70,56,0],[71,21,71,22,0],[72,17,72,18,0],[73,22,73,44,0],[74,17,74,18,0],[75,21,75,28,0],[75,30,75,60,0],[75,61,75,63,0],[75,64,75,73,0],[76,21,76,22,0],[77,25,77,63,0],[78,21,78,22,0],[79,17,79,18,0],[80,13,80,14,0],[81,13,81,18,0],[81,19,81,20,0],[81,21,81,22,0],[82,9,82,10,0],[85,9,85,10,0],[86,13,86,42,0],[87,13,87,32,0],[88,17,88,34,0],[90,4,90,24,0],[91,13,91,326,0],[93,13,93,20,0],[93,22,93,34,0],[93,35,93,37,0],[93,38,93,45,0],[94,13,94,14,0],[95,17,95,54,0],[96,17,96,38,0],[97,21,97,40,0],[99,17,99,493,0],[100,13,100,14,0],[102,13,102,40,0],[103,9,103,10,0]]);
    </script>
  </body>
</html>