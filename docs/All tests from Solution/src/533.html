<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Tom Pipe\Documents\Hexadigital\Code\Umbraco\Umbraco-CMS\src\Umbraco.Web\umbraco.presentation\BasePageExtensions.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using umbraco.BasePages;
using umbraco.uicontrols;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.UI.HtmlControls;
using ClientDependency.Core;

namespace umbraco.presentation
{
    /// &lt;summary&gt;
    /// Extension methods for the Umbraco BasePage
    /// &lt;/summary&gt;
    public static class BasePageExtensions
    {

        /// &lt;summary&gt;
        /// Used to display an error message to the user and disable further execution.
        /// This will remove all controls from being rendered and show a feedback control with an error
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;msg&quot;&gt;&lt;/param&gt;
        public static void DisplayFatalError(this BasePage page, string msg)
        {
            foreach (var ctl in page.Controls.Cast&lt;Control&gt;())
            {
                if (!HideControls(ctl))
                {
                    var ctls = ctl.FlattenChildren();
                    foreach (var c in ctls)
                    {
                        HideControls(c);
                    }
                }
            }
            var feedback = new Feedback();
            feedback.type = Feedback.feedbacktype.error;
            feedback.Text = string.Format(&quot;&lt;b&gt;{0}&lt;/b&gt;&lt;br/&gt;&lt;br/&gt;{1}&quot;, ui.GetText(&quot;error&quot;), msg);
            page.Controls.Add(feedback);
        }

        private static bool HideControls(this Control c)
        {
            if (c is MasterPage) 
            { 
                return false;            
            }
            else if (c is UserControl || c is WebControl || c is HtmlForm)
            {
                c.Visible = false;
                return true;
            }
            return false;

        }

    }
}

    </pre>
    <script type="text/javascript">
      highlightRanges([[26,9,26,10,0],[27,13,27,20,0],[27,22,27,29,0],[27,30,27,32,0],[27,33,27,62,0],[28,13,28,14,0],[29,17,29,40,0],[30,17,30,18,0],[31,21,31,54,0],[32,21,32,28,0],[32,30,32,35,0],[32,36,32,38,0],[32,39,32,43,0],[33,21,33,22,0],[34,25,34,41,0],[35,21,35,22,0],[36,17,36,18,0],[37,13,37,14,0],[38,13,38,43,0],[39,13,39,57,0],[40,13,40,96,0],[41,13,41,41,0],[42,9,42,10,0],[45,9,45,10,0],[46,13,46,33,0],[47,13,47,14,0],[48,17,48,30,0],[50,18,50,75,0],[51,13,51,14,0],[52,17,52,35,0],[53,17,53,29,0],[55,13,55,26,0],[57,9,57,10,0]]);
    </script>
  </body>
</html>