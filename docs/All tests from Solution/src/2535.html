<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Tom Pipe\Documents\Hexadigital\Code\Umbraco\Umbraco-CMS\src\umbraco.controls\MenuSplitButton.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Web.UI.HtmlControls;
using System.Web.UI.WebControls;

namespace umbraco.uicontrols
{
    internal class MenuSplitButton : Panel
    {

        public string Text { get; set; }
        public List&lt;HtmlAnchor&gt; HtmlAnchors { get; set; }

        public string OnClientClick { get; set; }    

        public void AddLink(HtmlAnchor link)
        {
            if(HtmlAnchors == null)
                HtmlAnchors = new List&lt;HtmlAnchor&gt;();

            HtmlAnchors.Add(link);
        }

        protected override void Render(System.Web.UI.HtmlTextWriter writer)
        {
            writer.Write(&quot;&lt;/div&gt;&quot;);
            base.Render(writer);
            this.Render(writer);
            writer.Write(&quot;&lt;div class=&#39;btn-group&gt;&quot;);
        }


        protected override void OnLoad(EventArgs e)
        {
 	        base.OnLoad(e);
            base.CssClass = &quot;btn-group&quot;;

            HtmlButton btn = new HtmlButton();
            btn.InnerText = Text;
            btn.Attributes.Add(&quot;class&quot;, &quot;btn&quot;);
            this.Controls.Add(btn);

            HtmlButton btnToggle = new HtmlButton();
            btnToggle.InnerHtml = &quot;&lt;span class=&#39;caret&#39;&gt;&lt;/span&gt;&quot;;
            btnToggle.Attributes.Add(&quot;class&quot;, &quot;btn dropdown-toggl&quot;);
            btnToggle.Attributes.Add(&quot;data-toggle&quot;, &quot;dropdown&quot;);
            this.Controls.Add(btnToggle);

            Literal list = new Literal();
            this.Controls.Add(list);

            StringBuilder sb = new StringBuilder();
            sb.Append(&quot;&lt;ul class=&#39;dropdown-menu&#39;&gt;&quot;);

            foreach (var htmlAnchor in HtmlAnchors)
            {
                sb.Append(&quot;&lt;li&gt;&lt;a &quot;);
                foreach (var attr in htmlAnchor.Attributes.Keys)
                {
                    sb.Append(attr + &quot;=&#39;&quot; + htmlAnchor.Attributes[attr.ToString()] + &quot;&#39; &quot;);
                }
                sb.Append(&quot;&gt;&quot; + htmlAnchor.InnerText + &quot;&lt;/a&gt;&lt;/li&gt;&quot;);
            }

            sb.Append(&quot;&lt;/ul&gt;&quot;);
            list.Text = sb.ToString();
        }

    }
}

    </pre>
    <script type="text/javascript">
      highlightRanges([[13,30,13,34,0],[13,35,13,39,0],[14,47,14,51,0],[14,52,14,56,0],[16,39,16,43,0],[16,44,16,48,0],[19,9,19,10,0],[20,13,20,36,0],[21,17,21,54,0],[23,13,23,35,0],[24,9,24,10,0],[27,9,27,10,0],[28,13,28,36,0],[29,13,29,33,0],[30,13,30,33,0],[31,13,31,52,0],[32,9,32,10,0],[36,9,36,10,0],[37,11,37,26,0],[38,13,38,41,0],[40,13,40,47,0],[41,13,41,34,0],[42,13,42,48,0],[43,13,43,36,0],[45,13,45,53,0],[46,13,46,65,0],[47,13,47,69,0],[48,13,48,65,0],[49,13,49,42,0],[51,13,51,42,0],[52,13,52,37,0],[54,13,54,52,0],[55,13,55,53,0],[57,13,57,20,0],[57,22,57,36,0],[57,37,57,39,0],[57,40,57,51,0],[58,13,58,14,0],[59,17,59,38,0],[60,17,60,24,0],[60,26,60,34,0],[60,35,60,37,0],[60,38,60,64,0],[61,17,61,18,0],[62,21,62,92,0],[63,17,63,18,0],[64,17,64,69,0],[65,13,65,14,0],[67,13,67,32,0],[68,13,68,39,0],[69,9,69,10,0]]);
    </script>
  </body>
</html>