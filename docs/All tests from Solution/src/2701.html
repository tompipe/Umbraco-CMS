<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Tom Pipe\Documents\Hexadigital\Code\Umbraco\Umbraco-CMS\src\umbraco.editorControls\MultipleTextstring\MultipleTextstringDataType.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using umbraco.cms.businesslogic.datatype;
using umbraco.interfaces;

namespace umbraco.editorControls.MultipleTextstring
{
    /// &lt;summary&gt;
    /// Data Editor for the Multiple Textstring data type.
    /// &lt;/summary&gt;
    [Obsolete(&quot;IDataType and all other references to the legacy property editors are no longer used this will be removed from the codebase in future versions&quot;)]
    public class MultipleTextstringDataType : AbstractDataEditor
    {
        /// &lt;summary&gt;
        /// The control for the Multiple Textstring data-editor.
        /// &lt;/summary&gt;
        private MultipleTextstringControl m_Control = new MultipleTextstringControl();

        /// &lt;summary&gt;
        /// The Data object for the data-type.
        /// &lt;/summary&gt;
        private IData m_Data;

        /// &lt;summary&gt;
        /// The PreValue Editor for the data-type.
        /// &lt;/summary&gt;
        private IDataPrevalue m_PreValueEditor;

        /// &lt;summary&gt;
        /// Initializes a new instance of the &lt;see cref=&quot;MultipleTextstringDataType&quot;/&gt; class.
        /// &lt;/summary&gt;
        public MultipleTextstringDataType()
        {
            // set the render control as the placeholder
            this.RenderControl = this.m_Control;

            // assign the initialise event for the control
            this.m_Control.Init += new EventHandler(this.m_Control_Init);

            // assign the save event for the data-type/editor
            this.DataEditorControl.OnSave += this.DataEditorControl_OnSave;
        }

        /// &lt;summary&gt;
        /// Gets the id of the data-type.
        /// &lt;/summary&gt;
        /// &lt;value&gt;The id of the data-type.&lt;/value&gt;
        public override Guid Id
        {
            get
            {
                return new Guid(DataTypeGuids.MultipleTextstringId);
            }
        }

        /// &lt;summary&gt;
        /// Gets the name of the data type.
        /// &lt;/summary&gt;
        /// &lt;value&gt;The name of the data type.&lt;/value&gt;
        public override string DataTypeName
        {
            get
            {
                return &quot;Multiple Textstring&quot;;
            }
        }

        /// &lt;summary&gt;
        /// Gets the data for the data-type.
        /// &lt;/summary&gt;
        /// &lt;value&gt;The data for the data-type.&lt;/value&gt;
        public override IData Data
        {
            get
            {
                if (this.m_Data == null)
                {
                    this.m_Data = new CsvToXmlData(this, &quot;values&quot;, &quot;value&quot;, new[] { Environment.NewLine });
                }

                return this.m_Data;
            }
        }

        /// &lt;summary&gt;
        /// Gets the prevalue editor.
        /// &lt;/summary&gt;
        /// &lt;value&gt;The prevalue editor.&lt;/value&gt;
        public override IDataPrevalue PrevalueEditor
        {
            get
            {
                if (this.m_PreValueEditor == null)
                {
                    this.m_PreValueEditor = new MultipleTextstringPrevalueEditor(this);
                }

                return this.m_PreValueEditor;
            }
        }

        /// &lt;summary&gt;
        /// Handles the Init event of the control.
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;sender&quot;&gt;The source of the event.&lt;/param&gt;
        /// &lt;param name=&quot;e&quot;&gt;The &lt;see cref=&quot;System.EventArgs&quot;/&gt; instance containing the event data.&lt;/param&gt;
        private void m_Control_Init(object sender, EventArgs e)
        {
            var options =
                ((MultipleTextstringPrevalueEditor)this.PrevalueEditor).GetPreValueOptions&lt;MultipleTextstringOptions&gt;();

            if (options == null)
            {
                // load defaults
                options = new MultipleTextstringOptions(true);
            }

            // check if the data value is available...
            if (this.Data.Value != null)
            {
                // set the value of the control
                this.m_Control.Values = this.Data.Value.ToString();
            }

            // set the controls options
            this.m_Control.Options = options;
        }

        /// &lt;summary&gt;
        /// Saves the data for the editor control.
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;e&quot;&gt;The &lt;see cref=&quot;System.EventArgs&quot;/&gt; instance containing the event data.&lt;/param&gt;
        private void DataEditorControl_OnSave(EventArgs e)
        {
            this.Data.Value = this.m_Control.Values;
        }
    }
}

    </pre>
    <script type="text/javascript">
      highlightRanges([[16,9,16,87,0],[31,9,31,44,0],[32,9,32,10,0],[34,13,34,49,0],[37,13,37,74,0],[40,13,40,76,0],[41,9,41,10,0],[50,13,50,14,0],[51,17,51,69,0],[52,13,52,14,0],[62,13,62,14,0],[63,17,63,46,0],[64,13,64,14,0],[74,13,74,14,0],[75,17,75,41,0],[76,17,76,18,0],[77,21,77,108,0],[78,17,78,18,0],[80,17,80,36,0],[81,13,81,14,0],[91,13,91,14,0],[92,17,92,51,0],[93,17,93,18,0],[94,21,94,88,0],[95,17,95,18,0],[97,17,97,46,0],[98,13,98,14,0],[107,9,107,10,0],[108,13,109,121,0],[111,13,111,33,0],[112,13,112,14,0],[114,17,114,63,0],[115,13,115,14,0],[118,13,118,41,0],[119,13,119,14,0],[121,17,121,68,0],[122,13,122,14,0],[125,13,125,46,0],[126,9,126,10,0],[133,9,133,10,0],[134,13,134,53,0],[135,9,135,10,0]]);
    </script>
  </body>
</html>