<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Tom Pipe\Documents\Hexadigital\Code\Umbraco\Umbraco-CMS\src\Umbraco.Web\umbraco.presentation\umbraco\uQuery\uQuery-Document.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System.Collections.Generic;
using umbraco.cms.businesslogic.web;

namespace umbraco
{
	public static partial class uQuery
	{
		/// &lt;summary&gt;
		/// Get collection of Document objects from the supplied CSV of IDs
		/// &lt;/summary&gt;
		/// &lt;param name=&quot;csv&quot;&gt;string csv of IDs&lt;/param&gt;
		/// &lt;returns&gt;collection or emtpy collection&lt;/returns&gt;
		public static IEnumerable&lt;Document&gt; GetDocumentsByCsv(string csv)
		{
			var documents = new List&lt;Document&gt;();
			var ids = uQuery.GetCsvIds(csv);

			if (ids != null)
			{
				foreach (string id in ids)
				{
					var document = uQuery.GetDocument(id);
					if (document != null)
					{
						documents.Add(document);
					}
				}
			}

			return documents;
		}

		/// &lt;summary&gt;
		/// Gets the documents by XML.
		/// &lt;/summary&gt;
		/// &lt;param name=&quot;xml&quot;&gt;The XML.&lt;/param&gt;
		/// &lt;returns&gt;&lt;/returns&gt;
		public static IEnumerable&lt;Document&gt; GetDocumentsByXml(string xml)
		{
			var documents = new List&lt;Document&gt;();
			var ids = uQuery.GetXmlIds(xml);

			if (ids != null)
			{
				foreach (int id in ids)
				{
					var document = uQuery.GetDocument(id);
					if (document != null)
					{
						documents.Add(document);
					}
				}
			}

			return documents;
		}

		/// &lt;summary&gt;
		/// checks to see if the current node can be got via the nodeFactory, and then constructed as a Document, if not then
		/// checks to see if there&#39;s an id parameter on the QueryString to construct a Document
		/// &lt;/summary&gt;
		/// &lt;returns&gt;the current Document or null&lt;/returns&gt;
		public static Document GetCurrentDocument()
		{
			Document document = null;
			var currentNode = uQuery.GetCurrentNode();

			if (currentNode != null)
			{
				document = uQuery.GetDocument(currentNode.Id);
			}
			else
			{
				document = uQuery.GetDocument(uQuery.GetIdFromQueryString());
			}

			return document;
		}

		/// &lt;summary&gt;
		/// Get document from an ID
		/// &lt;/summary&gt;
		/// &lt;param name=&quot;documentId&quot;&gt;string ID of document to get&lt;/param&gt;
		/// &lt;returns&gt;Document or null&lt;/returns&gt;
		public static Document GetDocument(string documentId)
		{
			int id;
			Document document = null;

			if (!string.IsNullOrWhiteSpace(documentId) &amp;&amp; int.TryParse(documentId, out id))
			{
				document = uQuery.GetDocument(id);
			}

			return document;
		}

		/// &lt;summary&gt;
		/// Get media item from an ID
		/// &lt;/summary&gt;
		/// &lt;param name=&quot;id&quot;&gt;ID of media item to get&lt;/param&gt;
		/// &lt;returns&gt;Media or null&lt;/returns&gt;
		public static Document GetDocument(int id)
		{
			// suppress error if Document with supplied id doesn&#39;t exist
			try
			{
				return new Document(id);
			}
			catch
			{
				return null;
			}
		}

		/// &lt;summary&gt;
		/// Determines whether the specified Document is published.
		/// &lt;/summary&gt;
		/// &lt;param name=&quot;id&quot;&gt;The Document&#39;s id.&lt;/param&gt;
		/// &lt;returns&gt;
		/// 	&lt;c&gt;true&lt;/c&gt; if the specified id is published; otherwise, &lt;c&gt;false&lt;/c&gt;.
		/// &lt;/returns&gt;
		public static bool IsDocumentPublished(string id)
		{
			return umbraco.content.Instance.XmlContent.GetElementById(id) != null;
		}

		/// &lt;summary&gt;
		/// Extension method on Document collection to return key value pairs of: Id / Text
		/// &lt;/summary&gt;
		/// &lt;param name=&quot;documents&quot;&gt;generic list of Document objects&lt;/param&gt;
		/// &lt;returns&gt;a collection of document IDs and their text fields&lt;/returns&gt;
		public static Dictionary&lt;int, string&gt; ToNameIds(this IEnumerable&lt;Document&gt; documents)
		{
			var dictionary = new Dictionary&lt;int, string&gt;();

			foreach (var document in documents)
			{
				if (document != null &amp;&amp; document.Id != -1) // to compensate for the root document now throwing a null error on it&#39;s .Text property
				{
					dictionary.Add(document.Id, document.Text);
				}
			}

			return dictionary;
		}
	}
}
    </pre>
    <script type="text/javascript">
      highlightRanges([[14,3,14,4,0],[15,4,15,41,0],[16,4,16,36,0],[18,4,18,20,0],[19,4,19,5,0],[20,5,20,12,0],[20,14,20,23,0],[20,24,20,26,0],[20,27,20,30,0],[21,5,21,6,0],[22,6,22,44,0],[23,6,23,27,0],[24,6,24,7,0],[25,7,25,31,0],[26,6,26,7,0],[27,5,27,6,0],[28,4,28,5,0],[30,4,30,21,0],[31,3,31,4,0],[39,3,39,4,0],[40,4,40,41,0],[41,4,41,36,0],[43,4,43,20,0],[44,4,44,5,0],[45,5,45,12,0],[45,14,45,20,0],[45,21,45,23,0],[45,24,45,27,0],[46,5,46,6,0],[47,6,47,44,0],[48,6,48,27,0],[49,6,49,7,0],[50,7,50,31,0],[51,6,51,7,0],[52,5,52,6,0],[53,4,53,5,0],[55,4,55,21,0],[56,3,56,4,0],[64,3,64,4,0],[65,4,65,29,0],[66,4,66,46,0],[68,4,68,28,0],[69,4,69,5,0],[70,5,70,51,0],[71,4,71,5,0],[73,4,73,5,0],[74,5,74,66,0],[75,4,75,5,0],[77,4,77,20,0],[78,3,78,4,0],[86,3,86,4,0],[88,4,88,29,0],[90,4,90,83,0],[91,4,91,5,0],[92,5,92,39,0],[93,4,93,5,0],[95,4,95,20,0],[96,3,96,4,0],[104,3,104,4,0],[107,4,107,5,0],[108,5,108,29,0],[110,4,110,9,0],[111,4,111,5,0],[112,5,112,17,0],[114,3,114,4,0],[124,3,124,4,0],[125,4,125,74,0],[126,3,126,4,0],[134,3,134,4,0],[135,4,135,51,0],[137,4,137,11,0],[137,13,137,25,0],[137,26,137,28,0],[137,29,137,38,0],[138,4,138,5,0],[139,5,139,47,0],[140,5,140,6,0],[141,6,141,49,0],[142,5,142,6,0],[143,4,143,5,0],[145,4,145,22,0],[146,3,146,4,0]]);
    </script>
  </body>
</html>