<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Tom Pipe\Documents\Hexadigital\Code\Umbraco\Umbraco-CMS\src\Umbraco.Tests\Configurations\DashboardSettings\DashboardSettingsTests.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System.Configuration;
using System.IO;
using System.Linq;
using NUnit.Framework;
using Umbraco.Core.Configuration.Dashboard;
using Umbraco.Core.Configuration.UmbracoSettings;
using Umbraco.Tests.TestHelpers;

namespace Umbraco.Tests.Configurations.DashboardSettings
{
    [TestFixture]
    public class DashboardSettingsTests
    {
        [SetUp]
        public void Init()
        {
            var config = new FileInfo(TestHelper.MapPathForTest(&quot;~/Configurations/DashboardSettings/web.config&quot;));
            
            var fileMap = new ExeConfigurationFileMap() { ExeConfigFilename = config.FullName };
            var configuration = ConfigurationManager.OpenMappedExeConfiguration(fileMap, ConfigurationUserLevel.None);

            SettingsSection = configuration.GetSection(&quot;umbracoConfiguration/dashBoard&quot;) as DashboardSection;

            Assert.IsNotNull(SettingsSection);
        }

        protected IDashboardSection SettingsSection { get; private set; }

        [Test]
        public void Test_Sections()
        {
            Assert.AreEqual(5, SettingsSection.Sections.Count());

            Assert.AreEqual(&quot;StartupSettingsDashboardSection&quot;, SettingsSection.Sections.ElementAt(0).Alias);
            Assert.AreEqual(&quot;StartupDeveloperDashboardSection&quot;, SettingsSection.Sections.ElementAt(1).Alias);
            Assert.AreEqual(&quot;StartupMediaDashboardSection&quot;, SettingsSection.Sections.ElementAt(2).Alias);
            Assert.AreEqual(&quot;StartupDashboardSection&quot;, SettingsSection.Sections.ElementAt(3).Alias);
            Assert.AreEqual(&quot;StartupMemberDashboardSection&quot;, SettingsSection.Sections.ElementAt(4).Alias);
        }

        [Test]
        public void Test_Section_Area()
        {
            Assert.AreEqual(&quot;settings&quot;, SettingsSection.Sections.ElementAt(0).Areas.First());
            Assert.AreEqual(&quot;developer&quot;, SettingsSection.Sections.ElementAt(1).Areas.First());
            Assert.AreEqual(&quot;media&quot;, SettingsSection.Sections.ElementAt(2).Areas.First());
            Assert.AreEqual(&quot;content&quot;, SettingsSection.Sections.ElementAt(3).Areas.First());
            Assert.AreEqual(&quot;default&quot;, SettingsSection.Sections.ElementAt(4).Areas.First());
            Assert.AreEqual(&quot;member&quot;, SettingsSection.Sections.ElementAt(4).Areas.Last());
        }

        [Test]
        public void Test_Section_Access()
        {
            
            Assert.AreEqual(3, SettingsSection.Sections.ElementAt(3).AccessRights.Rules.Count());

            Assert.AreEqual(&quot;translator&quot;, SettingsSection.Sections.ElementAt(3).AccessRights.Rules.ElementAt(0).Value);
            Assert.AreEqual(AccessType.Deny, SettingsSection.Sections.ElementAt(3).AccessRights.Rules.ElementAt(0).Action);
            Assert.AreEqual(&quot;hello&quot;, SettingsSection.Sections.ElementAt(3).AccessRights.Rules.ElementAt(1).Value);
            Assert.AreEqual(AccessType.Grant, SettingsSection.Sections.ElementAt(3).AccessRights.Rules.ElementAt(1).Action);
            Assert.AreEqual(&quot;world&quot;, SettingsSection.Sections.ElementAt(3).AccessRights.Rules.ElementAt(2).Value);
            Assert.AreEqual(AccessType.GrantBySection, SettingsSection.Sections.ElementAt(3).AccessRights.Rules.ElementAt(2).Action);
        }

        [Test]
        public void Test_Section_Tabs()
        {
            Assert.AreEqual(1, SettingsSection.Sections.ElementAt(0).Tabs.Count());
            Assert.AreEqual(2, SettingsSection.Sections.ElementAt(1).Tabs.Count());
            Assert.AreEqual(3, SettingsSection.Sections.ElementAt(3).Tabs.Count());

        }

        [Test]
        public void Test_Tab()
        {
            Assert.AreEqual(&quot;Get Started&quot;, SettingsSection.Sections.ElementAt(0).Tabs.ElementAt(0).Caption);
            Assert.AreEqual(2, SettingsSection.Sections.ElementAt(0).Tabs.ElementAt(0).Controls.Count());
        }

        [Test]
        public void Test_Tab_Access()
        {
            Assert.AreEqual(1, SettingsSection.Sections.ElementAt(2).Tabs.ElementAt(1).AccessRights.Rules.Count());
            Assert.AreEqual(AccessType.Grant, SettingsSection.Sections.ElementAt(2).Tabs.ElementAt(1).AccessRights.Rules.ElementAt(0).Action);
            Assert.AreEqual(&quot;admin&quot;, SettingsSection.Sections.ElementAt(2).Tabs.ElementAt(1).AccessRights.Rules.ElementAt(0).Value);
        }

        [Test]
        public void Test_Control()
        {
            Assert.AreEqual(true, SettingsSection.Sections.ElementAt(0).Tabs.ElementAt(0).Controls.ElementAt(0).ShowOnce);
            Assert.AreEqual(true, SettingsSection.Sections.ElementAt(0).Tabs.ElementAt(0).Controls.ElementAt(0).AddPanel);
            Assert.AreEqual(&quot;hello&quot;, SettingsSection.Sections.ElementAt(0).Tabs.ElementAt(0).Controls.ElementAt(0).PanelCaption);
            Assert.AreEqual(&quot;views/dashboard/settings/settingsdashboardintro.html&quot;, 
                SettingsSection.Sections.ElementAt(0).Tabs.ElementAt(0).Controls.ElementAt(0).ControlPath);

            Assert.AreEqual(false, SettingsSection.Sections.ElementAt(0).Tabs.ElementAt(0).Controls.ElementAt(1).ShowOnce);
            Assert.AreEqual(false, SettingsSection.Sections.ElementAt(0).Tabs.ElementAt(0).Controls.ElementAt(1).AddPanel);
            Assert.AreEqual(&quot;&quot;, SettingsSection.Sections.ElementAt(0).Tabs.ElementAt(0).Controls.ElementAt(1).PanelCaption);
            Assert.AreEqual(&quot;views/dashboard/settings/settingsdashboardvideos.html&quot;,
                SettingsSection.Sections.ElementAt(0).Tabs.ElementAt(0).Controls.ElementAt(1).ControlPath);
        }

        [Test]
        public void Test_Control_Access()
        {
            Assert.AreEqual(2, SettingsSection.Sections.ElementAt(3).Tabs.ElementAt(0).Controls.ElementAt(1).AccessRights.Rules.Count());
            Assert.AreEqual(AccessType.Deny, SettingsSection.Sections.ElementAt(3).Tabs.ElementAt(0).Controls.ElementAt(1).AccessRights.Rules.ElementAt(0).Action);
            Assert.AreEqual(&quot;editor&quot;, SettingsSection.Sections.ElementAt(3).Tabs.ElementAt(0).Controls.ElementAt(1).AccessRights.Rules.ElementAt(0).Value);
            Assert.AreEqual(AccessType.Deny, SettingsSection.Sections.ElementAt(3).Tabs.ElementAt(0).Controls.ElementAt(1).AccessRights.Rules.ElementAt(1).Action);
            Assert.AreEqual(&quot;writer&quot;, SettingsSection.Sections.ElementAt(3).Tabs.ElementAt(0).Controls.ElementAt(1).AccessRights.Rules.ElementAt(1).Value);
        }
    }
}
    </pre>
    <script type="text/javascript">
      highlightRanges([[16,9,16,10,1],[17,13,17,115,1],[19,13,19,97,1],[20,13,20,119,1],[22,13,22,110,1],[24,13,24,47,1],[25,9,25,10,1],[27,55,27,59,1],[27,60,27,72,1],[31,9,31,10,1],[32,13,32,66,1],[34,13,34,109,1],[35,13,35,110,1],[36,13,36,106,1],[37,13,37,101,1],[38,13,38,107,1],[39,9,39,10,1],[43,9,43,10,1],[44,13,44,94,1],[45,13,45,95,1],[46,13,46,91,1],[47,13,47,93,1],[48,13,48,93,1],[49,13,49,91,1],[50,9,50,10,1],[54,9,54,10,1],[56,13,56,98,1],[58,13,58,120,1],[59,13,59,124,1],[60,13,60,115,1],[61,13,61,125,1],[62,13,62,115,1],[63,13,63,134,1],[64,9,64,10,1],[68,9,68,10,1],[69,13,69,84,1],[70,13,70,84,1],[71,13,71,84,1],[73,9,73,10,1],[77,9,77,10,1],[78,13,78,109,1],[79,13,79,106,1],[80,9,80,10,1],[84,9,84,10,1],[85,13,85,116,1],[86,13,86,143,1],[87,13,87,133,1],[88,9,88,10,1],[92,9,92,10,1],[93,13,93,123,1],[94,13,94,123,1],[95,13,95,130,1],[96,13,97,108,1],[99,13,99,124,1],[100,13,100,124,1],[101,13,101,125,1],[102,13,103,108,1],[104,9,104,10,1],[108,9,108,10,1],[109,13,109,138,1],[110,13,110,164,1],[111,13,111,156,1],[112,13,112,164,1],[113,13,113,156,1],[114,9,114,10,1]]);
    </script>
  </body>
</html>