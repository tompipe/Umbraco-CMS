<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Tom Pipe\Documents\Hexadigital\Code\Umbraco\Umbraco-CMS\src\Umbraco.Web\umbraco.presentation\umbraco\translation\preview.aspx.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using System.Data;
using System.Configuration;
using System.Collections;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Web.UI.HtmlControls;
using umbraco.BusinessLogic;
using umbraco.cms.businesslogic.task;
using umbraco.cms.businesslogic.web;
using umbraco.cms.businesslogic.relation;

namespace umbraco.presentation.translation
{
    public partial class preview : BasePages.UmbracoEnsuredPage
    {
        public string originalUrl = &quot;&quot;;
        public string translatedUrl = &quot;&quot;;

        public preview()
        {
            CurrentApp = DefaultApps.translation.ToString();
        }

        protected void Page_Load(object sender, EventArgs e)
        {
            
            var taskId = int.Parse(helper.Request(&quot;id&quot;));

            var t = new Task(taskId);
            var translated = new Document(t.Node.Id);

            translatedUrl = string.Format(&quot;../dialogs/preview.aspx?id={0}&quot;, translated.Id.ToString());

            var orgRel = Relation.GetRelations(t.Node.Id, RelationType.GetByAlias(&quot;relateDocumentOnCopy&quot;));
            if (orgRel.Length &gt; 0)
            {
                var original = new Document(orgRel[0].Parent.Id);
                originalUrl = String.Format(&quot;../dialogs/preview.aspx?id={0}&quot;, original.Id.ToString());
            }
            else
            {
                Response.Redirect(translatedUrl);
            }


        }
    }
}

    </pre>
    <script type="text/javascript">
      highlightRanges([[20,9,20,40,0],[21,9,21,42,0],[23,9,23,25,0],[24,9,24,10,0],[25,13,25,61,0],[26,9,26,10,0],[29,9,29,10,0],[31,13,31,58,0],[33,13,33,38,0],[34,13,34,54,0],[36,13,36,103,0],[38,13,38,108,0],[39,13,39,35,0],[40,13,40,14,0],[41,17,41,66,0],[42,17,42,103,0],[43,13,43,14,0],[45,13,45,14,0],[46,17,46,50,0],[47,13,47,14,0],[50,9,50,10,0]]);
    </script>
  </body>
</html>