<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Tom Pipe\Documents\Hexadigital\Code\Umbraco\Umbraco-CMS\src\Umbraco.Web\umbraco.presentation\umbraco\Trees\loadXslt.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using System.Collections;
using System.Collections.Generic;
using System.Data;
using System.IO;
using System.Text;
using System.Web;
using System.Xml;
using System.Configuration;
using umbraco.BasePages;
using umbraco.BusinessLogic;
using umbraco.businesslogic;
using umbraco.cms.businesslogic;
using umbraco.cms.businesslogic.cache;
using umbraco.cms.businesslogic.contentitem;
using umbraco.cms.businesslogic.datatype;
using umbraco.cms.businesslogic.language;
using umbraco.cms.businesslogic.media;
using umbraco.cms.businesslogic.member;
using umbraco.cms.businesslogic.property;
using umbraco.cms.businesslogic.web;
using umbraco.interfaces;
using umbraco.DataLayer;
using umbraco.cms.presentation.Trees;
using umbraco.BusinessLogic.Utils;
using umbraco.BusinessLogic.Actions;
using Umbraco.Core.IO;
using Umbraco.Core;

namespace umbraco
{
	/// &lt;summary&gt;
	/// Handles loading of the xslt files into the application tree
	/// &lt;/summary&gt;
    [Tree(Constants.Applications.Developer, &quot;xslt&quot;, &quot;XSLT Files&quot;, sortOrder: 5)]
    public class loadXslt : FileSystemTree
	{

        public loadXslt(string application) : base(application) { }

        protected override void CreateRootNode(ref XmlTreeNode rootNode)
        {   
			rootNode.NodeType = &quot;init&quot; + TreeAlias;
			rootNode.NodeID = &quot;init&quot;;
        }

		/// &lt;summary&gt;
		/// Renders the Javascript
		/// &lt;/summary&gt;
		/// &lt;param name=&quot;Javascript&quot;&gt;The javascript.&lt;/param&gt;
        public override void RenderJS(ref StringBuilder Javascript)
        {
            Javascript.Append(
                @&quot;
function openXslt(id) {
	UmbClientMgr.contentFrame(&#39;developer/xslt/editXslt.aspx?file=&#39; + id);
}
&quot;);
        }
        
        protected override string FilePath
        {
            get { return SystemDirectories.Xslt + &quot;/&quot;; }
        }

        protected override string FileSearchPattern
        {
            get { return &quot;*.xslt&quot;; }
        }

        protected override void OnRenderFileNode(ref XmlTreeNode xNode)
        {
            xNode.Action = xNode.Action.Replace(&quot;openFile&quot;, &quot;openXslt&quot;);
            xNode.Icon = &quot;icon-code&quot;;
            xNode.OpenIcon = &quot;icon-code&quot;;

            xNode.Text = xNode.Text.StripFileExtension();
        }

        protected override void OnRenderFolderNode(ref XmlTreeNode xNode)
        {
            xNode.Menu = new List&lt;IAction&gt;(new IAction[] { ActionDelete.Instance, ContextMenuSeperator.Instance, ActionRefresh.Instance });
            xNode.NodeType = &quot;xsltFolder&quot;;
        }
    }
    
}

    </pre>
    <script type="text/javascript">
      highlightRanges([[39,47,39,64,0],[39,65,39,66,0],[39,67,39,68,0],[42,9,42,10,0],[43,4,43,43,0],[44,4,44,29,0],[45,9,45,10,0],[52,9,52,10,0],[53,13,58,4,0],[59,9,59,10,0],[63,17,63,18,0],[63,19,63,55,0],[63,56,63,57,0],[68,17,68,18,0],[68,19,68,35,0],[68,36,68,37,0],[72,9,72,10,0],[73,13,73,73,0],[74,13,74,38,0],[75,13,75,42,0],[77,13,77,58,0],[78,9,78,10,0],[81,9,81,10,0],[82,13,82,140,0],[83,13,83,43,0],[84,9,84,10,0]]);
    </script>
  </body>
</html>