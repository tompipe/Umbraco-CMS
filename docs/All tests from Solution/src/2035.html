<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Tom Pipe\Documents\Hexadigital\Code\Umbraco\Umbraco-CMS\src\Umbraco.Core\Models\Membership\MembershipUserExtensions.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using System.Web.Security;
using Umbraco.Core.Security;
using Umbraco.Core.Services;

namespace Umbraco.Core.Models.Membership
{
    internal static class MembershipUserExtensions
    {
        internal static UmbracoMembershipMember AsConcreteMembershipUser(this IMembershipUser member, string providerName, bool providerKeyAsGuid = false)
        {
            var membershipMember = new UmbracoMembershipMember(member, providerName, providerKeyAsGuid);
            return membershipMember;
        }

        internal static IMembershipUser AsIMember(this UmbracoMembershipMember membershipMember)
        {
            var member = membershipMember;
            if (member != null)
            {
                return member.Member;
            }

            throw new NotImplementedException();
        }

        private static MembershipScenario? _scenario = null;
        /// &lt;summary&gt;
        /// Returns the currently configured membership scenario for members in umbraco
        /// &lt;/summary&gt;
        /// &lt;value&gt;&lt;/value&gt;
        internal static MembershipScenario GetMembershipScenario(this IMemberService memberService)
        {
            if (_scenario.HasValue == false)
            {
                var provider = MembershipProviderExtensions.GetMembersMembershipProvider();
                if (provider.IsUmbracoMembershipProvider())
                {
                    return MembershipScenario.NativeUmbraco;
                }
                var memberType = ApplicationContext.Current.Services.MemberTypeService.Get(Constants.Conventions.MemberTypes.DefaultAlias);
                return memberType != null
                           ? MembershipScenario.CustomProviderWithUmbracoLink
                           : MembershipScenario.StandaloneCustomProvider;
            }
            return _scenario.Value;
        }
    }
}
    </pre>
    <script type="text/javascript">
      highlightRanges([[11,9,11,10,1],[12,13,12,105,1],[13,13,13,37,1],[14,9,14,10,1],[17,9,17,10,0],[18,13,18,43,0],[19,13,19,32,0],[20,13,20,14,0],[21,17,21,38,0],[24,13,24,49,0],[25,9,25,10,0],[27,9,27,61,1],[33,9,33,10,0],[34,13,34,45,0],[35,13,35,14,0],[36,17,36,92,0],[37,17,37,60,0],[38,17,38,18,0],[39,21,39,61,0],[41,17,41,140,0],[42,17,44,74,0],[46,13,46,36,0],[47,9,47,10,0]]);
    </script>
  </body>
</html>