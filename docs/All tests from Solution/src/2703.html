<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Tom Pipe\Documents\Hexadigital\Code\Umbraco\Umbraco-CMS\src\umbraco.editorControls\MultipleTextstring\MultipleTextstringPrevalueEditor.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using System.Web.UI;
using System.Web.UI.WebControls;
using umbraco.cms.businesslogic.datatype;

namespace umbraco.editorControls.MultipleTextstring
{
    /// &lt;summary&gt;
    /// The PreValue Editor for the Multiple Textstring data-type.
    /// &lt;/summary&gt;
    [Obsolete(&quot;IDataType and all other references to the legacy property editors are no longer used this will be removed from the codebase in future versions&quot;)]
    public class MultipleTextstringPrevalueEditor : AbstractJsonPrevalueEditor
    {
        /// &lt;summary&gt;
        /// The TextBox control for the maximum value of the control.
        /// &lt;/summary&gt;
        private TextBox TextBoxMaximum;

        /// &lt;summary&gt;
        /// The TextBox control for the minimum value of the control.
        /// &lt;/summary&gt;
        private TextBox TextBoxMinimum;

        /// &lt;summary&gt;
        /// Initializes a new instance of the &lt;see cref=&quot;MultipleTextstringPrevalueEditor&quot;/&gt; class.
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;dataType&quot;&gt;Type of the data.&lt;/param&gt;
        public MultipleTextstringPrevalueEditor(umbraco.cms.businesslogic.datatype.BaseDataType dataType)
            : base(dataType, umbraco.cms.businesslogic.datatype.DBTypes.Ntext)
        {
        }

        /// &lt;summary&gt;
        /// Saves this instance.
        /// &lt;/summary&gt;
        public override void Save()
        {
            // set the options
            var options = new MultipleTextstringOptions(true);

            // parse the maximum
            int maximum;
            if (int.TryParse(this.TextBoxMaximum.Text, out maximum))
            {
                if (maximum == 0)
                {
                    maximum = -1;
                }

                options.Maximum = maximum;
            }

            // parse the minimum
            int minimum;
            if (int.TryParse(this.TextBoxMinimum.Text, out minimum))
            {
                if (minimum == 0)
                {
                    minimum = -1;
                }

                options.Minimum = minimum;
            }

            // save the options as JSON
            this.SaveAsJson(options);
        }

        /// &lt;summary&gt;
        /// Called by the ASP.NET page framework to notify server controls that use composition-based implementation to create any child controls they contain in preparation for posting back or rendering.
        /// &lt;/summary&gt;
        protected override void CreateChildControls()
        {
            base.CreateChildControls();

            // set-up child controls
            this.TextBoxMaximum = new TextBox() { ID = &quot;Maximum&quot;, CssClass = &quot;guiInputText&quot; };
            this.TextBoxMinimum = new TextBox() { ID = &quot;Minimum&quot;, CssClass = &quot;guiInputText&quot; };

            // add the child controls
            this.Controls.AddPrevalueControls(this.TextBoxMaximum, this.TextBoxMinimum);
        }

        /// &lt;summary&gt;
        /// Raises the &lt;see cref=&quot;E:System.Web.UI.Control.Load&quot;/&gt; event.
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;e&quot;&gt;The &lt;see cref=&quot;T:System.EventArgs&quot;/&gt; object that contains the event data.&lt;/param&gt;
        protected override void OnLoad(EventArgs e)
        {
            base.OnLoad(e);

            // get PreValues, load them into the controls.
            var options = this.GetPreValueOptions&lt;MultipleTextstringOptions&gt;();

            // no options? use the default ones.
            if (options == null)
            {
                options = new MultipleTextstringOptions(true);
            }

            // set the values
            this.TextBoxMaximum.Text = options.Maximum.ToString();
            this.TextBoxMinimum.Text = options.Minimum.ToString();
        }

        /// &lt;summary&gt;
        /// Renders the contents of the control to the specified writer. This method is used primarily by control developers.
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;writer&quot;&gt;A &lt;see cref=&quot;T:System.Web.UI.HtmlTextWriter&quot;/&gt; that represents the output stream to render HTML content on the client.&lt;/param&gt;
        protected override void RenderContents(HtmlTextWriter writer)
        {
            // add property fields
            writer.AddPrevalueRow(&quot;Minimum:&quot;, &quot;Minimum number of rows to display.&quot;, this.TextBoxMinimum);
            writer.AddPrevalueRow(&quot;Maximum:&quot;, &quot;Maximum number of rows to display.&quot;, this.TextBoxMaximum);
        }
    }
}

    </pre>
    <script type="text/javascript">
      highlightRanges([[29,15,29,79,0],[30,9,30,10,0],[31,9,31,10,0],[37,9,37,10,0],[39,13,39,63,0],[43,13,43,69,0],[44,13,44,14,0],[45,17,45,34,0],[46,17,46,18,0],[47,21,47,34,0],[48,17,48,18,0],[50,17,50,43,0],[51,13,51,14,0],[55,13,55,69,0],[56,13,56,14,0],[57,17,57,34,0],[58,17,58,18,0],[59,21,59,34,0],[60,17,60,18,0],[62,17,62,43,0],[63,13,63,14,0],[66,13,66,38,0],[67,9,67,10,0],[73,9,73,10,0],[74,13,74,40,0],[77,13,77,95,0],[78,13,78,95,0],[81,13,81,89,0],[82,9,82,10,0],[89,9,89,10,0],[90,13,90,28,0],[93,13,93,80,0],[96,13,96,33,0],[97,13,97,14,0],[98,17,98,63,0],[99,13,99,14,0],[102,13,102,67,0],[103,13,103,67,0],[104,9,104,10,0],[111,9,111,10,0],[113,13,113,106,0],[114,13,114,106,0],[115,9,115,10,0]]);
    </script>
  </body>
</html>