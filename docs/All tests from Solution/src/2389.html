<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Tom Pipe\Documents\Hexadigital\Code\Umbraco\Umbraco-CMS\src\umbraco.cms\businesslogic\template\Template.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using System.Linq;
using System.Collections;
using System.Xml;
using Umbraco.Core;
using Umbraco.Core.Cache;
using Umbraco.Core.Configuration;
using Umbraco.Core.IO;
using Umbraco.Core.Logging;
using Umbraco.Core.Models;
using Umbraco.Core.Services;
using Umbraco.Core.Strings;
using umbraco.DataLayer;
using System.Text.RegularExpressions;
using System.IO;
using System.Collections.Generic;
using umbraco.cms.businesslogic.cache;
using umbraco.BusinessLogic;
using umbraco.cms.businesslogic.web;

namespace umbraco.cms.businesslogic.template
{
    /// &lt;summary&gt;
    /// Summary description for Template.
    /// &lt;/summary&gt;
    [Obsolete(&quot;Obsolete, Use IFileService and ITemplate to work with templates instead&quot;)]
    public class Template : CMSNode
    {
        
        #region Private members

        private readonly ViewHelper _viewHelper = new ViewHelper(new PhysicalFileSystem(SystemDirectories.MvcViews));
        private readonly MasterPageHelper _masterPageHelper = new MasterPageHelper(new PhysicalFileSystem(SystemDirectories.Masterpages));
        internal ITemplate TemplateEntity;        
        private int? _mastertemplate;
        
        #endregion

        #region Static members

        public static readonly string UmbracoMasterTemplate = SystemDirectories.Umbraco + &quot;/masterpages/default.master&quot;;
        private static Hashtable _templateAliases = new Hashtable();      

        #endregion

		[Obsolete(&quot;Use TemplateFilePath instead&quot;)]
        public string MasterPageFile
        {
            get { return TemplateFilePath; }
        }

		/// &lt;summary&gt;
		/// Returns the file path for the current template
		/// &lt;/summary&gt;
	    public string TemplateFilePath
	    {
		    get
		    {
				switch (ApplicationContext.Current.Services.FileService.DetermineTemplateRenderingEngine(TemplateEntity))
				{
					case RenderingEngine.Mvc:
                        return _viewHelper.GetPhysicalFilePath(TemplateEntity);
					case RenderingEngine.WebForms:
                        return _masterPageHelper.GetPhysicalFilePath(TemplateEntity);
					default:
						throw new ArgumentOutOfRangeException();
				}	  
		    }
	    }

        [Obsolete(&quot;This is not used at all, do not use this&quot;)]
        public static Hashtable TemplateAliases
        {
            get { return _templateAliases; }
            set { _templateAliases = value; }
        }

        #region Constructors

        internal Template(ITemplate template)
            : base(template)
        {
            TemplateEntity = template;
        }

        public Template(int id) : base(id) { }

        public Template(Guid id) : base(id) { }

        #endregion

        /// &lt;summary&gt;
        /// Used to persist object changes to the database. In Version3.0 it&#39;s just a stub for future compatibility
        /// &lt;/summary&gt;
        public override void Save()
        {
            SaveEventArgs e = new SaveEventArgs();
            FireBeforeSave(e);

            if (!e.Cancel)
            {
                ApplicationContext.Current.Services.FileService.SaveTemplate(TemplateEntity);
                //base.Save();
                FireAfterSave(e);
            }
        }

        public string GetRawText()
        {
            return TemplateEntity.Name;
            //return base.Text;
        }

        //TODO: This is the name of the template, which can apparenlty be localized using the umbraco dictionary, so we need to cater for this but that
        // shoud really be done as part of mapping logic for models that are being consumed in the UI, not at the business logic layer.
        public override string Text
        {
            get
            {
                var tempText = TemplateEntity.Name;
                //string tempText = base.Text;
                if (!tempText.StartsWith(&quot;#&quot;))
                    return tempText;
                else
                {
                    language.Language lang = language.Language.GetByCultureCode(System.Threading.Thread.CurrentThread.CurrentCulture.Name);
                    if (lang != null)
                    {
                        if (Dictionary.DictionaryItem.hasKey(tempText.Substring(1, tempText.Length - 1)))
                        {
                            Dictionary.DictionaryItem di = new Dictionary.DictionaryItem(tempText.Substring(1, tempText.Length - 1));
                            if (di != null)
                                return di.Value(lang.id);
                        }
                    }

                    return &quot;[&quot; + tempText + &quot;]&quot;;
                }
            }
            set
            {
                FlushCache();
                TemplateEntity.Name = value;
            }
        }

        [Obsolete(&quot;This is not used whatsoever&quot;)]
        public string OutputContentType { get; set; }

        protected override void setupNode()
        {
            TemplateEntity = ApplicationContext.Current.Services.FileService.GetTemplate(Id);
            if (TemplateEntity == null)
            {
                throw new ArgumentException(string.Format(&quot;No node exists with id &#39;{0}&#39;&quot;, Id));
            }
        }
		
        public new string Path
        {
            get
            {
                return TemplateEntity.Path;
            }
            set
            {
                TemplateEntity.Path = value;
            }
        }

        public string Alias
        {
            get { return TemplateEntity.Alias; }
            set { TemplateEntity.Alias = value; }

        }

        public bool HasMasterTemplate
        {
            get { return (_mastertemplate &gt; 0); }
        }


        public override bool HasChildren
        {
            get { return TemplateEntity.IsMasterTemplate; }
            set
            {
                //Do nothing!
            }
        }

        public int MasterTemplate
        {
            get
            {
                if (_mastertemplate.HasValue == false)
                {
                    var master = ApplicationContext.Current.Services.FileService.GetTemplate(TemplateEntity.MasterTemplateAlias);
                    if (master != null)
                    {
                        _mastertemplate = master.Id;
                    }
                    else
                    {
                        _mastertemplate = -1;
                    }
                }
                return _mastertemplate.Value;
            }
            set
            {
                //set to null if it&#39;s zero                
                if (value == 0)
                {
                    TemplateEntity.SetMasterTemplate(null);
                }
                else
                {
                    var found = ApplicationContext.Current.Services.FileService.GetTemplate(value);
                    if (found != null)
                    {
                        TemplateEntity.SetMasterTemplate(found);
                        _mastertemplate = found.Id;
                    }
                }
            }
        }

        public string Design
        {
            get
            {
                return TemplateEntity.Content;
            }
            set
            {
                TemplateEntity.Content = value;
            }
        }

        public XmlNode ToXml(XmlDocument doc)
        {
            var serializer = new EntityXmlSerializer();
            var serialized = serializer.Serialize(TemplateEntity);
            return serialized.GetXmlNode(doc);
        }

        /// &lt;summary&gt;
        /// Removes any references to this templates from child templates, documenttypes and documents
        /// &lt;/summary&gt;
        public void RemoveAllReferences()
        {
            if (HasChildren)
            {
                foreach (var t in GetAllAsList().FindAll(t =&gt; t.MasterTemplate == Id))
                {
                    t.MasterTemplate = 0;
                    t.Save();
                }
            }

            RemoveFromDocumentTypes();

            // remove from documents
            Document.RemoveTemplateFromDocument(this.Id);

            //save it
            Save();
        }

        public void RemoveFromDocumentTypes()
        {
            foreach (DocumentType dt in DocumentType.GetAllAsList().Where(x =&gt; x.allowedTemplates.Select(t =&gt; t.Id).Contains(this.Id)))
            {
                dt.RemoveTemplate(this.Id);
                dt.Save();
            }
        }

        [Obsolete(&quot;This method should have never existed here&quot;)]
        public IEnumerable&lt;DocumentType&gt; GetDocumentTypes()
        {
            return DocumentType.GetAllAsList().Where(x =&gt; x.allowedTemplates.Select(t =&gt; t.Id).Contains(this.Id));
        }

        public static Template MakeNew(string Name, User u, Template master)
        {
            return MakeNew(Name, u, master, null);
        }
        
        private static Template MakeNew(string name, User u, string design)
        {
            return MakeNew(name, u, null, design);
        }

        public static Template MakeNew(string name, User u)
        {
            return MakeNew(name, u, design: null);
        }

        private static Template MakeNew(string name, User u, Template master, string design)
        {
            var foundMaster = master == null ? null : ApplicationContext.Current.Services.FileService.GetTemplate(master.Id);
            var template = ApplicationContext.Current.Services.FileService.CreateTemplateWithIdentity(name, design, foundMaster, u.Id);

            var legacyTemplate = new Template(template);
            var e = new NewEventArgs();
            legacyTemplate.OnNew(e);

            return legacyTemplate;
        }

        public static Template GetByAlias(string Alias)
        {
            return GetByAlias(Alias, false);
        }

        [Obsolete(&quot;this overload is the same as the other one, the useCache has no affect&quot;)]
        public static Template GetByAlias(string Alias, bool useCache)
        {
            var found = ApplicationContext.Current.Services.FileService.GetTemplate(Alias);
            return found == null ? null : new Template(found);
        }

        [Obsolete(&quot;Obsolete, please use GetAllAsList() method instead&quot;, true)]
        public static Template[] getAll()
        {
            return GetAllAsList().ToArray();
        }

        public static List&lt;Template&gt; GetAllAsList()
        {
            return ApplicationContext.Current.Services.FileService.GetTemplates().Select(x =&gt; new Template(x)).ToList();
        }

        public static int GetTemplateIdFromAlias(string alias)
        {
            var found = ApplicationContext.Current.Services.FileService.GetTemplate(alias);
            return found == null ? -1 : found.Id;
        }


        public override void delete()
        {
            // don&#39;t allow template deletion if it has child templates
            if (this.HasChildren)
            {                
                var ex = new InvalidOperationException(&quot;Can&#39;t delete a master template. Remove any bindings from child templates first.&quot;);
				LogHelper.Error&lt;Template&gt;(&quot;Can&#39;t delete a master template. Remove any bindings from child templates first.&quot;, ex);
	            throw ex;
            }

            DeleteEventArgs e = new DeleteEventArgs();
            FireBeforeDelete(e);

            if (!e.Cancel)
            {
                //remove refs from documents
                using (var sqlHelper = Application.SqlHelper)
                    sqlHelper.ExecuteNonQuery(&quot;UPDATE cmsDocument SET templateId = NULL WHERE templateId = &quot; + this.Id);

                
                ApplicationContext.Current.Services.FileService.DeleteTemplate(TemplateEntity.Alias);

                FireAfterDelete(e);
            }
        }

        [Obsolete(&quot;This method, doesnt actually do anything, as the file is created when the design is set&quot;, false)]
        public void _SaveAsMasterPage()
        {

        }

        public string GetMasterContentElement(int masterTemplateId)
        {
            if (masterTemplateId != 0)
            {
                string masterAlias = new Template(masterTemplateId).Alias.Replace(&quot; &quot;, &quot;&quot;);
                return
                    String.Format(&quot;&lt;asp:Content ContentPlaceHolderID=\&quot;{1}ContentPlaceHolder\&quot; runat=\&quot;server\&quot;&gt;&quot;,
                    Alias.Replace(&quot; &quot;, &quot;&quot;), masterAlias);
            }
            else
                return
                    String.Format(&quot;&lt;asp:Content ContentPlaceHolderID=\&quot;ContentPlaceHolderDefault\&quot; runat=\&quot;server\&quot;&gt;&quot;,
                    Alias.Replace(&quot; &quot;, &quot;&quot;));
        }

        public List&lt;string&gt; contentPlaceholderIds()
        {
            return MasterPageHelper.GetContentPlaceholderIds(TemplateEntity).ToList();
        }



        public string ConvertToMasterPageSyntax(string templateDesign)
        {
            string masterPageContent = GetMasterContentElement(MasterTemplate) + Environment.NewLine;

            masterPageContent += templateDesign;

            // Parse the design for getitems
            masterPageContent = EnsureMasterPageSyntax(masterPageContent);

            // append ending asp:content element
            masterPageContent += Environment.NewLine
                + &quot;&lt;/asp:Content&gt;&quot; 
                + Environment.NewLine;

            return masterPageContent;
        }

        public string EnsureMasterPageSyntax(string masterPageContent)
        {
            ReplaceElement(ref masterPageContent, &quot;?UMBRACO_GETITEM&quot;, &quot;umbraco:Item&quot;, true);
            ReplaceElement(ref masterPageContent, &quot;?UMBRACO_GETITEM&quot;, &quot;umbraco:Item&quot;, false);

            // Parse the design for macros
            ReplaceElement(ref masterPageContent, &quot;?UMBRACO_MACRO&quot;, &quot;umbraco:Macro&quot;, true);
            ReplaceElement(ref masterPageContent, &quot;?UMBRACO_MACRO&quot;, &quot;umbraco:Macro&quot;, false);

            // Parse the design for load childs
            masterPageContent = masterPageContent.Replace(&quot;&lt;?UMBRACO_TEMPLATE_LOAD_CHILD/&gt;&quot;, GetAspNetMasterPageContentContainer()).Replace(&quot;&lt;?UMBRACO_TEMPLATE_LOAD_CHILD /&gt;&quot;, GetAspNetMasterPageContentContainer());
            // Parse the design for aspnet forms
            GetAspNetMasterPageForm(ref masterPageContent);
            masterPageContent = masterPageContent.Replace(&quot;&lt;/?ASPNET_FORM&gt;&quot;, &quot;&lt;/form&gt;&quot;);
            // Parse the design for aspnet heads
            masterPageContent = masterPageContent.Replace(&quot;&lt;/ASPNET_HEAD&gt;&quot;, String.Format(&quot;&lt;head id=\&quot;{0}Head\&quot; runat=\&quot;server\&quot;&gt;&quot;, Alias.Replace(&quot; &quot;, &quot;&quot;)));
            masterPageContent = masterPageContent.Replace(&quot;&lt;/?ASPNET_HEAD&gt;&quot;, &quot;&lt;/head&gt;&quot;);
            return masterPageContent;
        }



        public void ImportDesign(string design)
        {
            Design = design; 
        }

        public void SaveMasterPageFile(string masterPageContent)
        {
            //this will trigger the helper and store everything
            this.Design = masterPageContent;
        }        
        
        private void GetAspNetMasterPageForm(ref string design)
        {
            Match formElement = Regex.Match(design, GetElementRegExp(&quot;?ASPNET_FORM&quot;, false), RegexOptions.IgnoreCase | RegexOptions.IgnorePatternWhitespace);
            if (formElement != null &amp;&amp; formElement.Value != &quot;&quot;)
            {
                string formReplace = String.Format(&quot;&lt;form id=\&quot;{0}Form\&quot; runat=\&quot;server\&quot;&gt;&quot;, Alias.Replace(&quot; &quot;, &quot;&quot;));
                if (formElement.Groups.Count == 0)
                {
                    formReplace += &quot;&lt;asp:scriptmanager runat=\&quot;server\&quot;&gt;&lt;/asp:scriptmanager&gt;&quot;;
                }
                design = design.Replace(formElement.Value, formReplace);
            }
        }

        private string GetAspNetMasterPageContentContainer()
        {
            return String.Format(
                &quot;&lt;asp:ContentPlaceHolder ID=\&quot;{0}ContentPlaceHolder\&quot; runat=\&quot;server\&quot;&gt;&lt;/asp:ContentPlaceHolder&gt;&quot;,
                Alias.Replace(&quot; &quot;, &quot;&quot;));
        }

        private void ReplaceElement(ref string design, string elementName, string newElementName, bool checkForQuotes)
        {
            MatchCollection m =
                Regex.Matches(design, GetElementRegExp(elementName, checkForQuotes),
                  RegexOptions.IgnoreCase | RegexOptions.IgnorePatternWhitespace);

            foreach (Match match in m)
            {
                GroupCollection groups = match.Groups;

                // generate new element (compensate for a closing trail on single elements (&quot;/&quot;))
                string elementAttributes = groups[1].Value;
                // test for macro alias
                if (elementName == &quot;?UMBRACO_MACRO&quot;)
                {
                    Hashtable tags = helpers.xhtml.ReturnAttributes(match.Value);
                    if (tags[&quot;macroAlias&quot;] != null)
                        elementAttributes = String.Format(&quot; Alias=\&quot;{0}\&quot;&quot;, tags[&quot;macroAlias&quot;].ToString()) + elementAttributes;
                    else if (tags[&quot;macroalias&quot;] != null)
                        elementAttributes = String.Format(&quot; Alias=\&quot;{0}\&quot;&quot;, tags[&quot;macroalias&quot;].ToString()) + elementAttributes;
                }
                string newElement = &quot;&lt;&quot; + newElementName + &quot; runat=\&quot;server\&quot; &quot; + elementAttributes.Trim() + &quot;&gt;&quot;;
                if (elementAttributes.EndsWith(&quot;/&quot;))
                {
                    elementAttributes = elementAttributes.Substring(0, elementAttributes.Length - 1);
                }
                else if (groups[0].Value.StartsWith(&quot;&lt;/&quot;))
                    // It&#39;s a closing element, so generate that instead of a starting element
                    newElement = &quot;&lt;/&quot; + newElementName + &quot;&gt;&quot;;

                if (checkForQuotes)
                {
                    // if it&#39;s inside quotes, we&#39;ll change element attribute quotes to single quotes
                    newElement = newElement.Replace(&quot;\&quot;&quot;, &quot;&#39;&quot;);
                    newElement = String.Format(&quot;\&quot;{0}\&quot;&quot;, newElement);
                }
                design = design.Replace(match.Value, newElement);
            }
        }



        private string GetElementRegExp(string elementName, bool checkForQuotes)
        {
            if (checkForQuotes)
                return String.Format(&quot;\&quot;&lt;[^&gt;\\s]*\\b{0}(\\b[^&gt;]*)&gt;\&quot;&quot;, elementName);
            else
                return String.Format(&quot;&lt;[^&gt;\\s]*\\b{0}(\\b[^&gt;]*)&gt;&quot;, elementName);

        }

        [Obsolete(&quot;Umbraco automatically ensures that template cache is cleared when saving or deleting&quot;)]
        protected virtual void FlushCache()
        {
            //ApplicationContext.Current.ApplicationCache.ClearCacheItem(GetCacheKey(Id));
        }

        public static Template GetTemplate(int id)
        {
            var found = ApplicationContext.Current.Services.FileService.GetTemplate(id);
            return found == null ? null : new Template(found);
        }

        public static Template Import(XmlNode n, User u)
        {
            var element = System.Xml.Linq.XElement.Parse(n.OuterXml);
            var templates = ApplicationContext.Current.Services.PackagingService.ImportTemplates(element, u.Id);
            return new Template(templates.First().Id);
        }
        

        #region Events
        //EVENTS
        /// &lt;summary&gt;
        /// The save event handler
        /// &lt;/summary&gt;
        public delegate void SaveEventHandler(Template sender, SaveEventArgs e);
        /// &lt;summary&gt;
        /// The new event handler
        /// &lt;/summary&gt;
        public delegate void NewEventHandler(Template sender, NewEventArgs e);
        /// &lt;summary&gt;
        /// The delete event handler
        /// &lt;/summary&gt;
        public delegate void DeleteEventHandler(Template sender, DeleteEventArgs e);


        /// &lt;summary&gt;
        /// Occurs when [before save].
        /// &lt;/summary&gt;
        public new static event SaveEventHandler BeforeSave;
        /// &lt;summary&gt;
        /// Raises the &lt;see cref=&quot;E:BeforeSave&quot;/&gt; event.
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;e&quot;&gt;The &lt;see cref=&quot;System.EventArgs&quot;/&gt; instance containing the event data.&lt;/param&gt;
        protected override void FireBeforeSave(SaveEventArgs e)
        {
            if (BeforeSave != null)
                BeforeSave(this, e);
        }

        /// &lt;summary&gt;
        /// Occurs when [after save].
        /// &lt;/summary&gt;
        public new static event SaveEventHandler AfterSave;
        /// &lt;summary&gt;
        /// Raises the &lt;see cref=&quot;E:AfterSave&quot;/&gt; event.
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;e&quot;&gt;The &lt;see cref=&quot;System.EventArgs&quot;/&gt; instance containing the event data.&lt;/param&gt;
        protected override void FireAfterSave(SaveEventArgs e)
        {
            if (AfterSave != null)
                AfterSave(this, e);
        }

        /// &lt;summary&gt;
        /// Occurs when [new].
        /// &lt;/summary&gt;
        public static event NewEventHandler New;
        /// &lt;summary&gt;
        /// Raises the &lt;see cref=&quot;E:New&quot;/&gt; event.
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;e&quot;&gt;The &lt;see cref=&quot;System.EventArgs&quot;/&gt; instance containing the event data.&lt;/param&gt;
        protected virtual void OnNew(NewEventArgs e)
        {
            if (New != null)
                New(this, e);
        }

        /// &lt;summary&gt;
        /// Occurs when [before delete].
        /// &lt;/summary&gt;
        public new static event DeleteEventHandler BeforeDelete;
        /// &lt;summary&gt;
        /// Raises the &lt;see cref=&quot;E:BeforeDelete&quot;/&gt; event.
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;e&quot;&gt;The &lt;see cref=&quot;System.EventArgs&quot;/&gt; instance containing the event data.&lt;/param&gt;
        protected override void FireBeforeDelete(DeleteEventArgs e)
        {
            if (BeforeDelete != null)
                BeforeDelete(this, e);
        }

        /// &lt;summary&gt;
        /// Occurs when [after delete].
        /// &lt;/summary&gt;
        public new static event DeleteEventHandler AfterDelete;
        /// &lt;summary&gt;
        /// Raises the &lt;see cref=&quot;E:AfterDelete&quot;/&gt; event.
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;e&quot;&gt;The &lt;see cref=&quot;System.EventArgs&quot;/&gt; instance containing the event data.&lt;/param&gt;
        protected override void FireAfterDelete(DeleteEventArgs e)
        {
            if (AfterDelete != null)
                AfterDelete(this, e);
        }
        #endregion

    }
}

    </pre>
    <script type="text/javascript">
      highlightRanges([[32,9,32,118,0],[32,9,32,118,0],[32,9,32,118,1],[33,9,33,139,0],[33,9,33,139,0],[33,9,33,139,1],[41,9,41,121,1],[42,9,42,69,1],[49,17,49,18,0],[49,19,49,43,0],[49,44,49,45,0],[58,7,58,8,0],[59,5,59,110,0],[62,25,62,80,0],[64,25,64,86,0],[66,7,66,47,0],[68,7,68,8,0],[74,17,74,18,0],[74,19,74,43,0],[74,44,74,45,0],[75,17,75,18,0],[75,19,75,44,0],[75,45,75,46,0],[81,15,81,29,1],[82,9,82,10,1],[83,13,83,39,1],[84,9,84,10,1],[86,35,86,43,0],[86,44,86,45,0],[86,46,86,47,0],[88,36,88,44,0],[88,45,88,46,0],[88,47,88,48,0],[96,9,96,10,0],[97,13,97,51,0],[98,13,98,31,0],[100,13,100,27,0],[101,13,101,14,0],[102,17,102,94,0],[104,17,104,34,0],[105,13,105,14,0],[106,9,106,10,0],[109,9,109,10,0],[110,13,110,40,0],[112,9,112,10,0],[119,13,119,14,0],[120,17,120,52,0],[122,17,122,47,0],[123,21,123,37,0],[125,17,125,18,0],[126,21,126,140,0],[127,21,127,38,0],[128,21,128,22,0],[129,25,129,106,0],[130,25,130,26,0],[131,29,131,134,0],[132,29,132,44,0],[133,33,133,58,0],[134,25,134,26,0],[135,21,135,22,0],[137,21,137,49,0],[139,13,139,14,0],[141,13,141,14,0],[142,17,142,30,0],[143,17,143,45,0],[144,13,144,14,0],[148,43,148,47,0],[148,48,148,52,0],[151,9,151,10,0],[152,13,152,94,0],[153,13,153,40,0],[154,13,154,14,0],[155,17,155,96,0],[157,9,157,10,0],[162,13,162,14,0],[163,17,163,44,0],[164,13,164,14,0],[166,13,166,14,0],[167,17,167,45,0],[168,13,168,14,0],[173,17,173,18,0],[173,19,173,47,0],[173,48,173,49,0],[174,17,174,18,0],[174,19,174,48,0],[174,49,174,50,0],[180,17,180,18,0],[180,19,180,48,0],[180,49,180,50,0],[186,17,186,18,0],[186,19,186,58,0],[186,59,186,60,0],[188,13,188,14,0],[190,13,190,14,0],[196,13,196,14,0],[197,17,197,55,0],[198,17,198,18,0],[199,21,199,130,0],[200,21,200,40,0],[201,21,201,22,0],[202,25,202,53,0],[203,21,203,22,0],[205,21,205,22,0],[206,25,206,46,0],[207,21,207,22,0],[208,17,208,18,0],[209,17,209,46,0],[210,13,210,14,0],[212,13,212,14,0],[214,17,214,32,0],[215,17,215,18,0],[216,21,216,60,0],[217,17,217,18,0],[219,17,219,18,0],[220,21,220,100,0],[221,21,221,39,0],[222,21,222,22,0],[223,25,223,65,0],[224,25,224,52,0],[225,21,225,22,0],[226,17,226,18,0],[227,13,227,14,0],[233,13,233,14,0],[234,17,234,47,0],[235,13,235,14,0],[237,13,237,14,0],[238,17,238,48,0],[239,13,239,14,0],[243,9,243,10,0],[244,13,244,56,0],[245,13,245,67,0],[246,13,246,47,0],[247,9,247,10,0],[253,9,253,10,0],[254,13,254,29,0],[255,13,255,14,0],[256,17,256,24,0],[256,26,256,31,0],[256,32,256,34,0],[256,35,256,63,0],[256,63,256,85,0],[256,85,256,86,0],[256,35,256,86,0],[257,17,257,18,0],[258,21,258,42,0],[259,21,259,30,0],[260,17,260,18,0],[261,13,261,14,0],[263,13,263,39,0],[266,13,266,58,0],[269,13,269,20,0],[270,9,270,10,0],[273,9,273,10,0],[274,13,274,20,0],[274,22,274,37,0],[274,38,274,40,0],[274,41,274,80,0],[274,80,274,111,0],[274,111,274,115,0],[274,115,274,134,0],[274,80,274,134,0],[274,134,274,135,0],[274,41,274,135,0],[275,13,275,14,0],[276,17,276,44,0],[277,17,277,27,0],[278,13,278,14,0],[279,9,279,10,0],[283,9,283,10,0],[284,13,284,59,0],[284,59,284,90,0],[284,90,284,94,0],[284,94,284,113,0],[284,59,284,113,0],[284,113,284,115,0],[284,13,284,115,0],[285,9,285,10,0],[288,9,288,10,0],[289,13,289,51,0],[290,9,290,10,0],[293,9,293,10,1],[294,13,294,51,1],[295,9,295,10,1],[298,9,298,10,1],[299,13,299,51,1],[300,9,300,10,1],[303,9,303,10,1],[304,13,304,126,1],[305,13,305,136,1],[307,13,307,57,1],[308,13,308,40,1],[309,13,309,37,1],[311,13,311,35,1],[312,9,312,10,1],[315,9,315,10,0],[316,13,316,45,0],[317,9,317,10,0],[321,9,321,10,0],[322,13,322,92,0],[323,13,323,63,0],[324,9,324,10,0],[328,9,328,10,0],[329,13,329,45,0],[330,9,330,10,0],[333,9,333,10,0],[334,13,334,95,0],[334,95,334,110,0],[334,110,334,121,0],[334,13,334,121,0],[335,9,335,10,0],[338,9,338,10,0],[339,13,339,92,0],[340,13,340,50,0],[341,9,341,10,0],[345,9,345,10,0],[347,13,347,34,0],[348,13,348,14,0],[349,17,349,139,0],[350,5,350,118,0],[351,14,351,23,0],[354,13,354,55,0],[355,13,355,33,0],[357,13,357,27,0],[358,13,358,14,0],[360,24,360,61,0],[361,21,361,121,0],[364,17,364,102,0],[366,17,366,36,0],[367,13,367,14,0],[368,9,368,10,0],[372,9,372,10,0],[374,9,374,10,0],[377,9,377,10,0],[378,13,378,39,0],[379,13,379,14,0],[380,17,380,92,0],[381,17,383,58,0],[386,17,388,45,0],[389,9,389,10,0],[392,9,392,10,0],[393,13,393,87,0],[394,9,394,10,0],[399,9,399,10,0],[400,13,400,102,0],[402,13,402,49,0],[405,13,405,75,0],[408,13,410,39,0],[412,13,412,38,0],[413,9,413,10,0],[416,9,416,10,0],[417,13,417,93,0],[418,13,418,94,0],[421,13,421,92,0],[422,13,422,93,0],[425,13,425,216,0],[427,13,427,60,0],[428,13,428,89,0],[430,13,430,158,0],[431,13,431,89,0],[432,13,432,38,0],[433,9,433,10,0],[438,9,438,10,0],[439,13,439,29,0],[440,9,440,10,0],[443,9,443,10,0],[445,13,445,45,0],[446,9,446,10,0],[449,9,449,10,0],[450,13,450,158,0],[451,13,451,64,0],[452,13,452,14,0],[453,17,453,118,0],[454,17,454,51,0],[455,17,455,18,0],[456,21,456,95,0],[457,17,457,18,0],[458,17,458,73,0],[459,13,459,14,0],[460,9,460,10,0],[463,9,463,10,0],[464,13,466,41,0],[467,9,467,10,0],[470,9,470,10,0],[471,13,473,83,0],[475,13,475,20,0],[475,22,475,33,0],[475,34,475,36,0],[475,37,475,38,0],[476,13,476,14,0],[477,17,477,55,0],[480,17,480,60,0],[482,17,482,53,0],[483,17,483,18,0],[484,21,484,82,0],[485,21,485,52,0],[486,25,486,128,0],[487,26,487,57,0],[488,25,488,128,0],[489,17,489,18,0],[490,17,490,114,0],[491,17,491,53,0],[492,17,492,18,0],[493,21,493,102,0],[494,17,494,18,0],[495,22,495,59,0],[497,21,497,62,0],[499,17,499,36,0],[500,17,500,18,0],[502,21,502,64,0],[503,21,503,71,0],[504,17,504,18,0],[505,17,505,66,0],[506,13,506,14,0],[507,9,507,10,0],[512,9,512,10,0],[513,13,513,32,0],[514,17,514,85,0],[516,17,516,81,0],[518,9,518,10,0],[522,9,522,10,0],[524,9,524,10,0],[527,9,527,10,0],[528,13,528,89,0],[529,13,529,63,0],[530,9,530,10,0],[533,9,533,10,0],[534,13,534,70,0],[535,13,535,113,0],[536,13,536,55,0],[537,9,537,10,0],[565,9,565,10,0],[566,13,566,36,0],[567,17,567,37,0],[568,9,568,10,0],[579,9,579,10,0],[580,13,580,35,0],[581,17,581,36,0],[582,9,582,10,0],[593,9,593,10,1],[594,13,594,29,1],[595,17,595,30,0],[596,9,596,10,1],[607,9,607,10,0],[608,13,608,38,0],[609,17,609,39,0],[610,9,610,10,0],[621,9,621,10,0],[622,13,622,37,0],[623,17,623,38,0],[624,9,624,10,0]]);
    </script>
  </body>
</html>